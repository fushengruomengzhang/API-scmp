import{a as W,b as de,w as A}from"./global.CGWlOW6D.js";import{a as me}from"./babel.BjXD5v8r.js";import{g as ue}from"./antlr4.BZgrZd6q.js";import{_ as we}from"./is.xVEhdV3W.js";import{U as j}from"./url.aNNm60oL.js";var J={exports:{}},Te=W,ye=function(e,r){return r===void 0&&(r=!1),function(n,o,i){if(n){e(n);return}if(o.statusCode>=400&&o.statusCode<=599){var s=i;if(r)if(Te.TextDecoder){var a=Ae(o.headers&&o.headers["content-type"]);try{s=new TextDecoder(a).decode(i)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(i));e({cause:s});return}e(null,i)}};function Ae(t){return t===void 0&&(t=""),t.toLowerCase().split(";").reduce(function(e,r){var n=r.split("="),o=n[0],i=n[1];return o.trim()==="charset"?i.trim():e},"utf-8")}var Ee=ye,le=W,be=me,Ce=we;L.httpHandler=Ee;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bj√∂rklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var Se=function(e){var r={};return e&&e.trim().split(`
`).forEach(function(n){var o=n.indexOf(":"),i=n.slice(0,o).trim().toLowerCase(),s=n.slice(o+1).trim();typeof r[i]>"u"?r[i]=s:Array.isArray(r[i])?r[i].push(s):r[i]=[r[i],s]}),r};J.exports=L;J.exports.default=L;L.XMLHttpRequest=le.XMLHttpRequest||Ne;L.XDomainRequest="withCredentials"in new L.XMLHttpRequest?L.XMLHttpRequest:le.XDomainRequest;Le(["get","put","post","patch","head","delete"],function(t){L[t==="delete"?"del":t]=function(e,r,n){return r=ce(e,r,n),r.method=t.toUpperCase(),he(r)}});function Le(t,e){for(var r=0;r<t.length;r++)e(t[r])}function Re(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function ce(t,e,r){var n=t;return Ce(e)?(r=e,typeof t=="string"&&(n={uri:t})):n=be({},e,{uri:t}),n.callback=r,n}function L(t,e,r){return e=ce(t,e,r),he(e)}function he(t){if(typeof t.callback>"u")throw new Error("callback argument missing");var e=!1,r=function(S,B,_){e||(e=!0,t.callback(S,B,_))};function n(){a.readyState===4&&setTimeout(s,0)}function o(){var g=void 0;if(a.response?g=a.response:g=a.responseText||Be(a),w)try{g=JSON.parse(g)}catch{}return g}function i(g){return clearTimeout(m),g instanceof Error||(g=new Error(""+(g||"Unknown XMLHttpRequest Error"))),g.statusCode=0,r(g,x)}function s(){if(!l){var g;clearTimeout(m),t.useXDR&&a.status===void 0?g=200:g=a.status===1223?204:a.status;var S=x,B=null;return g!==0?(S={body:o(),statusCode:g,method:u,headers:{},url:c,rawRequest:a},a.getAllResponseHeaders&&(S.headers=Se(a.getAllResponseHeaders()))):B=new Error("Internal XMLHttpRequest Error"),r(B,S,S.body)}}var a=t.xhr||null;a||(t.cors||t.useXDR?a=new L.XDomainRequest:a=new L.XMLHttpRequest);var f,l,c=a.url=t.uri||t.url,u=a.method=t.method||"GET",v=t.body||t.data,p=a.headers=t.headers||{},d=!!t.sync,w=!1,m,x={body:void 0,headers:{},statusCode:0,method:u,url:c,rawRequest:a};if("json"in t&&t.json!==!1&&(w=!0,p.accept||p.Accept||(p.Accept="application/json"),u!=="GET"&&u!=="HEAD"&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),v=JSON.stringify(t.json===!0?v:t.json))),a.onreadystatechange=n,a.onload=s,a.onerror=i,a.onprogress=function(){},a.onabort=function(){l=!0},a.ontimeout=i,a.open(u,c,!d,t.username,t.password),d||(a.withCredentials=!!t.withCredentials),!d&&t.timeout>0&&(m=setTimeout(function(){if(!l){l=!0,a.abort("timeout");var g=new Error("XMLHttpRequest timeout");g.code="ETIMEDOUT",i(g)}},t.timeout)),a.setRequestHeader)for(f in p)p.hasOwnProperty(f)&&a.setRequestHeader(f,p[f]);else if(t.headers&&!Re(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(a.responseType=t.responseType),"beforeSend"in t&&typeof t.beforeSend=="function"&&t.beforeSend(a),a.send(v||null),a}function Be(t){try{if(t.responseType==="document")return t.responseXML;var e=t.responseXML&&t.responseXML.documentElement.nodeName==="parsererror";if(t.responseType===""&&!e)return t.responseXML}catch{}return null}function Ne(){}var De=J.exports;const Vt=ue(De);var ve={exports:{}},ee=de,Z=Object.create||function(){function t(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function C(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}C.prototype=Z(Error.prototype);C.prototype.constructor=C;C.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function Q(t){function e(n,o,i,s){return(n|0)*3600+(o|0)*60+(i|0)+(s|0)/1e3}var r=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return r?r[3]?e(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?e(r[1],r[2],0,r[4]):e(0,r[1],r[2],r[4]):null}function F(){this.values=Z(null)}F.prototype={set:function(t,e){!this.get(t)&&e!==""&&(this.values[t]=e)},get:function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,r){for(var n=0;n<r.length;++n)if(e===r[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(t,e),!0):!1}};function P(t,e,r,n){var o=n?t.split(n):[t];for(var i in o)if(typeof o[i]=="string"){var s=o[i].split(r);if(s.length===2){var a=s[0].trim(),f=s[1].trim();e(a,f)}}}function _e(t,e,r){var n=t;function o(){var a=Q(t);if(a===null)throw new C(C.Errors.BadTimeStamp,"Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function i(a,f){var l=new F;P(a,function(c,u){switch(c){case"region":for(var v=r.length-1;v>=0;v--)if(r[v].id===u){l.set(c,r[v].region);break}break;case"vertical":l.alt(c,u,["rl","lr"]);break;case"line":var p=u.split(","),d=p[0];l.integer(c,d),l.percent(c,d)&&l.set("snapToLines",!1),l.alt(c,d,["auto"]),p.length===2&&l.alt("lineAlign",p[1],["start","center","end"]);break;case"position":p=u.split(","),l.percent(c,p[0]),p.length===2&&l.alt("positionAlign",p[1],["start","center","end"]);break;case"size":l.percent(c,u);break;case"align":l.alt(c,u,["start","center","end","left","right"]);break}},/:/,/\s/),f.region=l.get("region",null),f.vertical=l.get("vertical","");try{f.line=l.get("line","auto")}catch{}f.lineAlign=l.get("lineAlign","start"),f.snapToLines=l.get("snapToLines",!0),f.size=l.get("size",100);try{f.align=l.get("align","center")}catch{f.align=l.get("align","middle")}try{f.position=l.get("position","auto")}catch{f.position=l.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},f.align)}f.positionAlign=l.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},f.align)}function s(){t=t.replace(/^\s+/,"")}if(s(),e.startTime=o(),s(),t.substr(0,3)!=="-->")throw new C(C.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.substr(3),s(),e.endTime=o(),s(),i(t,e)}var z=ee.createElement&&ee.createElement("textarea"),ke={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},te={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},Me={v:"title",lang:"lang"},re={rt:"ruby"};function xe(t,e){function r(){if(!e)return null;function d(m){return e=e.substr(m.length),m}var w=e.match(/^([^<]*)(<[^>]*>?)?/);return d(w[1]?w[1]:w[2])}function n(d){return z.innerHTML=d,d=z.textContent,z.textContent="",d}function o(d,w){return!re[w.localName]||re[w.localName]===d.localName}function i(d,w){var m=ke[d];if(!m)return null;var x=t.document.createElement(m),g=Me[d];return g&&w&&(x[g]=w.trim()),x}for(var s=t.document.createElement("div"),a=s,f,l=[];(f=r())!==null;){if(f[0]==="<"){if(f[1]==="/"){l.length&&l[l.length-1]===f.substr(2).replace(">","")&&(l.pop(),a=a.parentNode);continue}var c=Q(f.substr(1,f.length-2)),u;if(c){u=t.document.createProcessingInstruction("timestamp",c),a.appendChild(u);continue}var v=f.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v||(u=i(v[1],v[3]),!u)||!o(a,u))continue;if(v[2]){var p=v[2].split(".");p.forEach(function(d){var w=/^bg_/.test(d),m=w?d.slice(3):d;if(te.hasOwnProperty(m)){var x=w?"background-color":"color",g=te[m];u.style[x]=g}}),u.className=p.join(" ")}l.push(v[1]),a.appendChild(u),a=u;continue}a.appendChild(t.document.createTextNode(n(f)))}return s}var ne=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function Oe(t){for(var e=0;e<ne.length;e++){var r=ne[e];if(t>=r[0]&&t<=r[1])return!0}return!1}function Pe(t){var e=[],r="",n;if(!t||!t.childNodes)return"ltr";function o(a,f){for(var l=f.childNodes.length-1;l>=0;l--)a.push(f.childNodes[l])}function i(a){if(!a||!a.length)return null;var f=a.pop(),l=f.textContent||f.innerText;if(l){var c=l.match(/^.*(\n|\r)/);return c?(a.length=0,c[0]):l}if(f.tagName==="ruby")return i(a);if(f.childNodes)return o(a,f),i(a)}for(o(e,t);r=i(e);)for(var s=0;s<r.length;s++)if(n=r.charCodeAt(s),Oe(n))return"rtl";return"ltr"}function Fe(t){if(typeof t.line=="number"&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,r=e.textTrackList,n=0,o=0;o<r.length&&r[o]!==e;o++)r[o].mode==="showing"&&n++;return++n*-1}function U(){}U.prototype.applyStyles=function(t,e){e=e||this.div;for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])};U.prototype.formatStyle=function(t,e){return t===0?0:t+e};function X(t,e,r){U.call(this),this.cue=e,this.cueDiv=xe(t,e.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=t.document.createElement("div"),n={direction:Pe(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var o=0;switch(e.positionAlign){case"start":case"line-left":o=e.position;break;case"center":o=e.position-e.size/2;break;case"end":case"line-right":o=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(o,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(o,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(i){this.applyStyles({top:this.formatStyle(i.top,"px"),bottom:this.formatStyle(i.bottom,"px"),left:this.formatStyle(i.left,"px"),right:this.formatStyle(i.right,"px"),height:this.formatStyle(i.height,"px"),width:this.formatStyle(i.width,"px")})}}X.prototype=Z(U.prototype);X.prototype.constructor=X;function b(t){var e,r,n,o;if(t.div){r=t.div.offsetHeight,n=t.div.offsetWidth,o=t.div.offsetTop;var i=(i=t.div.childNodes)&&(i=i[0])&&i.getClientRects&&i.getClientRects();t=t.div.getBoundingClientRect(),e=i?Math.max(i[0]&&i[0].height||0,t.height/i.length):0}this.left=t.left,this.right=t.right,this.top=t.top||o,this.height=t.height||r,this.bottom=t.bottom||o+(t.height||r),this.width=t.width||n,this.lineHeight=e!==void 0?e:t.lineHeight}b.prototype.move=function(t,e){switch(e=e!==void 0?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};b.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top};b.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1};b.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right};b.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}};b.prototype.intersectPercentage=function(t){var e=Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left)),r=Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top)),n=e*r;return n/(this.height*this.width)};b.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}};b.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,r=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,n=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t;var o={left:t.left,right:t.right,top:t.top||n,height:t.height||e,bottom:t.bottom||n+(t.height||e),width:t.width||r};return o};function Ie(t,e,r,n){function o(m,x){for(var g,S=new b(m),B=1,_=0;_<x.length;_++){for(;m.overlapsOppositeAxis(r,x[_])||m.within(r)&&m.overlapsAny(n);)m.move(x[_]);if(m.within(r))return m;var K=m.intersectPercentage(r);B>K&&(g=new b(m),B=K),m=new b(S)}return g||S}var i=new b(e),s=e.cue,a=Fe(s),f=[];if(s.snapToLines){var l;switch(s.vertical){case"":f=["+y","-y"],l="height";break;case"rl":f=["+x","-x"],l="width";break;case"lr":f=["-x","+x"],l="width";break}var c=i.lineHeight,u=c*Math.round(a),v=r[l]+c,p=f[0];Math.abs(u)>v&&(u=u<0?-1:1,u*=Math.ceil(v/c)*c),a<0&&(u+=s.vertical===""?r.height:r.width,f=f.reverse()),i.move(p,u)}else{var d=i.lineHeight/r.height*100;switch(s.lineAlign){case"center":a-=d/2;break;case"end":a-=d;break}switch(s.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")});break}f=["+y","-x","+x","-y"],i=new b(e)}var w=o(i,f);e.move(w.toCSSCompatValues(r))}function M(){}M.StringDecoder=function(){return{decode:function(t){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}};M.convertCueToDOMTree=function(t,e){return!t||!e?null:xe(t,e)};var Ve=.05,Xe="sans-serif",He="1.5%";M.processCues=function(t,e,r){if(!t||!e||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var n=t.document.createElement("div");n.style.position="absolute",n.style.left="0",n.style.right="0",n.style.top="0",n.style.bottom="0",n.style.margin=He,r.appendChild(n);function o(c){for(var u=0;u<c.length;u++)if(c[u].hasBeenReset||!c[u].displayState)return!0;return!1}if(!o(e)){for(var i=0;i<e.length;i++)n.appendChild(e[i].displayState);return}var s=[],a=b.getSimpleBoxPosition(n),f=Math.round(a.height*Ve*100)/100,l={font:f+"px "+Xe};(function(){for(var c,u,v=0;v<e.length;v++)u=e[v],c=new X(t,u,l),n.appendChild(c.div),Ie(t,c,a,s),u.displayState=c.div,s.push(b.getSimpleBoxPosition(c))})()};M.Parser=function(t,e,r){r||(r=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=r||new TextDecoder("utf8"),this.regionList=[]};M.Parser.prototype={reportOrThrowError:function(t){if(t instanceof C)this.onparsingerror&&this.onparsingerror(t);else throw t},parse:function(t){var e=this;t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));function r(){for(var c=e.buffer,u=0;u<c.length&&c[u]!=="\r"&&c[u]!==`
`;)++u;var v=c.substr(0,u);return c[u]==="\r"&&++u,c[u]===`
`&&++u,e.buffer=c.substr(u),v}function n(c){var u=new F;if(P(c,function(p,d){switch(p){case"id":u.set(p,d);break;case"width":u.percent(p,d);break;case"lines":u.integer(p,d);break;case"regionanchor":case"viewportanchor":var w=d.split(",");if(w.length!==2)break;var m=new F;if(m.percent("x",w[0]),m.percent("y",w[1]),!m.has("x")||!m.has("y"))break;u.set(p+"X",m.get("x")),u.set(p+"Y",m.get("y"));break;case"scroll":u.alt(p,d,["up"]);break}},/=/,/\s/),u.has("id")){var v=new(e.vttjs.VTTRegion||e.window.VTTRegion);v.width=u.get("width",100),v.lines=u.get("lines",3),v.regionAnchorX=u.get("regionanchorX",0),v.regionAnchorY=u.get("regionanchorY",100),v.viewportAnchorX=u.get("viewportanchorX",0),v.viewportAnchorY=u.get("viewportanchorY",100),v.scroll=u.get("scroll",""),e.onregion&&e.onregion(v),e.regionList.push({id:u.get("id"),region:v})}}function o(c){var u=new F;P(c,function(v,p){switch(v){case"MPEGT":u.integer(v+"S",p);break;case"LOCA":u.set(v+"L",Q(p));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:u.get("MPEGTS"),LOCAL:u.get("LOCAL")})}function i(c){c.match(/X-TIMESTAMP-MAP/)?P(c,function(u,v){switch(u){case"X-TIMESTAMP-MAP":o(v);break}},/=/):P(c,function(u,v){switch(u){case"Region":n(v);break}},/:/)}try{var s;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;s=r();var a=s.match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new C(C.Errors.BadSignature);e.state="HEADER"}for(var f=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(f?f=!1:s=r(),e.state){case"HEADER":/:/.test(s)?i(s):s||(e.state="ID");continue;case"NOTE":s||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){e.state="NOTE";break}if(!s)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",s.indexOf("-->")===-1){e.cue.id=s;continue}case"CUE":try{_e(s,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var l=s.indexOf("-->")!==-1;if(!s||l&&(f=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL")throw new C(C.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Ue=M,ze="auto",Ge={"":1,lr:1,rl:1},$e={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function qe(t){if(typeof t!="string")return!1;var e=Ge[t.toLowerCase()];return e?t.toLowerCase():!1}function G(t){if(typeof t!="string")return!1;var e=$e[t.toLowerCase()];return e?t.toLowerCase():!1}function ge(t,e,r){this.hasBeenReset=!1;var n="",o=!1,i=t,s=e,a=r,f=null,l="",c=!0,u="auto",v="start",p="auto",d="auto",w=100,m="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return n},set:function(x){n=""+x}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(x){o=!!x}},startTime:{enumerable:!0,get:function(){return i},set:function(x){if(typeof x!="number")throw new TypeError("Start time must be set to a number.");i=x,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(x){if(typeof x!="number")throw new TypeError("End time must be set to a number.");s=x,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return a},set:function(x){a=""+x,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return f},set:function(x){f=x,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(x){var g=qe(x);if(g===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");l=g,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(x){c=!!x,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return u},set:function(x){if(typeof x!="number"&&x!==ze)throw new SyntaxError("Line: an invalid number or illegal string was specified.");u=x,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return v},set:function(x){var g=G(x);g?(v=g,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(x){if(x<0||x>100)throw new Error("Position must be between 0 and 100.");p=x,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return d},set:function(x){var g=G(x);g?(d=g,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return w},set:function(x){if(x<0||x>100)throw new Error("Size must be between 0 and 100.");w=x,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(x){var g=G(x);if(!g)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");m=g,this.hasBeenReset=!0}}}),this.displayState=void 0}ge.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Ye=ge,We={"":!0,up:!0};function Je(t){if(typeof t!="string")return!1;var e=We[t.toLowerCase()];return e?t.toLowerCase():!1}function O(t){return typeof t=="number"&&t>=0&&t<=100}function Ze(){var t=100,e=3,r=0,n=100,o=0,i=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(a){if(!O(a))throw new Error("Width must be between 0 and 100.");t=a}},lines:{enumerable:!0,get:function(){return e},set:function(a){if(typeof a!="number")throw new TypeError("Lines must be set to a number.");e=a}},regionAnchorY:{enumerable:!0,get:function(){return n},set:function(a){if(!O(a))throw new Error("RegionAnchorX must be between 0 and 100.");n=a}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(a){if(!O(a))throw new Error("RegionAnchorY must be between 0 and 100.");r=a}},viewportAnchorY:{enumerable:!0,get:function(){return i},set:function(a){if(!O(a))throw new Error("ViewportAnchorY must be between 0 and 100.");i=a}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(a){if(!O(a))throw new Error("ViewportAnchorX must be between 0 and 100.");o=a}},scroll:{enumerable:!0,get:function(){return s},set:function(a){var f=Je(a);f===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=f}}})}var Qe=Ze,R=W,D=ve.exports={WebVTT:Ue,VTTCue:Ye,VTTRegion:Qe};R.vttjs=D;R.WebVTT=D.WebVTT;var Ke=D.VTTCue,je=D.VTTRegion,et=R.VTTCue,tt=R.VTTRegion;D.shim=function(){R.VTTCue=Ke,R.VTTRegion=je};D.restore=function(){R.VTTCue=et,R.VTTRegion=tt};R.VTTCue||D.shim();var rt=ve.exports;const Xt=ue(rt);var ie="http://example.com",Ht=function(e,r){if(/^[a-z]+:/i.test(r))return r;/^data:/.test(e)&&(e=A.location&&A.location.href||"");var n=typeof A.URL=="function",o=/^\/\//.test(e),i=!A.location&&!/\/\//i.test(e);if(n?e=new A.URL(e,A.location||ie):/\/\//i.test(e)||(e=j.buildAbsoluteURL(A.location&&A.location.href||"",e)),n){var s=new URL(r,e);return i?s.href.slice(ie.length):o?s.href.slice(s.protocol.length):s.href}return j.buildAbsoluteURL(e,r)},Ut=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(n,o){this.listeners[n]||(this.listeners[n]=[]),this.listeners[n].push(o)},e.off=function(n,o){if(!this.listeners[n])return!1;var i=this.listeners[n].indexOf(o);return this.listeners[n]=this.listeners[n].slice(0),this.listeners[n].splice(i,1),i>-1},e.trigger=function(n){var o=this.listeners[n];if(o)if(arguments.length===2)for(var i=o.length,s=0;s<i;++s)o[s].call(this,arguments[1]);else for(var a=Array.prototype.slice.call(arguments,1),f=o.length,l=0;l<f;++l)o[l].apply(this,a)},e.dispose=function(){this.listeners={}},e.pipe=function(n){this.on("data",function(o){n.push(o)})},t}(),nt=function(e){return A.atob?A.atob(e):Buffer.from(e,"base64").toString("binary")};function zt(t){for(var e=nt(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}var N={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},it=["video","audio","text"],ae=["Video","Audio","Text"],at=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(r,n,o){var i=("00"+Number(n).toString(16)).slice(-2),s=("00"+Number(o).toString(16)).slice(-2);return"avc1."+i+"00"+s})},ot=function(e){e===void 0&&(e="");var r=e.split(","),n=[];return r.forEach(function(o){o=o.trim();var i;it.forEach(function(s){var a=N[s].exec(o.toLowerCase());if(!(!a||a.length<=1)){i=s;var f=o.substring(0,a[1].length),l=o.replace(f,"");n.push({type:f,details:l,mediaType:s})}}),i||n.push({type:o,details:"",mediaType:"unknown"})}),n},Gt=function(e,r){if(!e.mediaGroups.AUDIO||!r)return null;var n=e.mediaGroups.AUDIO[r];if(!n)return null;for(var o in n){var i=n[o];if(i.default&&i.playlists)return ot(i.playlists[0].attributes.CODECS)}return null},st=function(e){return e===void 0&&(e=""),N.audio.test(e.trim().toLowerCase())},ft=function(e){return e===void 0&&(e=""),N.text.test(e.trim().toLowerCase())},ut=function(e){if(!(!e||typeof e!="string")){var r=e.toLowerCase().split(",").map(function(i){return at(i.trim())}),n="video";r.length===1&&st(r[0])?n="audio":r.length===1&&ft(r[0])&&(n="application");var o="mp4";return r.every(function(i){return N.mp4.test(i)})?o="mp4":r.every(function(i){return N.webm.test(i)})?o="webm":r.every(function(i){return N.ogg.test(i)})&&(o="ogg"),n+"/"+o+';codecs="'+e+'"'}},$t=function(e){return e===void 0&&(e=""),A.MediaSource&&A.MediaSource.isTypeSupported&&A.MediaSource.isTypeSupported(ut(e))||!1},qt=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(r){r=r.trim();for(var n=0;n<ae.length;n++){var o=ae[n];if(N["muxer"+o].test(r))return!0}return!1})},Yt="mp4a.40.2",Wt="avc1.4d400d",lt=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,ct=/^application\/dash\+xml/i,Jt=function(e){return lt.test(e)?"hls":ct.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},ht=function(e){return e.toString(2).length},vt=function(e){return Math.ceil(ht(e)/8)},xt=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},gt=function(e){return xt(e)},h=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!gt(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},y=A.BigInt||Number,$=[y("0x1"),y("0x100"),y("0x10000"),y("0x1000000"),y("0x100000000"),y("0x10000000000"),y("0x1000000000000"),y("0x100000000000000"),y("0x10000000000000000")];(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var pt=function(e,r){var n=r===void 0?{}:r,o=n.signed,i=o===void 0?!1:o,s=n.le,a=s===void 0?!1:s;e=h(e);var f=a?"reduce":"reduceRight",l=e[f]?e[f]:Array.prototype[f],c=l.call(e,function(v,p,d){var w=a?d:Math.abs(d+1-e.length);return v+y(p)*$[w]},y(0));if(i){var u=$[e.length]/y(2)-y(1);c=y(c),c>u&&(c-=u,c-=u,c-=y(2))}return Number(c)},dt=function(e,r){var n={},o=n.le,i=o===void 0?!1:o;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=y(e);for(var s=vt(e),a=new Uint8Array(new ArrayBuffer(s)),f=0;f<s;f++){var l=i?f:Math.abs(f+1-a.length);a[l]=Number(e/$[f]&y(255)),e<0&&(a[l]=Math.abs(~a[l]),a[l]-=f===0?1:2)}return a},mt=function(e,r){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;r||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return n},Zt=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r=r.filter(function(a){return a&&(a.byteLength||a.length)&&typeof a!="string"}),r.length<=1)return h(r[0]);var o=r.reduce(function(a,f,l){return a+(f.byteLength||f.length)},0),i=new Uint8Array(o),s=0;return r.forEach(function(a){a=h(a),i.set(a,s),s+=a.byteLength}),i},T=function(e,r,n){var o=n===void 0?{}:n,i=o.offset,s=i===void 0?0:i,a=o.mask,f=a===void 0?[]:a;e=h(e),r=h(r);var l=r.every?r.every:Array.prototype.every;return r.length&&e.length-s>=r.length&&l.call(r,function(c,u){var v=f[u]?f[u]&e[s+u]:e[s+u];return c===v})},Qt=function(e,r,n){r.forEach(function(o){for(var i in e.mediaGroups[o])for(var s in e.mediaGroups[o][i]){var a=e.mediaGroups[o][i][s];n(a,o,i,s)}})},wt=function(e){return A.atob?A.atob(e):Buffer.from(e,"base64").toString("binary")};function Kt(t){for(var e=wt(t),r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r}var Tt=h([73,68,51]),yt=function(e,r){r===void 0&&(r=0),e=h(e);var n=e[r+5],o=e[r+6]<<21|e[r+7]<<14|e[r+8]<<7|e[r+9],i=(n&16)>>4;return i?o+20:o+10},I=function t(e,r){return r===void 0&&(r=0),e=h(e),e.length-r<10||!T(e,Tt,{offset:r})?r:(r+=yt(e,r),t(e,r))},oe=function(e){return typeof e=="string"?mt(e):e},At=function(e){return Array.isArray(e)?e.map(function(r){return oe(r)}):[oe(e)]},Et=function t(e,r,n){n===void 0&&(n=!1),r=At(r),e=h(e);var o=[];if(!r.length)return o;for(var i=0;i<e.length;){var s=(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])>>>0,a=e.subarray(i+4,i+8);if(s===0)break;var f=i+s;if(f>e.length){if(n)break;f=e.length}var l=e.subarray(i+8,f);T(a,r[0])&&(r.length===1?o.push(l):o.push.apply(o,t(l,r.slice(1),n))),i=f}return o},V={EBML:h([26,69,223,163]),DocType:h([66,130]),Segment:h([24,83,128,103]),SegmentInfo:h([21,73,169,102]),Tracks:h([22,84,174,107]),Track:h([174]),TrackNumber:h([215]),DefaultDuration:h([35,227,131]),TrackEntry:h([174]),TrackType:h([131]),FlagDefault:h([136]),CodecID:h([134]),CodecPrivate:h([99,162]),VideoTrack:h([224]),AudioTrack:h([225]),Cluster:h([31,67,182,117]),Timestamp:h([231]),TimestampScale:h([42,215,177]),BlockGroup:h([160]),BlockDuration:h([155]),Block:h([161]),SimpleBlock:h([163])},q=[128,64,32,16,8,4,2,1],bt=function(e){for(var r=1,n=0;n<q.length&&!(e&q[n]);n++)r++;return r},H=function(e,r,n,o){n===void 0&&(n=!0),o===void 0&&(o=!1);var i=bt(e[r]),s=e.subarray(r,r+i);return n&&(s=Array.prototype.slice.call(e,r,r+i),s[0]^=q[i-1]),{length:i,value:pt(s,{signed:o}),bytes:s}},se=function t(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(r){return t(r)}):typeof e=="number"?dt(e):e},Ct=function(e){return Array.isArray(e)?e.map(function(r){return se(r)}):[se(e)]},St=function t(e,r,n){if(n>=r.length)return r.length;var o=H(r,n,!1);if(T(e.bytes,o.bytes))return n;var i=H(r,n+o.length);return t(e,r,n+i.length+i.value+o.length)},fe=function t(e,r){r=Ct(r),e=h(e);var n=[];if(!r.length)return n;for(var o=0;o<e.length;){var i=H(e,o,!1),s=H(e,o+i.length),a=o+i.length+s.length;s.value===127&&(s.value=St(i,e,a),s.value!==e.length&&(s.value-=a));var f=a+s.value>e.length?e.length:a+s.value,l=e.subarray(a,f);T(r[0],i.bytes)&&(r.length===1?n.push(l):n=n.concat(t(l,r.slice(1))));var c=i.length+s.length+l.length;o+=c}return n},Lt=h([0,0,0,1]),Rt=h([0,0,1]),Bt=h([0,0,3]),Nt=function(e){for(var r=[],n=1;n<e.length-2;)T(e.subarray(n,n+3),Bt)&&(r.push(n+2),n++),n++;if(r.length===0)return e;var o=e.length-r.length,i=new Uint8Array(o),s=0;for(n=0;n<o;s++,n++)s===r[0]&&(s++,r.shift()),i[n]=e[s];return i},pe=function(e,r,n,o){e=h(e),n=[].concat(n);for(var i=0,s,a=0;i<e.length&&(a<o||s);){var f=void 0;if(T(e.subarray(i),Lt)?f=4:T(e.subarray(i),Rt)&&(f=3),!f){i++;continue}if(a++,s)return Nt(e.subarray(s,i));var l=void 0;r==="h264"?l=e[i+f]&31:r==="h265"&&(l=e[i+f]>>1&63),n.indexOf(l)!==-1&&(s=i+f),i+=f+(r==="h264"?1:2)}return e.subarray(0,0)},Dt=function(e,r,n){return pe(e,"h264",r,n)},_t=function(e,r,n){return pe(e,"h265",r,n)},E={webm:h([119,101,98,109]),matroska:h([109,97,116,114,111,115,107,97]),flac:h([102,76,97,67]),ogg:h([79,103,103,83]),ac3:h([11,119]),riff:h([82,73,70,70]),avi:h([65,86,73]),wav:h([87,65,86,69]),"3gp":h([102,116,121,112,51,103]),mp4:h([102,116,121,112]),fmp4:h([115,116,121,112]),mov:h([102,116,121,112,113,116]),moov:h([109,111,111,118]),moof:h([109,111,111,102])},k={aac:function(e){var r=I(e);return T(e,[255,16],{offset:r,mask:[255,22]})},mp3:function(e){var r=I(e);return T(e,[255,2],{offset:r,mask:[255,6]})},webm:function(e){var r=fe(e,[V.EBML,V.DocType])[0];return T(r,E.webm)},mkv:function(e){var r=fe(e,[V.EBML,V.DocType])[0];return T(r,E.matroska)},mp4:function(e){if(k["3gp"](e)||k.mov(e))return!1;if(T(e,E.mp4,{offset:4})||T(e,E.fmp4,{offset:4})||T(e,E.moof,{offset:4})||T(e,E.moov,{offset:4}))return!0},mov:function(e){return T(e,E.mov,{offset:4})},"3gp":function(e){return T(e,E["3gp"],{offset:4})},ac3:function(e){var r=I(e);return T(e,E.ac3,{offset:r})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var r=0;r+188<e.length&&r<188;){if(e[r]===71&&e[r+188]===71)return!0;r+=1}return!1},flac:function(e){var r=I(e);return T(e,E.flac,{offset:r})},ogg:function(e){return T(e,E.ogg)},avi:function(e){return T(e,E.riff)&&T(e,E.avi,{offset:8})},wav:function(e){return T(e,E.riff)&&T(e,E.wav,{offset:8})},h264:function(e){return Dt(e,7,3).length},h265:function(e){return _t(e,[32,33],3).length}},Y=Object.keys(k).filter(function(t){return t!=="ts"&&t!=="h264"&&t!=="h265"}).concat(["ts","h264","h265"]);Y.forEach(function(t){var e=k[t];k[t]=function(r){return e(h(r))}});var kt=k,jt=function(e){e=h(e);for(var r=0;r<Y.length;r++){var n=Y[r];if(kt[n](e))return n}return""},er=function(e){return Et(e,["moof"]).length>0};export{Wt as D,Ut as S,Vt as X,Kt as a,Yt as b,$t as c,zt as d,Gt as e,Qt as f,xt as g,jt as h,st as i,ut as j,Zt as k,mt as l,qt as m,I as n,er as o,ot as p,h as q,Ht as r,Jt as s,at as t,Xt as v};
