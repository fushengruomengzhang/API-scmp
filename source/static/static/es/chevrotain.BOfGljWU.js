import{a as Y,p as oe,f as R,m as T,i as X,b as de,s as zn,c as K,e as re,d as b,u as Qt,g as ee,h as Me,v as M,j as te,k as S,l as qe,r as kt,n as Ye,o as fe,q as Ce,t as Zt,w as Tn,x as G,y as O,z as q,A as Ot,B as ae,C as U,D as En,E as v,F as we,G as Xe,H as j,I as $s,J as Ks,K as Ws,L as Hs}from"./lodash.RlSXeECQ.js";function k(n){return n.charCodeAt(0)}function bt(n,e){Array.isArray(n)?n.forEach(function(t){e.push(t)}):e.push(n)}function We(n,e){if(n[e]===!0)throw"duplicate flag "+e;n[e],n[e]=!0}function Pe(n){if(n===void 0)throw Error("Internal Error - Should never get here!");return!0}function Vs(){throw Error("Internal Error - Should never get here!")}function gn(n){return n.type==="Character"}const ft=[];for(let n=k("0");n<=k("9");n++)ft.push(n);const pt=[k("_")].concat(ft);for(let n=k("a");n<=k("z");n++)pt.push(n);for(let n=k("A");n<=k("Z");n++)pt.push(n);const An=[k(" "),k("\f"),k(`
`),k("\r"),k("	"),k("\v"),k("	"),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k(" "),k("\u2028"),k("\u2029"),k(" "),k(" "),k("　"),k("\uFEFF")],zs=/[0-9a-fA-F]/,it=/[0-9]/,js=/[1-9]/;class Ys{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const s={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":We(s,"global");break;case"i":We(s,"ignoreCase");break;case"m":We(s,"multiLine");break;case"u":We(s,"unicode");break;case"y":We(s,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:s,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}Pe(t);const s=this.disjunction();return this.consumeChar(")"),{type:t,value:s,loc:this.loc(e)}}return Vs()}quantifier(e=!1){let t;const s=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:i,atMost:i};break;case",":let r;this.isDigit()?(r=this.integerIncludingZero(),t={atLeast:i,atMost:r}):t={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;Pe(t);break}if(!(e===!0&&t===void 0)&&Pe(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(s),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Pe(e))return e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[k(`
`),k("\r"),k("\u2028"),k("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=ft;break;case"D":e=ft,t=!0;break;case"s":e=An;break;case"S":e=An,t=!0;break;case"w":e=pt;break;case"W":e=pt,t=!0;break}if(Pe(e))return{type:"Set",value:e,complement:t}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=k("\f");break;case"n":e=k(`
`);break;case"r":e=k("\r");break;case"t":e=k("	");break;case"v":e=k("\v");break}if(Pe(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:k("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:k(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:k(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const s=this.classAtom();if(s.type,gn(s)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,gn(i)){if(i.value<s.value)throw Error("Range out of order in character class");e.push({from:s.value,to:i.value})}else bt(s.value,e),e.push(k("-")),bt(i.value,e)}else bt(s.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:k("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const t=this.disjunction();this.consumeChar(")");const s={type:"Group",capturing:e,value:t};return e&&(s.idx=this.groupIdx),s}positiveInteger(){let e=this.popChar();if(js.test(e)===!1)throw Error("Expecting a positive integer");for(;it.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(it.test(e)===!1)throw Error("Expecting an integer");for(;it.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:k(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return it.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let i=0;i<e;i++){const r=this.popChar();if(zs.test(r)===!1)throw Error("Expecting a HexDecimal digits");t+=r}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Jt{visitChildren(e){for(const t in e){const s=e[t];e.hasOwnProperty(t)&&(s.type!==void 0?this.visit(s):Array.isArray(s)&&s.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}function $t(n){console&&console.error&&console.error(`Error: ${n}`)}function jn(n){console&&console.warn&&console.warn(`Warning: ${n}`)}function Yn(n){const e=new Date().getTime(),t=n();return{time:new Date().getTime()-e,value:t}}function Xn(n){function e(){}e.prototype=n;const t=new e;function s(){return typeof t.bar}return s(),s(),n}function Xs(n){return qs(n)?n.LABEL:n.name}function qs(n){return X(n.LABEL)&&n.LABEL!==""}class le{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),R(this.definition,t=>{t.accept(e)})}}class B extends le{constructor(e){super([]),this.idx=1,Y(this,oe(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class Fe extends le{constructor(e){super(e.definition),this.orgText="",Y(this,oe(e,t=>t!==void 0))}}class W extends le{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,Y(this,oe(e,t=>t!==void 0))}}class F extends le{constructor(e){super(e.definition),this.idx=1,Y(this,oe(e,t=>t!==void 0))}}class Q extends le{constructor(e){super(e.definition),this.idx=1,Y(this,oe(e,t=>t!==void 0))}}class Z extends le{constructor(e){super(e.definition),this.idx=1,Y(this,oe(e,t=>t!==void 0))}}class x extends le{constructor(e){super(e.definition),this.idx=1,Y(this,oe(e,t=>t!==void 0))}}class H extends le{constructor(e){super(e.definition),this.idx=1,Y(this,oe(e,t=>t!==void 0))}}class V extends le{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,Y(this,oe(e,t=>t!==void 0))}}class _{constructor(e){this.idx=1,Y(this,oe(e,t=>t!==void 0))}accept(e){e.visit(this)}}function Qs(n){return T(n,ct)}function ct(n){function e(t){return T(t,ct)}if(n instanceof B){const t={type:"NonTerminal",name:n.nonTerminalName,idx:n.idx};return X(n.label)&&(t.label=n.label),t}else{if(n instanceof W)return{type:"Alternative",definition:e(n.definition)};if(n instanceof F)return{type:"Option",idx:n.idx,definition:e(n.definition)};if(n instanceof Q)return{type:"RepetitionMandatory",idx:n.idx,definition:e(n.definition)};if(n instanceof Z)return{type:"RepetitionMandatoryWithSeparator",idx:n.idx,separator:ct(new _({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof H)return{type:"RepetitionWithSeparator",idx:n.idx,separator:ct(new _({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof x)return{type:"Repetition",idx:n.idx,definition:e(n.definition)};if(n instanceof V)return{type:"Alternation",idx:n.idx,definition:e(n.definition)};if(n instanceof _){const t={type:"Terminal",name:n.terminalType.name,label:Xs(n.terminalType),idx:n.idx};X(n.label)&&(t.terminalLabel=n.label);const s=n.terminalType.PATTERN;return n.terminalType.PATTERN&&(t.pattern=de(s)?s.source:s),t}else{if(n instanceof Fe)return{type:"Rule",name:n.name,orgText:n.orgText,definition:e(n.definition)};throw Error("non exhaustive match")}}}class Ue{visit(e){const t=e;switch(t.constructor){case B:return this.visitNonTerminal(t);case W:return this.visitAlternative(t);case F:return this.visitOption(t);case Q:return this.visitRepetitionMandatory(t);case Z:return this.visitRepetitionMandatoryWithSeparator(t);case H:return this.visitRepetitionWithSeparator(t);case x:return this.visitRepetition(t);case V:return this.visitAlternation(t);case _:return this.visitTerminal(t);case Fe:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function Zs(n){return n instanceof W||n instanceof F||n instanceof x||n instanceof Q||n instanceof Z||n instanceof H||n instanceof _||n instanceof Fe}function mt(n,e=[]){return n instanceof F||n instanceof x||n instanceof H?!0:n instanceof V?zn(n.definition,s=>mt(s,e)):n instanceof B&&K(e,n)?!1:n instanceof le?(n instanceof B&&e.push(n),re(n.definition,s=>mt(s,e))):!1}function Js(n){return n instanceof V}function ce(n){if(n instanceof B)return"SUBRULE";if(n instanceof F)return"OPTION";if(n instanceof V)return"OR";if(n instanceof Q)return"AT_LEAST_ONE";if(n instanceof Z)return"AT_LEAST_ONE_SEP";if(n instanceof H)return"MANY_SEP";if(n instanceof x)return"MANY";if(n instanceof _)return"CONSUME";throw Error("non exhaustive match")}class _t{walk(e,t=[]){R(e.definition,(s,i)=>{const r=b(e.definition,i+1);if(s instanceof B)this.walkProdRef(s,r,t);else if(s instanceof _)this.walkTerminal(s,r,t);else if(s instanceof W)this.walkFlat(s,r,t);else if(s instanceof F)this.walkOption(s,r,t);else if(s instanceof Q)this.walkAtLeastOne(s,r,t);else if(s instanceof Z)this.walkAtLeastOneSep(s,r,t);else if(s instanceof H)this.walkManySep(s,r,t);else if(s instanceof x)this.walkMany(s,r,t);else if(s instanceof V)this.walkOr(s,r,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,s){}walkProdRef(e,t,s){}walkFlat(e,t,s){const i=t.concat(s);this.walk(e,i)}walkOption(e,t,s){const i=t.concat(s);this.walk(e,i)}walkAtLeastOne(e,t,s){const i=[new F({definition:e.definition})].concat(t,s);this.walk(e,i)}walkAtLeastOneSep(e,t,s){const i=Rn(e,t,s);this.walk(e,i)}walkMany(e,t,s){const i=[new F({definition:e.definition})].concat(t,s);this.walk(e,i)}walkManySep(e,t,s){const i=Rn(e,t,s);this.walk(e,i)}walkOr(e,t,s){const i=t.concat(s);R(e.definition,r=>{const a=new W({definition:[r]});this.walk(a,i)})}}function Rn(n,e,t){return[new F({definition:[new _({terminalType:n.separator})].concat(n.definition)})].concat(e,t)}function Qe(n){if(n instanceof B)return Qe(n.referencedRule);if(n instanceof _)return ni(n);if(Zs(n))return ei(n);if(Js(n))return ti(n);throw Error("non exhaustive match")}function ei(n){let e=[];const t=n.definition;let s=0,i=t.length>s,r,a=!0;for(;i&&a;)r=t[s],a=mt(r),e=e.concat(Qe(r)),s=s+1,i=t.length>s;return Qt(e)}function ti(n){const e=T(n.definition,t=>Qe(t));return Qt(ee(e))}function ni(n){return[n.terminalType]}const qn="_~IN~_";class si extends _t{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,s){}walkProdRef(e,t,s){const i=ri(e.referencedRule,e.idx)+this.topProd.name,r=t.concat(s),a=new W({definition:r}),o=Qe(a);this.follows[i]=o}}function ii(n){const e={};return R(n,t=>{const s=new si(t).startWalking();Y(e,s)}),e}function ri(n,e){return n.name+e+qn}let lt={};const ai=new Ys;function Lt(n){const e=n.toString();if(lt.hasOwnProperty(e))return lt[e];{const t=ai.pattern(e);return lt[e]=t,t}}function oi(){lt={}}const Qn="Complement Sets are not supported for first char optimization",Tt=`Unable to use "first char" lexer optimizations:
`;function ci(n,e=!1){try{const t=Lt(n);return Kt(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Qn)e&&jn(`${Tt}	Unable to optimize: < ${n.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let s="";e&&(s=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),$t(`${Tt}
	Failed parsing: < ${n.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+s)}}return[]}function Kt(n,e,t){switch(n.type){case"Disjunction":for(let i=0;i<n.value.length;i++)Kt(n.value[i],e,t);break;case"Alternative":const s=n.value;for(let i=0;i<s.length;i++){const r=s[i];switch(r.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=r;switch(a.type){case"Character":rt(a.value,e,t);break;case"Set":if(a.complement===!0)throw Error(Qn);R(a.value,c=>{if(typeof c=="number")rt(c,e,t);else{const l=c;if(t===!0)for(let u=l.from;u<=l.to;u++)rt(u,e,t);else{for(let u=l.from;u<=l.to&&u<ze;u++)rt(u,e,t);if(l.to>=ze){const u=l.from>=ze?l.from:ze,h=l.to,d=Ae(u),p=Ae(h);for(let I=d;I<=p;I++)e[I]=I}}}});break;case"Group":Kt(a.value,e,t);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&Wt(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return M(e)}function rt(n,e,t){const s=Ae(n);e[s]=s,t===!0&&li(n,e)}function li(n,e){const t=String.fromCharCode(n),s=t.toUpperCase();if(s!==t){const i=Ae(s.charCodeAt(0));e[i]=i}else{const i=t.toLowerCase();if(i!==t){const r=Ae(i.charCodeAt(0));e[r]=r}}}function In(n,e){return Me(n.value,t=>{if(typeof t=="number")return K(e,t);{const s=t;return Me(e,i=>s.from<=i&&i<=s.to)!==void 0}})}function Wt(n){const e=n.quantifier;return e&&e.atLeast===0?!0:n.value?te(n.value)?re(n.value,Wt):Wt(n.value):!1}class ui extends Jt{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){K(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?In(e,this.targetCharCodes)===void 0&&(this.found=!0):In(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function en(n,e){if(e instanceof RegExp){const t=Lt(e),s=new ui(n);return s.visit(t),s.found}else return Me(e,t=>K(n,t.charCodeAt(0)))!==void 0}const _e="PATTERN",Ve="defaultMode",at="modes";let Zn=typeof new RegExp("(?:)").sticky=="boolean";function hi(n,e){e=Zt(e,{useSticky:Zn,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(E,f)=>f()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{wi()});let s;t("Reject Lexer.NA",()=>{s=kt(n,E=>E[_e]===ne.NA)});let i=!1,r;t("Transform Patterns",()=>{i=!1,r=T(s,E=>{const f=E[_e];if(de(f)){const A=f.source;return A.length===1&&A!=="^"&&A!=="$"&&A!=="."&&!f.ignoreCase?A:A.length===2&&A[0]==="\\"&&!K(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],A[1])?A[1]:e.useSticky?Nn(f):Sn(f)}else{if(Ce(f))return i=!0,{exec:f};if(typeof f=="object")return i=!0,f;if(typeof f=="string"){if(f.length===1)return f;{const A=f.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),C=new RegExp(A);return e.useSticky?Nn(C):Sn(C)}}else throw Error("non exhaustive match")}})});let a,o,c,l,u;t("misc mapping",()=>{a=T(s,E=>E.tokenTypeIdx),o=T(s,E=>{const f=E.GROUP;if(f!==ne.SKIPPED){if(X(f))return f;if(fe(f))return!1;throw Error("non exhaustive match")}}),c=T(s,E=>{const f=E.LONGER_ALT;if(f)return te(f)?T(f,C=>Tn(s,C)):[Tn(s,f)]}),l=T(s,E=>E.PUSH_MODE),u=T(s,E=>S(E,"POP_MODE"))});let h;t("Line Terminator Handling",()=>{const E=ts(e.lineTerminatorCharacters);h=T(s,f=>!1),e.positionTracking!=="onlyOffset"&&(h=T(s,f=>S(f,"LINE_BREAKS")?!!f.LINE_BREAKS:es(f,E)===!1&&en(E,f.PATTERN)))});let d,p,I,g;t("Misc Mapping #2",()=>{d=T(s,Jn),p=T(r,Pi),I=G(s,(E,f)=>{const A=f.GROUP;return X(A)&&A!==ne.SKIPPED&&(E[A]=[]),E},{}),g=T(r,(E,f)=>({pattern:r[f],longerAlt:c[f],canLineTerminator:h[f],isCustom:d[f],short:p[f],group:o[f],push:l[f],pop:u[f],tokenTypeIdx:a[f],tokenType:s[f]}))});let N=!0,m=[];return e.safeMode||t("First Char Optimization",()=>{m=G(s,(E,f,A)=>{if(typeof f.PATTERN=="string"){const C=f.PATTERN.charCodeAt(0),se=Ae(C);Ft(E,se,g[A])}else if(te(f.START_CHARS_HINT)){let C;R(f.START_CHARS_HINT,se=>{const me=typeof se=="string"?se.charCodeAt(0):se,Ne=Ae(me);C!==Ne&&(C=Ne,Ft(E,Ne,g[A]))})}else if(de(f.PATTERN))if(f.PATTERN.unicode)N=!1,e.ensureOptimizations&&$t(`${Tt}	Unable to analyze < ${f.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const C=ci(f.PATTERN,e.ensureOptimizations);O(C)&&(N=!1),R(C,se=>{Ft(E,se,g[A])})}else e.ensureOptimizations&&$t(`${Tt}	TokenType: <${f.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),N=!1;return E},[])}),{emptyGroups:I,patternIdxToConfig:g,charCodeToPatternIdxToConfig:m,hasCustom:i,canBeOptimized:N}}function di(n,e){let t=[];const s=pi(n);t=t.concat(s.errors);const i=mi(s.valid),r=i.valid;return t=t.concat(i.errors),t=t.concat(fi(r)),t=t.concat(Ni(r)),t=t.concat(ki(r,e)),t=t.concat(Oi(r)),t}function fi(n){let e=[];const t=q(n,s=>de(s[_e]));return e=e.concat(Ei(t)),e=e.concat(Ri(t)),e=e.concat(Ii(t)),e=e.concat(Si(t)),e=e.concat(gi(t)),e}function pi(n){const e=q(n,i=>!S(i,_e)),t=T(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:y.MISSING_PATTERN,tokenTypes:[i]})),s=Ot(n,e);return{errors:t,valid:s}}function mi(n){const e=q(n,i=>{const r=i[_e];return!de(r)&&!Ce(r)&&!S(r,"exec")&&!X(r)}),t=T(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:y.INVALID_PATTERN,tokenTypes:[i]})),s=Ot(n,e);return{errors:t,valid:s}}const Ti=/[^\\][$]/;function Ei(n){class e extends Jt{constructor(){super(...arguments),this.found=!1}visitEndAnchor(r){this.found=!0}}const t=q(n,i=>{const r=i.PATTERN;try{const a=Lt(r),o=new e;return o.visit(a),o.found}catch{return Ti.test(r.source)}});return T(t,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:y.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function gi(n){const e=q(n,s=>s.PATTERN.test(""));return T(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' must not match an empty string",type:y.EMPTY_MATCH_PATTERN,tokenTypes:[s]}))}const Ai=/[^\\[][\^]|^\^/;function Ri(n){class e extends Jt{constructor(){super(...arguments),this.found=!1}visitStartAnchor(r){this.found=!0}}const t=q(n,i=>{const r=i.PATTERN;try{const a=Lt(r),o=new e;return o.visit(a),o.found}catch{return Ai.test(r.source)}});return T(t,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:y.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Ii(n){const e=q(n,s=>{const i=s[_e];return i instanceof RegExp&&(i.multiline||i.global)});return T(e,s=>({message:"Token Type: ->"+s.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:y.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[s]}))}function Si(n){const e=[];let t=T(n,r=>G(n,(a,o)=>(r.PATTERN.source===o.PATTERN.source&&!K(e,o)&&o.PATTERN!==ne.NA&&(e.push(o),a.push(o)),a),[]));t=qe(t);const s=q(t,r=>r.length>1);return T(s,r=>{const a=T(r,c=>c.name);return{message:`The same RegExp pattern ->${ae(r).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:y.DUPLICATE_PATTERNS_FOUND,tokenTypes:r}})}function Ni(n){const e=q(n,s=>{if(!S(s,"GROUP"))return!1;const i=s.GROUP;return i!==ne.SKIPPED&&i!==ne.NA&&!X(i)});return T(e,s=>({message:"Token Type: ->"+s.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:y.INVALID_GROUP_TYPE_FOUND,tokenTypes:[s]}))}function ki(n,e){const t=q(n,i=>i.PUSH_MODE!==void 0&&!K(e,i.PUSH_MODE));return T(t,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:y.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Oi(n){const e=[],t=G(n,(s,i,r)=>{const a=i.PATTERN;return a===ne.NA||(X(a)?s.push({str:a,idx:r,tokenType:i}):de(a)&&Li(a)&&s.push({str:a.source,idx:r,tokenType:i})),s},[]);return R(n,(s,i)=>{R(t,({str:r,idx:a,tokenType:o})=>{if(i<a&&_i(r,s.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${s.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:y.UNREACHABLE_PATTERN,tokenTypes:[s,o]})}})}),e}function _i(n,e){if(de(e)){const t=e.exec(n);return t!==null&&t.index===0}else{if(Ce(e))return e(n,0,[],{});if(S(e,"exec"))return e.exec(n,0,[],{});if(typeof e=="string")return e===n;throw Error("non exhaustive match")}}function Li(n){return Me([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>n.source.indexOf(t)!==-1)===void 0}function Sn(n){const e=n.ignoreCase?"i":"";return new RegExp(`^(?:${n.source})`,e)}function Nn(n){const e=n.ignoreCase?"iy":"y";return new RegExp(`${n.source}`,e)}function Ci(n,e,t){const s=[];return S(n,Ve)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ve+`> property in its definition
`,type:y.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),S(n,at)||s.push({message:"A MultiMode Lexer cannot be initialized without a <"+at+`> property in its definition
`,type:y.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),S(n,at)&&S(n,Ve)&&!S(n.modes,n.defaultMode)&&s.push({message:`A MultiMode Lexer cannot be initialized with a ${Ve}: <${n.defaultMode}>which does not exist
`,type:y.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),S(n,at)&&R(n.modes,(i,r)=>{R(i,(a,o)=>{if(fe(a))s.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${r}> at index: <${o}>
`,type:y.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(S(a,"LONGER_ALT")){const c=te(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];R(c,l=>{!fe(l)&&!K(i,l)&&s.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${r}>
`,type:y.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),s}function xi(n,e,t){const s=[];let i=!1;const r=qe(ee(M(n.modes))),a=kt(r,c=>c[_e]===ne.NA),o=ts(t);return e&&R(a,c=>{const l=es(c,o);if(l!==!1){const h={message:Mi(c,l),type:l.issue,tokenType:c};s.push(h)}else S(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):en(o,c.PATTERN)&&(i=!0)}),e&&!i&&s.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:y.NO_LINE_BREAKS_FLAGS}),s}function yi(n){const e={},t=Ye(n);return R(t,s=>{const i=n[s];if(te(i))e[s]=[];else throw Error("non exhaustive match")}),e}function Jn(n){const e=n.PATTERN;if(de(e))return!1;if(Ce(e))return!0;if(S(e,"exec"))return!0;if(X(e))return!1;throw Error("non exhaustive match")}function Pi(n){return X(n)&&n.length===1?n.charCodeAt(0):!1}const vi={test:function(n){const e=n.length;for(let t=this.lastIndex;t<e;t++){const s=n.charCodeAt(t);if(s===10)return this.lastIndex=t+1,!0;if(s===13)return n.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function es(n,e){if(S(n,"LINE_BREAKS"))return!1;if(de(n.PATTERN)){try{en(e,n.PATTERN)}catch(t){return{issue:y.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if(X(n.PATTERN))return!1;if(Jn(n))return{issue:y.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Mi(n,e){if(e.issue===y.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${n.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===y.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${n.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function ts(n){return T(n,t=>X(t)?t.charCodeAt(0):t)}function Ft(n,e,t){n[e]===void 0?n[e]=[t]:n[e].push(t)}const ze=256;let ut=[];function Ae(n){return n<ze?n:ut[n]}function wi(){if(O(ut)){ut=new Array(65536);for(let n=0;n<65536;n++)ut[n]=n>255?255+~~(n/255):n}}function Ze(n,e){const t=n.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function Et(n,e){return n.tokenTypeIdx===e.tokenTypeIdx}let kn=1;const ns={};function Je(n){const e=bi(n);Fi(e),Di(e),Ui(e),R(e,t=>{t.isParent=t.categoryMatches.length>0})}function bi(n){let e=U(n),t=n,s=!0;for(;s;){t=qe(ee(T(t,r=>r.CATEGORIES)));const i=Ot(t,e);e=e.concat(i),O(i)?s=!1:t=i}return e}function Fi(n){R(n,e=>{is(e)||(ns[kn]=e,e.tokenTypeIdx=kn++),On(e)&&!te(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),On(e)||(e.CATEGORIES=[]),Gi(e)||(e.categoryMatches=[]),Bi(e)||(e.categoryMatchesMap={})})}function Ui(n){R(n,e=>{e.categoryMatches=[],R(e.categoryMatchesMap,(t,s)=>{e.categoryMatches.push(ns[s].tokenTypeIdx)})})}function Di(n){R(n,e=>{ss([],e)})}function ss(n,e){R(n,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),R(e.CATEGORIES,t=>{const s=n.concat(e);K(s,t)||ss(s,t)})}function is(n){return S(n,"tokenTypeIdx")}function On(n){return S(n,"CATEGORIES")}function Gi(n){return S(n,"categoryMatches")}function Bi(n){return S(n,"categoryMatchesMap")}function $i(n){return S(n,"tokenTypeIdx")}const Ki={buildUnableToPopLexerModeMessage(n){return`Unable to pop Lexer Mode after encountering Token ->${n.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(n,e,t,s,i){return`unexpected character: ->${n.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var y;(function(n){n[n.MISSING_PATTERN=0]="MISSING_PATTERN",n[n.INVALID_PATTERN=1]="INVALID_PATTERN",n[n.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",n[n.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",n[n.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",n[n.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",n[n.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",n[n.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",n[n.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",n[n.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",n[n.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",n[n.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",n[n.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",n[n.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",n[n.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",n[n.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",n[n.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",n[n.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(y||(y={}));const je={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Ki,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(je);class ne{constructor(e,t=je){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,r)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:o,value:c}=Yn(r),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,c}else return r()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=Y({},je,t);const s=this.config.traceInitPerf;s===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof s=="number"&&(this.traceInitMaxIdent=s,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,r=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===je.lineTerminatorsPattern)this.config.lineTerminatorsPattern=vi;else if(this.config.lineTerminatorCharacters===je.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),te(e)?i={modes:{defaultMode:U(e)},defaultMode:Ve}:(r=!1,i=U(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Ci(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(xi(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},R(i.modes,(o,c)=>{i.modes[c]=kt(o,l=>fe(l))});const a=Ye(i.modes);if(R(i.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(di(o,a))}),O(this.lexerDefinitionErrors)){Je(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=hi(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=Y({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!O(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=T(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}R(this.lexerDefinitionWarning,o=>{jn(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Zn?(this.chopInput=En,this.match=this.matchWithTest):(this.updateLastIndex=v,this.match=this.matchWithExec),r&&(this.handleModes=v),this.trackStartLines===!1&&(this.computeNewColumn=En),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=v),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=G(this.canModeBeOptimized,(c,l,u)=>(l===!1&&c.push(u),c),[]);if(t.ensureOptimizations&&!O(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{oi()}),this.TRACE_INIT("toFastProperties",()=>{Xn(this)})})}tokenize(e,t=this.defaultMode){if(!O(this.lexerDefinitionErrors)){const i=T(this.lexerDefinitionErrors,r=>r.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let s,i,r,a,o,c,l,u,h,d,p,I,g,N,m;const E=e,f=E.length;let A=0,C=0;const se=this.hasCustom?0:Math.floor(e.length/10),me=new Array(se),Ne=[];let Ge=this.trackStartLines?1:void 0,Te=this.trackStartLines?1:void 0;const Be=yi(this.emptyGroups),Gs=this.trackStartLines,Mt=this.config.lineTerminatorsPattern;let nt=0,Ee=[],$e=[];const st=[],un=[];Object.freeze(un);let Ke;function hn(){return Ee}function dn(D){const J=Ae(D),ye=$e[J];return ye===void 0?un:ye}const Bs=D=>{if(st.length===1&&D.tokenType.PUSH_MODE===void 0){const J=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(D);Ne.push({offset:D.startOffset,line:D.startLine,column:D.startColumn,length:D.image.length,message:J})}else{st.pop();const J=we(st);Ee=this.patternIdxToConfig[J],$e=this.charCodeToPatternIdxToConfig[J],nt=Ee.length;const ye=this.canModeBeOptimized[J]&&this.config.safeMode===!1;$e&&ye?Ke=dn:Ke=hn}};function fn(D){st.push(D),$e=this.charCodeToPatternIdxToConfig[D],Ee=this.patternIdxToConfig[D],nt=Ee.length,nt=Ee.length;const J=this.canModeBeOptimized[D]&&this.config.safeMode===!1;$e&&J?Ke=dn:Ke=hn}fn.call(this,t);let ie;const pn=this.config.recoveryEnabled;for(;A<f;){c=null;const D=E.charCodeAt(A),J=Ke(D),ye=J.length;for(s=0;s<ye;s++){ie=J[s];const z=ie.pattern;l=null;const ue=ie.short;if(ue!==!1?D===ue&&(c=z):ie.isCustom===!0?(m=z.exec(E,A,me,Be),m!==null?(c=m[0],m.payload!==void 0&&(l=m.payload)):c=null):(this.updateLastIndex(z,A),c=this.match(z,e,A)),c!==null){if(o=ie.longerAlt,o!==void 0){const ge=o.length;for(r=0;r<ge;r++){const he=Ee[o[r]],ke=he.pattern;if(u=null,he.isCustom===!0?(m=ke.exec(E,A,me,Be),m!==null?(a=m[0],m.payload!==void 0&&(u=m.payload)):a=null):(this.updateLastIndex(ke,A),a=this.match(ke,e,A)),a&&a.length>c.length){c=a,l=u,ie=he;break}}}break}}if(c!==null){if(h=c.length,d=ie.group,d!==void 0&&(p=ie.tokenTypeIdx,I=this.createTokenInstance(c,A,p,ie.tokenType,Ge,Te,h),this.handlePayload(I,l),d===!1?C=this.addToken(me,C,I):Be[d].push(I)),e=this.chopInput(e,h),A=A+h,Te=this.computeNewColumn(Te,h),Gs===!0&&ie.canLineTerminator===!0){let z=0,ue,ge;Mt.lastIndex=0;do ue=Mt.test(c),ue===!0&&(ge=Mt.lastIndex-1,z++);while(ue===!0);z!==0&&(Ge=Ge+z,Te=h-ge,this.updateTokenEndLineColumnLocation(I,d,ge,z,Ge,Te,h))}this.handleModes(ie,Bs,fn,I)}else{const z=A,ue=Ge,ge=Te;let he=pn===!1;for(;he===!1&&A<f;)for(e=this.chopInput(e,1),A++,i=0;i<nt;i++){const ke=Ee[i],wt=ke.pattern,mn=ke.short;if(mn!==!1?E.charCodeAt(A)===mn&&(he=!0):ke.isCustom===!0?he=wt.exec(E,A,me,Be)!==null:(this.updateLastIndex(wt,A),he=wt.exec(e)!==null),he===!0)break}if(g=A-z,Te=this.computeNewColumn(Te,g),N=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(E,z,g,ue,ge),Ne.push({offset:z,line:ue,column:ge,length:g,message:N}),pn===!1)break}}return this.hasCustom||(me.length=C),{tokens:me,groups:Be,errors:Ne}}handleModes(e,t,s,i){if(e.pop===!0){const r=e.push;t(i),r!==void 0&&s.call(this,r)}else e.push!==void 0&&s.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,s,i,r,a,o){let c,l;t!==void 0&&(c=s===o-1,l=c?-1:0,i===1&&c===!0||(e.endLine=r+l,e.endColumn=a-1+-l))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,s,i){return{image:e,startOffset:t,tokenTypeIdx:s,tokenType:i}}createStartOnlyToken(e,t,s,i,r,a){return{image:e,startOffset:t,startLine:r,startColumn:a,tokenTypeIdx:s,tokenType:i}}createFullToken(e,t,s,i,r,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:r,endLine:r,startColumn:a,endColumn:a+o-1,tokenTypeIdx:s,tokenType:i}}addTokenUsingPush(e,t,s){return e.push(s),t}addTokenUsingMemberAccess(e,t,s){return e[t]=s,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,s){return e.test(t)===!0?t.substring(s,e.lastIndex):null}matchWithExec(e,t){const s=e.exec(t);return s!==null?s[0]:null}}ne.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";ne.NA=/NOT_APPLICABLE/;function ve(n){return rs(n)?n.LABEL:n.name}function rs(n){return X(n.LABEL)&&n.LABEL!==""}const Wi="parent",_n="categories",Ln="label",Cn="group",xn="push_mode",yn="pop_mode",Pn="longer_alt",vn="line_breaks",Mn="start_chars_hint";function as(n){return Hi(n)}function Hi(n){const e=n.pattern,t={};if(t.name=n.name,fe(e)||(t.PATTERN=e),S(n,Wi))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return S(n,_n)&&(t.CATEGORIES=n[_n]),Je([t]),S(n,Ln)&&(t.LABEL=n[Ln]),S(n,Cn)&&(t.GROUP=n[Cn]),S(n,yn)&&(t.POP_MODE=n[yn]),S(n,xn)&&(t.PUSH_MODE=n[xn]),S(n,Pn)&&(t.LONGER_ALT=n[Pn]),S(n,vn)&&(t.LINE_BREAKS=n[vn]),S(n,Mn)&&(t.START_CHARS_HINT=n[Mn]),t}const Le=as({name:"EOF",pattern:ne.NA});Je([Le]);function tn(n,e,t,s,i,r,a,o){return{image:e,startOffset:t,endOffset:s,startLine:i,endLine:r,startColumn:a,endColumn:o,tokenTypeIdx:n.tokenTypeIdx,tokenType:n}}function os(n,e){return Ze(n,e)}const cs={buildMismatchTokenMessage({expected:n,actual:e,previous:t,ruleName:s}){return`Expecting ${rs(n)?`--> ${ve(n)} <--`:`token of type --> ${n.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:n,ruleName:e}){return"Redundant input, expecting EOF but found: "+n.image},buildNoViableAltMessage({expectedPathsPerAlt:n,actual:e,previous:t,customUserDescription:s,ruleName:i}){const r="Expecting: ",o=`
but found: '`+ae(e).image+"'";if(s)return r+s+o;{const c=G(n,(d,p)=>d.concat(p),[]),l=T(c,d=>`[${T(d,p=>ve(p)).join(", ")}]`),h=`one of these possible Token sequences:
${T(l,(d,p)=>`  ${p+1}. ${d}`).join(`
`)}`;return r+h+o}},buildEarlyExitMessage({expectedIterationPaths:n,actual:e,customUserDescription:t,ruleName:s}){const i="Expecting: ",a=`
but found: '`+ae(e).image+"'";if(t)return i+t+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${T(n,l=>`[${T(l,u=>ve(u)).join(",")}]`).join(" ,")}>`;return i+c+a}}};Object.freeze(cs);const Vi={buildRuleNotFoundError(n,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+n.name+"<-"}},Oe={buildDuplicateFoundError(n,e){function t(u){return u instanceof _?u.terminalType.name:u instanceof B?u.nonTerminalName:""}const s=n.name,i=ae(e),r=i.idx,a=ce(i),o=t(i),c=r>0;let l=`->${a}${c?r:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${s}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(n){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${n.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(n){const e=T(n.prefixPath,i=>ve(i)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;return`Ambiguous alternatives: <${n.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(n){const e=T(n.prefixPath,i=>ve(i)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;let s=`Ambiguous Alternatives Detected: <${n.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return s=s+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,s},buildEmptyRepetitionError(n){let e=ce(n.repetition);return n.repetition.idx!==0&&(e+=n.repetition.idx),`The repetition <${e}> within Rule <${n.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(n){return"deprecated"},buildEmptyAlternationError(n){return`Ambiguous empty alternative: <${n.emptyChoiceIdx+1}> in <OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(n){return`An Alternation cannot have more than 256 alternatives:
<OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
 has ${n.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(n){const e=n.topLevelRule.name,t=T(n.leftRecursionPath,r=>r.name),s=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${s}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(n){return"deprecated"},buildDuplicateRuleNameError(n){let e;return n.topLevelRule instanceof Fe?e=n.topLevelRule.name:e=n.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${n.grammarName}<-`}};function zi(n,e){const t=new ji(n,e);return t.resolveRefs(),t.errors}class ji extends Ue{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){R(M(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const s=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:s,type:$.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class Yi extends _t{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=U(this.path.ruleStack).reverse(),this.occurrenceStack=U(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,s){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=t.concat(s);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){O(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Xi extends Yi{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,s){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=t.concat(s),r=new W({definition:i});this.possibleTokTypes=Qe(r),this.found=!0}}}class Ct extends _t{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class qi extends Ct{walkMany(e,t,s){if(e.idx===this.occurrence){const i=ae(t.concat(s));this.result.isEndOfRule=i===void 0,i instanceof _&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,t,s)}}class wn extends Ct{walkManySep(e,t,s){if(e.idx===this.occurrence){const i=ae(t.concat(s));this.result.isEndOfRule=i===void 0,i instanceof _&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,t,s)}}class Qi extends Ct{walkAtLeastOne(e,t,s){if(e.idx===this.occurrence){const i=ae(t.concat(s));this.result.isEndOfRule=i===void 0,i instanceof _&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,t,s)}}class bn extends Ct{walkAtLeastOneSep(e,t,s){if(e.idx===this.occurrence){const i=ae(t.concat(s));this.result.isEndOfRule=i===void 0,i instanceof _&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,t,s)}}function Ht(n,e,t=[]){t=U(t);let s=[],i=0;function r(o){return o.concat(b(n,i+1))}function a(o){const c=Ht(r(o),e,t);return s.concat(c)}for(;t.length<e&&i<n.length;){const o=n[i];if(o instanceof W)return a(o.definition);if(o instanceof B)return a(o.definition);if(o instanceof F)s=a(o.definition);else if(o instanceof Q){const c=o.definition.concat([new x({definition:o.definition})]);return a(c)}else if(o instanceof Z){const c=[new W({definition:o.definition}),new x({definition:[new _({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof H){const c=o.definition.concat([new x({definition:[new _({terminalType:o.separator})].concat(o.definition)})]);s=a(c)}else if(o instanceof x){const c=o.definition.concat([new x({definition:o.definition})]);s=a(c)}else{if(o instanceof V)return R(o.definition,c=>{O(c.definition)===!1&&(s=a(c.definition))}),s;if(o instanceof _)t.push(o.terminalType);else throw Error("non exhaustive match")}i++}return s.push({partialPath:t,suffixDef:b(n,i)}),s}function ls(n,e,t,s){const i="EXIT_NONE_TERMINAL",r=[i],a="EXIT_ALTERNATIVE";let o=!1;const c=e.length,l=c-s-1,u=[],h=[];for(h.push({idx:-1,def:n,ruleStack:[],occurrenceStack:[]});!O(h);){const d=h.pop();if(d===a){o&&we(h).idx<=l&&h.pop();continue}const p=d.def,I=d.idx,g=d.ruleStack,N=d.occurrenceStack;if(O(p))continue;const m=p[0];if(m===i){const E={idx:I,def:b(p),ruleStack:Xe(g),occurrenceStack:Xe(N)};h.push(E)}else if(m instanceof _)if(I<c-1){const E=I+1,f=e[E];if(t(f,m.terminalType)){const A={idx:E,def:b(p),ruleStack:g,occurrenceStack:N};h.push(A)}}else if(I===c-1)u.push({nextTokenType:m.terminalType,nextTokenOccurrence:m.idx,ruleStack:g,occurrenceStack:N}),o=!0;else throw Error("non exhaustive match");else if(m instanceof B){const E=U(g);E.push(m.nonTerminalName);const f=U(N);f.push(m.idx);const A={idx:I,def:m.definition.concat(r,b(p)),ruleStack:E,occurrenceStack:f};h.push(A)}else if(m instanceof F){const E={idx:I,def:b(p),ruleStack:g,occurrenceStack:N};h.push(E),h.push(a);const f={idx:I,def:m.definition.concat(b(p)),ruleStack:g,occurrenceStack:N};h.push(f)}else if(m instanceof Q){const E=new x({definition:m.definition,idx:m.idx}),f=m.definition.concat([E],b(p)),A={idx:I,def:f,ruleStack:g,occurrenceStack:N};h.push(A)}else if(m instanceof Z){const E=new _({terminalType:m.separator}),f=new x({definition:[E].concat(m.definition),idx:m.idx}),A=m.definition.concat([f],b(p)),C={idx:I,def:A,ruleStack:g,occurrenceStack:N};h.push(C)}else if(m instanceof H){const E={idx:I,def:b(p),ruleStack:g,occurrenceStack:N};h.push(E),h.push(a);const f=new _({terminalType:m.separator}),A=new x({definition:[f].concat(m.definition),idx:m.idx}),C=m.definition.concat([A],b(p)),se={idx:I,def:C,ruleStack:g,occurrenceStack:N};h.push(se)}else if(m instanceof x){const E={idx:I,def:b(p),ruleStack:g,occurrenceStack:N};h.push(E),h.push(a);const f=new x({definition:m.definition,idx:m.idx}),A=m.definition.concat([f],b(p)),C={idx:I,def:A,ruleStack:g,occurrenceStack:N};h.push(C)}else if(m instanceof V)for(let E=m.definition.length-1;E>=0;E--){const f=m.definition[E],A={idx:I,def:f.definition.concat(b(p)),ruleStack:g,occurrenceStack:N};h.push(A),h.push(a)}else if(m instanceof W)h.push({idx:I,def:m.definition.concat(b(p)),ruleStack:g,occurrenceStack:N});else if(m instanceof Fe)h.push(Zi(m,I,g,N));else throw Error("non exhaustive match")}return u}function Zi(n,e,t,s){const i=U(t);i.push(n.name);const r=U(s);return r.push(1),{idx:e,def:n.definition,ruleStack:i,occurrenceStack:r}}var L;(function(n){n[n.OPTION=0]="OPTION",n[n.REPETITION=1]="REPETITION",n[n.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",n[n.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",n[n.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",n[n.ALTERNATION=5]="ALTERNATION"})(L||(L={}));function nn(n){if(n instanceof F||n==="Option")return L.OPTION;if(n instanceof x||n==="Repetition")return L.REPETITION;if(n instanceof Q||n==="RepetitionMandatory")return L.REPETITION_MANDATORY;if(n instanceof Z||n==="RepetitionMandatoryWithSeparator")return L.REPETITION_MANDATORY_WITH_SEPARATOR;if(n instanceof H||n==="RepetitionWithSeparator")return L.REPETITION_WITH_SEPARATOR;if(n instanceof V||n==="Alternation")return L.ALTERNATION;throw Error("non exhaustive match")}function Fn(n){const{occurrence:e,rule:t,prodType:s,maxLookahead:i}=n,r=nn(s);return r===L.ALTERNATION?xt(e,t,i):yt(e,t,r,i)}function Ji(n,e,t,s,i,r){const a=xt(n,e,t),o=ds(a)?Et:Ze;return r(a,s,o,i)}function er(n,e,t,s,i,r){const a=yt(n,e,i,t),o=ds(a)?Et:Ze;return r(a[0],o,s)}function tr(n,e,t,s){const i=n.length,r=re(n,a=>re(a,o=>o.length===1));if(e)return function(a){const o=T(a,c=>c.GATE);for(let c=0;c<i;c++){const l=n[c],u=l.length,h=o[c];if(!(h!==void 0&&h.call(this)===!1))e:for(let d=0;d<u;d++){const p=l[d],I=p.length;for(let g=0;g<I;g++){const N=this.LA(g+1);if(t(N,p[g])===!1)continue e}return c}}};if(r&&!s){const a=T(n,c=>ee(c)),o=G(a,(c,l,u)=>(R(l,h=>{S(c,h.tokenTypeIdx)||(c[h.tokenTypeIdx]=u),R(h.categoryMatches,d=>{S(c,d)||(c[d]=u)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const o=n[a],c=o.length;e:for(let l=0;l<c;l++){const u=o[l],h=u.length;for(let d=0;d<h;d++){const p=this.LA(d+1);if(t(p,u[d])===!1)continue e}return a}}}}function nr(n,e,t){const s=re(n,r=>r.length===1),i=n.length;if(s&&!t){const r=ee(n);if(r.length===1&&O(r[0].categoryMatches)){const o=r[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=G(r,(o,c,l)=>(o[c.tokenTypeIdx]=!0,R(c.categoryMatches,u=>{o[u]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let r=0;r<i;r++){const a=n[r],o=a.length;for(let c=0;c<o;c++){const l=this.LA(c+1);if(e(l,a[c])===!1)continue e}return!0}return!1}}class sr extends _t{constructor(e,t,s){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=s}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,s,i){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=s.concat(i),!0):!1}walkOption(e,t,s){this.checkIsTarget(e,L.OPTION,t,s)||super.walkOption(e,t,s)}walkAtLeastOne(e,t,s){this.checkIsTarget(e,L.REPETITION_MANDATORY,t,s)||super.walkOption(e,t,s)}walkAtLeastOneSep(e,t,s){this.checkIsTarget(e,L.REPETITION_MANDATORY_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}walkMany(e,t,s){this.checkIsTarget(e,L.REPETITION,t,s)||super.walkOption(e,t,s)}walkManySep(e,t,s){this.checkIsTarget(e,L.REPETITION_WITH_SEPARATOR,t,s)||super.walkOption(e,t,s)}}class us extends Ue{constructor(e,t,s){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=s,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,L.OPTION)}visitRepetition(e){this.checkIsTarget(e,L.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,L.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,L.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,L.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,L.ALTERNATION)}}function Un(n){const e=new Array(n);for(let t=0;t<n;t++)e[t]=[];return e}function Ut(n){let e=[""];for(let t=0;t<n.length;t++){const s=n[t],i=[];for(let r=0;r<e.length;r++){const a=e[r];i.push(a+"_"+s.tokenTypeIdx);for(let o=0;o<s.categoryMatches.length;o++){const c="_"+s.categoryMatches[o];i.push(a+c)}}e=i}return e}function ir(n,e,t){for(let s=0;s<n.length;s++){if(s===t)continue;const i=n[s];for(let r=0;r<e.length;r++){const a=e[r];if(i[a]===!0)return!1}}return!0}function hs(n,e){const t=T(n,a=>Ht([a],1)),s=Un(t.length),i=T(t,a=>{const o={};return R(a,c=>{const l=Ut(c.partialPath);R(l,u=>{o[u]=!0})}),o});let r=t;for(let a=1;a<=e;a++){const o=r;r=Un(o.length);for(let c=0;c<o.length;c++){const l=o[c];for(let u=0;u<l.length;u++){const h=l[u].partialPath,d=l[u].suffixDef,p=Ut(h);if(ir(i,p,c)||O(d)||h.length===e){const g=s[c];if(Vt(g,h)===!1){g.push(h);for(let N=0;N<p.length;N++){const m=p[N];i[c][m]=!0}}}else{const g=Ht(d,a+1,h);r[c]=r[c].concat(g),R(g,N=>{const m=Ut(N.partialPath);R(m,E=>{i[c][E]=!0})})}}}}return s}function xt(n,e,t,s){const i=new us(n,L.ALTERNATION,s);return e.accept(i),hs(i.result,t)}function yt(n,e,t,s){const i=new us(n,t);e.accept(i);const r=i.result,o=new sr(e,n,t).startWalking(),c=new W({definition:r}),l=new W({definition:o});return hs([c,l],s)}function Vt(n,e){e:for(let t=0;t<n.length;t++){const s=n[t];if(s.length===e.length){for(let i=0;i<s.length;i++){const r=e[i],a=s[i];if((r===a||a.categoryMatchesMap[r.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function rr(n,e){return n.length<e.length&&re(n,(t,s)=>{const i=e[s];return t===i||i.categoryMatchesMap[t.tokenTypeIdx]})}function ds(n){return re(n,e=>re(e,t=>re(t,s=>O(s.categoryMatches))))}function ar(n){const e=n.lookaheadStrategy.validate({rules:n.rules,tokenTypes:n.tokenTypes,grammarName:n.grammarName});return T(e,t=>Object.assign({type:$.CUSTOM_LOOKAHEAD_VALIDATION},t))}function or(n,e,t,s){const i=j(n,c=>cr(c,t)),r=Rr(n,e,t),a=j(n,c=>Tr(c,t)),o=j(n,c=>hr(c,n,s,t));return i.concat(r,a,o)}function cr(n,e){const t=new ur;n.accept(t);const s=t.allProductions,i=$s(s,lr),r=oe(i,o=>o.length>1);return T(M(r),o=>{const c=ae(o),l=e.buildDuplicateFoundError(n,o),u=ce(c),h={message:l,type:$.DUPLICATE_PRODUCTIONS,ruleName:n.name,dslName:u,occurrence:c.idx},d=fs(c);return d&&(h.parameter=d),h})}function lr(n){return`${ce(n)}_#_${n.idx}_#_${fs(n)}`}function fs(n){return n instanceof _?n.terminalType.name:n instanceof B?n.nonTerminalName:""}class ur extends Ue{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function hr(n,e,t,s){const i=[];if(G(e,(a,o)=>o.name===n.name?a+1:a,0)>1){const a=s.buildDuplicateRuleNameError({topLevelRule:n,grammarName:t});i.push({message:a,type:$.DUPLICATE_RULE_NAME,ruleName:n.name})}return i}function dr(n,e,t){const s=[];let i;return K(e,n)||(i=`Invalid rule override, rule: ->${n}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,s.push({message:i,type:$.INVALID_RULE_OVERRIDE,ruleName:n})),s}function ps(n,e,t,s=[]){const i=[],r=ht(e.definition);if(O(r))return[];{const a=n.name;K(r,n)&&i.push({message:t.buildLeftRecursionError({topLevelRule:n,leftRecursionPath:s}),type:$.LEFT_RECURSION,ruleName:a});const c=Ot(r,s.concat([n])),l=j(c,u=>{const h=U(s);return h.push(u),ps(n,u,t,h)});return i.concat(l)}}function ht(n){let e=[];if(O(n))return e;const t=ae(n);if(t instanceof B)e.push(t.referencedRule);else if(t instanceof W||t instanceof F||t instanceof Q||t instanceof Z||t instanceof H||t instanceof x)e=e.concat(ht(t.definition));else if(t instanceof V)e=ee(T(t.definition,r=>ht(r.definition)));else if(!(t instanceof _))throw Error("non exhaustive match");const s=mt(t),i=n.length>1;if(s&&i){const r=b(n);return e.concat(ht(r))}else return e}class sn extends Ue{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function fr(n,e){const t=new sn;n.accept(t);const s=t.alternations;return j(s,r=>{const a=Xe(r.definition);return j(a,(o,c)=>{const l=ls([o],[],Ze,1);return O(l)?[{message:e.buildEmptyAlternationError({topLevelRule:n,alternation:r,emptyChoiceIdx:c}),type:$.NONE_LAST_EMPTY_ALT,ruleName:n.name,occurrence:r.idx,alternative:c+1}]:[]})})}function pr(n,e,t){const s=new sn;n.accept(s);let i=s.alternations;return i=kt(i,a=>a.ignoreAmbiguities===!0),j(i,a=>{const o=a.idx,c=a.maxLookahead||e,l=xt(o,n,c,a),u=gr(l,a,n,t),h=Ar(l,a,n,t);return u.concat(h)})}class mr extends Ue{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function Tr(n,e){const t=new sn;n.accept(t);const s=t.alternations;return j(s,r=>r.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:n,alternation:r}),type:$.TOO_MANY_ALTS,ruleName:n.name,occurrence:r.idx}]:[])}function Er(n,e,t){const s=[];return R(n,i=>{const r=new mr;i.accept(r);const a=r.allProductions;R(a,o=>{const c=nn(o),l=o.maxLookahead||e,u=o.idx,d=yt(u,i,c,l)[0];if(O(ee(d))){const p=t.buildEmptyRepetitionError({topLevelRule:i,repetition:o});s.push({message:p,type:$.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),s}function gr(n,e,t,s){const i=[],r=G(n,(o,c,l)=>(e.definition[l].ignoreAmbiguities===!0||R(c,u=>{const h=[l];R(n,(d,p)=>{l!==p&&Vt(d,u)&&e.definition[p].ignoreAmbiguities!==!0&&h.push(p)}),h.length>1&&!Vt(i,u)&&(i.push(u),o.push({alts:h,path:u}))}),o),[]);return T(r,o=>{const c=T(o.alts,u=>u+1);return{message:s.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:$.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:o.alts}})}function Ar(n,e,t,s){const i=G(n,(a,o,c)=>{const l=T(o,u=>({idx:c,path:u}));return a.concat(l)},[]);return qe(j(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,l=a.path,u=q(i,d=>e.definition[d.idx].ignoreAmbiguities!==!0&&d.idx<c&&rr(d.path,l));return T(u,d=>{const p=[d.idx+1,c+1],I=e.idx===0?"":e.idx;return{message:s.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:p,prefixPath:d.path}),type:$.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:I,alternatives:p}})}))}function Rr(n,e,t){const s=[],i=T(e,r=>r.name);return R(n,r=>{const a=r.name;if(K(i,a)){const o=t.buildNamespaceConflictError(r);s.push({message:o,type:$.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),s}function Ir(n){const e=Zt(n,{errMsgProvider:Vi}),t={};return R(n.rules,s=>{t[s.name]=s}),zi(t,e.errMsgProvider)}function Sr(n){return n=Zt(n,{errMsgProvider:Oe}),or(n.rules,n.tokenTypes,n.errMsgProvider,n.grammarName)}const ms="MismatchedTokenException",Ts="NoViableAltException",Es="EarlyExitException",gs="NotAllInputParsedException",As=[ms,Ts,Es,gs];Object.freeze(As);function gt(n){return K(As,n.name)}class Pt extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Rs extends Pt{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=ms}}class Nr extends Pt{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=Ts}}class kr extends Pt{constructor(e,t){super(e,t),this.name=gs}}class Or extends Pt{constructor(e,t,s){super(e,t),this.previousToken=s,this.name=Es}}const Dt={},Is="InRuleRecoveryException";class _r extends Error{constructor(e){super(e),this.name=Is}}class Lr{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=S(e,"recoveryEnabled")?e.recoveryEnabled:pe.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Cr)}getTokenToInsert(e){const t=tn(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,s,i){const r=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const l=this.LA(1);let u=this.LA(1);const h=()=>{const d=this.LA(0),p=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:d,ruleName:this.getCurrRuleFullName()}),I=new Rs(p,l,this.LA(0));I.resyncedTokens=Xe(o),this.SAVE_ERROR(I)};for(;!c;)if(this.tokenMatcher(u,i)){h();return}else if(s.call(this)){h(),e.apply(this,t);return}else this.tokenMatcher(u,r)?c=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,s){return!(s===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const s=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(s)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const s=this.SKIP_TOKEN();return this.consumeToken(),s}throw new _r("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||O(t))return!1;const s=this.LA(1);return Me(t,r=>this.tokenMatcher(s,r))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),s=this.getFollowSetFromFollowKey(t);return K(s,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),s=2;for(;;){const i=Me(e,r=>os(t,r));if(i!==void 0)return i;t=this.LA(s),s++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Dt;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),s=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(s)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return T(e,(s,i)=>i===0?Dt:{ruleName:this.shortRuleNameToFullName(s),idxInCallingRule:t[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=T(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return ee(e)}getFollowSetFromFollowKey(e){if(e===Dt)return[Le];const t=e.ruleName+e.idxInCallingRule+qn+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Le)||t.push(e),t}reSyncTo(e){const t=[];let s=this.LA(1);for(;this.tokenMatcher(s,e)===!1;)s=this.SKIP_TOKEN(),this.addToResyncTokens(s,t);return Xe(t)}attemptInRepetitionRecovery(e,t,s,i,r,a,o){}getCurrentGrammarPath(e,t){const s=this.getHumanReadableRuleStack(),i=U(this.RULE_OCCURRENCE_STACK);return{ruleStack:s,occurrenceStack:i,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return T(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function Cr(n,e,t,s,i,r,a){const o=this.getKeyForAutomaticLookahead(s,i);let c=this.firstAfterRepMap[o];if(c===void 0){const d=this.getCurrRuleFullName(),p=this.getGAstProductions()[d];c=new r(p,i).startWalking(),this.firstAfterRepMap[o]=c}let l=c.token,u=c.occurrence;const h=c.isEndOfRule;this.RULE_STACK.length===1&&h&&l===void 0&&(l=Le,u=1),!(l===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,u,a)&&this.tryInRepetitionRecovery(n,e,t,l)}const xr=4,Ie=8,Ss=1<<Ie,Ns=2<<Ie,zt=3<<Ie,jt=4<<Ie,Yt=5<<Ie,dt=6<<Ie;function Gt(n,e,t){return t|e|n}class ks{constructor(e){var t;this.maxLookahead=(t=e==null?void 0:e.maxLookahead)!==null&&t!==void 0?t:pe.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(O(t)){const s=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),r=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...s,...i,...r]}return t}validateNoLeftRecursion(e){return j(e,t=>ps(t,t,Oe))}validateEmptyOrAlternatives(e){return j(e,t=>fr(t,Oe))}validateAmbiguousAlternationAlternatives(e,t){return j(e,s=>pr(s,t,Oe))}validateSomeNonEmptyLookaheadPath(e,t){return Er(e,t,Oe)}buildLookaheadForAlternation(e){return Ji(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,tr)}buildLookaheadForOptional(e){return er(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,nn(e.prodType),nr)}}class yr{initLooksAhead(e){this.dynamicTokensEnabled=S(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:pe.dynamicTokensEnabled,this.maxLookahead=S(e,"maxLookahead")?e.maxLookahead:pe.maxLookahead,this.lookaheadStrategy=S(e,"lookaheadStrategy")?e.lookaheadStrategy:new ks({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){R(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:s,repetition:i,option:r,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=vr(t);R(s,l=>{const u=l.idx===0?"":l.idx;this.TRACE_INIT(`${ce(l)}${u}`,()=>{const h=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:t,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),d=Gt(this.fullRuleNameToShort[t.name],Ss,l.idx);this.setLaFuncCache(d,h)})}),R(i,l=>{this.computeLookaheadFunc(t,l.idx,zt,"Repetition",l.maxLookahead,ce(l))}),R(r,l=>{this.computeLookaheadFunc(t,l.idx,Ns,"Option",l.maxLookahead,ce(l))}),R(a,l=>{this.computeLookaheadFunc(t,l.idx,jt,"RepetitionMandatory",l.maxLookahead,ce(l))}),R(o,l=>{this.computeLookaheadFunc(t,l.idx,dt,"RepetitionMandatoryWithSeparator",l.maxLookahead,ce(l))}),R(c,l=>{this.computeLookaheadFunc(t,l.idx,Yt,"RepetitionWithSeparator",l.maxLookahead,ce(l))})})})}computeLookaheadFunc(e,t,s,i,r,a){this.TRACE_INIT(`${a}${t===0?"":t}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:r||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=Gt(this.fullRuleNameToShort[e.name],s,t);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,t){const s=this.getLastExplicitRuleShortName();return Gt(s,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class Pr extends Ue{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const ot=new Pr;function vr(n){ot.reset(),n.accept(ot);const e=ot.dslMethods;return ot.reset(),e}function Dn(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.endOffset=e.endOffset):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset)}function Gn(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.startColumn=e.startColumn,n.startLine=e.startLine,n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine)}function Mr(n,e,t){n.children[t]===void 0?n.children[t]=[e]:n.children[t].push(e)}function wr(n,e,t){n.children[e]===void 0?n.children[e]=[t]:n.children[e].push(t)}const br="name";function Os(n,e){Object.defineProperty(n,br,{enumerable:!1,configurable:!0,writable:!1,value:e})}function Fr(n,e){const t=Ye(n),s=t.length;for(let i=0;i<s;i++){const r=t[i],a=n[r],o=a.length;for(let c=0;c<o;c++){const l=a[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function Ur(n,e){const t=function(){};Os(t,n+"BaseSemantics");const s={visit:function(i,r){if(te(i)&&(i=i[0]),!fe(i))return this[i.name](i.children,r)},validateVisitor:function(){const i=Gr(this,e);if(!O(i)){const r=T(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${r.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=s,t.prototype.constructor=t,t._RULE_NAMES=e,t}function Dr(n,e,t){const s=function(){};Os(s,n+"BaseSemanticsWithDefaults");const i=Object.create(t.prototype);return R(e,r=>{i[r]=Fr}),s.prototype=i,s.prototype.constructor=s,s}var Xt;(function(n){n[n.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",n[n.MISSING_METHOD=1]="MISSING_METHOD"})(Xt||(Xt={}));function Gr(n,e){return Br(n,e)}function Br(n,e){const t=q(e,i=>Ce(n[i])===!1),s=T(t,i=>({msg:`Missing visitor method: <${i}> on ${n.constructor.name} CST Visitor.`,type:Xt.MISSING_METHOD,methodName:i}));return qe(s)}class $r{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=S(e,"nodeLocationTracking")?e.nodeLocationTracking:pe.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=v,this.cstFinallyStateUpdate=v,this.cstPostTerminal=v,this.cstPostNonTerminal=v,this.cstPostRule=v;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Gn,this.setNodeLocationFromNode=Gn,this.cstPostRule=v,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=v,this.setNodeLocationFromNode=v,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Dn,this.setNodeLocationFromNode=Dn,this.cstPostRule=v,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=v,this.setNodeLocationFromNode=v,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=v,this.setNodeLocationFromNode=v,this.cstPostRule=v,this.setInitialNodeLocation=v;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?(s.endOffset=t.endOffset,s.endLine=t.endLine,s.endColumn=t.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),s=e.location;s.startOffset<=t.startOffset?s.endOffset=t.endOffset:s.startOffset=NaN}cstPostTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];Mr(s,t,e),this.setNodeLocationFromToken(s.location,t)}cstPostNonTerminal(e,t){const s=this.CST_STACK[this.CST_STACK.length-1];wr(s,t,e),this.setNodeLocationFromNode(s.location,e.location)}getBaseCstVisitorConstructor(){if(fe(this.baseCstVisitorConstructor)){const e=Ur(this.className,Ye(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(fe(this.baseCstVisitorWithDefaultsConstructor)){const e=Dr(this.className,Ye(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class Kr{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Rt}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?Rt:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class Wr{ACTION(e){return e.call(this)}consume(e,t,s){return this.consumeInternal(t,e,s)}subrule(e,t,s){return this.subruleInternal(t,e,s)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,s=It){if(K(this.definedRulesNames,e)){const a={message:Oe.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:$.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,t,s);return this[e]=i,i}OVERRIDE_RULE(e,t,s=It){const i=dr(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const r=this.defineRule(e,t,s);return this[e]=r,r}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const s=this.saveRecogState();try{return e.apply(this,t),!0}catch(i){if(gt(i))return!1;throw i}finally{this.reloadRecogState(s),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Qs(M(this.gastProductionsCache))}}class Hr{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Et,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},S(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(te(e)){if(O(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(te(e))this.tokensMap=G(e,(r,a)=>(r[a.name]=a,r),{});else if(S(e,"modes")&&re(ee(M(e.modes)),$i)){const r=ee(M(e.modes)),a=Qt(r);this.tokensMap=G(a,(o,c)=>(o[c.name]=c,o),{})}else if(Ks(e))this.tokensMap=U(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Le;const s=S(e,"modes")?ee(M(e.modes)):M(e),i=re(s,r=>O(r.categoryMatches));this.tokenMatcher=i?Et:Ze,Je(M(this.tokensMap))}defineRule(e,t,s){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=S(s,"resyncEnabled")?s.resyncEnabled:It.resyncEnabled,r=S(s,"recoveryValueFunc")?s.recoveryValueFunc:It.recoveryValueFunc,a=this.ruleShortNameIdx<<xr+Ie;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u);const h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,i,r)}finally{this.ruleFinallyStateUpdate()}}:o=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u)}catch(h){return this.invokeRuleCatch(h,i,r)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,s){const i=this.RULE_STACK.length===1,r=t&&!this.isBackTracking()&&this.recoveryEnabled;if(gt(e)){const a=e;if(r){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return s(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(i)return this.moveToTerminatedState(),s(e);throw a}}else throw e}optionInternal(e,t){const s=this.getKeyForAutomaticLookahead(Ns,t);return this.optionInternalLogic(e,t,s)}optionInternalLogic(e,t,s){let i=this.getLaFuncFromCache(s),r;if(typeof e!="function"){r=e.DEF;const a=e.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else r=e;if(i.call(this)===!0)return r.call(this)}atLeastOneInternal(e,t){const s=this.getKeyForAutomaticLookahead(jt,e);return this.atLeastOneInternalLogic(e,t,s)}atLeastOneInternalLogic(e,t,s){let i=this.getLaFuncFromCache(s),r;if(typeof t!="function"){r=t.DEF;const a=t.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else r=t;if(i.call(this)===!0){let a=this.doSingleRepetition(r);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(r)}else throw this.raiseEarlyExitException(e,L.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],i,jt,e,Qi)}atLeastOneSepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(dt,e);this.atLeastOneSepFirstInternalLogic(e,t,s)}atLeastOneSepFirstInternalLogic(e,t,s){const i=t.DEF,r=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),r);for(;this.tokenMatcher(this.LA(1),r)===!0;)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,o,i,bn],o,dt,e,bn)}else throw this.raiseEarlyExitException(e,L.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const s=this.getKeyForAutomaticLookahead(zt,e);return this.manyInternalLogic(e,t,s)}manyInternalLogic(e,t,s){let i=this.getLaFuncFromCache(s),r;if(typeof t!="function"){r=t.DEF;const o=t.GATE;if(o!==void 0){const c=i;i=()=>o.call(this)&&c.call(this)}}else r=t;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],i,zt,e,qi,a)}manySepFirstInternal(e,t){const s=this.getKeyForAutomaticLookahead(Yt,e);this.manySepFirstInternalLogic(e,t,s)}manySepFirstInternalLogic(e,t,s){const i=t.DEF,r=t.SEP;if(this.getLaFuncFromCache(s).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),r);for(;this.tokenMatcher(this.LA(1),r)===!0;)this.CONSUME(r),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,o,i,wn],o,Yt,e,wn)}}repetitionSepSecondInternal(e,t,s,i,r){for(;s();)this.CONSUME(t),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,s,i,r],s,dt,e,r)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const s=this.getKeyForAutomaticLookahead(Ss,t),i=te(e)?e:e.DEF,a=this.getLaFuncFromCache(s).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new kr(t,e))}}subruleInternal(e,t,s){let i;try{const r=s!==void 0?s.ARGS:void 0;return this.subruleIdx=t,i=e.apply(this,r),this.cstPostNonTerminal(i,s!==void 0&&s.LABEL!==void 0?s.LABEL:e.ruleName),i}catch(r){throw this.subruleInternalError(r,s,e.ruleName)}}subruleInternalError(e,t,s){throw gt(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:s),delete e.partialCstResult),e}consumeInternal(e,t,s){let i;try{const r=this.LA(1);this.tokenMatcher(r,e)===!0?(this.consumeToken(),i=r):this.consumeInternalError(e,r,s)}catch(r){i=this.consumeInternalRecovery(e,t,r)}return this.cstPostTerminal(s!==void 0&&s.LABEL!==void 0?s.LABEL:e.name,i),i}consumeInternalError(e,t,s){let i;const r=this.LA(0);throw s!==void 0&&s.ERR_MSG?i=s.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Rs(i,t,r))}consumeInternalRecovery(e,t,s){if(this.recoveryEnabled&&s.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,i)}catch(r){throw r.name===Is?s:r}}else throw s}saveRecogState(){const e=this.errors,t=U(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,s){this.RULE_OCCURRENCE_STACK.push(s),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Le)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class Vr{initErrorHandler(e){this._errors=[],this.errorMessageProvider=S(e,"errorMessageProvider")?e.errorMessageProvider:pe.errorMessageProvider}SAVE_ERROR(e){if(gt(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:U(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return U(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,s){const i=this.getCurrRuleFullName(),r=this.getGAstProductions()[i],o=yt(e,r,t,this.maxLookahead)[0],c=[];for(let u=1;u<=this.maxLookahead;u++)c.push(this.LA(u));const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:s,ruleName:i});throw this.SAVE_ERROR(new Or(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const s=this.getCurrRuleFullName(),i=this.getGAstProductions()[s],r=xt(e,i,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:a,previous:o,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Nr(c,this.LA(1),o))}}class zr{initContentAssist(){}computeContentAssist(e,t){const s=this.gastProductionsCache[e];if(fe(s))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return ls([s],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=ae(e.ruleStack),i=this.getGAstProductions()[t];return new Xi(i,e).startWalking()}}const vt={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(vt);const Bn=!0,$n=Math.pow(2,Ie)-1,_s=as({name:"RECORDING_PHASE_TOKEN",pattern:ne.NA});Je([_s]);const Ls=tn(_s,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Ls);const jr={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class Yr{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(s,i){return this.consumeInternalRecord(s,e,i)},this[`SUBRULE${t}`]=function(s,i){return this.subruleInternalRecord(s,e,i)},this[`OPTION${t}`]=function(s){return this.optionInternalRecord(s,e)},this[`OR${t}`]=function(s){return this.orInternalRecord(s,e)},this[`MANY${t}`]=function(s){this.manyInternalRecord(e,s)},this[`MANY_SEP${t}`]=function(s){this.manySepFirstInternalRecord(e,s)},this[`AT_LEAST_ONE${t}`]=function(s){this.atLeastOneInternalRecord(e,s)},this[`AT_LEAST_ONE_SEP${t}`]=function(s){this.atLeastOneSepFirstInternalRecord(e,s)}}this.consume=function(e,t,s){return this.consumeInternalRecord(t,e,s)},this.subrule=function(e,t,s){return this.subruleInternalRecord(t,e,s)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const s=t>0?t:"";delete e[`CONSUME${s}`],delete e[`SUBRULE${s}`],delete e[`OPTION${s}`],delete e[`OR${s}`],delete e[`MANY${s}`],delete e[`MANY_SEP${s}`],delete e[`AT_LEAST_ONE${s}`],delete e[`AT_LEAST_ONE_SEP${s}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return Rt}topLevelRuleRecord(e,t){try{const s=new Fe({definition:[],name:e});return s.name=e,this.recordingProdStack.push(s),t.call(this),this.recordingProdStack.pop(),s}catch(s){if(s.KNOWN_RECORDER_ERROR!==!0)try{s.message=s.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw s}throw s}}optionInternalRecord(e,t){return He.call(this,F,e,t)}atLeastOneInternalRecord(e,t){He.call(this,Q,t,e)}atLeastOneSepFirstInternalRecord(e,t){He.call(this,Z,t,e,Bn)}manyInternalRecord(e,t){He.call(this,x,t,e)}manySepFirstInternalRecord(e,t){He.call(this,H,t,e,Bn)}orInternalRecord(e,t){return Xr.call(this,e,t)}subruleInternalRecord(e,t,s){if(At(t),!e||S(e,"ruleName")===!1){const o=new Error(`<SUBRULE${Kn(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=we(this.recordingProdStack),r=e.ruleName,a=new B({idx:t,nonTerminalName:r,label:s==null?void 0:s.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?jr:vt}consumeInternalRecord(e,t,s){if(At(t),!is(e)){const a=new Error(`<CONSUME${Kn(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=we(this.recordingProdStack),r=new _({idx:t,terminalType:e,label:s==null?void 0:s.LABEL});return i.definition.push(r),Ls}}function He(n,e,t,s=!1){At(t);const i=we(this.recordingProdStack),r=Ce(e)?e:e.DEF,a=new n({definition:[],idx:t});return s&&(a.separator=e.SEP),S(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),r.call(this),i.definition.push(a),this.recordingProdStack.pop(),vt}function Xr(n,e){At(e);const t=we(this.recordingProdStack),s=te(n)===!1,i=s===!1?n:n.DEF,r=new V({definition:[],idx:e,ignoreAmbiguities:s&&n.IGNORE_AMBIGUITIES===!0});S(n,"MAX_LOOKAHEAD")&&(r.maxLookahead=n.MAX_LOOKAHEAD);const a=zn(i,o=>Ce(o.GATE));return r.hasPredicates=a,t.definition.push(r),R(i,o=>{const c=new W({definition:[]});r.definition.push(c),S(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:S(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),vt}function Kn(n){return n===0?"":`${n}`}function At(n){if(n<0||n>$n){const e=new Error(`Invalid DSL Method idx value: <${n}>
	Idx value must be a none negative value smaller than ${$n+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class qr{initPerformanceTracer(e){if(S(e,"traceInitPerf")){const t=e.traceInitPerf,s=typeof t=="number";this.traceInitMaxIdent=s?t:1/0,this.traceInitPerf=s?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=pe.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const s=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${s}--> <${e}>`);const{time:i,value:r}=Yn(t),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${s}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,r}else return t()}}function Qr(n,e){e.forEach(t=>{const s=t.prototype;Object.getOwnPropertyNames(s).forEach(i=>{if(i==="constructor")return;const r=Object.getOwnPropertyDescriptor(s,i);r&&(r.get||r.set)?Object.defineProperty(n.prototype,i,r):n.prototype[i]=t.prototype[i]})})}const Rt=tn(Le,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Rt);const pe=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:cs,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),It=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var $;(function(n){n[n.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",n[n.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",n[n.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",n[n.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",n[n.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",n[n.LEFT_RECURSION=5]="LEFT_RECURSION",n[n.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",n[n.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",n[n.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",n[n.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",n[n.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",n[n.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",n[n.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",n[n.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})($||($={}));function Da(n=void 0){return function(){return n}}class et{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Xn(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),R(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let s=[];if(this.TRACE_INIT("Grammar Resolving",()=>{s=Ir({rules:M(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(s)}),this.TRACE_INIT("Grammar Validations",()=>{if(O(s)&&this.skipValidations===!1){const i=Sr({rules:M(this.gastProductionsCache),tokenTypes:M(this.tokensMap),errMsgProvider:Oe,grammarName:t}),r=ar({lookaheadStrategy:this.lookaheadStrategy,rules:M(this.gastProductionsCache),tokenTypes:M(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(i,r)}}),O(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=ii(M(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,r;(r=(i=this.lookaheadStrategy).initialize)===null||r===void 0||r.call(i,{rules:M(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(M(this.gastProductionsCache))})),!et.DEFER_DEFINITION_ERRORS_HANDLING&&!O(this.definitionErrors))throw e=T(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const s=this;if(s.initErrorHandler(t),s.initLexerAdapter(),s.initLooksAhead(t),s.initRecognizerEngine(e,t),s.initRecoverable(t),s.initTreeBuilder(t),s.initContentAssist(),s.initGastRecorder(t),s.initPerformanceTracer(t),S(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=S(t,"skipValidations")?t.skipValidations:pe.skipValidations}}et.DEFER_DEFINITION_ERRORS_HANDLING=!1;Qr(et,[Lr,yr,$r,Kr,Hr,Wr,Vr,zr,Yr,qr]);class Ga extends et{constructor(e,t=pe){const s=U(t);s.outputCst=!1,super(e,s)}}function be(n,e,t){return`${n.name}_${e}_${t}`}const Re=1,Zr=2,Cs=4,xs=5,tt=7,Jr=8,ea=9,ta=10,na=11,ys=12;class rn{constructor(e){this.target=e}isEpsilon(){return!1}}class an extends rn{constructor(e,t){super(e),this.tokenType=t}}class Ps extends rn{constructor(e){super(e)}isEpsilon(){return!0}}class on extends rn{constructor(e,t,s){super(e),this.rule=t,this.followState=s}isEpsilon(){return!0}}function sa(n){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};ia(e,n);const t=n.length;for(let s=0;s<t;s++){const i=n[s],r=xe(e,i,i);r!==void 0&&ma(e,i,r)}return e}function ia(n,e){const t=e.length;for(let s=0;s<t;s++){const i=e[s],r=w(n,i,void 0,{type:Zr}),a=w(n,i,void 0,{type:tt});r.stop=a,n.ruleToStartState.set(i,r),n.ruleToStopState.set(i,a)}}function vs(n,e,t){return t instanceof _?cn(n,e,t.terminalType,t):t instanceof B?pa(n,e,t):t instanceof V?la(n,e,t):t instanceof F?ua(n,e,t):t instanceof x?ra(n,e,t):t instanceof H?aa(n,e,t):t instanceof Q?oa(n,e,t):t instanceof Z?ca(n,e,t):xe(n,e,t)}function ra(n,e,t){const s=w(n,e,t,{type:xs});Se(n,s);const i=De(n,e,s,t,xe(n,e,t));return ws(n,e,t,i)}function aa(n,e,t){const s=w(n,e,t,{type:xs});Se(n,s);const i=De(n,e,s,t,xe(n,e,t)),r=cn(n,e,t.separator,t);return ws(n,e,t,i,r)}function oa(n,e,t){const s=w(n,e,t,{type:Cs});Se(n,s);const i=De(n,e,s,t,xe(n,e,t));return Ms(n,e,t,i)}function ca(n,e,t){const s=w(n,e,t,{type:Cs});Se(n,s);const i=De(n,e,s,t,xe(n,e,t)),r=cn(n,e,t.separator,t);return Ms(n,e,t,i,r)}function la(n,e,t){const s=w(n,e,t,{type:Re});Se(n,s);const i=T(t.definition,a=>vs(n,e,a));return De(n,e,s,t,...i)}function ua(n,e,t){const s=w(n,e,t,{type:Re});Se(n,s);const i=De(n,e,s,t,xe(n,e,t));return ha(n,e,t,i)}function xe(n,e,t){const s=q(T(t.definition,i=>vs(n,e,i)),i=>i!==void 0);return s.length===1?s[0]:s.length===0?void 0:fa(n,s)}function Ms(n,e,t,s,i){const r=s.left,a=s.right,o=w(n,e,t,{type:na});Se(n,o);const c=w(n,e,t,{type:ys});return r.loopback=o,c.loopback=o,n.decisionMap[be(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",t.idx)]=o,P(a,o),i===void 0?(P(o,r),P(o,c)):(P(o,c),P(o,i.left),P(i.right,r)),{left:r,right:c}}function ws(n,e,t,s,i){const r=s.left,a=s.right,o=w(n,e,t,{type:ta});Se(n,o);const c=w(n,e,t,{type:ys}),l=w(n,e,t,{type:ea});return o.loopback=l,c.loopback=l,P(o,r),P(o,c),P(a,l),i!==void 0?(P(l,c),P(l,i.left),P(i.right,r)):P(l,o),n.decisionMap[be(e,i?"RepetitionWithSeparator":"Repetition",t.idx)]=o,{left:o,right:c}}function ha(n,e,t,s){const i=s.left,r=s.right;return P(i,r),n.decisionMap[be(e,"Option",t.idx)]=i,s}function Se(n,e){return n.decisionStates.push(e),e.decision=n.decisionStates.length-1,e.decision}function De(n,e,t,s,...i){const r=w(n,e,s,{type:Jr,start:t});t.end=r;for(const o of i)o!==void 0?(P(t,o.left),P(o.right,r)):P(t,r);const a={left:t,right:r};return n.decisionMap[be(e,da(s),s.idx)]=t,a}function da(n){if(n instanceof V)return"Alternation";if(n instanceof F)return"Option";if(n instanceof x)return"Repetition";if(n instanceof H)return"RepetitionWithSeparator";if(n instanceof Q)return"RepetitionMandatory";if(n instanceof Z)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function fa(n,e){const t=e.length;for(let r=0;r<t-1;r++){const a=e[r];let o;a.left.transitions.length===1&&(o=a.left.transitions[0]);const c=o instanceof on,l=o,u=e[r+1].left;a.left.type===Re&&a.right.type===Re&&o!==void 0&&(c&&l.followState===a.right||o.target===a.right)?(c?l.followState=u:o.target=u,Ta(n,a.right)):P(a.right,u)}const s=e[0],i=e[t-1];return{left:s.left,right:i.right}}function cn(n,e,t,s){const i=w(n,e,s,{type:Re}),r=w(n,e,s,{type:Re});return ln(i,new an(r,t)),{left:i,right:r}}function pa(n,e,t){const s=t.referencedRule,i=n.ruleToStartState.get(s),r=w(n,e,t,{type:Re}),a=w(n,e,t,{type:Re}),o=new on(i,s,a);return ln(r,o),{left:r,right:a}}function ma(n,e,t){const s=n.ruleToStartState.get(e);P(s,t.left);const i=n.ruleToStopState.get(e);return P(t.right,i),{left:s,right:i}}function P(n,e){const t=new Ps(e);ln(n,t)}function w(n,e,t,s){const i=Object.assign({atn:n,production:t,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:n.states.length},s);return n.states.push(i),i}function ln(n,e){n.transitions.length===0&&(n.epsilonOnlyTransitions=e.isEpsilon()),n.transitions.push(e)}function Ta(n,e){n.states.splice(n.states.indexOf(e),1)}const St={};class qt{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const t=bs(e);t in this.map||(this.map[t]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return T(this.configs,e=>e.alt)}get key(){let e="";for(const t in this.map)e+=t+":";return e}}function bs(n,e=!0){return`${e?`a${n.alt}`:""}s${n.state.stateNumber}:${n.stack.map(t=>t.stateNumber.toString()).join("_")}`}function Ea(n,e){const t={};return s=>{const i=s.toString();let r=t[i];return r!==void 0||(r={atnStartState:n,decision:e,states:{}},t[i]=r),r}}class Fs{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="";const t=this.predicates.length;for(let s=0;s<t;s++)e+=this.predicates[s]===!0?"1":"0";return e}}const Wn=new Fs;class Ba extends ks{constructor(e){var t;super(),this.logging=(t=e==null?void 0:e.logging)!==null&&t!==void 0?t:s=>console.log(s)}initialize(e){this.atn=sa(e.rules),this.dfas=ga(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:t,rule:s,hasPredicates:i,dynamicTokensEnabled:r}=e,a=this.dfas,o=this.logging,c=be(s,"Alternation",t),u=this.atn.decisionMap[c].decision,h=T(Fn({maxLookahead:1,occurrence:t,prodType:"Alternation",rule:s}),d=>T(d,p=>p[0]));if(Hn(h,!1)&&!r){const d=G(h,(p,I,g)=>(R(I,N=>{N&&(p[N.tokenTypeIdx]=g,R(N.categoryMatches,m=>{p[m]=g}))}),p),{});return i?function(p){var I;const g=this.LA(1),N=d[g.tokenTypeIdx];if(p!==void 0&&N!==void 0){const m=(I=p[N])===null||I===void 0?void 0:I.GATE;if(m!==void 0&&m.call(this)===!1)return}return N}:function(){const p=this.LA(1);return d[p.tokenTypeIdx]}}else return i?function(d){const p=new Fs,I=d===void 0?0:d.length;for(let N=0;N<I;N++){const m=d==null?void 0:d[N].GATE;p.set(N,m===void 0||m.call(this))}const g=Bt.call(this,a,u,p,o);return typeof g=="number"?g:void 0}:function(){const d=Bt.call(this,a,u,Wn,o);return typeof d=="number"?d:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:t,rule:s,prodType:i,dynamicTokensEnabled:r}=e,a=this.dfas,o=this.logging,c=be(s,i,t),u=this.atn.decisionMap[c].decision,h=T(Fn({maxLookahead:1,occurrence:t,prodType:i,rule:s}),d=>T(d,p=>p[0]));if(Hn(h)&&h[0][0]&&!r){const d=h[0],p=ee(d);if(p.length===1&&O(p[0].categoryMatches)){const g=p[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===g}}else{const I=G(p,(g,N)=>(N!==void 0&&(g[N.tokenTypeIdx]=!0,R(N.categoryMatches,m=>{g[m]=!0})),g),{});return function(){const g=this.LA(1);return I[g.tokenTypeIdx]===!0}}}return function(){const d=Bt.call(this,a,u,Wn,o);return typeof d=="object"?!1:d===0}}}function Hn(n,e=!0){const t=new Set;for(const s of n){const i=new Set;for(const r of s){if(r===void 0){if(e)break;return!1}const a=[r.tokenTypeIdx].concat(r.categoryMatches);for(const o of a)if(t.has(o)){if(!i.has(o))return!1}else t.add(o),i.add(o)}}return!0}function ga(n){const e=n.decisionStates.length,t=Array(e);for(let s=0;s<e;s++)t[s]=Ea(n.decisionStates[s],s);return t}function Bt(n,e,t,s){const i=n[e](t);let r=i.start;if(r===void 0){const o=xa(i.atnStartState);r=Ds(i,Us(o)),i.start=r}return Aa.apply(this,[i,r,t,s])}function Aa(n,e,t,s){let i=e,r=1;const a=[];let o=this.LA(r++);for(;;){let c=Oa(i,o);if(c===void 0&&(c=Ra.apply(this,[n,i,o,r,t,s])),c===St)return ka(a,i,o);if(c.isAcceptState===!0)return c.prediction;i=c,a.push(o),o=this.LA(r++)}}function Ra(n,e,t,s,i,r){const a=_a(e.configs,t,i);if(a.size===0)return Vn(n,e,t,St),St;let o=Us(a);const c=Ca(a,i);if(c!==void 0)o.isAcceptState=!0,o.prediction=c,o.configs.uniqueAlt=c;else if(Ma(a)){const l=Ws(a.alts);o.isAcceptState=!0,o.prediction=l,o.configs.uniqueAlt=l,Ia.apply(this,[n,s,a.alts,r])}return o=Vn(n,e,t,o),o}function Ia(n,e,t,s){const i=[];for(let l=1;l<=e;l++)i.push(this.LA(l).tokenType);const r=n.atnStartState,a=r.rule,o=r.production,c=Sa({topLevelRule:a,ambiguityIndices:t,production:o,prefixPath:i});s(c)}function Sa(n){const e=T(n.prefixPath,i=>ve(i)).join(", "),t=n.production.idx===0?"":n.production.idx;let s=`Ambiguous Alternatives Detected: <${n.ambiguityIndices.join(", ")}> in <${Na(n.production)}${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return s=s+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,s}function Na(n){if(n instanceof B)return"SUBRULE";if(n instanceof F)return"OPTION";if(n instanceof V)return"OR";if(n instanceof Q)return"AT_LEAST_ONE";if(n instanceof Z)return"AT_LEAST_ONE_SEP";if(n instanceof H)return"MANY_SEP";if(n instanceof x)return"MANY";if(n instanceof _)return"CONSUME";throw Error("non exhaustive match")}function ka(n,e,t){const s=j(e.configs.elements,r=>r.state.transitions),i=Hs(s.filter(r=>r instanceof an).map(r=>r.tokenType),r=>r.tokenTypeIdx);return{actualToken:t,possibleTokenTypes:i,tokenPath:n}}function Oa(n,e){return n.edges[e.tokenTypeIdx]}function _a(n,e,t){const s=new qt,i=[];for(const a of n.elements){if(t.is(a.alt)===!1)continue;if(a.state.type===tt){i.push(a);continue}const o=a.state.transitions.length;for(let c=0;c<o;c++){const l=a.state.transitions[c],u=La(l,e);u!==void 0&&s.add({state:u,alt:a.alt,stack:a.stack})}}let r;if(i.length===0&&s.size===1&&(r=s),r===void 0){r=new qt;for(const a of s.elements)Nt(a,r)}if(i.length>0&&!Pa(r))for(const a of i)r.add(a);return r}function La(n,e){if(n instanceof an&&os(e,n.tokenType))return n.target}function Ca(n,e){let t;for(const s of n.elements)if(e.is(s.alt)===!0){if(t===void 0)t=s.alt;else if(t!==s.alt)return}return t}function Us(n){return{configs:n,edges:{},isAcceptState:!1,prediction:-1}}function Vn(n,e,t,s){return s=Ds(n,s),e.edges[t.tokenTypeIdx]=s,s}function Ds(n,e){if(e===St)return e;const t=e.configs.key,s=n.states[t];return s!==void 0?s:(e.configs.finalize(),n.states[t]=e,e)}function xa(n){const e=new qt,t=n.transitions.length;for(let s=0;s<t;s++){const r={state:n.transitions[s].target,alt:s,stack:[]};Nt(r,e)}return e}function Nt(n,e){const t=n.state;if(t.type===tt){if(n.stack.length>0){const i=[...n.stack],a={state:i.pop(),alt:n.alt,stack:i};Nt(a,e)}else e.add(n);return}t.epsilonOnlyTransitions||e.add(n);const s=t.transitions.length;for(let i=0;i<s;i++){const r=t.transitions[i],a=ya(n,r);a!==void 0&&Nt(a,e)}}function ya(n,e){if(e instanceof Ps)return{state:e.target,alt:n.alt,stack:n.stack};if(e instanceof on){const t=[...n.stack,e.followState];return{state:e.target,alt:n.alt,stack:t}}}function Pa(n){for(const e of n.elements)if(e.state.type===tt)return!0;return!1}function va(n){for(const e of n.elements)if(e.state.type!==tt)return!1;return!0}function Ma(n){if(va(n))return!0;const e=wa(n.elements);return ba(e)&&!Fa(e)}function wa(n){const e=new Map;for(const t of n){const s=bs(t,!1);let i=e.get(s);i===void 0&&(i={},e.set(s,i)),i[t.alt]=!0}return e}function ba(n){for(const e of Array.from(n.values()))if(Object.keys(e).length>1)return!0;return!1}function Fa(n){for(const e of Array.from(n.values()))if(Object.keys(e).length===1)return!0;return!1}export{Jt as B,Ga as E,ks as L,Ys as R,Ba as a,Da as b,Le as c,cs as d,ne as e};
