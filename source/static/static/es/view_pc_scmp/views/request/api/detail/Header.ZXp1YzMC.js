import{s as _}from"../../../../../resources/util/snowflake.util.BS7FKuq4.js";import{_ as g}from"../../../../../components/address/S3Address.Dp8cFelg.js";import{c as k,w as d,m as C,r as s,o as y,e as r}from"../../../../../.store.ssRjOe-B.js";const V={name:"Header",components:{},setup(){},emits:["update:modelValue"],props:{modelValue:{type:Array,required:!0}},data(){return{headerTable:{loading:!1,columns:[{prop:"button",fixed:"left",align:"center",width:"50",slot:"operation",header:"operationHeader"},{prop:"check",type:"selection",label:"多选框",reserveSelection:!0},{prop:"key",label:"参数名",minWidth:"80",slot:"key"},{prop:"value",label:"参数值",minWidth:"150",slot:"value"},{prop:"desc",label:"参数描述",minWidth:"100",slot:"desc"}]}}},computed:{defaultSelectionKey(){return this.header.filter(e=>e.check).map(e=>e.id)||[]},header:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},watch:{},created(){},mounted(){},methods:{selectionChange(e){const t=e.map(o=>o.id);this.header.forEach(o=>o.check=t.includes(o.id))},addRow(){const e={id:_().toString(),key:"",value:"",desc:"",check:!0};this.header.insert(this.header.length,e),this.$refs.headerConfig.toggleRowSelection(!0,e)},delRow(e,t){this.$refs.headerConfig.toggleRowSelection(!1,t),this.header.delete(e)},headerKey(e,t){const o=[{value:"Accept"},{value:"Authorization"},{value:"Cache-Control"},{value:"Content-Type"},{value:"Cookie"}];if(!e)return t(o);e=e.toLowerCase(),t(o.filter(i=>i.value.toLowerCase().includes(e)))}}};function b(e,t,o,i,p,a){const m=s("el-autocomplete"),u=s("el-input"),h=s("el-button"),f=s("s3-table");return y(),k(f,C({ref:"headerConfig"},p.headerTable,{defaultSelectionKey:a.defaultSelectionKey,db:{data:a.header},onSelectionChange:a.selectionChange,"row-key":"id"}),{key:d(({$index:c,row:l})=>[r(m,{modelValue:l.key,"onUpdate:modelValue":n=>l.key=n,"fetch-suggestions":a.headerKey,clearable:"",placeholder:"请输入参数名"},null,8,["modelValue","onUpdate:modelValue","fetch-suggestions"])]),value:d(({$index:c,row:l})=>[r(u,{modelValue:l.value,"onUpdate:modelValue":n=>l.value=n,clearable:"",placeholder:"请输入参数值"},null,8,["modelValue","onUpdate:modelValue"])]),desc:d(({$index:c,row:l})=>[r(u,{modelValue:l.desc,"onUpdate:modelValue":n=>l.desc=n,clearable:"",placeholder:"请输入描述"},null,8,["modelValue","onUpdate:modelValue"])]),operationHeader:d(()=>[r(h,{icon:"Plus",size:"small",circle:"",onClick:a.addRow},null,8,["onClick"])]),operation:d(({$index:c,row:l})=>[r(h,{icon:"Delete",size:"small",circle:"",onClick:n=>a.delRow(c,l)},null,8,["onClick"])]),_:1},16,["defaultSelectionKey","db","onSelectionChange"])}const x=g(V,[["render",b]]);export{x as H};
