import{A as k}from"./ApiTable.gZ2cokSO.js";import{f as g,g as C,t as j}from"../../util/request.utils.Cc8QJvHY.js";import{J as A}from"./Java2Api.CojP8dLI.js";import{r as J}from"../../../../../stores/request.server.OPoUfqQ8.js";import{s as x}from"../../../../../pinia.DPawhP_y.js";import{e as n,r as s,a as f,l as c,w as a,F as S,o as m,f as p,c as b,d as w}from"../../../../../vue.CpRb0aFL.js";import{_ as U}from"../../../../../components/address/S3Address.BvGSUWFm.js";const T={name:"Body",components:{Java2Api:A,ApiTable:k},setup(){const{isShare:o,apiDetail:e}=x(J());return{isShare:o,apiDetail:e}},emits:["updateApi","uploadFileChange"],props:{},data(){return{showDocument:!1,showView:!1,jsonView:void 0,analysisJavaDocument:!1}},computed:{typeOptions(){return this.isUrlEncoded?["String","Number","Boolean","List"]:["String","Number","Boolean","File","List"]},isApplication(){return["application/json","application/xml"].includes(this.bodyType)},isUrlEncoded(){return this.bodyType==="application/x-www-form-urlencoded"},bodyType:{get(){return this.apiDetail.config.bodyType||"application/json"},set(o){this.apiDetail.config.bodyType=o}},bodyDocument:{get(){return this.apiDetail.config.bodyDocument||(this.apiDetail.config.bodyDocument=[]),this.apiDetail.config.bodyDocument},set(o){this.apiDetail.config.bodyDocument=o}},bodyParams:{get(){return this.apiDetail.config.urlBodyDocument||(this.apiDetail.config.urlBodyDocument=[]),this.apiDetail.config.formBodyDocument||(this.apiDetail.config.formBodyDocument=[]),this.isUrlEncoded?this.apiDetail.config.urlBodyDocument:this.apiDetail.config.formBodyDocument},set(o){this.isUrlEncoded?this.apiDetail.config.urlBodyDocument=o:this.apiDetail.config.formBodyDocument=o}}},watch:{},created(){},mounted(){},methods:{formatJson:g,analysisSuccess(o){this.apiDetail.config.bodyDocument=o},uploadFileChange(o,e){this.$emit("uploadFileChange",o,e)},headerCellRenderer(o){const e=()=>{let d=j(o);o.length===1&&o[0].type==="List"&&!o[0].key&&(d=d[Object.keys(d)[0]]),this.jsonView=d,this.showView=!0};return n(s("el-button"),{icon:"View",size:"small",circle:!0,onClick:e},null)},toBodyParam(){let o=C(this.apiDetail.config.bodyDocument);const e=Object.keys(o);e.length===1&&e[0]===""&&(o=o[""]),this.apiDetail.config.queryBody=g(o)},updateApi(){this.$emit("updateApi",!0)}}},O={class:"body"},P={class:"content-type"},F={class:"body-wrapper"},q={key:0,class:"type json_xml"},N={class:"content-wrapper"},z={class:"operation desc"},E={key:1,class:"type form-data_url-encoded"};function R(o,e,d,r,l,i){const y=s("el-radio"),V=s("el-radio-group"),u=s("el-button"),_=s("el-input"),D=s("api-table"),B=s("Java2Api"),h=s("el-drawer"),v=s("s3-json");return m(),f(S,null,[c("div",O,[c("div",P,[n(V,{modelValue:i.bodyType,"onUpdate:modelValue":e[0]||(e[0]=t=>i.bodyType=t)},{default:a(()=>[n(y,{label:"json",value:"application/json"}),n(y,{label:"form-data",value:"multipart/form-data"}),n(y,{label:"urlencoded",value:"application/x-www-form-urlencoded"})]),_:1},8,["modelValue"])]),c("div",F,[i.isApplication?(m(),f("div",q,[c("div",N,[n(u,{class:"operation beautiful",icon:"S3DataObject",text:"",size:"small",onClick:e[1]||(e[1]=t=>r.apiDetail.config.queryBody=i.formatJson(r.apiDetail.config.queryBody))},{default:a(()=>[p("点击美化")]),_:1}),c("div",z,[n(u,{class:"document-desc",icon:"ArrowDown",text:"",size:"small",onClick:e[2]||(e[2]=t=>l.showDocument=!0)},{default:a(()=>[p("字段描述")]),_:1})]),n(_,{class:"json-body",type:"textarea",resize:"none",placeholder:"请输入参数,也可通过字段描述生成参数模版",modelValue:r.apiDetail.config.queryBody,"onUpdate:modelValue":e[3]||(e[3]=t=>r.apiDetail.config.queryBody=t)},null,8,["modelValue"])])])):(m(),f("div",E,[n(D,{modelValue:i.bodyParams,"onUpdate:modelValue":e[4]||(e[4]=t=>i.bodyParams=t),typeOptions:i.typeOptions,"setting-value":"","setting-check":"",onFileChange:i.uploadFileChange,"header-cell-renderer":i.headerCellRenderer},null,8,["modelValue","typeOptions","onFileChange","header-cell-renderer"])]))])]),n(h,{modelValue:l.showDocument,"onUpdate:modelValue":e[8]||(e[8]=t=>l.showDocument=t),title:"Request Body Params Document",size:"70%"},{footer:a(()=>[n(u,{icon:"Pointer",type:"primary",onClick:i.toBodyParam},{default:a(()=>[p("To Body Param")]),_:1},8,["onClick"]),r.isShare?w("",!0):(m(),b(u,{key:0,icon:"Pointer",type:"primary",onClick:e[7]||(e[7]=t=>l.analysisJavaDocument=!0)},{default:a(()=>[p("Analysis Java Document With Swagger")]),_:1})),r.isShare?w("",!0):(m(),b(u,{key:1,icon:"Edit",type:"primary",onClick:i.updateApi},{default:a(()=>[p("更新API")]),_:1},8,["onClick"]))]),default:a(()=>[n(D,{modelValue:i.bodyDocument,"onUpdate:modelValue":e[5]||(e[5]=t=>i.bodyDocument=t),"setting-value":"","setting-check":"","header-cell-renderer":i.headerCellRenderer},null,8,["modelValue","header-cell-renderer"]),n(B,{modelValue:l.analysisJavaDocument,"onUpdate:modelValue":e[6]||(e[6]=t=>l.analysisJavaDocument=t),onAnalysisSuccess:i.analysisSuccess},null,8,["modelValue","onAnalysisSuccess"])]),_:1},8,["modelValue"]),n(h,{modelValue:l.showView,"onUpdate:modelValue":e[10]||(e[10]=t=>l.showView=t),title:"Request Body Document View",size:"50%"},{default:a(()=>[n(v,{modelValue:l.jsonView,"onUpdate:modelValue":e[9]||(e[9]=t=>l.jsonView=t),showLineNumber:"",showLength:"",showLine:"",showIcon:""},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}const Q=U(T,[["render",R],["__scopeId","data-v-28f652e4"]]);export{Q as B};
