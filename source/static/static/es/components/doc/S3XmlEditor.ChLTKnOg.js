import{g as l}from"../../antlr4.BZgrZd6q.js";import{r as c}from"../../codemirror.O9_Z2ATe.js";import{m as u}from"./mybatis-3-mapper.Dln2i63Z.js";import{s as d}from"../../resources/global/global.util.CdGU-cda.js";import{_ as h}from"../address/S3Address.C-l0MtE3.js";import{a as m,o as p,A as g}from"../../vue.B9VI7CMM.js";import"../../js.DlQi3gKf.js";import"../../md5.DCeuUgf6.js";import"../../charenc.DHEmDxqN.js";import"../../mitt.C1xD_ZTF.js";var f=c();const a=l(f),A={name:"S3XmlEditor",components:{},setup(){return{}},emits:["update:modelValue"],props:{modelValue:{type:String,default:void 0}},data(){return{editor:void 0,changeValue:void 0}},computed:{},watch:{modelValue(e,t){e!==this.changeValue&&this.editor.setValue(e)}},created(){},mounted(){const e=navigator.userAgent.toUpperCase().indexOf("MAC")>=0?"Cmd-/":"Ctrl-/",t={"'<'":this.completeAfter,"'/'":this.completeIfAfterLt,"' '":this.completeIfInTag,"'='":this.completeIfInTag,Enter:this.onEnterKey,[e]:this.addNotes},r={lineNumbers:!0,mode:"xml",hintOptions:{schemaInfo:u},line:!0,autoRefresh:!0,matchTags:!0,autoCloseTags:!0,matchBrackets:!0,autoCloseBrackets:!0,scrollbarStyle:"overlay",extraKeys:t};this.editor=g(a.fromTextArea(document.querySelector(".editor"),r)),this.editor.on("change",(n,o)=>{this.changeValue=n.getValue(),this.$emit("update:modelValue",this.changeValue)})},methods:{addNotes(e){let t=e.getSelection(),r=e.getCursor();if(t){const{sticky:n,line:o,ch:s}=r;n==="before"?e.replaceRange("<!--"+t+"-->",{line:o,ch:s-t.length},{line:o,ch:s}):(console.log(r),e.replaceRange("<!--"+t+"-->",{line:o,ch:s},{line:o,ch:s+t.length}))}else{let n=e.getLine(r.line),o=n.replace(/^\s*/,""),s=n.length-o.length,i=n.length;e.replaceRange("<!-- "+o+" -->",{line:r.line,ch:s},{line:r.line,ch:i})}},onEnterKey(e){const t=e.getCursor(),n=e.getLine(t.line).match(/^\s*/),o=n?n[0]:"";e.replaceSelection(`
`+o)},completeAfter(e,t){return(!t||t())&&d(.1).then(()=>{e.state.completionActive||e.showHint({completeSingle:!1})}),a.Pass},completeIfAfterLt(e){return this.completeAfter(e,function(){const t=e.getCursor();return e.getRange(a.Pos(t.line,t.ch-1),t)==="<"})},completeIfInTag(e){return this.completeAfter(e,function(){const t=e.getTokenAt(e.getCursor());return t.type==="string"&&(!/['"]/.test(t.string.charAt(t.string.length-1))||t.string.length===1)?!1:a.innerMode(e.getMode(),t.state).state.tagName})}}},C=["value"];function _(e,t,r,n,o,s){return p(),m("textarea",{class:"editor",value:r.modelValue},null,8,C)}const b=h(A,[["render",_],["__scopeId","data-v-673735f8"]]);export{b as default};
