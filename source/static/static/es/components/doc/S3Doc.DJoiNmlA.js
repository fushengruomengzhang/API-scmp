/* empty css                  */import{C as m}from"../../clipboard.CwJjsxQO.js";import{M as p,m as l}from"../../marked.ltjiQ46A.js";import{H as u}from"../../highlight.js.CD_0TQPE.js";import{m as h}from"../../mermaid.D5FSNNnY.js";import{s as d}from"../../resources/util/snowflake.util.CMOmz3k-.js";import{_ as f}from"../address/S3Address.C-l0MtE3.js";import{a as n,o as a,F as b,h as g}from"../../vue.B9VI7CMM.js";import"../../antlr4.BZgrZd6q.js";import"../~.s3.async.component.O1G2Xm4Y.js";import"../../ts.DrFu-skq.js";import"../../d3.VU1C23MO.js";import"../../internmap.BkD7Hj8s.js";import"../../dompurify.9JUW7zMc.js";import"../../lodash.upQstwhh.js";import"../../stylis.D5iaQeiq.js";import"../../dagre.DrPo0jM0.js";import"../../braintree.BFSf0DSq.js";import"../../khroma.DUX6PT6k.js";import"../../uuid.DhYbOkY1.js";import"../../dayjs.CxxaZqGC.js";import"../../roughjs.GtHDBO_d.js";import"../../cytoscape.BwIgsNAT.js";import"../../cose.CA2Ucdfy.js";import"../../layout.DGNllAE7.js";import"../../iconify.D2F_yRRF.js";import"../../langium.yDuz4026.js";import"../../vscode.DJE3O7dW.js";import"../../chevrotain.DZQNtDzk.js";import"../../resources/util/machine.code.util.H1Gamunq.js";import"../../resources/util/crypto.util.De05Bpu1.js";import"../../crypto.tqJ8oQci.js";import"../../mitt.C1xD_ZTF.js";const y={name:"doc",components:{},emits:[],props:{content:{type:[String,Object,Array]},analysisContent:{type:Function,default:void 0}},data(){return{marked:void 0,observer:void 0,docNode:void 0,clipboard:void 0,clipboardContent:void 0,key:d()}},computed:{contentDetail(){let t=this.content;return t instanceof Array?t.map(e=>this.marked.parse(this.buildContent(e))):[this.marked.parse(this.buildContent(t))]}},created(){this.marked=new p(l({langPrefix:"hljs language-",highlight(t,e,i){if(e==="mermaid"){const o=`mermaid-${d()}`;return h.render(`svg-${o}`,t).then(({svg:s})=>document.getElementById(o).innerHTML=s),`<div class="mermaid" id="${o}"></div>`}return u.highlightAuto(t,e?[e]:void 0).value}}))},mounted(){if(this.docNode=this.$refs.s3Doc,!(this.docNode instanceof Node))debugger;this.docNode instanceof Node&&(this.addButton(this.docNode),this.observer=new MutationObserver(t=>this.mutationCallback(t)),this.observer.observe(this.docNode,{childList:!0,subtree:!0}),this.clipboard=new m(`.copy-doc_${this.key}`,{text:t=>this.clipboardContent}),this.clipboard.on("success",t=>this.$message({type:"success",showClose:!0,message:"内容已复制",center:!0})))},beforeUnmount(){this.clipboard&&this.clipboard.destroy()},methods:{buildContent(t){return this.analysisContent?this.analysisContent(t):(t=t||"",t instanceof Object||typeof t=="object"?"```json\n"+JSON.stringify(t,null,2)+"\n```":typeof t!="string"?"```\n"+t+"\n```":t)},mutationCallback(t){t.forEach(e=>e.addedNodes.forEach(i=>this.addButton(i)))},addButton(t){if(!t||t.classList.contains("copy-doc"))return;const e=["code.language-js","code.language-html","code.language-json"],i=t.querySelectorAll(e.join(","));!i||i.length<=0||i.forEach(o=>{let s=o.parentNode;if(!s.classList.contains("has-copy-doc")){s.classList.add("has-copy-doc");const r=document.createElement("button");r.classList.add("copy-doc"),r.classList.add(`copy-doc_${this.key}`),r.textContent="复制",s.insertBefore(r,o),r.addEventListener("click",()=>this.copyDoc(o))}})},copyDoc(t){this.clipboardContent=t.textContent}}},_={class:"s3-doc",ref:"s3Doc"},C=["innerHTML"];function k(t,e,i,o,s,r){return a(),n("div",_,[(a(!0),n(b,null,g(r.contentDetail,c=>(a(),n("div",{innerHTML:c,class:"content"},null,8,C))),256))],512)}const et=f(y,[["render",k],["__scopeId","data-v-e89e1b44"]]);export{et as default};
