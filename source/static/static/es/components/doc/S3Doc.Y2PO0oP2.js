/* empty css                  */import{a as r,o as a,F as l,h as u,C as h,M as f,q as p,s as m,H as b}from"../../.store.ssRjOe-B.js";import{s as d}from"../../resources/util/snowflake.util.BS7FKuq4.js";import{_ as g}from"../address/S3Address.Dp8cFelg.js";import"../../resources/util/machine.code.util.D8YEvaCo.js";import"../../resources/util/crypto.util.C7ecaPji.js";const y={name:"doc",components:{},emits:[],props:{content:{type:[String,Object,Array]},analysisContent:{type:Function,default:void 0}},data(){return{marked:void 0,observer:void 0,docNode:void 0,clipboard:void 0,clipboardContent:void 0,key:d()}},computed:{contentDetail(){let e=this.content;return e instanceof Array?e.map(t=>this.marked.parse(this.buildContent(t))):[this.marked.parse(this.buildContent(e))]}},created(){this.marked=new f(p({langPrefix:"hljs language-",highlight(e,t,n){if(t==="mermaid"){const s=`mermaid-${d()}`;return m.render(`svg-${s}`,e).then(({svg:i})=>document.getElementById(s).innerHTML=i),`<div class="mermaid" id="${s}"></div>`}return b.highlightAuto(e).value}}))},mounted(){if(this.docNode=this.$refs.s3Doc,!(this.docNode instanceof Node))debugger;this.docNode instanceof Node&&(this.addButton(this.docNode),this.observer=new MutationObserver(e=>this.mutationCallback(e)),this.observer.observe(this.docNode,{childList:!0,subtree:!0}),this.clipboard=new h(`.copy-doc_${this.key}`,{text:e=>this.clipboardContent}),this.clipboard.on("success",e=>this.$message({type:"success",showClose:!0,message:"内容已复制",center:!0})))},beforeUnmount(){this.clipboard&&this.clipboard.destroy()},methods:{buildContent(e){return this.analysisContent?this.analysisContent(e):(e=e||"",e instanceof Object||typeof e=="object"?"```json\n"+JSON.stringify(e,null,2)+"\n```":typeof e!="string"?"```\n"+e+"\n```":e)},mutationCallback(e){e.forEach(t=>t.addedNodes.forEach(n=>this.addButton(n)))},addButton(e){if(!e||e.classList.contains("copy-doc"))return;const t=["code.language-js","code.language-html","code.language-json"],n=e.querySelectorAll(t.join(","));!n||n.length<=0||n.forEach(s=>{let i=s.parentNode;if(!i.classList.contains("has-copy-doc")){i.classList.add("has-copy-doc");const o=document.createElement("button");o.classList.add("copy-doc"),o.classList.add(`copy-doc_${this.key}`),o.textContent="复制",i.insertBefore(o,s),o.addEventListener("click",()=>this.copyDoc(s))}})},copyDoc(e){this.clipboardContent=e.textContent}}},_={class:"s3-doc",ref:"s3Doc"},C=["innerHTML"];function k(e,t,n,s,i,o){return a(),r("div",_,[(a(!0),r(l,null,u(o.contentDetail,c=>(a(),r("div",{innerHTML:c,class:"content"},null,8,C))),256))],512)}const B=g(y,[["render",k],["__scopeId","data-v-f6ab505b"]]);export{B as default};
