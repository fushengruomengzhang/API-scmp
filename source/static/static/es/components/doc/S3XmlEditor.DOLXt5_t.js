import{g as i}from"../../antlr4.BZgrZd6q.js";import{r as c}from"../../codemirror.O9_Z2ATe.js";import{m as u}from"./mybatis-3-mapper.Dln2i63Z.js";import{s as d}from"../../resources/global/global.util.CrvsVFo3.js";import{_ as h}from"../address/S3Address.BvGSUWFm.js";import{a as g,o as m,y as f}from"../../vue.CpRb0aFL.js";var p=c();const a=i(p),_={name:"S3XmlEditor",components:{},setup(){return{}},emits:["update:modelValue"],props:{modelValue:{type:String,default:void 0}},data(){return{editor:void 0,changeValue:void 0}},computed:{},watch:{modelValue(e,t){e!==this.changeValue&&this.editor.setValue(e)}},created(){},mounted(){const e=navigator.userAgent.toUpperCase().indexOf("MAC")>=0?"Cmd-/":"Ctrl-/",t={"'<'":this.completeAfter,"'/'":this.completeIfAfterLt,"' '":this.completeIfInTag,"'='":this.completeIfInTag,Enter:this.onEnterKey,[e]:this.addNotes},r={lineNumbers:!0,mode:"xml",hintOptions:{schemaInfo:u},line:!0,autoRefresh:!0,matchTags:!0,autoCloseTags:!0,matchBrackets:!0,autoCloseBrackets:!0,scrollbarStyle:"overlay",extraKeys:t};this.editor=f(a.fromTextArea(document.querySelector(".editor"),r)),this.editor.on("change",(n,o)=>{this.changeValue=n.getValue(),this.$emit("update:modelValue",this.changeValue)})},methods:{addNotes(e){let t=e.getSelection(),r=e.getCursor();if(t){const{sticky:n,line:o,ch:s}=r;n==="before"?e.replaceRange("<!--"+t+"-->",{line:o,ch:s-t.length},{line:o,ch:s}):(console.log(r),e.replaceRange("<!--"+t+"-->",{line:o,ch:s},{line:o,ch:s+t.length}))}else{let n=e.getLine(r.line),o=n.replace(/^\s*/,""),s=n.length-o.length,l=n.length;e.replaceRange("<!-- "+o+" -->",{line:r.line,ch:s},{line:r.line,ch:l})}},onEnterKey(e){const t=e.getCursor(),n=e.getLine(t.line).match(/^\s*/),o=n?n[0]:"";e.replaceSelection(`
`+o)},completeAfter(e,t){return(!t||t())&&d(.1).then(()=>{e.state.completionActive||e.showHint({completeSingle:!1})}),a.Pass},completeIfAfterLt(e){return this.completeAfter(e,function(){const t=e.getCursor();return e.getRange(a.Pos(t.line,t.ch-1),t)==="<"})},completeIfInTag(e){return this.completeAfter(e,function(){const t=e.getTokenAt(e.getCursor());return t.type==="string"&&(!/['"]/.test(t.string.charAt(t.string.length-1))||t.string.length===1)?!1:a.innerMode(e.getMode(),t.state).state.tagName})}}},y=["value"];function C(e,t,r,n,o,s){return m(),g("textarea",{class:"editor",value:r.modelValue},null,8,y)}const x=h(_,[["render",C],["__scopeId","data-v-673735f8"]]),T=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"}));export{a as C,T as S};
