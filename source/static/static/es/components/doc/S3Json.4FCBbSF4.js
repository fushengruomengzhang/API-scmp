import{x as b,y as w,r as d,z as F,a as s,o as t,j,e as c,f as _,w as p,l as i,d as o,A as N,t as a,F as h,h as v,c as B,B as I,b as O,n as W,m as X,X as z,D as E}from"../../.store.ssRjOe-B.js";import{c as H,j as f,x as J,i as A}from"./util/json.util.CqIYAU-a.js";import{_ as L}from"../address/S3Address.Dp8cFelg.js";const $={name:"S3Json",components:{DynamicScroller:w,DynamicScrollerItem:b},setup(){return{}},emits:[],props:{modelValue:{type:[Object,Array,String],default:void 0},formatKey:{type:Function,default:n=>{}},formatContent:{type:Function,default:n=>{}},deep:{type:Number,default:0}},data(){return{hiddenPaths:{},clipboardOptions:{getElement:n=>n,options:{text:n=>JSON.stringify(this.modelValue,null,2)},onSuccess:n=>this.$message({type:"success",showClose:!0,message:"内容已复制",center:!0})},xmlParser:new E({ignoreAttributes:!1})}},computed:{isXml(){return this.modelValue&&typeof this.modelValue=="string"&&z.validate(this.modelValue)===!0},allHiddenPaths(){const n=this.deep>0?A(this.deep,this.allItems):{};return Object.assign(this.hiddenPaths,n)},allItems(){if(this.modelValue&&typeof this.modelValue=="string")try{return f(JSON.parse(this.modelValue))}catch{if(this.isXml)try{return J(this.xmlParser.parse(this.modelValue))}catch{}}return f(this.modelValue)},items(){return H(this.allItems,this.allHiddenPaths)},maxDigits(){return String(this.allItems.length).length+"ch"}},watch:{},created(){},mounted(){},methods:{onFoldClick(n,u,k,g){this.hiddenPaths[n.path]=!this.hiddenPaths[n.path]}}},M={class:"s3-json"},K={class:"copy-content-button"},R={class:"line-indent"},T={class:"line-indent-unit"},q=["onClick"],G=["data-type"],Q={key:0,class:"key-start"},U={class:"key"},Y={key:1,class:"key-properties"},Z={class:"property"},ee={class:"property-k"},te={class:"property-v"},se={key:2,class:"key-end"},ne=["data-type"],ae={class:"line-content-wrapper"},oe={key:0,class:"line-comma"},ie={key:2,class:"line-comment"};function le(n,u,k,g,S,l){const C=d("el-icon"),V=d("dynamic-scroller-item"),x=d("DynamicScroller"),P=F("copy");return t(),s("div",M,[j((t(),s("button",K,[_("复制")])),[[P,S.clipboardOptions]]),c(x,{class:"virtual-json-wrapper",items:l.items,"min-item-size":20},{default:p(({item:e,index:m,active:y})=>[c(V,{class:"virtual-json-item",item:e,index:m,active:y},{default:p(()=>[i("div",{class:"line-number",style:N({minWidth:l.maxDigits})},a(e._index),5),i("div",R,[(t(!0),s(h,null,v(e.level+1,r=>(t(),s("div",T))),256)),e.type.endsWith("Start")||e.type.endsWith("Collapsed")?(t(),s("div",{key:0,class:"line-fold-icon",onClick:r=>l.onFoldClick(e,m,y,r)},[c(C,null,{default:p(()=>[(t(),B(I(e.type.endsWith("Start")?"CaretBottom":"CaretRight")))]),_:2},1024)],8,q)):o("",!0)]),e.key?(t(),s("div",{key:0,class:"line-key","data-type":e.type},[e.keyStart?(t(),s("div",Q,a(e.keyStart),1)):o("",!0),i("div",U,a(e.key)+a(l.isXml?"":":"),1),e.properties?(t(),s("div",Y,[(t(!0),s(h,null,v(e.properties,({k:r,v:D})=>(t(),s("div",Z,[i("div",ee,a(r),1),i("div",te,'="'+a(D)+'"',1)]))),256))])):o("",!0),e.keyEnd?(t(),s("div",se,a(e.keyEnd),1)):o("",!0)],8,G)):o("",!0),e.type.startsWith("element")?o("",!0):(t(),s("div",{key:1,class:"line-content","data-type":e.type},[i("div",ae,[n.$slots.value?O(n.$slots,"value",W(X({key:0},e)),void 0,!0):(t(),s(h,{key:1},[_(a(String(e.content)),1)],64))]),e.showComma?(t(),s("div",oe,",")):o("",!0)],8,ne)),e.type.endsWith("Collapsed")&&e.length?(t(),s("div",ie,"// "+a(e.length)+" items",1)):o("",!0)]),_:2},1032,["item","index","active"])]),_:3},8,["items"])])}const pe=L($,[["render",le],["__scopeId","data-v-a9516ff9"]]);export{pe as default};
