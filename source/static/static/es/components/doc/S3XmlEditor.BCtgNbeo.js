import{G as i,I as c,a as u,o as d,J as h}from"../../.store.ssRjOe-B.js";import{m as g}from"./mybatis-3-mapper.Dln2i63Z.js";import{s as p}from"../../resources/global/global.util.BDToHPEB.js";import{_ as f}from"../address/S3Address.Dp8cFelg.js";var m=c();const a=i(m),_={name:"S3XmlEditor",components:{},setup(){return{}},emits:["update:modelValue"],props:{modelValue:{type:String,default:void 0}},data(){return{editor:void 0,changeValue:void 0}},computed:{},watch:{modelValue(e,t){e!==this.changeValue&&this.editor.setValue(e)}},created(){},mounted(){const e=navigator.userAgent.toUpperCase().indexOf("MAC")>=0?"Cmd-/":"Ctrl-/",t={"'<'":this.completeAfter,"'/'":this.completeIfAfterLt,"' '":this.completeIfInTag,"'='":this.completeIfInTag,Enter:this.onEnterKey,[e]:this.addNotes},n={lineNumbers:!0,mode:"xml",hintOptions:{schemaInfo:g},line:!0,autoRefresh:!0,matchTags:!0,autoCloseTags:!0,matchBrackets:!0,autoCloseBrackets:!0,scrollbarStyle:"overlay",extraKeys:t};this.editor=h(a.fromTextArea(document.querySelector(".editor"),n)),this.editor.on("change",(r,o)=>{this.changeValue=r.getValue(),this.$emit("update:modelValue",this.changeValue)})},methods:{addNotes(e){let t=e.getSelection(),n=e.getCursor();if(t){const{sticky:r,line:o,ch:s}=n;r==="before"?e.replaceRange("<!--"+t+"-->",{line:o,ch:s-t.length},{line:o,ch:s}):(console.log(n),e.replaceRange("<!--"+t+"-->",{line:o,ch:s},{line:o,ch:s+t.length}))}else{let r=e.getLine(n.line),o=r.replace(/^\s*/,""),s=r.length-o.length,l=r.length;e.replaceRange("<!-- "+o+" -->",{line:n.line,ch:s},{line:n.line,ch:l})}},onEnterKey(e){const t=e.getCursor(),r=e.getLine(t.line).match(/^\s*/),o=r?r[0]:"";e.replaceSelection(`
`+o)},completeAfter(e,t){return(!t||t())&&p(.1).then(()=>{e.state.completionActive||e.showHint({completeSingle:!1})}),a.Pass},completeIfAfterLt(e){return this.completeAfter(e,function(){const t=e.getCursor();return e.getRange(a.Pos(t.line,t.ch-1),t)==="<"})},completeIfInTag(e){return this.completeAfter(e,function(){const t=e.getTokenAt(e.getCursor());return t.type==="string"&&(!/['"]/.test(t.string.charAt(t.string.length-1))||t.string.length===1)?!1:a.innerMode(e.getMode(),t.state).state.tagName})}}},C=["value"];function y(e,t,n,r,o,s){return d(),u("textarea",{class:"editor",value:n.modelValue},null,8,C)}const I=f(_,[["render",y],["__scopeId","data-v-bcd1e168"]]),b=Object.freeze(Object.defineProperty({__proto__:null,default:I},Symbol.toStringTag,{value:"Module"}));export{a as C,b as S};
