import{l as o}from"../../monaco.BQK-zRGo.js";import{d}from"../../resources/global/global.util.CdGU-cda.js";import{_ as a}from"../address/S3Address.C-l0MtE3.js";import{a as r,o as n,A as i}from"../../vue.B9VI7CMM.js";import"../../state.BBNhjlcY.js";import"../../js.DlQi3gKf.js";import"../../md5.DCeuUgf6.js";import"../../charenc.DHEmDxqN.js";import"../../mitt.C1xD_ZTF.js";const m={name:"S3MonacoEditor",components:{},setup(){return{}},emits:["update:modelValue"],props:{modelValue:{type:String,default:void 0},config:{type:Object,default:{}}},data(){return{editor:void 0,content:void 0,model:void 0}},computed:{},watch:{modelValue(e,t){this.model&&e!==this.content&&!this.model.isDisposed()&&this.model.setValue(e||"")}},created(){},mounted(){window.MonacoEnvironment={getWorkerUrl:(e,t)=>`monaco-editor/min/vs/base/worker/${e}#${t}`},o.config({"vs/nls":{availableLanguages:{"*":"zh-cn"}},"vs/css":{disabled:!0},paths:{vs:"monaco-editor/min/vs"}}),o.init().then(this.initEditor)},beforeUnmount(){try{this.editor&&this.editor.dispose()}catch{}try{this.model&&this.model.dispose()}catch{}},methods:{initEditor(e){const t={automaticLayout:!0,...this.config,value:""};this.editor=i(e.editor.create(this.$refs.monacoEditor,t)),this.model=i(this.editor.getModel()),requestIdleCallback(()=>this.modelValue?this.model.setValue(this.modelValue):void 0),this.editor.onDidChangeModelContent(d(s=>{!this.model.isDisposed()&&this.$emit("update:modelValue",this.content=this.model.getValue())},.05))}}},l={ref:"monacoEditor",class:"monaco-editor-wrapper"};function c(e,t,s,p,h,u){return n(),r("div",l,null,512)}const w=a(m,[["render",c],["__scopeId","data-v-994e842f"]]);export{w as default};
