import{s as b,q as w,r as d,x as F,a as s,o as t,j,e as c,f as _,w as p,l as i,d as o,y as N,t as a,F as h,h as v,c as I,z as O,b as W,n as X,m as B}from"../../vue.B9VI7CMM.js";import{X as z,a as E}from"../../fast.BdNB5PJp.js";import{c as H,j as f,x as J,i as L}from"./util/json.util.CqIYAU-a.js";import{_ as $}from"../address/S3Address.C-l0MtE3.js";import"../../mitt.C1xD_ZTF.js";import"../../strnum.BeYG5Btc.js";const A={name:"S3Json",components:{DynamicScroller:w,DynamicScrollerItem:b},setup(){return{}},emits:[],props:{modelValue:{type:[Object,Array,String],default:void 0},formatKey:{type:Function,default:n=>{}},formatContent:{type:Function,default:n=>{}},deep:{type:Number,default:0}},data(){return{hiddenPaths:{},clipboardOptions:{getElement:n=>n,options:{text:n=>String(JSON.stringify(this.modelValue,null,2))},onSuccess:n=>this.$message({type:"success",showClose:!0,message:"内容已复制",center:!0})},xmlParser:new E({ignoreAttributes:!1})}},computed:{isXml(){return this.modelValue&&typeof this.modelValue=="string"&&z.validate(this.modelValue)===!0},allHiddenPaths(){const n=this.deep>0?L(this.deep,this.allItems):{};return Object.assign(this.hiddenPaths,n)},allItems(){if(this.modelValue&&typeof this.modelValue=="string")try{return f(JSON.parse(this.modelValue))}catch{if(this.isXml)try{return J(this.xmlParser.parse(this.modelValue))}catch{}}return f(this.modelValue)},items(){return H(this.allItems,this.allHiddenPaths)},maxDigits(){return String(this.allItems.length).length+"ch"}},watch:{},created(){},mounted(){},methods:{onFoldClick(n,u,k,g){this.hiddenPaths[n.path]=!this.hiddenPaths[n.path]}}},M={class:"s3-json"},q={class:"copy-content-button"},K={class:"line-indent"},R={class:"line-indent-unit"},T=["onClick"],G=["data-type"],Q={key:0,class:"key-start"},U={class:"key"},Y={key:1,class:"key-properties"},Z={class:"property"},ee={class:"property-k"},te={class:"property-v"},se={key:2,class:"key-end"},ne=["data-type"],ae={class:"line-content-wrapper"},oe={key:0,class:"line-comma"},ie={key:2,class:"line-comment"};function re(n,u,k,g,S,r){const C=d("el-icon"),V=d("dynamic-scroller-item"),x=d("DynamicScroller"),P=F("copy");return t(),s("div",M,[j((t(),s("button",q,[_("复制")])),[[P,S.clipboardOptions]]),c(x,{class:"virtual-json-wrapper",items:r.items,"min-item-size":20},{default:p(({item:e,index:m,active:y})=>[c(V,{class:"virtual-json-item",item:e,index:m,active:y},{default:p(()=>[i("div",{class:"line-number",style:N({minWidth:r.maxDigits})},a(e._index),5),i("div",K,[(t(!0),s(h,null,v(e.level+1,l=>(t(),s("div",R))),256)),e.type.endsWith("Start")||e.type.endsWith("Collapsed")?(t(),s("div",{key:0,class:"line-fold-icon",onClick:l=>r.onFoldClick(e,m,y,l)},[c(C,null,{default:p(()=>[(t(),I(O(e.type.endsWith("Start")?"CaretBottom":"CaretRight")))]),_:2},1024)],8,T)):o("",!0)]),e.key?(t(),s("div",{key:0,class:"line-key","data-type":e.type},[e.keyStart?(t(),s("div",Q,a(e.keyStart),1)):o("",!0),i("div",U,a(e.key)+a(r.isXml?"":":"),1),e.properties?(t(),s("div",Y,[(t(!0),s(h,null,v(e.properties,({k:l,v:D})=>(t(),s("div",Z,[i("div",ee,a(l),1),i("div",te,'="'+a(D)+'"',1)]))),256))])):o("",!0),e.keyEnd?(t(),s("div",se,a(e.keyEnd),1)):o("",!0)],8,G)):o("",!0),e.type.startsWith("element")?o("",!0):(t(),s("div",{key:1,class:"line-content","data-type":e.type},[i("div",ae,[n.$slots.value?W(n.$slots,"value",X(B({key:0},e)),void 0,!0):(t(),s(h,{key:1},[_(a(String(e.content)),1)],64))]),e.showComma?(t(),s("div",oe,",")):o("",!0)],8,ne)),e.type.endsWith("Collapsed")&&e.length?(t(),s("div",ie,"// "+a(e.length)+" items",1)):o("",!0)]),_:2},1032,["item","index","active"])]),_:3},8,["items"])])}const me=$(A,[["render",re],["__scopeId","data-v-99710491"]]);export{me as default};
