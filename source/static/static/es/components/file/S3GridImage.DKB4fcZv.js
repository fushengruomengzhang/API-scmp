import{a as m,d as c,o as r,F as l,h as d,K as _,A as p,u as z}from"../../.store.ssRjOe-B.js";import{_ as N}from"../address/S3Address.Dp8cFelg.js";const a={name:"S3GridImage",components:{},emits:[],props:{images:{type:Array,default:()=>[]},size:{type:Number,default:void 0},margin:{type:Number,default:1},buildFileUrl:{type:Function,default:void 0}},data(){return{imgNum:0,oneLineImgNum:0,miniSize:10,num:0,pSize:0,lineIndex:void 0}},computed:{size_(){return this.size||this.pSize},miniSize_(){return this.miniSize+"px"},margin_(){return this.margin+"px"}},created(){this.size&&this.generateGrid()},mounted(){if(!this.size){const{offsetHeight:e,offsetWidth:t}=this.$el.parentElement;this.pSize=Math.max(e,t),this.generateGrid()}},watch:{images(e,t){this.generateGrid()}},methods:{buildFileUrl_(e){return this.buildFileUrl?this.buildFileUrl(e):this.$minioUrl(e)},generateGrid(){if(!(!this.images||!this.images.length)&&(this.lineIndex=[],this.imgNum=this.images.length,this.num=new Array(this.imgNum).fill(0).map((e,t)=>t+1).filter(e=>e*e>=this.imgNum)[0],this.oneLineImgNum=this.imgNum===1?1:this.imgNum===this.num?this.num:this.imgNum%this.num,this.miniSize=this.num===1?this.size_-this.margin*2:(this.size_-this.margin*(this.num+1))/this.num,this.oneLineImgNum&&this.lineIndex.push(new Array(this.oneLineImgNum).fill(0).map((e,t)=>t)),this.imgNum-this.oneLineImgNum>0)){const e=new Array(this.imgNum-this.oneLineImgNum).fill(this.oneLineImgNum),t=i=>e.map((s,n)=>n>=this.num*i&&n<this.num*(i+1)?n+s:void 0).filter(s=>s!==void 0);new Array(this.num).fill([]).map((i,s)=>t(s)).filter(i=>i.length).forEach(i=>this.lineIndex.push(i))}}}},g=()=>{z(e=>({"31d2e764":e.miniSize_,"04ebe018":e.margin_}))},o=a.setup;a.setup=o?(e,t)=>(g(),o(e,t)):g;const I=["src","alt"];function x(e,t,i,s,n,f){return i.images&&i.images.length?(r(),m("div",{key:0,class:"s3-grid-image",style:p({width:i.size+"px",height:i.size+"px"})},[(r(!0),m(l,null,d(n.lineIndex,u=>(r(),m("div",{class:_(this.num===u.length?"line":"one-line-image")},[(r(!0),m(l,null,d(u,h=>(r(),m("img",{src:f.buildFileUrl_(i.images[h]),class:"img",alt:h},null,8,I))),256))],2))),256))],4)):c("",!0)}const b=N(a,[["render",x],["__scopeId","data-v-2b4f7ef9"]]);export{b as default};
