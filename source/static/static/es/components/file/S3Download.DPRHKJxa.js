import{D as d}from"../../resources/global/global.api.CrVXT8XL.js";import{_ as m}from"../address/S3Address.C-l0MtE3.js";import{r as c,c as n,d as u,o as r,w as p}from"../../vue.B9VI7CMM.js";import"../../mitt.C1xD_ZTF.js";const h={name:"S3Download",extends:{},mixins:[],components:{},emits:["update:modelValue"],props:{modelValue:{type:Boolean,default:!1},filePath:{type:String,default:void 0},type:{type:String,default:"line"},strokeWidth:{type:Number,default:20},download:{type:d,default:new d}},computed:{fileName(){return this.download.fileName},blobUrl(){return this.download.blobUrl},percentage(){return this.download.percentage}},watch:{modelValue(t,s){this.visible=t&&!!this.filePath,this.visible&&new Promise((e,l)=>this.download.download(this.filePath,e,l)).catch(e=>e instanceof Error?console.error(e):this.$message({message:e,type:"error"}))},visible(t,s){this.$emit("update:modelValue",t),t||this.download.cancel()}},data(){return{visible:!1}},created(){},methods:{loadingClick(){const t={title:"提示",type:"warning",distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"};this.$confirm("点击确定,取消下载",t).then(()=>this.visible=!1).catch(s=>{})}}};function g(t,s,e,l,w,a){const i=c("el-progress"),f=c("el-link");return a.percentage?(r(),n(f,{key:0,class:"s3-download",href:a.blobUrl,download:a.fileName,underline:!1},{default:p(()=>[e.type==="line"?(r(),n(i,{key:0,class:"s3-progress","text-inside":"",type:e.type,percentage:a.percentage,"stroke-width":e.strokeWidth,format:o=>o>=100?"点击保存":o+"%",statue:a.percentage<100?"":"success"},null,8,["type","percentage","stroke-width","format","statue"])):(r(),n(i,{key:1,class:"s3-progress",type:e.type,percentage:a.percentage,format:o=>o>=100?"点击保存":o+"%",statue:a.percentage<100?"":"success"},null,8,["type","percentage","format","statue"]))]),_:1},8,["href","download"])):u("",!0)}const x=m(h,[["render",g],["__scopeId","data-v-cb6b7e7f"]]);export{x as default};
