import{c as s}from"./global/global.constant.CwzRNmrL.js";import{l as d}from"../stores/user.server._hfIxA5e.js";import{s as c}from"../../../public.scmp.config.js";let n=c.baseUrl;function g(t,o,e={validatorFlag:void 0,dbFlag:void 0}){const i={flag:t,params:o,...e};return this.$http.post("select/findOne",i)}function p(t,o,e={pageNumber:0,pageSize:10,orders:[],validatorFlag:void 0,dbFlag:void 0}){const i={flag:t,params:o,...e};return this.$http.post("select/findForPage",i)}function f(t,o,e={validatorFlag:void 0,dbFlag:void 0}){const i={flag:t,params:o,...e};return this.$http.post("select/findAll",i)}function u(t,o,e={validatorFlag:void 0,dbFlag:void 0}){const i={flag:t,params:o,...e};return this.$http.post("edit/insert",i)}function b(t,o,e={validatorFlag:void 0,dbFlag:void 0}){const i={flag:t,params:o,...e};return this.$http.post("edit/update",i)}function h(t,o,e={validatorFlag:void 0,dbFlag:void 0}){const i={flag:t,params:o,...e};return this.$http.post("edit/del",i)}function m(t){const o=new FormData;return o.append("file",t),this.$http.post("operation/file/upload",o,{headers:{"Content-Type":"multipart/form-data"}})}function v(t){return this.$http.get("operation/file/delFile",{path:t})}function F(t,o){return new Promise((e,i)=>{const l=new XMLHttpRequest;l.open("POST",baseUrl+"/operation/file/download",!0),l.setRequestHeader("Content-Type","application/json"),l.responseType="blob",l.onload=function(){if(l.status===200){let a=window.URL.createObjectURL(l.response);const r=Object.assign(document.createElement("a"),{href:a,download:o});document.body.appendChild(r),r.click(),document.body.removeChild(r),e()}else i()},l.send(JSON.stringify({fileDetail:t,zipName:o}))})}const y=(t,o,e,i)=>{const l=localStorage.get(s.header.authorization);l||i();try{o("用户信息加载中"),d().setUser(JSON.parse(l)),e()}catch{localStorage.clear(),i()}},U={install:t=>{const o=t.config.globalProperties.$axios;t.config.globalProperties.$decryEncryAttempt=!0,t.config.globalProperties.$baseUrl=n,t.config.globalProperties.$http={get:(e,i,l)=>o.get(e,{params:i,...l,baseURL:n}),post:(e,i,l)=>o.post(e,i,{...l,baseURL:n}),put:(e,i,l)=>o.put(e,i,{...l,baseURL:n}),del:(e,i,l)=>o.delete(e,i,{...l,baseURL:n}),all:(...e)=>o.all(...e)},t.config.globalProperties.findOne=g,t.config.globalProperties.findForPage=p,t.config.globalProperties.findAll=f,t.config.globalProperties.save=u,t.config.globalProperties.update=b,t.config.globalProperties.delete=h,t.config.globalProperties.uploadFile=m,t.config.globalProperties.download=F,t.config.globalProperties.delFile=v}};export{U as H,y as l};
