import{g as d}from"./machine.code.util.D8YEvaCo.js";const h=function(){function e(t,i,r){if(this.twepoch=BigInt(1684822711e3),this.workerIdBits=BigInt(5),this.dataCenterIdBits=BigInt(5),this.maxWrokerId=BigInt(-1)^BigInt(-1)<<this.workerIdBits,this.maxDataCenterId=BigInt(-1)^BigInt(-1)<<this.dataCenterIdBits,this.sequenceBits=BigInt(12),this.workerIdShift=this.sequenceBits,this.dataCenterIdShift=this.sequenceBits+this.workerIdBits,this.timestampLeftShift=this.sequenceBits+this.workerIdBits+this.dataCenterIdBits,this.sequenceMask=BigInt(-1)^BigInt(-1)<<this.sequenceBits,this.lastTimestamp=BigInt(-1),this.workerId=BigInt(1),this.dataCenterId=BigInt(1),this.sequence=BigInt(0),this.workerId>this.maxWrokerId||this.workerId<0)throw new Error("_workerId must max than 0 and small than maxWrokerId-["+this.maxWrokerId+"]");if(this.dataCenterId>this.maxDataCenterId||this.dataCenterId<0)throw new Error("_dataCenterId must max than 0 and small than maxDataCenterId-["+this.maxDataCenterId+"]");this.workerId=BigInt(t),this.dataCenterId=BigInt(i),this.sequence=BigInt(r)}return e.prototype.tilNextMillis=function(t){let i=this.timeGen();for(;i<=t;)i=this.timeGen();return BigInt(i)},e.prototype.timeGen=function(){return BigInt(Date.now())},e.prototype.nextId=function(){let t=this.timeGen();if(t<this.lastTimestamp)throw new Error("Clock moved backwards. Refusing to generate id for "+(this.lastTimestamp-t));return this.lastTimestamp===t?(this.sequence=this.sequence+BigInt(1)&this.sequenceMask,this.sequence===BigInt(0)&&(t=this.tilNextMillis(this.lastTimestamp))):this.sequence=BigInt(0),this.lastTimestamp=t,t-this.twepoch<<this.timestampLeftShift|this.dataCenterId<<this.dataCenterIdShift|this.workerId<<this.workerIdShift|this.sequence},e}();var n;let s=(n=window.snowflake)==null?void 0:n.instance;var a;let I=(a=window.snowflake)==null?void 0:a.defaultId;if(!window.snowflake){window.snowflake={instance:void 0,defaultId:void 0};const e=d(),t=BigInt(parseInt(e.substring(0,4),16)),i=BigInt(parseInt(e.substring(4,8),16));s=window.snowflake.instance=new h(t,i,BigInt(0)),I=window.snowflake.defaultId=String(s.nextId())}const w=(e="")=>`${e}${s.nextId()}`;export{I as d,w as s};
