import{_ as fe}from"./components/~.s3.async.component.O1G2Xm4Y.js";import{d as A1}from"./ts.DrFu-skq.js";import{s as nb,a as ob,c as lb,b as cb,m as hb,d as ub,e as db,f as pb,g as fb,h as gb,i as yb,j as mb,k as xb,l as bb,n as kb,o as vb,p as Tb,q as _b,r as Cb,t as Dn,u as yt,v as pa,w as Sb,x as wb,y as Eb,z as hn,A as Ab,B as Lb,C as td,D as ed,E as Bb,F as Db,G as Rb,H as Ib,I as Nb,J as Fb,K as Pb,L as rd,M as id,N as ad,O as sd,P as nd,Q as Ob,R as Cs,S as L1,T as Mb,U as od,V as $b,W as Vb,X as zb,Y as Wb,Z as qb,_ as Yb,$ as Hb}from"./d3.VU1C23MO.js";import{p as Ss}from"./dompurify.9JUW7zMc.js";import{aj as nh,W as Gb,x as ld,C as Ub}from"./lodash.upQstwhh.js";import{s as jb,c as Xb,a as Kb}from"./stylis.D5iaQeiq.js";import{G as $s,w as si,l as tl}from"./dagre.DrPo0jM0.js";import{s as Ta}from"./braintree.BFSf0DSq.js";import{a as et,i as _t,d as zt,l as Dt,b as ji,r as Fa,c as B1}from"./khroma.DUX6PT6k.js";import{v as Qb}from"./uuid.DhYbOkY1.js";import{g as er,h as Zb,j as Jb,k as t3}from"./dayjs.CxxaZqGC.js";import{a as Ft}from"./roughjs.GtHDBO_d.js";import{c as el,a as e3,f as r3}from"./cytoscape.BwIgsNAT.js";import{i as i3,a as a3,r as s3,s as n3,g as o3}from"./iconify.D2F_yRRF.js";import{a as D1}from"./marked.ltjiQ46A.js";import{A as l3,D as c3,a as h3,l as Rn,E as In,i as oi,c as Nn,b as Fn}from"./langium.yDuz4026.js";import"./vscode.DJE3O7dW.js";import"./chevrotain.DZQNtDzk.js";var R1=Object.defineProperty,l=(t,e)=>R1(t,"name",{value:e,configurable:!0}),I1=(t,e)=>{for(var r in e)R1(t,r,{get:e[r],enumerable:!0})},mi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},A={trace:l((...t)=>{},"trace"),debug:l((...t)=>{},"debug"),info:l((...t)=>{},"info"),warn:l((...t)=>{},"warn"),error:l((...t)=>{},"error"),fatal:l((...t)=>{},"fatal")},oh=l(function(t="fatal"){let e=mi.fatal;typeof t=="string"?t.toLowerCase()in mi&&(e=mi[t]):typeof t=="number"&&(e=t),A.trace=()=>{},A.debug=()=>{},A.info=()=>{},A.warn=()=>{},A.error=()=>{},A.fatal=()=>{},e<=mi.fatal&&(A.fatal=console.error?console.error.bind(console,Ir("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",Ir("FATAL"))),e<=mi.error&&(A.error=console.error?console.error.bind(console,Ir("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",Ir("ERROR"))),e<=mi.warn&&(A.warn=console.warn?console.warn.bind(console,Ir("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",Ir("WARN"))),e<=mi.info&&(A.info=console.info?console.info.bind(console,Ir("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",Ir("INFO"))),e<=mi.debug&&(A.debug=console.debug?console.debug.bind(console,Ir("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ir("DEBUG"))),e<=mi.trace&&(A.trace=console.debug?console.debug.bind(console,Ir("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",Ir("TRACE")))},"setLogLevel"),Ir=l(t=>`%c${er().format("ss.SSS")} : ${t} : `,"format"),N1=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,sn=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,u3=/\s*%%.*\n/gm,$a,F1=($a=class extends Error{constructor(e){super(e),this.name="UnknownDiagramError"}},l($a,"UnknownDiagramError"),$a),ws={},lh=l(function(t,e){t=t.replace(N1,"").replace(sn,"").replace(u3,`
`);for(const[r,{detector:a}]of Object.entries(ws))if(a(t,e))return r;throw new F1(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),P1=l((...t)=>{for(const{id:e,detector:r,loader:a}of t)O1(e,r,a)},"registerLazyLoadedDiagrams"),O1=l((t,e,r)=>{ws[t]&&A.warn(`Detector with key ${t} already exists. Overwriting.`),ws[t]={detector:e,loader:r},A.debug(`Detector with key ${t} added${r?" with loader":""}`)},"addDetector"),d3=l(t=>ws[t].loader,"getDiagramLoader"),Gl=l((t,e,{depth:r=2,clobber:a=!1}={})=>{const i={depth:r,clobber:a};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(s=>Gl(t,s,i)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(s=>{t.includes(s)||t.push(s)}),t):t===void 0||r<=0?t!=null&&typeof t=="object"&&typeof e=="object"?Object.assign(t,e):e:(e!==void 0&&typeof t=="object"&&typeof e=="object"&&Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(t[s]===void 0||typeof t[s]=="object")?(t[s]===void 0&&(t[s]=Array.isArray(e[s])?[]:{}),t[s]=Gl(t[s],e[s],{depth:r-1,clobber:a})):(a||typeof t[s]!="object"&&typeof e[s]!="object")&&(t[s]=e[s])}),t)},"assignWithDepth"),Ve=Gl,rl="#ffffff",il="#f2f2f2",lr=l((t,e)=>e?et(t,{s:-40,l:10}):et(t,{s:-40,l:-10}),"mkBorder"),Va,p3=(Va=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var r,a,i,s,n,o,h,u,d,f,p;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||et(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||et(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||lr(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||lr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||lr(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||lr(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||_t(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||_t(this.tertiaryColor),this.lineColor=this.lineColor||_t(this.background),this.arrowheadColor=this.arrowheadColor||_t(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?zt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||zt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||_t(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||Dt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.darkMode)for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=zt(this["cScale"+g],75);else for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScale"+g]=zt(this["cScale"+g],25);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleInv"+g]=this["cScaleInv"+g]||_t(this["cScale"+g]);for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this.darkMode?this["cScalePeer"+g]=this["cScalePeer"+g]||Dt(this["cScale"+g],10):this["cScalePeer"+g]=this["cScalePeer"+g]||zt(this["cScale"+g],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let g=0;g<this.THEME_COLOR_LIMIT;g++)this["cScaleLabel"+g]=this["cScaleLabel"+g]||this.scaleLabelColor;const e=this.darkMode?-4:-1;for(let g=0;g<5;g++)this["surface"+g]=this["surface"+g]||et(this.mainBkg,{h:180,s:-15,l:e*(5+g*3)}),this["surfacePeer"+g]=this["surfacePeer"+g]||et(this.mainBkg,{h:180,s:-15,l:e*(8+g*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||et(this.primaryColor,{h:64}),this.fillType3=this.fillType3||et(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||et(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||et(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||et(this.primaryColor,{h:128}),this.fillType7=this.fillType7||et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-10}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ji(this.quadrant1Fill)?Dt(this.quadrant1Fill):zt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((r=this.xyChart)==null?void 0:r.backgroundColor)||this.background,titleColor:((a=this.xyChart)==null?void 0:a.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((s=this.xyChart)==null?void 0:s.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((n=this.xyChart)==null?void 0:n.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((o=this.xyChart)==null?void 0:o.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((h=this.xyChart)==null?void 0:h.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((u=this.xyChart)==null?void 0:u.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((d=this.xyChart)==null?void 0:d.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((f=this.xyChart)==null?void 0:f.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((p=this.xyChart)==null?void 0:p.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?zt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Dt(this.git0,25),this.git1=Dt(this.git1,25),this.git2=Dt(this.git2,25),this.git3=Dt(this.git3,25),this.git4=Dt(this.git4,25),this.git5=Dt(this.git5,25),this.git6=Dt(this.git6,25),this.git7=Dt(this.git7,25)):(this.git0=zt(this.git0,25),this.git1=zt(this.git1,25),this.git2=zt(this.git2,25),this.git3=zt(this.git3,25),this.git4=zt(this.git4,25),this.git5=zt(this.git5,25),this.git6=zt(this.git6,25),this.git7=zt(this.git7,25)),this.gitInv0=this.gitInv0||_t(this.git0),this.gitInv1=this.gitInv1||_t(this.git1),this.gitInv2=this.gitInv2||_t(this.git2),this.gitInv3=this.gitInv3||_t(this.git3),this.gitInv4=this.gitInv4||_t(this.git4),this.gitInv5=this.gitInv5||_t(this.git5),this.gitInv6=this.gitInv6||_t(this.git6),this.gitInv7=this.gitInv7||_t(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||il}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(a=>{this[a]=e[a]}),this.updateColors(),r.forEach(a=>{this[a]=e[a]})}},l(Va,"Theme"),Va),f3=l(t=>{const e=new p3;return e.calculate(t),e},"getThemeVariables"),za,g3=(za=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=Dt(this.primaryColor,16),this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=_t(this.background),this.secondaryBorderColor=lr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lr(this.tertiaryColor,this.darkMode),this.primaryTextColor=_t(this.primaryColor),this.secondaryTextColor=_t(this.secondaryColor),this.tertiaryTextColor=_t(this.tertiaryColor),this.lineColor=_t(this.background),this.textColor=_t(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=Dt(_t("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=Fa(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=zt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=zt(this.sectionBkgColor,10),this.taskBorderColor=Fa(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Fa(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var e,r,a,i,s,n,o,h,u,d,f;this.secondBkg=Dt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=Dt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=Dt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330});for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||_t(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScalePeer"+p]=this["cScalePeer"+p]||Dt(this["cScale"+p],10);for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||et(this.mainBkg,{h:30,s:-30,l:-(-10+p*4)}),this["surfacePeer"+p]=this["surfacePeer"+p]||et(this.mainBkg,{h:30,s:-30,l:-(-7+p*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["pie"+p]=this["cScale"+p];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ji(this.quadrant1Fill)?Dt(this.quadrant1Fill):zt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((a=this.xyChart)==null?void 0:a.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((n=this.xyChart)==null?void 0:n.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((h=this.xyChart)==null?void 0:h.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((d=this.xyChart)==null?void 0:d.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?zt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Dt(this.secondaryColor,20),this.git1=Dt(this.pie2||this.secondaryColor,20),this.git2=Dt(this.pie3||this.tertiaryColor,20),this.git3=Dt(this.pie4||et(this.primaryColor,{h:-30}),20),this.git4=Dt(this.pie5||et(this.primaryColor,{h:-60}),20),this.git5=Dt(this.pie6||et(this.primaryColor,{h:-90}),10),this.git6=Dt(this.pie7||et(this.primaryColor,{h:60}),10),this.git7=Dt(this.pie8||et(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||_t(this.git0),this.gitInv1=this.gitInv1||_t(this.git1),this.gitInv2=this.gitInv2||_t(this.git2),this.gitInv3=this.gitInv3||_t(this.git3),this.gitInv4=this.gitInv4||_t(this.git4),this.gitInv5=this.gitInv5||_t(this.git5),this.gitInv6=this.gitInv6||_t(this.git6),this.gitInv7=this.gitInv7||_t(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||_t(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||_t(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Dt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Dt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(a=>{this[a]=e[a]}),this.updateColors(),r.forEach(a=>{this[a]=e[a]})}},l(za,"Theme"),za),y3=l(t=>{const e=new g3;return e.calculate(t),e},"getThemeVariables"),Wa,m3=(Wa=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=et(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=lr(this.primaryColor,this.darkMode),this.secondaryBorderColor=lr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lr(this.tertiaryColor,this.darkMode),this.primaryTextColor=_t(this.primaryColor),this.secondaryTextColor=_t(this.secondaryColor),this.tertiaryTextColor=_t(this.tertiaryColor),this.lineColor=_t(this.background),this.textColor=_t(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Fa(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var e,r,a,i,s,n,o,h,u,d,f;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||zt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||zt(this.tertiaryColor,40);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=zt(this["cScale"+p],10),this["cScalePeer"+p]=this["cScalePeer"+p]||zt(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||et(this["cScale"+p],{h:180});for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||et(this.mainBkg,{h:30,l:-(5+p*5)}),this["surfacePeer"+p]=this["surfacePeer"+p]||et(this.mainBkg,{h:30,l:-(7+p*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||_t(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||_t(this.labelTextColor);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=Dt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||et(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||et(this.primaryColor,{l:-10}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||et(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ji(this.quadrant1Fill)?Dt(this.quadrant1Fill):zt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((a=this.xyChart)==null?void 0:a.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((n=this.xyChart)==null?void 0:n.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((h=this.xyChart)==null?void 0:h.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((d=this.xyChart)==null?void 0:d.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Dt(this.git0,25),this.git1=Dt(this.git1,25),this.git2=Dt(this.git2,25),this.git3=Dt(this.git3,25),this.git4=Dt(this.git4,25),this.git5=Dt(this.git5,25),this.git6=Dt(this.git6,25),this.git7=Dt(this.git7,25)):(this.git0=zt(this.git0,25),this.git1=zt(this.git1,25),this.git2=zt(this.git2,25),this.git3=zt(this.git3,25),this.git4=zt(this.git4,25),this.git5=zt(this.git5,25),this.git6=zt(this.git6,25),this.git7=zt(this.git7,25)),this.gitInv0=this.gitInv0||zt(_t(this.git0),25),this.gitInv1=this.gitInv1||_t(this.git1),this.gitInv2=this.gitInv2||_t(this.git2),this.gitInv3=this.gitInv3||_t(this.git3),this.gitInv4=this.gitInv4||_t(this.git4),this.gitInv5=this.gitInv5||_t(this.git5),this.gitInv6=this.gitInv6||_t(this.git6),this.gitInv7=this.gitInv7||_t(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||_t(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||_t(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||il}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(a=>{this[a]=e[a]}),this.updateColors(),r.forEach(a=>{this[a]=e[a]})}},l(Wa,"Theme"),Wa),ch=l(t=>{const e=new m3;return e.calculate(t),e},"getThemeVariables"),qa,x3=(qa=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=Dt("#cde498",10),this.primaryBorderColor=lr(this.primaryColor,this.darkMode),this.secondaryBorderColor=lr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lr(this.tertiaryColor,this.darkMode),this.primaryTextColor=_t(this.primaryColor),this.secondaryTextColor=_t(this.secondaryColor),this.tertiaryTextColor=_t(this.primaryColor),this.lineColor=_t(this.background),this.textColor=_t(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,r,a,i,s,n,o,h,u,d,f;this.actorBorder=zt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||et(this.primaryColor,{h:30}),this.cScale4=this.cScale4||et(this.primaryColor,{h:60}),this.cScale5=this.cScale5||et(this.primaryColor,{h:90}),this.cScale6=this.cScale6||et(this.primaryColor,{h:120}),this.cScale7=this.cScale7||et(this.primaryColor,{h:150}),this.cScale8=this.cScale8||et(this.primaryColor,{h:210}),this.cScale9=this.cScale9||et(this.primaryColor,{h:270}),this.cScale10=this.cScale10||et(this.primaryColor,{h:300}),this.cScale11=this.cScale11||et(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||zt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||zt(this.tertiaryColor,40);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=zt(this["cScale"+p],10),this["cScalePeer"+p]=this["cScalePeer"+p]||zt(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||et(this["cScale"+p],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||et(this.mainBkg,{h:30,s:-30,l:-(5+p*5)}),this["surfacePeer"+p]=this["surfacePeer"+p]||et(this.mainBkg,{h:30,s:-30,l:-(8+p*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||et(this.primaryColor,{l:-30}),this.pie5=this.pie5||et(this.secondaryColor,{l:-30}),this.pie6=this.pie6||et(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||et(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||et(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||et(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||et(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||et(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||et(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ji(this.quadrant1Fill)?Dt(this.quadrant1Fill):zt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((a=this.xyChart)==null?void 0:a.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((n=this.xyChart)==null?void 0:n.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((h=this.xyChart)==null?void 0:h.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((d=this.xyChart)==null?void 0:d.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||et(this.primaryColor,{h:-30}),this.git4=this.git4||et(this.primaryColor,{h:-60}),this.git5=this.git5||et(this.primaryColor,{h:-90}),this.git6=this.git6||et(this.primaryColor,{h:60}),this.git7=this.git7||et(this.primaryColor,{h:120}),this.darkMode?(this.git0=Dt(this.git0,25),this.git1=Dt(this.git1,25),this.git2=Dt(this.git2,25),this.git3=Dt(this.git3,25),this.git4=Dt(this.git4,25),this.git5=Dt(this.git5,25),this.git6=Dt(this.git6,25),this.git7=Dt(this.git7,25)):(this.git0=zt(this.git0,25),this.git1=zt(this.git1,25),this.git2=zt(this.git2,25),this.git3=zt(this.git3,25),this.git4=zt(this.git4,25),this.git5=zt(this.git5,25),this.git6=zt(this.git6,25),this.git7=zt(this.git7,25)),this.gitInv0=this.gitInv0||_t(this.git0),this.gitInv1=this.gitInv1||_t(this.git1),this.gitInv2=this.gitInv2||_t(this.git2),this.gitInv3=this.gitInv3||_t(this.git3),this.gitInv4=this.gitInv4||_t(this.git4),this.gitInv5=this.gitInv5||_t(this.git5),this.gitInv6=this.gitInv6||_t(this.git6),this.gitInv7=this.gitInv7||_t(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||_t(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||_t(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||il}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(a=>{this[a]=e[a]}),this.updateColors(),r.forEach(a=>{this[a]=e[a]})}},l(qa,"Theme"),qa),b3=l(t=>{const e=new x3;return e.calculate(t),e},"getThemeVariables"),Ya,k3=(Ya=class{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=Dt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=et(this.primaryColor,{h:-160}),this.primaryBorderColor=lr(this.primaryColor,this.darkMode),this.secondaryBorderColor=lr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lr(this.tertiaryColor,this.darkMode),this.primaryTextColor=_t(this.primaryColor),this.secondaryTextColor=_t(this.secondaryColor),this.tertiaryTextColor=_t(this.tertiaryColor),this.lineColor=_t(this.background),this.textColor=_t(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var e,r,a,i,s,n,o,h,u,d,f;this.secondBkg=Dt(this.contrast,55),this.border2=this.contrast,this.actorBorder=Dt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||_t(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this.darkMode?this["cScalePeer"+p]=this["cScalePeer"+p]||Dt(this["cScale"+p],10):this["cScalePeer"+p]=this["cScalePeer"+p]||zt(this["cScale"+p],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||et(this.mainBkg,{l:-(5+p*5)}),this["surfacePeer"+p]=this["surfacePeer"+p]||et(this.mainBkg,{l:-(8+p*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=Dt(this.contrast,30),this.sectionBkgColor2=Dt(this.contrast,30),this.taskBorderColor=zt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=Dt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=zt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=et(this.primaryColor,{h:64}),this.fillType3=et(this.secondaryColor,{h:64}),this.fillType4=et(this.primaryColor,{h:-64}),this.fillType5=et(this.secondaryColor,{h:-64}),this.fillType6=et(this.primaryColor,{h:128}),this.fillType7=et(this.secondaryColor,{h:128});for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["pie"+p]=this["cScale"+p];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||et(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||et(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||et(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||et(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||et(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||et(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||ji(this.quadrant1Fill)?Dt(this.quadrant1Fill):zt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((e=this.xyChart)==null?void 0:e.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((a=this.xyChart)==null?void 0:a.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((i=this.xyChart)==null?void 0:i.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((n=this.xyChart)==null?void 0:n.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((h=this.xyChart)==null?void 0:h.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((u=this.xyChart)==null?void 0:u.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((d=this.xyChart)==null?void 0:d.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((f=this.xyChart)==null?void 0:f.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=zt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||et(this.primaryColor,{h:-30}),this.git4=this.pie5||et(this.primaryColor,{h:-60}),this.git5=this.pie6||et(this.primaryColor,{h:-90}),this.git6=this.pie7||et(this.primaryColor,{h:60}),this.git7=this.pie8||et(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||_t(this.git0),this.gitInv1=this.gitInv1||_t(this.git1),this.gitInv2=this.gitInv2||_t(this.git2),this.gitInv3=this.gitInv3||_t(this.git3),this.gitInv4=this.gitInv4||_t(this.git4),this.gitInv5=this.gitInv5||_t(this.git5),this.gitInv6=this.gitInv6||_t(this.git6),this.gitInv7=this.gitInv7||_t(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||rl,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||il}calculate(e){if(typeof e!="object"){this.updateColors();return}const r=Object.keys(e);r.forEach(a=>{this[a]=e[a]}),this.updateColors(),r.forEach(a=>{this[a]=e[a]})}},l(Ya,"Theme"),Ya),v3=l(t=>{const e=new k3;return e.calculate(t),e},"getThemeVariables"),wi={base:{getThemeVariables:f3},dark:{getThemeVariables:y3},default:{getThemeVariables:ch},forest:{getThemeVariables:b3},neutral:{getThemeVariables:v3}},Ni={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},M1={...Ni,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF"},themeCSS:void 0,themeVariables:wi.default.getThemeVariables(),sequence:{...Ni.sequence,messageFont:l(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:l(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:l(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...Ni.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Ni.c4,useWidth:void 0,personFont:l(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),external_personFont:l(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:l(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:l(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:l(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:l(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:l(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:l(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:l(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:l(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:l(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:l(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:l(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:l(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:l(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:l(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:l(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:l(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:l(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:l(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:l(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:l(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...Ni.pie,useWidth:984},xyChart:{...Ni.xyChart,useWidth:void 0},requirement:{...Ni.requirement,useWidth:void 0},packet:{...Ni.packet}},$1=l((t,e="")=>Object.keys(t).reduce((r,a)=>Array.isArray(t[a])?r:typeof t[a]=="object"&&t[a]!==null?[...r,e+a,...$1(t[a],"")]:[...r,e+a],[]),"keyify"),T3=new Set($1(M1,"")),pe=M1,fo=l(t=>{if(A.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(e=>fo(e));return}for(const e of Object.keys(t)){if(A.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!T3.has(e)||t[e]==null){A.debug("sanitize deleting key: ",e),delete t[e];continue}if(typeof t[e]=="object"){A.debug("sanitizing object",e),fo(t[e]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const a of r)e.includes(a)&&(A.debug("sanitizing css option",e),t[e]=_3(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const r=t.themeVariables[e];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}A.debug("After sanitization",t)}},"sanitizeDirective"),_3=l(t=>{let e=0,r=0;for(const a of t){if(e<r)return"{ /* ERROR: Unbalanced CSS */ }";a==="{"?e++:a==="}"&&r++}return e!==r?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),Es=Object.freeze(pe),xr=Ve({},Es),V1,As=[],nn=Ve({},Es),al=l((t,e)=>{let r=Ve({},t),a={};for(const i of e)q1(i),a=Ve(a,i);if(r=Ve(r,a),a.theme&&a.theme in wi){const i=Ve({},V1),s=Ve(i.themeVariables||{},a.themeVariables);r.theme&&r.theme in wi&&(r.themeVariables=wi[r.theme].getThemeVariables(s))}return nn=r,Y1(nn),nn},"updateCurrentConfig"),C3=l(t=>(xr=Ve({},Es),xr=Ve(xr,t),t.theme&&wi[t.theme]&&(xr.themeVariables=wi[t.theme].getThemeVariables(t.themeVariables)),al(xr,As),xr),"setSiteConfig"),S3=l(t=>{V1=Ve({},t)},"saveConfigFromInitialize"),w3=l(t=>(xr=Ve(xr,t),al(xr,As),xr),"updateSiteConfig"),z1=l(()=>Ve({},xr),"getSiteConfig"),W1=l(t=>(Y1(t),Ve(nn,t),_e()),"setConfig"),_e=l(()=>Ve({},nn),"getConfig"),q1=l(t=>{t&&(["secure",...xr.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(A.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{typeof t[e]=="string"&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],typeof t[e]=="object"&&q1(t[e])}))},"sanitize"),E3=l(t=>{var e;fo(t),t.fontFamily&&!((e=t.themeVariables)!=null&&e.fontFamily)&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),As.push(t),al(xr,As)},"addDirective"),go=l((t=xr)=>{As=[],al(t,As)},"reset"),A3={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},cd={},L3=l(t=>{cd[t]||(A.warn(A3[t]),cd[t]=!0)},"issueWarning"),Y1=l(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&L3("LAZY_LOAD_DEPRECATED")},"checkConfig"),Vs=/<br\s*\/?>/gi,B3=l(t=>t?U1(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),D3=(()=>{let t=!1;return()=>{t||(H1(),t=!0)}})();function H1(){const t="data-temp-href-target";Ss.addHook("beforeSanitizeAttributes",e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),Ss.addHook("afterSanitizeAttributes",e=>{e instanceof Element&&e.tagName==="A"&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),e.getAttribute("target")==="_blank"&&e.setAttribute("rel","noopener"))})}l(H1,"setupDompurifyHooks");var G1=l(t=>(D3(),Ss.sanitize(t)),"removeScript"),hd=l((t,e)=>{var r;if(((r=e.flowchart)==null?void 0:r.htmlLabels)!==!1){const a=e.securityLevel;a==="antiscript"||a==="strict"?t=G1(t):a!=="loose"&&(t=U1(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=F3(t))}return t},"sanitizeMore"),me=l((t,e)=>t&&(e.dompurifyConfig?t=Ss.sanitize(hd(t,e),e.dompurifyConfig).toString():t=Ss.sanitize(hd(t,e),{FORBID_TAGS:["style"]}).toString(),t),"sanitizeText"),R3=l((t,e)=>typeof t=="string"?me(t,e):t.flat().map(r=>me(r,e)),"sanitizeTextOrArray"),I3=l(t=>Vs.test(t),"hasBreaks"),N3=l(t=>t.split(Vs),"splitBreaks"),F3=l(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),U1=l(t=>t.replace(Vs,"#br#"),"breakToPlaceholder"),P3=l(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=e.replaceAll(/\(/g,"\\("),e=e.replaceAll(/\)/g,"\\)")),e},"getUrl"),xe=l(t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),"evaluate"),O3=l(function(...t){const e=t.filter(r=>!isNaN(r));return Math.max(...e)},"getMax"),M3=l(function(...t){const e=t.filter(r=>!isNaN(r));return Math.min(...e)},"getMin"),ea=l(function(t){const e=t.split(/(,)/),r=[];for(let a=0;a<e.length;a++){let i=e[a];if(i===","&&a>0&&a+1<e.length){const s=e[a-1],n=e[a+1];$3(s,n)&&(i=s+","+n,a++,r.pop())}r.push(V3(i))}return r.join("")},"parseGenericTypes"),Ul=l((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),$3=l((t,e)=>{const r=Ul(t,"~"),a=Ul(e,"~");return r===1&&a===1},"shouldCombineSets"),V3=l(t=>{const e=Ul(t,"~");let r=!1;if(e<=1)return t;e%2!==0&&t.startsWith("~")&&(t=t.substring(1),r=!0);const a=[...t];let i=a.indexOf("~"),s=a.lastIndexOf("~");for(;i!==-1&&s!==-1&&i!==s;)a[i]="<",a[s]=">",i=a.indexOf("~"),s=a.lastIndexOf("~");return r&&a.unshift("~"),a.join("")},"processSet"),ud=l(()=>window.MathMLElement!==void 0,"isMathMLSupported"),jl=/\$\$(.*)\$\$/g,ir=l(t=>{var e;return(((e=t.match(jl))==null?void 0:e.length)??0)>0},"hasKatex"),Pn=l(async(t,e)=>{t=await On(t,e);const r=document.createElement("div");r.innerHTML=t,r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const a=document.querySelector("body");a==null||a.insertAdjacentElement("beforeend",r);const i={width:r.clientWidth,height:r.clientHeight};return r.remove(),i},"calculateMathMLDimensions"),On=l(async(t,e)=>{if(!ir(t))return t;if(!(ud()||e.legacyMathML||e.forceLegacyMathML))return t.replace(jl,"MathML is unsupported in this environment.");const{default:r}=await fe(async()=>{const{default:i}=await import("./katex.ChWnQ-fc.js");return{default:i}},[],import.meta.url),a=e.forceLegacyMathML||!ud()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(Vs).map(i=>ir(i)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${i}</div>`:`<div>${i}</div>`).join("").replace(jl,(i,s)=>r.renderToString(s,{throwOnError:!0,displayMode:!0,output:a}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},"renderKatex"),mt={getRows:B3,sanitizeText:me,sanitizeTextOrArray:R3,hasBreaks:I3,splitBreaks:N3,lineBreakRegex:Vs,removeScript:G1,getUrl:P3,evaluate:xe,getMax:O3,getMin:M3},z3=l(function(t,e){for(let r of e)t.attr(r[0],r[1])},"d3Attrs"),W3=l(function(t,e,r){let a=new Map;return r?(a.set("width","100%"),a.set("style",`max-width: ${e}px;`)):(a.set("height",t),a.set("width",e)),a},"calculateSvgSizeAttrs"),ar=l(function(t,e,r,a){const i=W3(e,r,a);z3(t,i)},"configureSvgSize"),zs=l(function(t,e,r,a){const i=e.node().getBBox(),s=i.width,n=i.height;A.info(`SVG bounds: ${s}x${n}`,i);let o=0,h=0;A.info(`Graph bounds: ${o}x${h}`,t),o=s+r*2,h=n+r*2,A.info(`Calculated bounds: ${o}x${h}`),ar(e,h,o,a);const u=`${i.x-r} ${i.y-r} ${i.width+2*r} ${i.height+2*r}`;e.attr("viewBox",u)},"setupGraphViewbox"),ro={},q3=l((t,e,r)=>{let a="";return t in ro&&ro[t]?a=ro[t](r):A.warn(`No theme found for ${t}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 1px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }
  & .edge-thickness-invisible {
    stroke-width: 0;
    fill: none;
  }
  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }
   & p {
    margin: 0
   }

  ${a}

  ${e}
`},"getStyles"),Y3=l((t,e)=>{e!==void 0&&(ro[t]=e)},"addStylesForDiagram"),H3=q3,hh={};I1(hh,{clear:()=>Ye,getAccDescription:()=>Ze,getAccTitle:()=>Ke,getDiagramTitle:()=>Je,setAccDescription:()=>Qe,setAccTitle:()=>He,setDiagramTitle:()=>dr});var uh="",dh="",ph="",fh=l(t=>me(t,_e()),"sanitizeText"),Ye=l(()=>{uh="",ph="",dh=""},"clear"),He=l(t=>{uh=fh(t).replace(/^\s+/g,"")},"setAccTitle"),Ke=l(()=>uh,"getAccTitle"),Qe=l(t=>{ph=fh(t).replace(/\n\s+/g,`
`)},"setAccDescription"),Ze=l(()=>ph,"getAccDescription"),dr=l(t=>{dh=fh(t)},"setDiagramTitle"),Je=l(()=>dh,"getDiagramTitle"),dd=A,G3=oh,H=_e,pd=W1,j1=Es,X1=l(t=>me(t,H()),"sanitizeText"),K1=zs,U3=l(()=>hh,"getCommonDb"),yo={},mo=l((t,e,r)=>{var a;yo[t]&&dd.warn(`Diagram with id ${t} already registered. Overwriting.`),yo[t]=e,r&&O1(t,r),Y3(t,e.styles),(a=e.injectUtils)==null||a.call(e,dd,G3,H,X1,K1,U3(),()=>{})},"registerDiagram"),Xl=l(t=>{if(t in yo)return yo[t];throw new j3(t)},"getDiagram"),Ha,j3=(Ha=class extends Error{constructor(e){super(`Diagram ${e} not found.`)}},l(Ha,"DiagramNotFoundError"),Ha);function gh(t){return typeof t>"u"||t===null}l(gh,"isNothing");function Q1(t){return typeof t=="object"&&t!==null}l(Q1,"isObject");function Z1(t){return Array.isArray(t)?t:gh(t)?[]:[t]}l(Z1,"toArray");function J1(t,e){var r,a,i,s;if(e)for(s=Object.keys(e),r=0,a=s.length;r<a;r+=1)i=s[r],t[i]=e[i];return t}l(J1,"extend");function t0(t,e){var r="",a;for(a=0;a<e;a+=1)r+=t;return r}l(t0,"repeat");function e0(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}l(e0,"isNegativeZero");var X3=gh,K3=Q1,Q3=Z1,Z3=t0,J3=e0,t4=J1,ze={isNothing:X3,isObject:K3,toArray:Q3,repeat:Z3,isNegativeZero:J3,extend:t4};function yh(t,e){var r="",a=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),a+" "+r):a}l(yh,"formatError");function Ls(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=yh(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}l(Ls,"YAMLException$1");Ls.prototype=Object.create(Error.prototype);Ls.prototype.constructor=Ls;Ls.prototype.toString=l(function(e){return this.name+": "+yh(this,e)},"toString");var br=Ls;function io(t,e,r,a,i){var s="",n="",o=Math.floor(i/2)-1;return a-e>o&&(s=" ... ",e=a-o+s.length),r-a>o&&(n=" ...",r=a+o-n.length),{str:s+t.slice(e,r).replace(/\t/g,"")+n,pos:a-e+s.length}}l(io,"getLine");function ao(t,e){return ze.repeat(" ",e-t.length)+t}l(ao,"padStart");function r0(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,a=[0],i=[],s,n=-1;s=r.exec(t.buffer);)i.push(s.index),a.push(s.index+s[0].length),t.position<=s.index&&n<0&&(n=a.length-2);n<0&&(n=a.length-1);var o="",h,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+d+3);for(h=1;h<=e.linesBefore&&!(n-h<0);h++)u=io(t.buffer,a[n-h],i[n-h],t.position-(a[n]-a[n-h]),f),o=ze.repeat(" ",e.indent)+ao((t.line-h+1).toString(),d)+" | "+u.str+`
`+o;for(u=io(t.buffer,a[n],i[n],t.position,f),o+=ze.repeat(" ",e.indent)+ao((t.line+1).toString(),d)+" | "+u.str+`
`,o+=ze.repeat("-",e.indent+d+3+u.pos)+`^
`,h=1;h<=e.linesAfter&&!(n+h>=i.length);h++)u=io(t.buffer,a[n+h],i[n+h],t.position-(a[n]-a[n+h]),f),o+=ze.repeat(" ",e.indent)+ao((t.line+h+1).toString(),d)+" | "+u.str+`
`;return o.replace(/\n$/,"")}l(r0,"makeSnippet");var e4=r0,r4=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],i4=["scalar","sequence","mapping"];function i0(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(a){e[String(a)]=r})}),e}l(i0,"compileStyleAliases");function a0(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(r4.indexOf(r)===-1)throw new br('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=i0(e.styleAliases||null),i4.indexOf(this.kind)===-1)throw new br('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}l(a0,"Type$1");var rr=a0;function Kl(t,e){var r=[];return t[e].forEach(function(a){var i=r.length;r.forEach(function(s,n){s.tag===a.tag&&s.kind===a.kind&&s.multi===a.multi&&(i=n)}),r[i]=a}),r}l(Kl,"compileList");function s0(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function a(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(l(a,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(a);return t}l(s0,"compileMap");function xo(t){return this.extend(t)}l(xo,"Schema$1");xo.prototype.extend=l(function(e){var r=[],a=[];if(e instanceof rr)a.push(e);else if(Array.isArray(e))a=a.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(a=a.concat(e.explicit));else throw new br("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof rr))throw new br("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new br("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new br("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(s){if(!(s instanceof rr))throw new br("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(xo.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(a),i.compiledImplicit=Kl(i,"implicit"),i.compiledExplicit=Kl(i,"explicit"),i.compiledTypeMap=s0(i.compiledImplicit,i.compiledExplicit),i},"extend");var a4=xo,s4=new rr("tag:yaml.org,2002:str",{kind:"scalar",construct:l(function(t){return t!==null?t:""},"construct")}),n4=new rr("tag:yaml.org,2002:seq",{kind:"sequence",construct:l(function(t){return t!==null?t:[]},"construct")}),o4=new rr("tag:yaml.org,2002:map",{kind:"mapping",construct:l(function(t){return t!==null?t:{}},"construct")}),l4=new a4({explicit:[s4,n4,o4]});function n0(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}l(n0,"resolveYamlNull");function o0(){return null}l(o0,"constructYamlNull");function l0(t){return t===null}l(l0,"isNull");var c4=new rr("tag:yaml.org,2002:null",{kind:"scalar",resolve:n0,construct:o0,predicate:l0,represent:{canonical:l(function(){return"~"},"canonical"),lowercase:l(function(){return"null"},"lowercase"),uppercase:l(function(){return"NULL"},"uppercase"),camelcase:l(function(){return"Null"},"camelcase"),empty:l(function(){return""},"empty")},defaultStyle:"lowercase"});function c0(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}l(c0,"resolveYamlBoolean");function h0(t){return t==="true"||t==="True"||t==="TRUE"}l(h0,"constructYamlBoolean");function u0(t){return Object.prototype.toString.call(t)==="[object Boolean]"}l(u0,"isBoolean");var h4=new rr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:c0,construct:h0,predicate:u0,represent:{lowercase:l(function(t){return t?"true":"false"},"lowercase"),uppercase:l(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:l(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function d0(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}l(d0,"isHexCode");function p0(t){return 48<=t&&t<=55}l(p0,"isOctCode");function f0(t){return 48<=t&&t<=57}l(f0,"isDecCode");function g0(t){if(t===null)return!1;var e=t.length,r=0,a=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;a=!0}return a&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!d0(t.charCodeAt(r)))return!1;a=!0}return a&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!p0(t.charCodeAt(r)))return!1;a=!0}return a&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!f0(t.charCodeAt(r)))return!1;a=!0}return!(!a||i==="_")}l(g0,"resolveYamlInteger");function y0(t){var e=t,r=1,a;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),a=e[0],(a==="-"||a==="+")&&(a==="-"&&(r=-1),e=e.slice(1),a=e[0]),e==="0")return 0;if(a==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}l(y0,"constructYamlInteger");function m0(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ze.isNegativeZero(t)}l(m0,"isInteger");var u4=new rr("tag:yaml.org,2002:int",{kind:"scalar",resolve:g0,construct:y0,predicate:m0,represent:{binary:l(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:l(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:l(function(t){return t.toString(10)},"decimal"),hexadecimal:l(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),d4=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function x0(t){return!(t===null||!d4.test(t)||t[t.length-1]==="_")}l(x0,"resolveYamlFloat");function b0(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}l(b0,"constructYamlFloat");var p4=/^[-+]?[0-9]+e/;function k0(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ze.isNegativeZero(t))return"-0.0";return r=t.toString(10),p4.test(r)?r.replace("e",".e"):r}l(k0,"representYamlFloat");function v0(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ze.isNegativeZero(t))}l(v0,"isFloat");var f4=new rr("tag:yaml.org,2002:float",{kind:"scalar",resolve:x0,construct:b0,predicate:v0,represent:k0,defaultStyle:"lowercase"}),T0=l4.extend({implicit:[c4,h4,u4,f4]}),g4=T0,_0=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),C0=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function S0(t){return t===null?!1:_0.exec(t)!==null||C0.exec(t)!==null}l(S0,"resolveYamlTimestamp");function w0(t){var e,r,a,i,s,n,o,h=0,u=null,d,f,p;if(e=_0.exec(t),e===null&&(e=C0.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],a=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,a,i));if(s=+e[4],n=+e[5],o=+e[6],e[7]){for(h=e[7].slice(0,3);h.length<3;)h+="0";h=+h}return e[9]&&(d=+e[10],f=+(e[11]||0),u=(d*60+f)*6e4,e[9]==="-"&&(u=-u)),p=new Date(Date.UTC(r,a,i,s,n,o,h)),u&&p.setTime(p.getTime()-u),p}l(w0,"constructYamlTimestamp");function E0(t){return t.toISOString()}l(E0,"representYamlTimestamp");var y4=new rr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:S0,construct:w0,instanceOf:Date,represent:E0});function A0(t){return t==="<<"||t===null}l(A0,"resolveYamlMerge");var m4=new rr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:A0}),mh=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function L0(t){if(t===null)return!1;var e,r,a=0,i=t.length,s=mh;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;a+=6}return a%8===0}l(L0,"resolveYamlBinary");function B0(t){var e,r,a=t.replace(/[\r\n=]/g,""),i=a.length,s=mh,n=0,o=[];for(e=0;e<i;e++)e%4===0&&e&&(o.push(n>>16&255),o.push(n>>8&255),o.push(n&255)),n=n<<6|s.indexOf(a.charAt(e));return r=i%4*6,r===0?(o.push(n>>16&255),o.push(n>>8&255),o.push(n&255)):r===18?(o.push(n>>10&255),o.push(n>>2&255)):r===12&&o.push(n>>4&255),new Uint8Array(o)}l(B0,"constructYamlBinary");function D0(t){var e="",r=0,a,i,s=t.length,n=mh;for(a=0;a<s;a++)a%3===0&&a&&(e+=n[r>>18&63],e+=n[r>>12&63],e+=n[r>>6&63],e+=n[r&63]),r=(r<<8)+t[a];return i=s%3,i===0?(e+=n[r>>18&63],e+=n[r>>12&63],e+=n[r>>6&63],e+=n[r&63]):i===2?(e+=n[r>>10&63],e+=n[r>>4&63],e+=n[r<<2&63],e+=n[64]):i===1&&(e+=n[r>>2&63],e+=n[r<<4&63],e+=n[64],e+=n[64]),e}l(D0,"representYamlBinary");function R0(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}l(R0,"isBinary");var x4=new rr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:L0,construct:B0,predicate:R0,represent:D0}),b4=Object.prototype.hasOwnProperty,k4=Object.prototype.toString;function I0(t){if(t===null)return!0;var e=[],r,a,i,s,n,o=t;for(r=0,a=o.length;r<a;r+=1){if(i=o[r],n=!1,k4.call(i)!=="[object Object]")return!1;for(s in i)if(b4.call(i,s))if(!n)n=!0;else return!1;if(!n)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}l(I0,"resolveYamlOmap");function N0(t){return t!==null?t:[]}l(N0,"constructYamlOmap");var v4=new rr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:I0,construct:N0}),T4=Object.prototype.toString;function F0(t){if(t===null)return!0;var e,r,a,i,s,n=t;for(s=new Array(n.length),e=0,r=n.length;e<r;e+=1){if(a=n[e],T4.call(a)!=="[object Object]"||(i=Object.keys(a),i.length!==1))return!1;s[e]=[i[0],a[i[0]]]}return!0}l(F0,"resolveYamlPairs");function P0(t){if(t===null)return[];var e,r,a,i,s,n=t;for(s=new Array(n.length),e=0,r=n.length;e<r;e+=1)a=n[e],i=Object.keys(a),s[e]=[i[0],a[i[0]]];return s}l(P0,"constructYamlPairs");var _4=new rr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:F0,construct:P0}),C4=Object.prototype.hasOwnProperty;function O0(t){if(t===null)return!0;var e,r=t;for(e in r)if(C4.call(r,e)&&r[e]!==null)return!1;return!0}l(O0,"resolveYamlSet");function M0(t){return t!==null?t:{}}l(M0,"constructYamlSet");var S4=new rr("tag:yaml.org,2002:set",{kind:"mapping",resolve:O0,construct:M0}),$0=g4.extend({implicit:[y4,m4],explicit:[x4,v4,_4,S4]}),qi=Object.prototype.hasOwnProperty,bo=1,V0=2,z0=3,ko=4,Ol=1,w4=2,fd=3,E4=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,A4=/[\x85\u2028\u2029]/,L4=/[,\[\]\{\}]/,W0=/^(?:!|!!|![a-z\-]+!)$/i,q0=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ql(t){return Object.prototype.toString.call(t)}l(Ql,"_class");function Ur(t){return t===10||t===13}l(Ur,"is_EOL");function Vi(t){return t===9||t===32}l(Vi,"is_WHITE_SPACE");function cr(t){return t===9||t===32||t===10||t===13}l(cr,"is_WS_OR_EOL");function oa(t){return t===44||t===91||t===93||t===123||t===125}l(oa,"is_FLOW_INDICATOR");function Y0(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}l(Y0,"fromHexCode");function H0(t){return t===120?2:t===117?4:t===85?8:0}l(H0,"escapedHexLen");function G0(t){return 48<=t&&t<=57?t-48:-1}l(G0,"fromDecimalCode");function Zl(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?"":t===76?"\u2028":t===80?"\u2029":""}l(Zl,"simpleEscapeSequence");function U0(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}l(U0,"charFromCodepoint");var j0=new Array(256),X0=new Array(256);for(ta=0;ta<256;ta++)j0[ta]=Zl(ta)?1:0,X0[ta]=Zl(ta);var ta;function K0(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||$0,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}l(K0,"State$1");function xh(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=e4(r),new br(e,r)}l(xh,"generateError");function $t(t,e){throw xh(t,e)}l($t,"throwError");function un(t,e){t.onWarning&&t.onWarning.call(null,xh(t,e))}l(un,"throwWarning");var gd={YAML:l(function(e,r,a){var i,s,n;e.version!==null&&$t(e,"duplication of %YAML directive"),a.length!==1&&$t(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(a[0]),i===null&&$t(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),n=parseInt(i[2],10),s!==1&&$t(e,"unacceptable YAML version of the document"),e.version=a[0],e.checkLineBreaks=n<2,n!==1&&n!==2&&un(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:l(function(e,r,a){var i,s;a.length!==2&&$t(e,"TAG directive accepts exactly two arguments"),i=a[0],s=a[1],W0.test(i)||$t(e,"ill-formed tag handle (first argument) of the TAG directive"),qi.call(e.tagMap,i)&&$t(e,'there is a previously declared suffix for "'+i+'" tag handle'),q0.test(s)||$t(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{$t(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s},"handleTagDirective")};function Ei(t,e,r,a){var i,s,n,o;if(e<r){if(o=t.input.slice(e,r),a)for(i=0,s=o.length;i<s;i+=1)n=o.charCodeAt(i),n===9||32<=n&&n<=1114111||$t(t,"expected valid JSON character");else E4.test(o)&&$t(t,"the stream contains non-printable characters");t.result+=o}}l(Ei,"captureSegment");function Jl(t,e,r,a){var i,s,n,o;for(ze.isObject(r)||$t(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),n=0,o=i.length;n<o;n+=1)s=i[n],qi.call(e,s)||(e[s]=r[s],a[s]=!0)}l(Jl,"mergeMappings");function la(t,e,r,a,i,s,n,o,h){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&$t(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Ql(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Ql(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),a==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,d=s.length;u<d;u+=1)Jl(t,e,s[u],r);else Jl(t,e,s,r);else!t.json&&!qi.call(r,i)&&qi.call(e,i)&&(t.line=n||t.line,t.lineStart=o||t.lineStart,t.position=h||t.position,$t(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}l(la,"storeMappingPair");function sl(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):$t(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}l(sl,"readLineBreak");function Ie(t,e,r){for(var a=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Vi(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Ur(i))for(sl(t),i=t.input.charCodeAt(t.position),a++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&a!==0&&t.lineIndent<r&&un(t,"deficient indentation"),a}l(Ie,"skipSeparationSpace");function Mn(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||cr(r)))}l(Mn,"testDocumentSeparator");function nl(t,e){e===1?t.result+=" ":e>1&&(t.result+=ze.repeat(`
`,e-1))}l(nl,"writeFoldedLines");function Q0(t,e,r){var a,i,s,n,o,h,u,d,f=t.kind,p=t.result,g;if(g=t.input.charCodeAt(t.position),cr(g)||oa(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(i=t.input.charCodeAt(t.position+1),cr(i)||r&&oa(i)))return!1;for(t.kind="scalar",t.result="",s=n=t.position,o=!1;g!==0;){if(g===58){if(i=t.input.charCodeAt(t.position+1),cr(i)||r&&oa(i))break}else if(g===35){if(a=t.input.charCodeAt(t.position-1),cr(a))break}else{if(t.position===t.lineStart&&Mn(t)||r&&oa(g))break;if(Ur(g))if(h=t.line,u=t.lineStart,d=t.lineIndent,Ie(t,!1,-1),t.lineIndent>=e){o=!0,g=t.input.charCodeAt(t.position);continue}else{t.position=n,t.line=h,t.lineStart=u,t.lineIndent=d;break}}o&&(Ei(t,s,n,!1),nl(t,t.line-h),s=n=t.position,o=!1),Vi(g)||(n=t.position+1),g=t.input.charCodeAt(++t.position)}return Ei(t,s,n,!1),t.result?!0:(t.kind=f,t.result=p,!1)}l(Q0,"readPlainScalar");function Z0(t,e){var r,a,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,a=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Ei(t,a,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)a=t.position,t.position++,i=t.position;else return!0;else Ur(r)?(Ei(t,a,i,!0),nl(t,Ie(t,!1,e)),a=i=t.position):t.position===t.lineStart&&Mn(t)?$t(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);$t(t,"unexpected end of the stream within a single quoted scalar")}l(Z0,"readSingleQuotedScalar");function J0(t,e){var r,a,i,s,n,o;if(o=t.input.charCodeAt(t.position),o!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=a=t.position;(o=t.input.charCodeAt(t.position))!==0;){if(o===34)return Ei(t,r,t.position,!0),t.position++,!0;if(o===92){if(Ei(t,r,t.position,!0),o=t.input.charCodeAt(++t.position),Ur(o))Ie(t,!1,e);else if(o<256&&j0[o])t.result+=X0[o],t.position++;else if((n=H0(o))>0){for(i=n,s=0;i>0;i--)o=t.input.charCodeAt(++t.position),(n=Y0(o))>=0?s=(s<<4)+n:$t(t,"expected hexadecimal character");t.result+=U0(s),t.position++}else $t(t,"unknown escape sequence");r=a=t.position}else Ur(o)?(Ei(t,r,a,!0),nl(t,Ie(t,!1,e)),r=a=t.position):t.position===t.lineStart&&Mn(t)?$t(t,"unexpected end of the document within a double quoted scalar"):(t.position++,a=t.position)}$t(t,"unexpected end of the stream within a double quoted scalar")}l(J0,"readDoubleQuotedScalar");function tp(t,e){var r=!0,a,i,s,n=t.tag,o,h=t.anchor,u,d,f,p,g,y=Object.create(null),m,x,v,T;if(T=t.input.charCodeAt(t.position),T===91)d=93,g=!1,o=[];else if(T===123)d=125,g=!0,o={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),T=t.input.charCodeAt(++t.position);T!==0;){if(Ie(t,!0,e),T=t.input.charCodeAt(t.position),T===d)return t.position++,t.tag=n,t.anchor=h,t.kind=g?"mapping":"sequence",t.result=o,!0;r?T===44&&$t(t,"expected the node content, but found ','"):$t(t,"missed comma between flow collection entries"),x=m=v=null,f=p=!1,T===63&&(u=t.input.charCodeAt(t.position+1),cr(u)&&(f=p=!0,t.position++,Ie(t,!0,e))),a=t.line,i=t.lineStart,s=t.position,fa(t,e,bo,!1,!0),x=t.tag,m=t.result,Ie(t,!0,e),T=t.input.charCodeAt(t.position),(p||t.line===a)&&T===58&&(f=!0,T=t.input.charCodeAt(++t.position),Ie(t,!0,e),fa(t,e,bo,!1,!0),v=t.result),g?la(t,o,y,x,m,v,a,i,s):f?o.push(la(t,null,y,x,m,v,a,i,s)):o.push(m),Ie(t,!0,e),T=t.input.charCodeAt(t.position),T===44?(r=!0,T=t.input.charCodeAt(++t.position)):r=!1}$t(t,"unexpected end of the stream within a flow collection")}l(tp,"readFlowCollection");function ep(t,e){var r,a,i=Ol,s=!1,n=!1,o=e,h=0,u=!1,d,f;if(f=t.input.charCodeAt(t.position),f===124)a=!1;else if(f===62)a=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Ol===i?i=f===43?fd:w4:$t(t,"repeat of a chomping mode identifier");else if((d=G0(f))>=0)d===0?$t(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):n?$t(t,"repeat of an indentation width identifier"):(o=e+d-1,n=!0);else break;if(Vi(f)){do f=t.input.charCodeAt(++t.position);while(Vi(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Ur(f)&&f!==0)}for(;f!==0;){for(sl(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!n||t.lineIndent<o)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!n&&t.lineIndent>o&&(o=t.lineIndent),Ur(f)){h++;continue}if(t.lineIndent<o){i===fd?t.result+=ze.repeat(`
`,s?1+h:h):i===Ol&&s&&(t.result+=`
`);break}for(a?Vi(f)?(u=!0,t.result+=ze.repeat(`
`,s?1+h:h)):u?(u=!1,t.result+=ze.repeat(`
`,h+1)):h===0?s&&(t.result+=" "):t.result+=ze.repeat(`
`,h):t.result+=ze.repeat(`
`,s?1+h:h),s=!0,n=!0,h=0,r=t.position;!Ur(f)&&f!==0;)f=t.input.charCodeAt(++t.position);Ei(t,r,t.position,!1)}return!0}l(ep,"readBlockScalar");function tc(t,e){var r,a=t.tag,i=t.anchor,s=[],n,o=!1,h;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),h=t.input.charCodeAt(t.position);h!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$t(t,"tab characters must not be used in indentation")),!(h!==45||(n=t.input.charCodeAt(t.position+1),!cr(n))));){if(o=!0,t.position++,Ie(t,!0,-1)&&t.lineIndent<=e){s.push(null),h=t.input.charCodeAt(t.position);continue}if(r=t.line,fa(t,e,z0,!1,!0),s.push(t.result),Ie(t,!0,-1),h=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&h!==0)$t(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return o?(t.tag=a,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}l(tc,"readBlockSequence");function rp(t,e,r){var a,i,s,n,o,h,u=t.tag,d=t.anchor,f={},p=Object.create(null),g=null,y=null,m=null,x=!1,v=!1,T;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),T=t.input.charCodeAt(t.position);T!==0;){if(!x&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$t(t,"tab characters must not be used in indentation")),a=t.input.charCodeAt(t.position+1),s=t.line,(T===63||T===58)&&cr(a))T===63?(x&&(la(t,f,p,g,y,null,n,o,h),g=y=m=null),v=!0,x=!0,i=!0):x?(x=!1,i=!0):$t(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,T=a;else{if(n=t.line,o=t.lineStart,h=t.position,!fa(t,r,V0,!1,!0))break;if(t.line===s){for(T=t.input.charCodeAt(t.position);Vi(T);)T=t.input.charCodeAt(++t.position);if(T===58)T=t.input.charCodeAt(++t.position),cr(T)||$t(t,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(la(t,f,p,g,y,null,n,o,h),g=y=m=null),v=!0,x=!1,i=!1,g=t.tag,y=t.result;else if(v)$t(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(v)$t(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===s||t.lineIndent>e)&&(x&&(n=t.line,o=t.lineStart,h=t.position),fa(t,e,ko,!0,i)&&(x?y=t.result:m=t.result),x||(la(t,f,p,g,y,m,n,o,h),g=y=m=null),Ie(t,!0,-1),T=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&T!==0)$t(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return x&&la(t,f,p,g,y,null,n,o,h),v&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=f),v}l(rp,"readBlockMapping");function ip(t){var e,r=!1,a=!1,i,s,n;if(n=t.input.charCodeAt(t.position),n!==33)return!1;if(t.tag!==null&&$t(t,"duplication of a tag property"),n=t.input.charCodeAt(++t.position),n===60?(r=!0,n=t.input.charCodeAt(++t.position)):n===33?(a=!0,i="!!",n=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do n=t.input.charCodeAt(++t.position);while(n!==0&&n!==62);t.position<t.length?(s=t.input.slice(e,t.position),n=t.input.charCodeAt(++t.position)):$t(t,"unexpected end of the stream within a verbatim tag")}else{for(;n!==0&&!cr(n);)n===33&&(a?$t(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),W0.test(i)||$t(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),n=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),L4.test(s)&&$t(t,"tag suffix cannot contain flow indicator characters")}s&&!q0.test(s)&&$t(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{$t(t,"tag name is malformed: "+s)}return r?t.tag=s:qi.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:$t(t,'undeclared tag handle "'+i+'"'),!0}l(ip,"readTagProperty");function ap(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&$t(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!cr(r)&&!oa(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&$t(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}l(ap,"readAnchorProperty");function sp(t){var e,r,a;if(a=t.input.charCodeAt(t.position),a!==42)return!1;for(a=t.input.charCodeAt(++t.position),e=t.position;a!==0&&!cr(a)&&!oa(a);)a=t.input.charCodeAt(++t.position);return t.position===e&&$t(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),qi.call(t.anchorMap,r)||$t(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ie(t,!0,-1),!0}l(sp,"readAlias");function fa(t,e,r,a,i){var s,n,o,h=1,u=!1,d=!1,f,p,g,y,m,x;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=n=o=ko===r||z0===r,a&&Ie(t,!0,-1)&&(u=!0,t.lineIndent>e?h=1:t.lineIndent===e?h=0:t.lineIndent<e&&(h=-1)),h===1)for(;ip(t)||ap(t);)Ie(t,!0,-1)?(u=!0,o=s,t.lineIndent>e?h=1:t.lineIndent===e?h=0:t.lineIndent<e&&(h=-1)):o=!1;if(o&&(o=u||i),(h===1||ko===r)&&(bo===r||V0===r?m=e:m=e+1,x=t.position-t.lineStart,h===1?o&&(tc(t,x)||rp(t,x,m))||tp(t,m)?d=!0:(n&&ep(t,m)||Z0(t,m)||J0(t,m)?d=!0:sp(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&$t(t,"alias node should not have any properties")):Q0(t,m,bo===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):h===0&&(d=o&&tc(t,x))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&$t(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,p=t.implicitTypes.length;f<p;f+=1)if(y=t.implicitTypes[f],y.resolve(t.result)){t.result=y.construct(t.result),t.tag=y.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(qi.call(t.typeMap[t.kind||"fallback"],t.tag))y=t.typeMap[t.kind||"fallback"][t.tag];else for(y=null,g=t.typeMap.multi[t.kind||"fallback"],f=0,p=g.length;f<p;f+=1)if(t.tag.slice(0,g[f].tag.length)===g[f].tag){y=g[f];break}y||$t(t,"unknown tag !<"+t.tag+">"),t.result!==null&&y.kind!==t.kind&&$t(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+y.kind+'", not "'+t.kind+'"'),y.resolve(t.result,t.tag)?(t.result=y.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):$t(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}l(fa,"composeNode");function np(t){var e=t.position,r,a,i,s=!1,n;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(n=t.input.charCodeAt(t.position))!==0&&(Ie(t,!0,-1),n=t.input.charCodeAt(t.position),!(t.lineIndent>0||n!==37));){for(s=!0,n=t.input.charCodeAt(++t.position),r=t.position;n!==0&&!cr(n);)n=t.input.charCodeAt(++t.position);for(a=t.input.slice(r,t.position),i=[],a.length<1&&$t(t,"directive name must not be less than one character in length");n!==0;){for(;Vi(n);)n=t.input.charCodeAt(++t.position);if(n===35){do n=t.input.charCodeAt(++t.position);while(n!==0&&!Ur(n));break}if(Ur(n))break;for(r=t.position;n!==0&&!cr(n);)n=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}n!==0&&sl(t),qi.call(gd,a)?gd[a](t,a,i):un(t,'unknown document directive "'+a+'"')}if(Ie(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ie(t,!0,-1)):s&&$t(t,"directives end mark is expected"),fa(t,t.lineIndent-1,ko,!1,!0),Ie(t,!0,-1),t.checkLineBreaks&&A4.test(t.input.slice(e,t.position))&&un(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Mn(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ie(t,!0,-1));return}if(t.position<t.length-1)$t(t,"end of the stream or a document separator is expected");else return}l(np,"readDocument");function bh(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new K0(t,e),a=t.indexOf("\0");for(a!==-1&&(r.position=a,$t(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)np(r);return r.documents}l(bh,"loadDocuments");function B4(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var a=bh(t,r);if(typeof e!="function")return a;for(var i=0,s=a.length;i<s;i+=1)e(a[i])}l(B4,"loadAll$1");function op(t,e){var r=bh(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new br("expected a single document in the stream, but found more")}}l(op,"load$1");var D4=op,R4={load:D4},lp=Object.prototype.toString,cp=Object.prototype.hasOwnProperty,kh=65279,I4=9,dn=10,N4=13,F4=32,P4=33,O4=34,ec=35,M4=37,$4=38,V4=39,z4=42,hp=44,W4=45,vo=58,q4=61,Y4=62,H4=63,G4=64,up=91,dp=93,U4=96,pp=123,j4=124,fp=125,sr={};sr[0]="\\0";sr[7]="\\a";sr[8]="\\b";sr[9]="\\t";sr[10]="\\n";sr[11]="\\v";sr[12]="\\f";sr[13]="\\r";sr[27]="\\e";sr[34]='\\"';sr[92]="\\\\";sr[133]="\\N";sr[160]="\\_";sr[8232]="\\L";sr[8233]="\\P";var X4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],K4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function gp(t,e){var r,a,i,s,n,o,h;if(e===null)return{};for(r={},a=Object.keys(e),i=0,s=a.length;i<s;i+=1)n=a[i],o=String(e[n]),n.slice(0,2)==="!!"&&(n="tag:yaml.org,2002:"+n.slice(2)),h=t.compiledTypeMap.fallback[n],h&&cp.call(h.styleAliases,o)&&(o=h.styleAliases[o]),r[n]=o;return r}l(gp,"compileStyleMap");function yp(t){var e,r,a;if(e=t.toString(16).toUpperCase(),t<=255)r="x",a=2;else if(t<=65535)r="u",a=4;else if(t<=4294967295)r="U",a=8;else throw new br("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ze.repeat("0",a-e.length)+e}l(yp,"encodeHex");var Q4=1,pn=2;function mp(t){this.schema=t.schema||$0,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ze.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=gp(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?pn:Q4,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}l(mp,"State");function rc(t,e){for(var r=ze.repeat(" ",e),a=0,i=-1,s="",n,o=t.length;a<o;)i=t.indexOf(`
`,a),i===-1?(n=t.slice(a),a=o):(n=t.slice(a,i+1),a=i+1),n.length&&n!==`
`&&(s+=r),s+=n;return s}l(rc,"indentString");function To(t,e){return`
`+ze.repeat(" ",t.indent*e)}l(To,"generateNextLine");function xp(t,e){var r,a,i;for(r=0,a=t.implicitTypes.length;r<a;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}l(xp,"testImplicitResolving");function fn(t){return t===F4||t===I4}l(fn,"isWhitespace");function Bs(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==kh||65536<=t&&t<=1114111}l(Bs,"isPrintable");function ic(t){return Bs(t)&&t!==kh&&t!==N4&&t!==dn}l(ic,"isNsCharOrWhitespace");function ac(t,e,r){var a=ic(t),i=a&&!fn(t);return(r?a:a&&t!==hp&&t!==up&&t!==dp&&t!==pp&&t!==fp)&&t!==ec&&!(e===vo&&!i)||ic(e)&&!fn(e)&&t===ec||e===vo&&i}l(ac,"isPlainSafe");function bp(t){return Bs(t)&&t!==kh&&!fn(t)&&t!==W4&&t!==H4&&t!==vo&&t!==hp&&t!==up&&t!==dp&&t!==pp&&t!==fp&&t!==ec&&t!==$4&&t!==z4&&t!==P4&&t!==j4&&t!==q4&&t!==Y4&&t!==V4&&t!==O4&&t!==M4&&t!==G4&&t!==U4}l(bp,"isPlainSafeFirst");function kp(t){return!fn(t)&&t!==vo}l(kp,"isPlainSafeLast");function Ra(t,e){var r=t.charCodeAt(e),a;return r>=55296&&r<=56319&&e+1<t.length&&(a=t.charCodeAt(e+1),a>=56320&&a<=57343)?(r-55296)*1024+a-56320+65536:r}l(Ra,"codePointAt");function vh(t){var e=/^\n* /;return e.test(t)}l(vh,"needIndentIndicator");var vp=1,sc=2,Tp=3,_p=4,La=5;function Cp(t,e,r,a,i,s,n,o){var h,u=0,d=null,f=!1,p=!1,g=a!==-1,y=-1,m=bp(Ra(t,0))&&kp(Ra(t,t.length-1));if(e||n)for(h=0;h<t.length;u>=65536?h+=2:h++){if(u=Ra(t,h),!Bs(u))return La;m=m&&ac(u,d,o),d=u}else{for(h=0;h<t.length;u>=65536?h+=2:h++){if(u=Ra(t,h),u===dn)f=!0,g&&(p=p||h-y-1>a&&t[y+1]!==" ",y=h);else if(!Bs(u))return La;m=m&&ac(u,d,o),d=u}p=p||g&&h-y-1>a&&t[y+1]!==" "}return!f&&!p?m&&!n&&!i(t)?vp:s===pn?La:sc:r>9&&vh(t)?La:n?s===pn?La:sc:p?_p:Tp}l(Cp,"chooseScalarStyle");function Sp(t,e,r,a,i){t.dump=function(){if(e.length===0)return t.quotingType===pn?'""':"''";if(!t.noCompatMode&&(X4.indexOf(e)!==-1||K4.test(e)))return t.quotingType===pn?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),n=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),o=a||t.flowLevel>-1&&r>=t.flowLevel;function h(u){return xp(t,u)}switch(l(h,"testAmbiguity"),Cp(e,o,t.indent,n,h,t.quotingType,t.forceQuotes&&!a,i)){case vp:return e;case sc:return"'"+e.replace(/'/g,"''")+"'";case Tp:return"|"+nc(e,t.indent)+oc(rc(e,s));case _p:return">"+nc(e,t.indent)+oc(rc(wp(e,n),s));case La:return'"'+Ep(e)+'"';default:throw new br("impossible error: invalid scalar style")}}()}l(Sp,"writeScalar");function nc(t,e){var r=vh(t)?String(e):"",a=t[t.length-1]===`
`,i=a&&(t[t.length-2]===`
`||t===`
`),s=i?"+":a?"":"-";return r+s+`
`}l(nc,"blockHeader");function oc(t){return t[t.length-1]===`
`?t.slice(0,-1):t}l(oc,"dropEndingNewline");function wp(t,e){for(var r=/(\n+)([^\n]*)/g,a=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,lc(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",s,n;n=r.exec(t);){var o=n[1],h=n[2];s=h[0]===" ",a+=o+(!i&&!s&&h!==""?`
`:"")+lc(h,e),i=s}return a}l(wp,"foldString");function lc(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,a,i=0,s,n=0,o=0,h="";a=r.exec(t);)o=a.index,o-i>e&&(s=n>i?n:o,h+=`
`+t.slice(i,s),i=s+1),n=o;return h+=`
`,t.length-i>e&&n>i?h+=t.slice(i,n)+`
`+t.slice(n+1):h+=t.slice(i),h.slice(1)}l(lc,"foldLine");function Ep(t){for(var e="",r=0,a,i=0;i<t.length;r>=65536?i+=2:i++)r=Ra(t,i),a=sr[r],!a&&Bs(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=a||yp(r);return e}l(Ep,"escapeString");function Ap(t,e,r){var a="",i=t.tag,s,n,o;for(s=0,n=r.length;s<n;s+=1)o=r[s],t.replacer&&(o=t.replacer.call(r,String(s),o)),(li(t,e,o,!1,!1)||typeof o>"u"&&li(t,e,null,!1,!1))&&(a!==""&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=i,t.dump="["+a+"]"}l(Ap,"writeFlowSequence");function cc(t,e,r,a){var i="",s=t.tag,n,o,h;for(n=0,o=r.length;n<o;n+=1)h=r[n],t.replacer&&(h=t.replacer.call(r,String(n),h)),(li(t,e+1,h,!0,!0,!1,!0)||typeof h>"u"&&li(t,e+1,null,!0,!0,!1,!0))&&((!a||i!=="")&&(i+=To(t,e)),t.dump&&dn===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}l(cc,"writeBlockSequence");function Lp(t,e,r){var a="",i=t.tag,s=Object.keys(r),n,o,h,u,d;for(n=0,o=s.length;n<o;n+=1)d="",a!==""&&(d+=", "),t.condenseFlow&&(d+='"'),h=s[n],u=r[h],t.replacer&&(u=t.replacer.call(r,h,u)),li(t,e,h,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),li(t,e,u,!1,!1)&&(d+=t.dump,a+=d));t.tag=i,t.dump="{"+a+"}"}l(Lp,"writeFlowMapping");function Bp(t,e,r,a){var i="",s=t.tag,n=Object.keys(r),o,h,u,d,f,p;if(t.sortKeys===!0)n.sort();else if(typeof t.sortKeys=="function")n.sort(t.sortKeys);else if(t.sortKeys)throw new br("sortKeys must be a boolean or a function");for(o=0,h=n.length;o<h;o+=1)p="",(!a||i!=="")&&(p+=To(t,e)),u=n[o],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),li(t,e+1,u,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&dn===t.dump.charCodeAt(0)?p+="?":p+="? "),p+=t.dump,f&&(p+=To(t,e)),li(t,e+1,d,!0,f)&&(t.dump&&dn===t.dump.charCodeAt(0)?p+=":":p+=": ",p+=t.dump,i+=p));t.tag=s,t.dump=i||"{}"}l(Bp,"writeBlockMapping");function hc(t,e,r){var a,i,s,n,o,h;for(i=r?t.explicitTypes:t.implicitTypes,s=0,n=i.length;s<n;s+=1)if(o=i[s],(o.instanceOf||o.predicate)&&(!o.instanceOf||typeof e=="object"&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(h=t.styleMap[o.tag]||o.defaultStyle,lp.call(o.represent)==="[object Function]")a=o.represent(e,h);else if(cp.call(o.represent,h))a=o.represent[h](e,h);else throw new br("!<"+o.tag+'> tag resolver accepts not "'+h+'" style');t.dump=a}return!0}return!1}l(hc,"detectType");function li(t,e,r,a,i,s,n){t.tag=null,t.dump=r,hc(t,r,!1)||hc(t,r,!0);var o=lp.call(t.dump),h=a,u;a&&(a=t.flowLevel<0||t.flowLevel>e);var d=o==="[object Object]"||o==="[object Array]",f,p;if(d&&(f=t.duplicates.indexOf(r),p=f!==-1),(t.tag!==null&&t.tag!=="?"||p||t.indent!==2&&e>0)&&(i=!1),p&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(d&&p&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),o==="[object Object]")a&&Object.keys(t.dump).length!==0?(Bp(t,e,t.dump,i),p&&(t.dump="&ref_"+f+t.dump)):(Lp(t,e,t.dump),p&&(t.dump="&ref_"+f+" "+t.dump));else if(o==="[object Array]")a&&t.dump.length!==0?(t.noArrayIndent&&!n&&e>0?cc(t,e-1,t.dump,i):cc(t,e,t.dump,i),p&&(t.dump="&ref_"+f+t.dump)):(Ap(t,e,t.dump),p&&(t.dump="&ref_"+f+" "+t.dump));else if(o==="[object String]")t.tag!=="?"&&Sp(t,t.dump,e,s,h);else{if(o==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new br("unacceptable kind of an object to dump "+o)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}l(li,"writeNode");function Dp(t,e){var r=[],a=[],i,s;for(_o(t,r,a),i=0,s=a.length;i<s;i+=1)e.duplicates.push(r[a[i]]);e.usedDuplicates=new Array(s)}l(Dp,"getDuplicateReferences");function _o(t,e,r){var a,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)_o(t[i],e,r);else for(a=Object.keys(t),i=0,s=a.length;i<s;i+=1)_o(t[a[i]],e,r)}l(_o,"inspectNode");function Z4(t,e){e=e||{};var r=new mp(e);r.noRefs||Dp(t,r);var a=t;return r.replacer&&(a=r.replacer.call({"":a},"",a)),li(r,0,a,!0,!0)?r.dump+`
`:""}l(Z4,"dump$1");function J4(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}l(J4,"renamed");var Th=T0,_h=R4.load;/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/var Rp={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},uc=new Map,Ip=new Map,Np=l(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(A.debug("Registering icon pack:",e.name),"loader"in e)Ip.set(e.name,e.loader);else if("icons"in e)uc.set(e.name,e.icons);else throw A.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.')}},"registerIconPacks"),t5=l(async(t,e)=>{const r=n3(t,!0,e!==void 0);if(!r)throw new Error(`Invalid icon name: ${t}`);const a=r.prefix||e;if(!a)throw new Error(`Icon name must contain a prefix: ${t}`);let i=uc.get(a);if(!i){const n=Ip.get(a);if(!n)throw new Error(`Icon set not found: ${r.prefix}`);try{i={...await n(),prefix:a},uc.set(a,i)}catch(o){throw A.error(o),new Error(`Failed to load icon set: ${r.prefix}`)}}const s=o3(i,r.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),ga=l(async(t,e)=>{let r;try{r=await t5(t,e==null?void 0:e.fallbackPrefix)}catch(s){A.error(s),r=Rp}const a=i3(r,e);return a3(s3(a.body),a.attributes)},"getIconSVG"),$n=l(({flowchart:t})=>{var i,s;const e=((i=t==null?void 0:t.subGraphTitleMargin)==null?void 0:i.top)??0,r=((s=t==null?void 0:t.subGraphTitleMargin)==null?void 0:s.bottom)??0,a=e+r;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:a}},"getSubGraphTitleMargins"),Fp="",e5={curveBasis:Dn,curveBasisClosed:Cb,curveBasisOpen:_b,curveBumpX:Tb,curveBumpY:vb,curveBundle:kb,curveCardinalClosed:bb,curveCardinalOpen:xb,curveCardinal:mb,curveCatmullRomClosed:yb,curveCatmullRomOpen:gb,curveCatmullRom:fb,curveLinear:pb,curveLinearClosed:db,curveMonotoneX:ub,curveMonotoneY:hb,curveNatural:cb,curveStep:lb,curveStepAfter:ob,curveStepBefore:nb},r5=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,i5=l(function(t,e){const r=Pp(t,/(?:init\b)|(?:initialize\b)/);let a={};if(Array.isArray(r)){const n=r.map(o=>o.args);fo(n),a=Ve(a,[...n])}else a=r.args;if(!a)return;let i=lh(t,e);const s="config";return a[s]!==void 0&&(i==="flowchart-v2"&&(i="flowchart"),a[i]=a[s],delete a[s]),a},"detectInit"),Pp=l(function(t,e=null){var r,a;try{const i=new RegExp(`[%]{2}(?![{]${r5.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),A.debug(`Detecting diagram directive${e!==null?" type:"+e:""} based on the text:${t}`);let s;const n=[];for(;(s=sn.exec(t))!==null;)if(s.index===sn.lastIndex&&sn.lastIndex++,s&&!e||e&&((r=s[1])!=null&&r.match(e))||e&&((a=s[2])!=null&&a.match(e))){const o=s[1]?s[1]:s[2],h=s[3]?s[3].trim():s[4]?JSON.parse(s[4].trim()):null;n.push({type:o,args:h})}return n.length===0?{type:t,args:null}:n.length===1?n[0]:n}catch(i){return A.error(`ERROR: ${i.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),a5=l(function(t){return t.replace(sn,"")},"removeDirectives"),s5=l(function(t,e){for(const[r,a]of e.entries())if(a.match(t))return r;return-1},"isSubstringInArray");function Ch(t,e){if(!t)return e;const r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return e5[r]??e}l(Ch,"interpolateToCurve");function Op(t,e){const r=t.trim();if(r)return e.securityLevel!=="loose"?Ta(r):r}l(Op,"formatUrl");var n5=l((t,...e)=>{const r=t.split("."),a=r.length-1,i=r[a];let s=window;for(let n=0;n<a;n++)if(s=s[r[n]],!s){A.error(`Function name: ${t} not found in window`);return}s[i](...e)},"runFunc");function Sh(t,e){return!t||!e?0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}l(Sh,"distance");function Mp(t){let e,r=0;t.forEach(i=>{r+=Sh(i,e),e=i});const a=r/2;return wh(t,a)}l(Mp,"traverseEdge");function $p(t){return t.length===1?t[0]:Mp(t)}l($p,"calcLabelPosition");var yd=l((t,e=2)=>{const r=Math.pow(10,e);return Math.round(t*r)/r},"roundNumber"),wh=l((t,e)=>{let r,a=e;for(const i of t){if(r){const s=Sh(i,r);if(s<a)a-=s;else{const n=a/s;if(n<=0)return r;if(n>=1)return{x:i.x,y:i.y};if(n>0&&n<1)return{x:yd((1-n)*r.x+n*i.x,5),y:yd((1-n)*r.y+n*i.y,5)}}}r=i}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),o5=l((t,e,r)=>{A.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());const i=wh(e,25),s=t?10:5,n=Math.atan2(e[0].y-i.y,e[0].x-i.x),o={x:0,y:0};return o.x=Math.sin(n)*s+(e[0].x+i.x)/2,o.y=-Math.cos(n)*s+(e[0].y+i.y)/2,o},"calcCardinalityPosition");function Vp(t,e,r){const a=structuredClone(r);A.info("our points",a),e!=="start_left"&&e!=="start_right"&&a.reverse();const i=25+t,s=wh(a,i),n=10+t*.5,o=Math.atan2(a[0].y-s.y,a[0].x-s.x),h={x:0,y:0};return e==="start_left"?(h.x=Math.sin(o+Math.PI)*n+(a[0].x+s.x)/2,h.y=-Math.cos(o+Math.PI)*n+(a[0].y+s.y)/2):e==="end_right"?(h.x=Math.sin(o-Math.PI)*n+(a[0].x+s.x)/2-5,h.y=-Math.cos(o-Math.PI)*n+(a[0].y+s.y)/2-5):e==="end_left"?(h.x=Math.sin(o)*n+(a[0].x+s.x)/2-5,h.y=-Math.cos(o)*n+(a[0].y+s.y)/2-5):(h.x=Math.sin(o)*n+(a[0].x+s.x)/2,h.y=-Math.cos(o)*n+(a[0].y+s.y)/2),h}l(Vp,"calcTerminalLabelPosition");function Eh(t){let e="",r="";for(const a of t)a!==void 0&&(a.startsWith("color:")||a.startsWith("text-align:")?r=r+a+";":e=e+a+";");return{style:e,labelStyle:r}}l(Eh,"getStylesFromArray");var md=0,zp=l(()=>(md++,"id-"+Math.random().toString(36).substr(2,12)+"-"+md),"generateId");function Wp(t){let e="";const r="0123456789abcdef",a=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*a));return e}l(Wp,"makeRandomHex");var qp=l(t=>Wp(t.length),"random"),l5=l(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),c5=l(function(t,e){const r=e.text.replace(mt.lineBreakRegex," "),[,a]=Xi(e.fontSize),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.style("text-anchor",e.anchor),i.style("font-family",e.fontFamily),i.style("font-size",a),i.style("font-weight",e.fontWeight),i.attr("fill",e.fill),e.class!==void 0&&i.attr("class",e.class);const s=i.append("tspan");return s.attr("x",e.x+e.textMargin*2),s.attr("fill",e.fill),s.text(r),i},"drawSimpleText"),Yp=nh((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),mt.lineBreakRegex.test(t)))return t;const a=t.split(" ").filter(Boolean),i=[];let s="";return a.forEach((n,o)=>{const h=zr(`${n} `,r),u=zr(s,r);if(h>e){const{hyphenatedStrings:p,remainingWord:g}=h5(n,e,"-",r);i.push(s,...p),s=g}else u+h>=e?(i.push(s),s=n):s=[s,n].filter(Boolean).join(" ");o+1===a.length&&i.push(s)}),i.filter(n=>n!=="").join(r.joinWith)},(t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),h5=nh((t,e,r="-",a)=>{a=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},a);const i=[...t],s=[];let n="";return i.forEach((o,h)=>{const u=`${n}${o}`;if(zr(u,a)>=e){const f=h+1,p=i.length===f,g=`${u}${r}`;s.push(p?u:g),n=""}else n=u}),{hyphenatedStrings:s,remainingWord:n}},(t,e,r="-",a)=>`${t}${e}${r}${a.fontSize}${a.fontWeight}${a.fontFamily}`);function Co(t,e){return Ah(t,e).height}l(Co,"calculateTextHeight");function zr(t,e){return Ah(t,e).width}l(zr,"calculateTextWidth");var Ah=nh((t,e)=>{const{fontSize:r=12,fontFamily:a="Arial",fontWeight:i=400}=e;if(!t)return{width:0,height:0};const[,s]=Xi(r),n=["sans-serif",a],o=t.split(mt.lineBreakRegex),h=[],u=yt("body");if(!u.remove)return{width:0,height:0,lineHeight:0};const d=u.append("svg");for(const p of n){let g=0;const y={width:0,height:0,lineHeight:0};for(const m of o){const x=l5();x.text=m||Fp;const v=c5(d,x).style("font-size",s).style("font-weight",i).style("font-family",p),T=(v._groups||v)[0][0].getBBox();if(T.width===0&&T.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,T.width)),g=Math.round(T.height),y.height+=g,y.lineHeight=Math.round(Math.max(y.lineHeight,g))}h.push(y)}d.remove();const f=isNaN(h[1].height)||isNaN(h[1].width)||isNaN(h[1].lineHeight)||h[0].height>h[1].height&&h[0].width>h[1].width&&h[0].lineHeight>h[1].lineHeight?0:1;return h[f]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),Ga,u5=(Ga=class{constructor(e=!1,r){this.count=0,this.count=r?r.length:0,this.next=e?()=>this.count++:()=>Date.now()}},l(Ga,"InitIDGenerator"),Ga),Qn,d5=l(function(t){return Qn=Qn||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Qn.innerHTML=t,unescape(Qn.textContent)},"entityDecode");function Lh(t){return"str"in t}l(Lh,"isDetailedError");var p5=l((t,e,r,a)=>{var s;if(!a)return;const i=(s=t.node())==null?void 0:s.getBBox();i&&t.append("text").text(a).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-r).attr("class",e)},"insertTitle"),Xi=l(t=>{if(typeof t=="number")return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function Bi(t,e){return Gb({},t,e)}l(Bi,"cleanAndMerge");var re={assignWithDepth:Ve,wrapLabel:Yp,calculateTextHeight:Co,calculateTextWidth:zr,calculateTextDimensions:Ah,cleanAndMerge:Bi,detectInit:i5,detectDirective:Pp,isSubstringInArray:s5,interpolateToCurve:Ch,calcLabelPosition:$p,calcCardinalityPosition:o5,calcTerminalLabelPosition:Vp,formatUrl:Op,getStylesFromArray:Eh,generateId:zp,random:qp,runFunc:n5,entityDecode:d5,insertTitle:p5,parseFontSize:Xi,InitIDGenerator:u5},f5=l(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),e=e.replace(/#\w+;/g,function(r){const a=r.substring(1,r.length-1);return/^\+?\d+$/.test(a)?""+a+"":""+a+""}),e},"encodeEntities"),Ai=l(function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),Hp=l((t,e,{counter:r=0,prefix:a,suffix:i})=>`${a?`${a}_`:""}${t}_${e}_${r}${i?`_${i}`:""}`,"getEdgeId");function hr(t){return t??null}l(hr,"handleUndefinedAttr");function Gp(t,{markdownAutoWrap:e}){const a=t.replace(/<br\/>/g,`
`).replace(/\n{2,}/g,`
`),i=A1(a);return e===!1?i.replace(/ /g,"&nbsp;"):i}l(Gp,"preprocessMarkdown");function Up(t,e={}){const r=Gp(t,e),a=D1.lexer(r),i=[[]];let s=0;function n(o,h="normal"){o.type==="text"?o.text.split(`
`).forEach((d,f)=>{f!==0&&(s++,i.push([])),d.split(" ").forEach(p=>{p=p.replace(/&#39;/g,"'"),p&&i[s].push({content:p,type:h})})}):o.type==="strong"||o.type==="em"?o.tokens.forEach(u=>{n(u,o.type)}):o.type==="html"&&i[s].push({content:o.text,type:"normal"})}return l(n,"processNode"),a.forEach(o=>{var h;o.type==="paragraph"?(h=o.tokens)==null||h.forEach(u=>{n(u)}):o.type==="html"&&i[s].push({content:o.text,type:"normal"})}),i}l(Up,"markdownToLines");function jp(t,{markdownAutoWrap:e}={}){const r=D1.lexer(t);function a(i){var s,n,o;return i.type==="text"?e===!1?i.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):i.text.replace(/\n */g,"<br/>"):i.type==="strong"?`<strong>${(s=i.tokens)==null?void 0:s.map(a).join("")}</strong>`:i.type==="em"?`<em>${(n=i.tokens)==null?void 0:n.map(a).join("")}</em>`:i.type==="paragraph"?`<p>${(o=i.tokens)==null?void 0:o.map(a).join("")}</p>`:i.type==="space"?"":i.type==="html"?`${i.text}`:i.type==="escape"?i.text:`Unsupported markdown: ${i.type}`}return l(a,"output"),r.map(a).join("")}l(jp,"markdownToHTML");function Xp(t){return Intl.Segmenter?[...new Intl.Segmenter().segment(t)].map(e=>e.segment):[...t]}l(Xp,"splitTextToChars");function Kp(t,e){const r=Xp(e.content);return Bh(t,[],r,e.type)}l(Kp,"splitWordToFitWidth");function Bh(t,e,r,a){if(r.length===0)return[{content:e.join(""),type:a},{content:"",type:a}];const[i,...s]=r,n=[...e,i];return t([{content:n.join(""),type:a}])?Bh(t,n,s,a):(e.length===0&&i&&(e.push(i),r.shift()),[{content:e.join(""),type:a},{content:r.join(""),type:a}])}l(Bh,"splitWordToFitWidthRecursion");function Qp(t,e){if(t.some(({content:r})=>r.includes(`
`)))throw new Error("splitLineToFitWidth does not support newlines in the line");return So(t,e)}l(Qp,"splitLineToFitWidth");function So(t,e,r=[],a=[]){if(t.length===0)return a.length>0&&r.push(a),r.length>0?r:[];let i="";t[0].content===" "&&(i=" ",t.shift());const s=t.shift()??{content:" ",type:"normal"},n=[...a];if(i!==""&&n.push({content:i,type:"normal"}),n.push(s),e(n))return So(t,e,r,n);if(a.length>0)r.push(a),t.unshift(s);else if(s.content){const[o,h]=Kp(e,s);r.push([o]),h.content&&t.unshift(h)}return So(t,e,r)}l(So,"splitLineToFitWidthRecursion");function dc(t,e){e&&t.attr("style",e)}l(dc,"applyStyle");async function Zp(t,e,r,a,i=!1){const s=t.append("foreignObject");s.attr("width",`${10*r}px`),s.attr("height",`${10*r}px`);const n=s.append("xhtml:div");let o=e.label;e.label&&ir(e.label)&&(o=await On(e.label.replace(mt.lineBreakRegex,`
`),H()));const h=e.isNode?"nodeLabel":"edgeLabel",u=n.append("span");u.html(o),dc(u,e.labelStyle),u.attr("class",`${h} ${a}`),dc(n,e.labelStyle),n.style("display","table-cell"),n.style("white-space","nowrap"),n.style("line-height","1.5"),n.style("max-width",r+"px"),n.style("text-align","center"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),i&&n.attr("class","labelBkg");let d=n.node().getBoundingClientRect();return d.width===r&&(n.style("display","table"),n.style("white-space","break-spaces"),n.style("width",r+"px"),d=n.node().getBoundingClientRect()),s.node()}l(Zp,"addHtmlSpan");function ol(t,e,r){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*r-.1+"em").attr("dy",r+"em")}l(ol,"createTspan");function Jp(t,e,r){const a=t.append("text"),i=ol(a,1,e);ll(i,r);const s=i.node().getComputedTextLength();return a.remove(),s}l(Jp,"computeWidthOfText");function tf(t,e,r){var n;const a=t.append("text"),i=ol(a,1,e);ll(i,[{content:r,type:"normal"}]);const s=(n=i.node())==null?void 0:n.getBoundingClientRect();return s&&a.remove(),s}l(tf,"computeDimensionOfText");function ef(t,e,r,a=!1){const s=e.append("g"),n=s.insert("rect").attr("class","background").attr("style","stroke: none"),o=s.append("text").attr("y","-10.1");let h=0;for(const u of r){const d=l(p=>Jp(s,1.1,p)<=t,"checkWidth"),f=d(u)?[u]:Qp(u,d);for(const p of f){const g=ol(o,h,1.1);ll(g,p),h++}}if(a){const u=o.node().getBBox(),d=2;return n.attr("x",u.x-d).attr("y",u.y-d).attr("width",u.width+2*d).attr("height",u.height+2*d),s.node()}else return o.node()}l(ef,"createFormattedText");function ll(t,e){t.text(""),e.forEach((r,a)=>{const i=t.append("tspan").attr("font-style",r.type==="em"?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight",r.type==="strong"?"bold":"normal");a===0?i.text(r.content):i.text(" "+r.content)})}l(ll,"updateTextContentAndStyles");function Dh(t){return t.replace(/fa[bklrs]?:fa-[\w-]+/g,e=>`<i class='${e.replace(":"," ")}'></i>`)}l(Dh,"replaceIconSubstring");var Wr=l(async(t,e="",{style:r="",isTitle:a=!1,classes:i="",useHtmlLabels:s=!0,isNode:n=!0,width:o=200,addSvgBackground:h=!1}={},u)=>{if(A.debug("XYZ createText",e,r,a,i,s,n,"addSvgBackground: ",h),s){const d=jp(e,u),f=Dh(Ai(d)),p=e.replace(/\\\\/g,"\\"),g={isNode:n,label:ir(e)?p:f,labelStyle:r.replace("fill:","color:")};return await Zp(t,g,o,i,h)}else{const d=e.replace(/<br\s*\/?>/g,"<br/>"),f=Up(d.replace("<br>","<br/>"),u),p=ef(o,t,f,e?h:!1);if(n){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));const g=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");yt(p).attr("style",g)}else{const g=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");yt(p).select("rect").attr("style",g.replace(/background:/g,"fill:"));const y=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");yt(p).select("text").attr("style",y)}return p}},"createText"),Zt=l(async(t,e,r)=>{var f,p;let a;const i=e.useHtmlLabels||xe((f=H())==null?void 0:f.htmlLabels);r?a=r:a="node default";const s=t.insert("g").attr("class",a).attr("id",e.domId||e.id),n=s.insert("g").attr("class","label").attr("style",hr(e.labelStyle));let o;e.label===void 0?o="":o=typeof e.label=="string"?e.label:e.label[0];const h=await Wr(n,me(Ai(o),H()),{useHtmlLabels:i,width:e.width||((p=H().flowchart)==null?void 0:p.wrappingWidth),cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let u=h.getBBox();const d=((e==null?void 0:e.padding)??0)/2;if(i){const g=h.children[0],y=yt(h),m=g.getElementsByTagName("img");if(m){const x=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...m].map(v=>new Promise(T=>{function I(){if(v.style.display="flex",v.style.flexDirection="column",x){const B=H().fontSize?H().fontSize:window.getComputedStyle(document.body).fontSize,_=5,[w=pe.fontSize]=Xi(B),D=w*_+"px";v.style.minWidth=D,v.style.maxWidth=D}else v.style.width="100%";T(v)}l(I,"setupImage"),setTimeout(()=>{v.complete&&I()}),v.addEventListener("error",I),v.addEventListener("load",I)})))}u=g.getBoundingClientRect(),y.attr("width",u.width),y.attr("height",u.height)}return i?n.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"):n.attr("transform","translate(0, "+-u.height/2+")"),e.centerLabel&&n.attr("transform","translate("+-u.width/2+", "+-u.height/2+")"),n.insert("rect",":first-child"),{shapeSvg:s,bbox:u,halfPadding:d,label:n}},"labelHelper"),Ml=l(async(t,e,r)=>{var h,u,d,f,p,g;const a=r.useHtmlLabels||xe((u=(h=H())==null?void 0:h.flowchart)==null?void 0:u.htmlLabels),i=t.insert("g").attr("class","label").attr("style",r.labelStyle||""),s=await Wr(i,me(Ai(e),H()),{useHtmlLabels:a,width:r.width||((f=(d=H())==null?void 0:d.flowchart)==null?void 0:f.wrappingWidth),style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img});let n=s.getBBox();const o=r.padding/2;if(xe((g=(p=H())==null?void 0:p.flowchart)==null?void 0:g.htmlLabels)){const y=s.children[0],m=yt(s);n=y.getBoundingClientRect(),m.attr("width",n.width),m.attr("height",n.height)}return a?i.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"):i.attr("transform","translate(0, "+-n.height/2+")"),r.centerLabel&&i.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:t,bbox:n,halfPadding:o,label:i}},"insertLabel"),Vt=l((t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height},"updateNodeBounds"),Jt=l((t,e)=>(t.look==="handDrawn"?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function de(t){const e=t.map((r,a)=>`${a===0?"M":"L"}${r.x},${r.y}`);return e.push("Z"),e.join(" ")}l(de,"createPathFromPoints");function Yi(t,e,r,a,i,s){const n=[],h=r-t,u=a-e,d=h/s,f=2*Math.PI/d,p=e+u/2;for(let g=0;g<=50;g++){const y=g/50,m=t+y*h,x=p+i*Math.sin(f*(m-t));n.push({x:m,y:x})}return n}l(Yi,"generateFullSineWavePoints");function Rh(t,e,r,a,i,s){const n=[],o=i*Math.PI/180,d=(s*Math.PI/180-o)/(a-1);for(let f=0;f<a;f++){const p=o+f*d,g=t+r*Math.cos(p),y=e+r*Math.sin(p);n.push({x:-g,y:-y})}return n}l(Rh,"generateCirclePoints");var g5=l((t,e)=>{var r=t.x,a=t.y,i=e.x-r,s=e.y-a,n=t.width/2,o=t.height/2,h,u;return Math.abs(s)*n>Math.abs(i)*o?(s<0&&(o=-o),h=s===0?0:o*i/s,u=o):(i<0&&(n=-n),h=n,u=i===0?0:n*s/i),{x:r+h,y:a+u}},"intersectRect"),Ws=g5;function rf(t,e){e&&t.attr("style",e)}l(rf,"applyStyle");async function af(t){const e=yt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div");let a=t.label;t.label&&ir(t.label)&&(a=await On(t.label.replace(mt.lineBreakRegex,`
`),H()));const i=t.isNode?"nodeLabel":"edgeLabel";return r.html('<span class="'+i+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+a+"</span>"),rf(r,t.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}l(af,"addHtmlLabel");var y5=l(async(t,e,r,a)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),xe(H().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),A.info("vertexText"+i);const s={isNode:a,label:Ai(i).replace(/fa[blrs]?:fa-[\w-]+/g,o=>`<i class='${o.replace(":"," ")}'></i>`),labelStyle:e&&e.replace("fill:","color:")};return await af(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let n=[];typeof i=="string"?n=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?n=i:n=[];for(const o of n){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),r?h.setAttribute("class","title-row"):h.setAttribute("class","row"),h.textContent=o.trim(),s.appendChild(h)}return s}},"createLabel"),ca=y5,Di=l((t,e,r,a,i)=>["M",t+i,e,"H",t+r-i,"A",i,i,0,0,1,t+r,e+i,"V",e+a-i,"A",i,i,0,0,1,t+r-i,e+a,"H",t+i,"A",i,i,0,0,1,t,e+a-i,"V",e+i,"A",i,i,0,0,1,t+i,e,"Z"].join(" "),"createRoundedRectPathD"),m5=l(t=>{const{handDrawnSeed:e}=H();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),qs=l(t=>{const e=x5([...t.cssCompiledStyles||[],...t.cssStyles||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),x5=l(t=>{const e=new Map;return t.forEach(r=>{const[a,i]=r.split(":");e.set(a.trim(),i==null?void 0:i.trim())}),e},"styles2Map"),Wt=l(t=>{const{stylesArray:e}=qs(t),r=[],a=[],i=[],s=[];return e.forEach(n=>{const o=n[0];o==="color"||o==="font-size"||o==="font-family"||o==="font-weight"||o==="font-style"||o==="text-decoration"||o==="text-align"||o==="text-transform"||o==="line-height"||o==="letter-spacing"||o==="word-spacing"||o==="text-shadow"||o==="text-overflow"||o==="white-space"||o==="word-wrap"||o==="word-break"||o==="overflow-wrap"||o==="hyphens"?r.push(n.join(":")+" !important"):(a.push(n.join(":")+" !important"),o.includes("stroke")&&i.push(n.join(":")+" !important"),o==="fill"&&s.push(n.join(":")+" !important"))}),{labelStyles:r.join(";"),nodeStyles:a.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:s}},"styles2String"),Ot=l((t,e)=>{var h;const{themeVariables:r,handDrawnSeed:a}=H(),{nodeBorder:i,mainBkg:s}=r,{stylesMap:n}=qs(t);return Object.assign({roughness:.7,fill:n.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:n.get("stroke")||i,seed:a,strokeWidth:((h=n.get("stroke-width"))==null?void 0:h.replace("px",""))||1.3,fillLineDash:[0,0]},e)},"userNodeOverrides"),sf=l(async(t,e)=>{A.info("Creating subgraph rect for ",e.id,e);const r=H(),{themeVariables:a,handDrawnSeed:i}=r,{clusterBkg:s,clusterBorder:n}=a,{labelStyles:o,nodeStyles:h,borderStyles:u,backgroundStyles:d}=Wt(e),f=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),p=xe(r.flowchart.htmlLabels),g=f.insert("g").attr("class","cluster-label "),y=await Wr(g,e.label,{style:e.labelStyle,useHtmlLabels:p,isNode:!0});let m=y.getBBox();if(xe(r.flowchart.htmlLabels)){const D=y.children[0],S=yt(y);m=D.getBoundingClientRect(),S.attr("width",m.width),S.attr("height",m.height)}const x=e.width<=m.width+e.padding?m.width+e.padding:e.width;e.width<=m.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;const v=e.height,T=e.x-x/2,I=e.y-v/2;A.trace("Data ",e,JSON.stringify(e));let B;if(e.look==="handDrawn"){const D=Ft.svg(f),S=Ot(e,{roughness:.7,fill:s,stroke:n,fillWeight:3,seed:i}),b=D.path(Di(T,I,x,v,0),S);B=f.insert(()=>(A.debug("Rough node insert CXC",b),b),":first-child"),B.select("path:nth-child(2)").attr("style",u.join(";")),B.select("path").attr("style",d.join(";").replace("fill","stroke"))}else B=f.insert("rect",":first-child"),B.attr("style",h).attr("rx",e.rx).attr("ry",e.ry).attr("x",T).attr("y",I).attr("width",x).attr("height",v);const{subGraphTitleTopMargin:_}=$n(r);if(g.attr("transform",`translate(${e.x-m.width/2}, ${e.y-e.height/2+_})`),o){const D=g.select("span");D&&D.attr("style",o)}const w=B.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=m.height-e.padding/2,e.intersect=function(D){return Ws(e,D)},{cluster:f,labelBBox:m}},"rect"),b5=l((t,e)=>{const r=t.insert("g").attr("class","note-cluster").attr("id",e.id),a=r.insert("rect",":first-child"),i=0*e.padding,s=i/2;a.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-s).attr("y",e.y-e.height/2-s).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const n=a.node().getBBox();return e.width=n.width,e.height=n.height,e.intersect=function(o){return Ws(e,o)},{cluster:r,labelBBox:{width:0,height:0}}},"noteGroup"),k5=l(async(t,e)=>{const r=H(),{themeVariables:a,handDrawnSeed:i}=r,{altBackground:s,compositeBackground:n,compositeTitleBackground:o,nodeBorder:h}=a,u=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),d=u.insert("g",":first-child"),f=u.insert("g").attr("class","cluster-label");let p=u.append("rect");const g=f.node().appendChild(await ca(e.label,e.labelStyle,void 0,!0));let y=g.getBBox();if(xe(r.flowchart.htmlLabels)){const b=g.children[0],C=yt(g);y=b.getBoundingClientRect(),C.attr("width",y.width),C.attr("height",y.height)}const m=0*e.padding,x=m/2,v=(e.width<=y.width+e.padding?y.width+e.padding:e.width)+m;e.width<=y.width+e.padding?e.diff=(v-e.width)/2-e.padding:e.diff=-e.padding;const T=e.height+m,I=e.height+m-y.height-6,B=e.x-v/2,_=e.y-T/2;e.width=v;const w=e.y-e.height/2-x+y.height+2;let D;if(e.look==="handDrawn"){const b=e.cssClasses.includes("statediagram-cluster-alt"),C=Ft.svg(u),k=e.rx||e.ry?C.path(Di(B,_,v,T,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:h,seed:i}):C.rectangle(B,_,v,T,{seed:i});D=u.insert(()=>k,":first-child");const E=C.rectangle(B,w,v,I,{fill:b?s:n,fillStyle:b?"hachure":"solid",stroke:h,seed:i});D=u.insert(()=>k,":first-child"),p=u.insert(()=>E)}else D=d.insert("rect",":first-child"),D.attr("class","outer").attr("x",B).attr("y",_).attr("width",v).attr("height",T).attr("data-look",e.look),p.attr("class","inner").attr("x",B).attr("y",w).attr("width",v).attr("height",I);f.attr("transform",`translate(${e.x-y.width/2}, ${_+1-(xe(r.flowchart.htmlLabels)?0:3)})`);const S=D.node().getBBox();return e.height=S.height,e.offsetX=0,e.offsetY=y.height-e.padding/2,e.labelBBox=y,e.intersect=function(b){return Ws(e,b)},{cluster:u,labelBBox:y}},"roundedWithTitle"),v5=l(async(t,e)=>{A.info("Creating subgraph rect for ",e.id,e);const r=H(),{themeVariables:a,handDrawnSeed:i}=r,{clusterBkg:s,clusterBorder:n}=a,{labelStyles:o,nodeStyles:h,borderStyles:u,backgroundStyles:d}=Wt(e),f=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),p=xe(r.flowchart.htmlLabels),g=f.insert("g").attr("class","cluster-label "),y=await Wr(g,e.label,{style:e.labelStyle,useHtmlLabels:p,isNode:!0,width:e.width});let m=y.getBBox();if(xe(r.flowchart.htmlLabels)){const D=y.children[0],S=yt(y);m=D.getBoundingClientRect(),S.attr("width",m.width),S.attr("height",m.height)}const x=e.width<=m.width+e.padding?m.width+e.padding:e.width;e.width<=m.width+e.padding?e.diff=(x-e.width)/2-e.padding:e.diff=-e.padding;const v=e.height,T=e.x-x/2,I=e.y-v/2;A.trace("Data ",e,JSON.stringify(e));let B;if(e.look==="handDrawn"){const D=Ft.svg(f),S=Ot(e,{roughness:.7,fill:s,stroke:n,fillWeight:4,seed:i}),b=D.path(Di(T,I,x,v,e.rx),S);B=f.insert(()=>(A.debug("Rough node insert CXC",b),b),":first-child"),B.select("path:nth-child(2)").attr("style",u.join(";")),B.select("path").attr("style",d.join(";").replace("fill","stroke"))}else B=f.insert("rect",":first-child"),B.attr("style",h).attr("rx",e.rx).attr("ry",e.ry).attr("x",T).attr("y",I).attr("width",x).attr("height",v);const{subGraphTitleTopMargin:_}=$n(r);if(g.attr("transform",`translate(${e.x-m.width/2}, ${e.y-e.height/2+_})`),o){const D=g.select("span");D&&D.attr("style",o)}const w=B.node().getBBox();return e.offsetX=0,e.width=w.width,e.height=w.height,e.offsetY=m.height-e.padding/2,e.intersect=function(D){return Ws(e,D)},{cluster:f,labelBBox:m}},"kanbanSection"),T5=l((t,e)=>{const r=H(),{themeVariables:a,handDrawnSeed:i}=r,{nodeBorder:s}=a,n=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),o=n.insert("g",":first-child"),h=0*e.padding,u=e.width+h;e.diff=-e.padding;const d=e.height+h,f=e.x-u/2,p=e.y-d/2;e.width=u;let g;if(e.look==="handDrawn"){const x=Ft.svg(n).rectangle(f,p,u,d,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:s,seed:i});g=n.insert(()=>x,":first-child")}else g=o.insert("rect",":first-child"),g.attr("class","divider").attr("x",f).attr("y",p).attr("width",u).attr("height",d).attr("data-look",e.look);const y=g.node().getBBox();return e.height=y.height,e.offsetX=0,e.offsetY=0,e.intersect=function(m){return Ws(e,m)},{cluster:n,labelBBox:{}}},"divider"),_5=sf,C5={rect:sf,squareRect:_5,roundedWithTitle:k5,noteGroup:b5,divider:T5,kanbanSection:v5},nf=new Map,Ih=l(async(t,e)=>{const r=e.shape||"rect",a=await C5[r](t,e);return nf.set(e.id,a),a},"insertCluster"),S5=l(()=>{nf=new Map},"clear");function of(t,e){return t.intersect(e)}l(of,"intersectNode");var w5=of;function lf(t,e,r,a){var i=t.x,s=t.y,n=i-a.x,o=s-a.y,h=Math.sqrt(e*e*o*o+r*r*n*n),u=Math.abs(e*r*n/h);a.x<i&&(u=-u);var d=Math.abs(e*r*o/h);return a.y<s&&(d=-d),{x:i+u,y:s+d}}l(lf,"intersectEllipse");var cf=lf;function hf(t,e,r){return cf(t,e,e,r)}l(hf,"intersectCircle");var E5=hf;function uf(t,e,r,a){var i,s,n,o,h,u,d,f,p,g,y,m,x,v,T;if(i=e.y-t.y,n=t.x-e.x,h=e.x*t.y-t.x*e.y,p=i*r.x+n*r.y+h,g=i*a.x+n*a.y+h,!(p!==0&&g!==0&&pc(p,g))&&(s=a.y-r.y,o=r.x-a.x,u=a.x*r.y-r.x*a.y,d=s*t.x+o*t.y+u,f=s*e.x+o*e.y+u,!(d!==0&&f!==0&&pc(d,f))&&(y=i*o-s*n,y!==0)))return m=Math.abs(y/2),x=n*u-o*h,v=x<0?(x-m)/y:(x+m)/y,x=s*h-i*u,T=x<0?(x-m)/y:(x+m)/y,{x:v,y:T}}l(uf,"intersectLine");function pc(t,e){return t*e>0}l(pc,"sameSign");var A5=uf;function df(t,e,r){let a=t.x,i=t.y,s=[],n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(d){n=Math.min(n,d.x),o=Math.min(o,d.y)}):(n=Math.min(n,e.x),o=Math.min(o,e.y));let h=a-t.width/2-n,u=i-t.height/2-o;for(let d=0;d<e.length;d++){let f=e[d],p=e[d<e.length-1?d+1:0],g=A5(t,r,{x:h+f.x,y:u+f.y},{x:h+p.x,y:u+p.y});g&&s.push(g)}return s.length?(s.length>1&&s.sort(function(d,f){let p=d.x-r.x,g=d.y-r.y,y=Math.sqrt(p*p+g*g),m=f.x-r.x,x=f.y-r.y,v=Math.sqrt(m*m+x*x);return y<v?-1:y===v?0:1}),s[0]):t}l(df,"intersectPolygon");var L5=df,Lt={node:w5,circle:E5,ellipse:cf,polygon:L5,rect:Ws};function pf(t,e){const{labelStyles:r}=Wt(e);e.labelStyle=r;const a=Jt(e);let i=a;a||(i="anchor");const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),n=1,{cssStyles:o}=e,h=Ft.svg(s),u=Ot(e,{fill:"black",stroke:"none",fillStyle:"solid"});e.look!=="handDrawn"&&(u.roughness=0);const d=h.circle(0,0,n*2,u),f=s.insert(()=>d,":first-child");return f.attr("class","anchor").attr("style",hr(o)),Vt(e,f),e.intersect=function(p){return A.info("Circle intersect",e,n,p),Lt.circle(e,n,p)},s}l(pf,"anchor");function fc(t,e,r,a,i,s,n){const h=(t+r)/2,u=(e+a)/2,d=Math.atan2(a-e,r-t),f=(r-t)/2,p=(a-e)/2,g=f/i,y=p/s,m=Math.sqrt(g**2+y**2);if(m>1)throw new Error("The given radii are too small to create an arc between the points.");const x=Math.sqrt(1-m**2),v=h+x*s*Math.sin(d)*(n?-1:1),T=u-x*i*Math.cos(d)*(n?-1:1),I=Math.atan2((e-T)/s,(t-v)/i);let _=Math.atan2((a-T)/s,(r-v)/i)-I;n&&_<0&&(_+=2*Math.PI),!n&&_>0&&(_-=2*Math.PI);const w=[];for(let D=0;D<20;D++){const S=D/19,b=I+S*_,C=v+i*Math.cos(b),k=T+s*Math.sin(b);w.push({x:C,y:k})}return w}l(fc,"generateArcPoints");async function ff(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=s.width+e.padding+20,o=s.height+e.padding,h=o/2,u=h/(2.5+o/50),{cssStyles:d}=e,f=[{x:n/2,y:-o/2},{x:-n/2,y:-o/2},...fc(-n/2,-o/2,-n/2,o/2,u,h,!1),{x:n/2,y:o/2},...fc(n/2,o/2,n/2,-o/2,u,h,!0)],p=Ft.svg(i),g=Ot(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=de(f),m=p.path(y,g),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",d),a&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",a),x.attr("transform",`translate(${u/2}, 0)`),Vt(e,x),e.intersect=function(v){return Lt.polygon(e,f,v)},i}l(ff,"bowTieRect");function Ri(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}l(Ri,"insertPolygonShape");async function gf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=s.height+e.padding,o=12,h=s.width+e.padding+o,u=0,d=h,f=-n,p=0,g=[{x:u+o,y:f},{x:d,y:f},{x:d,y:p},{x:u,y:p},{x:u,y:f+o},{x:u+o,y:f}];let y;const{cssStyles:m}=e;if(e.look==="handDrawn"){const x=Ft.svg(i),v=Ot(e,{}),T=de(g),I=x.path(T,v);y=i.insert(()=>I,":first-child").attr("transform",`translate(${-h/2}, ${n/2})`),m&&y.attr("style",m)}else y=Ri(i,h,n,g);return a&&y.attr("style",a),Vt(e,y),e.intersect=function(x){return Lt.polygon(e,g,x)},i}l(gf,"card");function yf(t,e){const{nodeStyles:r}=Wt(e);e.label="";const a=t.insert("g").attr("class",Jt(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,s=Math.max(28,e.width??0),n=[{x:0,y:s/2},{x:s/2,y:0},{x:0,y:-s/2},{x:-s/2,y:0}],o=Ft.svg(a),h=Ot(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const u=de(n),d=o.path(u,h),f=a.insert(()=>d,":first-child");return i&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",i),r&&e.look!=="handDrawn"&&f.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(p){return Lt.polygon(e,n,p)},a}l(yf,"choice");async function mf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:n}=await Zt(t,e,Jt(e)),o=s.width/2+n;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=Ft.svg(i),f=Ot(e,{}),p=d.circle(0,0,o*2,f);h=i.insert(()=>p,":first-child"),h.attr("class","basic label-container").attr("style",hr(u))}else h=i.insert("circle",":first-child").attr("class","basic label-container").attr("style",a).attr("r",o).attr("cx",0).attr("cy",0);return Vt(e,h),e.intersect=function(d){return A.info("Circle intersect",e,o,d),Lt.circle(e,o,d)},i}l(mf,"circle");function xf(t){const e=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),a=t*2,i={x:a/2*e,y:a/2*r},s={x:-(a/2)*e,y:a/2*r},n={x:-(a/2)*e,y:-(a/2)*r},o={x:a/2*e,y:-(a/2)*r};return`M ${s.x},${s.y} L ${o.x},${o.y}
                   M ${i.x},${i.y} L ${n.x},${n.y}`}l(xf,"createLine");function bf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r,e.label="";const i=t.insert("g").attr("class",Jt(e)).attr("id",e.domId??e.id),s=Math.max(30,(e==null?void 0:e.width)??0),{cssStyles:n}=e,o=Ft.svg(i),h=Ot(e,{});e.look!=="handDrawn"&&(h.roughness=0,h.fillStyle="solid");const u=o.circle(0,0,s*2,h),d=xf(s),f=o.path(d,h),p=i.insert(()=>u,":first-child");return p.insert(()=>f),n&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",n),a&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",a),Vt(e,p),e.intersect=function(g){return A.info("crossedCircle intersect",e,{radius:s,point:g}),Lt.circle(e,s,g)},i}l(bf,"crossedCircle");function bi(t,e,r,a=100,i=0,s=180){const n=[],o=i*Math.PI/180,d=(s*Math.PI/180-o)/(a-1);for(let f=0;f<a;f++){const p=o+f*d,g=t+r*Math.cos(p),y=e+r*Math.sin(p);n.push({x:-g,y:-y})}return n}l(bi,"generateCirclePoints");async function kf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=s.width+(e.padding??0),h=s.height+(e.padding??0),u=Math.max(5,h*.1),{cssStyles:d}=e,f=[...bi(o/2,-h/2,u,30,-90,0),{x:-o/2-u,y:u},...bi(o/2+u*2,-u,u,20,-180,-270),...bi(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:-h/2},...bi(o/2,h/2,u,20,0,90)],p=[{x:o/2,y:-h/2-u},{x:-o/2,y:-h/2-u},...bi(o/2,-h/2,u,20,-90,0),{x:-o/2-u,y:-u},...bi(o/2+o*.1,-u,u,20,-180,-270),...bi(o/2+o*.1,u,u,20,-90,-180),{x:-o/2-u,y:h/2},...bi(o/2,h/2,u,20,0,90),{x:-o/2,y:h/2+u},{x:o/2,y:h/2+u}],g=Ft.svg(i),y=Ot(e,{fill:"none"});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=de(f).replace("Z",""),v=g.path(x,y),T=de(p),I=g.path(T,{...y}),B=i.insert("g",":first-child");return B.insert(()=>I,":first-child").attr("stroke-opacity",0),B.insert(()=>v,":first-child"),B.attr("class","text"),d&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",d),a&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",a),B.attr("transform",`translate(${u}, 0)`),n.attr("transform",`translate(${-o/2+u-(s.x-(s.left??0))},${-h/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Vt(e,B),e.intersect=function(_){return Lt.polygon(e,p,_)},i}l(kf,"curlyBraceLeft");function ki(t,e,r,a=100,i=0,s=180){const n=[],o=i*Math.PI/180,d=(s*Math.PI/180-o)/(a-1);for(let f=0;f<a;f++){const p=o+f*d,g=t+r*Math.cos(p),y=e+r*Math.sin(p);n.push({x:g,y})}return n}l(ki,"generateCirclePoints");async function vf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=s.width+(e.padding??0),h=s.height+(e.padding??0),u=Math.max(5,h*.1),{cssStyles:d}=e,f=[...ki(o/2,-h/2,u,20,-90,0),{x:o/2+u,y:-u},...ki(o/2+u*2,-u,u,20,-180,-270),...ki(o/2+u*2,u,u,20,-90,-180),{x:o/2+u,y:h/2},...ki(o/2,h/2,u,20,0,90)],p=[{x:-o/2,y:-h/2-u},{x:o/2,y:-h/2-u},...ki(o/2,-h/2,u,20,-90,0),{x:o/2+u,y:-u},...ki(o/2+u*2,-u,u,20,-180,-270),...ki(o/2+u*2,u,u,20,-90,-180),{x:o/2+u,y:h/2},...ki(o/2,h/2,u,20,0,90),{x:o/2,y:h/2+u},{x:-o/2,y:h/2+u}],g=Ft.svg(i),y=Ot(e,{fill:"none"});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const x=de(f).replace("Z",""),v=g.path(x,y),T=de(p),I=g.path(T,{...y}),B=i.insert("g",":first-child");return B.insert(()=>I,":first-child").attr("stroke-opacity",0),B.insert(()=>v,":first-child"),B.attr("class","text"),d&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",d),a&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",a),B.attr("transform",`translate(${-u}, 0)`),n.attr("transform",`translate(${-o/2+(e.padding??0)/2-(s.x-(s.left??0))},${-h/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Vt(e,B),e.intersect=function(_){return Lt.polygon(e,p,_)},i}l(vf,"curlyBraceRight");function Ue(t,e,r,a=100,i=0,s=180){const n=[],o=i*Math.PI/180,d=(s*Math.PI/180-o)/(a-1);for(let f=0;f<a;f++){const p=o+f*d,g=t+r*Math.cos(p),y=e+r*Math.sin(p);n.push({x:-g,y:-y})}return n}l(Ue,"generateCirclePoints");async function Tf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=s.width+(e.padding??0),h=s.height+(e.padding??0),u=Math.max(5,h*.1),{cssStyles:d}=e,f=[...Ue(o/2,-h/2,u,30,-90,0),{x:-o/2-u,y:u},...Ue(o/2+u*2,-u,u,20,-180,-270),...Ue(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:-h/2},...Ue(o/2,h/2,u,20,0,90)],p=[...Ue(-o/2+u+u/2,-h/2,u,20,-90,-180),{x:o/2-u/2,y:u},...Ue(-o/2-u/2,-u,u,20,0,90),...Ue(-o/2-u/2,u,u,20,-90,0),{x:o/2-u/2,y:-u},...Ue(-o/2+u+u/2,h/2,u,30,-180,-270)],g=[{x:o/2,y:-h/2-u},{x:-o/2,y:-h/2-u},...Ue(o/2,-h/2,u,20,-90,0),{x:-o/2-u,y:-u},...Ue(o/2+u*2,-u,u,20,-180,-270),...Ue(o/2+u*2,u,u,20,-90,-180),{x:-o/2-u,y:h/2},...Ue(o/2,h/2,u,20,0,90),{x:-o/2,y:h/2+u},{x:o/2-u-u/2,y:h/2+u},...Ue(-o/2+u+u/2,-h/2,u,20,-90,-180),{x:o/2-u/2,y:u},...Ue(-o/2-u/2,-u,u,20,0,90),...Ue(-o/2-u/2,u,u,20,-90,0),{x:o/2-u/2,y:-u},...Ue(-o/2+u+u/2,h/2,u,30,-180,-270)],y=Ft.svg(i),m=Ot(e,{fill:"none"});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const v=de(f).replace("Z",""),T=y.path(v,m),B=de(p).replace("Z",""),_=y.path(B,m),w=de(g),D=y.path(w,{...m}),S=i.insert("g",":first-child");return S.insert(()=>D,":first-child").attr("stroke-opacity",0),S.insert(()=>T,":first-child"),S.insert(()=>_,":first-child"),S.attr("class","text"),d&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",d),a&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",a),S.attr("transform",`translate(${u-u/4}, 0)`),n.attr("transform",`translate(${-o/2+(e.padding??0)/2-(s.x-(s.left??0))},${-h/2+(e.padding??0)/2-(s.y-(s.top??0))})`),Vt(e,S),e.intersect=function(b){return Lt.polygon(e,g,b)},i}l(Tf,"curlyBraces");async function _f(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=80,o=20,h=Math.max(n,(s.width+(e.padding??0)*2)*1.25,(e==null?void 0:e.width)??0),u=Math.max(o,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=u/2,{cssStyles:f}=e,p=Ft.svg(i),g=Ot(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=h,m=u,x=y-d,v=m/4,T=[{x,y:0},{x:v,y:0},{x:0,y:m/2},{x:v,y:m},{x,y:m},...Rh(-x,-m/2,d,50,270,90)],I=de(T),B=p.path(I,g),_=i.insert(()=>B,":first-child");return _.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",f),a&&e.look!=="handDrawn"&&_.selectChildren("path").attr("style",a),_.attr("transform",`translate(${-h/2}, ${-u/2})`),Vt(e,_),e.intersect=function(w){return Lt.polygon(e,T,w)},i}l(_f,"curvedTrapezoid");var B5=l((t,e,r,a,i,s)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${r},0`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-a}`].join(" "),"createCylinderPathD"),D5=l((t,e,r,a,i,s)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-a}`].join(" "),"createOuterCylinderPathD"),R5=l((t,e,r,a,i,s)=>[`M${t-r/2},${-a/2}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function Cf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+e.padding,e.width??0),h=o/2,u=h/(2.5+o/50),d=Math.max(s.height+u+e.padding,e.height??0);let f;const{cssStyles:p}=e;if(e.look==="handDrawn"){const g=Ft.svg(i),y=D5(0,0,o,d,h,u),m=R5(0,u,o,d,h,u),x=g.path(y,Ot(e,{})),v=g.path(m,Ot(e,{fill:"none"}));f=i.insert(()=>v,":first-child"),f=i.insert(()=>x,":first-child"),f.attr("class","basic label-container"),p&&f.attr("style",p)}else{const g=B5(0,0,o,d,h,u);f=i.insert("path",":first-child").attr("d",g).attr("class","basic label-container").attr("style",hr(p)).attr("style",a)}return f.attr("label-offset-y",u),f.attr("transform",`translate(${-o/2}, ${-(d/2+u)})`),Vt(e,f),n.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(g){const y=Lt.rect(e,g),m=y.x-(e.x??0);if(h!=0&&(Math.abs(m)<(e.width??0)/2||Math.abs(m)==(e.width??0)/2&&Math.abs(y.y-(e.y??0))>(e.height??0)/2-u)){let x=u*u*(1-m*m/(h*h));x>0&&(x=Math.sqrt(x)),x=u-x,g.y-(e.y??0)>0&&(x=-x),y.y+=x}return y},i}l(Cf,"cylinder");async function Sf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=s.width+e.padding,h=s.height+e.padding,u=h*.2,d=-o/2,f=-h/2-u/2,{cssStyles:p}=e,g=Ft.svg(i),y=Ot(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=[{x:d,y:f+u},{x:-d,y:f+u},{x:-d,y:-f},{x:d,y:-f},{x:d,y:f},{x:-d,y:f},{x:-d,y:f+u}],x=g.polygon(m.map(T=>[T.x,T.y]),y),v=i.insert(()=>x,":first-child");return v.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",p),a&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",a),n.attr("transform",`translate(${d+(e.padding??0)/2-(s.x-(s.left??0))}, ${f+u+(e.padding??0)/2-(s.y-(s.top??0))})`),Vt(e,v),e.intersect=function(T){return Lt.rect(e,T)},i}l(Sf,"dividedRectangle");async function wf(t,e){var p,g;const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,halfPadding:n}=await Zt(t,e,Jt(e)),h=s.width/2+n+5,u=s.width/2+n;let d;const{cssStyles:f}=e;if(e.look==="handDrawn"){const y=Ft.svg(i),m=Ot(e,{roughness:.2,strokeWidth:2.5}),x=Ot(e,{roughness:.2,strokeWidth:1.5}),v=y.circle(0,0,h*2,m),T=y.circle(0,0,u*2,x);d=i.insert("g",":first-child"),d.attr("class",hr(e.cssClasses)).attr("style",hr(f)),(p=d.node())==null||p.appendChild(v),(g=d.node())==null||g.appendChild(T)}else{d=i.insert("g",":first-child");const y=d.insert("circle",":first-child"),m=d.insert("circle");d.attr("class","basic label-container").attr("style",a),y.attr("class","outer-circle").attr("style",a).attr("r",h).attr("cx",0).attr("cy",0),m.attr("class","inner-circle").attr("style",a).attr("r",u).attr("cx",0).attr("cy",0)}return Vt(e,d),e.intersect=function(y){return A.info("DoubleCircle intersect",e,h,y),Lt.circle(e,h,y)},i}l(wf,"doublecircle");function Ef(t,e,{config:{themeVariables:r}}){const{labelStyles:a,nodeStyles:i}=Wt(e);e.label="",e.labelStyle=a;const s=t.insert("g").attr("class",Jt(e)).attr("id",e.domId??e.id),n=7,{cssStyles:o}=e,h=Ft.svg(s),{nodeBorder:u}=r,d=Ot(e,{fillStyle:"solid"});e.look!=="handDrawn"&&(d.roughness=0);const f=h.circle(0,0,n*2,d),p=s.insert(()=>f,":first-child");return p.selectAll("path").attr("style",`fill: ${u} !important;`),o&&o.length>0&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",o),i&&e.look!=="handDrawn"&&p.selectAll("path").attr("style",i),Vt(e,p),e.intersect=function(g){return A.info("filledCircle intersect",e,{radius:n,point:g}),Lt.circle(e,n,g)},s}l(Ef,"filledCircle");async function Af(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=s.width+(e.padding??0),h=o+s.height,u=o+s.height,d=[{x:0,y:-h},{x:u,y:-h},{x:u/2,y:0}],{cssStyles:f}=e,p=Ft.svg(i),g=Ot(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=de(d),m=p.path(y,g),x=i.insert(()=>m,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`);return f&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",f),a&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",a),e.width=o,e.height=h,Vt(e,x),n.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-h/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(v){return A.info("Triangle intersect",e,d,v),Lt.polygon(e,d,v)},i}l(Af,"flippedTriangle");function Lf(t,e,{dir:r,config:{state:a,themeVariables:i}}){const{nodeStyles:s}=Wt(e);e.label="";const n=t.insert("g").attr("class",Jt(e)).attr("id",e.domId??e.id),{cssStyles:o}=e;let h=Math.max(70,(e==null?void 0:e.width)??0),u=Math.max(10,(e==null?void 0:e.height)??0);r==="LR"&&(h=Math.max(10,(e==null?void 0:e.width)??0),u=Math.max(70,(e==null?void 0:e.height)??0));const d=-1*h/2,f=-1*u/2,p=Ft.svg(n),g=Ot(e,{stroke:i.lineColor,fill:i.lineColor});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=p.rectangle(d,f,h,u,g),m=n.insert(()=>y,":first-child");o&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",o),s&&e.look!=="handDrawn"&&m.selectAll("path").attr("style",s),Vt(e,m);const x=(a==null?void 0:a.padding)??0;return e.width&&e.height&&(e.width+=x/2||0,e.height+=x/2||0),e.intersect=function(v){return Lt.rect(e,v)},n}l(Lf,"forkJoin");async function Bf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const i=80,s=50,{shapeSvg:n,bbox:o}=await Zt(t,e,Jt(e)),h=Math.max(i,o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),u=Math.max(s,o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=u/2,{cssStyles:f}=e,p=Ft.svg(n),g=Ot(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:-h/2,y:-u/2},{x:h/2-d,y:-u/2},...Rh(-h/2+d,0,d,50,90,270),{x:h/2-d,y:u/2},{x:-h/2,y:u/2}],m=de(y),x=p.path(m,g),v=n.insert(()=>x,":first-child");return v.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",f),a&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",a),Vt(e,v),e.intersect=function(T){return A.info("Pill intersect",e,{radius:d,point:T}),Lt.polygon(e,y,T)},n}l(Bf,"halfRoundedRectangle");var I5=l((t,e,r,a,i)=>[`M${t+i},${e}`,`L${t+r-i},${e}`,`L${t+r},${e-a/2}`,`L${t+r-i},${e-a}`,`L${t+i},${e-a}`,`L${t},${e-a/2}`,"Z"].join(" "),"createHexagonPathD");async function Df(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=4,o=s.height+e.padding,h=o/n,u=s.width+2*h+e.padding,d=[{x:h,y:0},{x:u-h,y:0},{x:u,y:-o/2},{x:u-h,y:-o},{x:h,y:-o},{x:0,y:-o/2}];let f;const{cssStyles:p}=e;if(e.look==="handDrawn"){const g=Ft.svg(i),y=Ot(e,{}),m=I5(0,0,u,o,h),x=g.path(m,y);f=i.insert(()=>x,":first-child").attr("transform",`translate(${-u/2}, ${o/2})`),p&&f.attr("style",p)}else f=Ri(i,u,o,d);return a&&f.attr("style",a),e.width=u,e.height=o,Vt(e,f),e.intersect=function(g){return Lt.polygon(e,d,g)},i}l(Df,"hexagon");async function Rf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.label="",e.labelStyle=r;const{shapeSvg:i}=await Zt(t,e,Jt(e)),s=Math.max(30,(e==null?void 0:e.width)??0),n=Math.max(30,(e==null?void 0:e.height)??0),{cssStyles:o}=e,h=Ft.svg(i),u=Ot(e,{});e.look!=="handDrawn"&&(u.roughness=0,u.fillStyle="solid");const d=[{x:0,y:0},{x:s,y:0},{x:0,y:n},{x:s,y:n}],f=de(d),p=h.path(f,u),g=i.insert(()=>p,":first-child");return g.attr("class","basic label-container"),o&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",o),a&&e.look!=="handDrawn"&&g.selectChildren("path").attr("style",a),g.attr("transform",`translate(${-s/2}, ${-n/2})`),Vt(e,g),e.intersect=function(y){return A.info("Pill intersect",e,{points:d}),Lt.polygon(e,d,y)},i}l(Rf,"hourglass");async function If(t,e,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=Wt(e);e.labelStyle=i;const s=e.assetHeight??48,n=e.assetWidth??48,o=Math.max(s,n),h=a==null?void 0:a.wrappingWidth;e.width=Math.max(o,h??0);const{shapeSvg:u,bbox:d,label:f}=await Zt(t,e,"icon-shape default"),p=e.pos==="t",g=o,y=o,{nodeBorder:m}=r,{stylesMap:x}=qs(e),v=-y/2,T=-g/2,I=e.label?8:0,B=Ft.svg(u),_=Ot(e,{stroke:"none",fill:"none"});e.look!=="handDrawn"&&(_.roughness=0,_.fillStyle="solid");const w=B.rectangle(v,T,y,g,_),D=Math.max(y,d.width),S=g+d.height+I,b=B.rectangle(-D/2,-S/2,D,S,{..._,fill:"transparent",stroke:"none"}),C=u.insert(()=>w,":first-child"),k=u.insert(()=>b);if(e.icon){const E=u.append("g");E.html(`<g>${await ga(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const P=E.node().getBBox(),O=P.width,V=P.height,F=P.x,M=P.y;E.attr("transform",`translate(${-O/2-F},${p?d.height/2+I/2-V/2-M:-d.height/2-I/2-V/2-M})`),E.attr("style",`color: ${x.get("stroke")??m};`)}return f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${p?-S/2:S/2-d.height})`),C.attr("transform",`translate(0,${p?d.height/2+I/2:-d.height/2-I/2})`),Vt(e,k),e.intersect=function(E){if(A.info("iconSquare intersect",e,E),!e.label)return Lt.rect(e,E);const P=e.x??0,O=e.y??0,V=e.height??0;let F=[];return p?F=[{x:P-d.width/2,y:O-V/2},{x:P+d.width/2,y:O-V/2},{x:P+d.width/2,y:O-V/2+d.height+I},{x:P+y/2,y:O-V/2+d.height+I},{x:P+y/2,y:O+V/2},{x:P-y/2,y:O+V/2},{x:P-y/2,y:O-V/2+d.height+I},{x:P-d.width/2,y:O-V/2+d.height+I}]:F=[{x:P-y/2,y:O-V/2},{x:P+y/2,y:O-V/2},{x:P+y/2,y:O-V/2+g},{x:P+d.width/2,y:O-V/2+g},{x:P+d.width/2/2,y:O+V/2},{x:P-d.width/2,y:O+V/2},{x:P-d.width/2,y:O-V/2+g},{x:P-y/2,y:O-V/2+g}],Lt.polygon(e,F,E)},u}l(If,"icon");async function Nf(t,e,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=Wt(e);e.labelStyle=i;const s=e.assetHeight??48,n=e.assetWidth??48,o=Math.max(s,n),h=a==null?void 0:a.wrappingWidth;e.width=Math.max(o,h??0);const{shapeSvg:u,bbox:d,label:f}=await Zt(t,e,"icon-shape default"),p=20,g=e.label?8:0,y=e.pos==="t",{nodeBorder:m,mainBkg:x}=r,{stylesMap:v}=qs(e),T=Ft.svg(u),I=Ot(e,{});e.look!=="handDrawn"&&(I.roughness=0,I.fillStyle="solid");const B=v.get("fill");I.stroke=B??x;const _=u.append("g");e.icon&&_.html(`<g>${await ga(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const w=_.node().getBBox(),D=w.width,S=w.height,b=w.x,C=w.y,k=Math.max(D,S)*Math.SQRT2+p*2,E=T.circle(0,0,k,I),P=Math.max(k,d.width),O=k+d.height+g,V=T.rectangle(-P/2,-O/2,P,O,{...I,fill:"transparent",stroke:"none"}),F=u.insert(()=>E,":first-child"),M=u.insert(()=>V);return _.attr("transform",`translate(${-D/2-b},${y?d.height/2+g/2-S/2-C:-d.height/2-g/2-S/2-C})`),_.attr("style",`color: ${v.get("stroke")??m};`),f.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${y?-O/2:O/2-d.height})`),F.attr("transform",`translate(0,${y?d.height/2+g/2:-d.height/2-g/2})`),Vt(e,M),e.intersect=function(R){return A.info("iconSquare intersect",e,R),Lt.rect(e,R)},u}l(Nf,"iconCircle");async function Ff(t,e,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=Wt(e);e.labelStyle=i;const s=e.assetHeight??48,n=e.assetWidth??48,o=Math.max(s,n),h=a==null?void 0:a.wrappingWidth;e.width=Math.max(o,h??0);const{shapeSvg:u,bbox:d,halfPadding:f,label:p}=await Zt(t,e,"icon-shape default"),g=e.pos==="t",y=o+f*2,m=o+f*2,{nodeBorder:x,mainBkg:v}=r,{stylesMap:T}=qs(e),I=-m/2,B=-y/2,_=e.label?8:0,w=Ft.svg(u),D=Ot(e,{});e.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");const S=T.get("fill");D.stroke=S??v;const b=w.path(Di(I,B,m,y,5),D),C=Math.max(m,d.width),k=y+d.height+_,E=w.rectangle(-C/2,-k/2,C,k,{...D,fill:"transparent",stroke:"none"}),P=u.insert(()=>b,":first-child").attr("class","icon-shape2"),O=u.insert(()=>E);if(e.icon){const V=u.append("g");V.html(`<g>${await ga(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const F=V.node().getBBox(),M=F.width,R=F.height,L=F.x,q=F.y;V.attr("transform",`translate(${-M/2-L},${g?d.height/2+_/2-R/2-q:-d.height/2-_/2-R/2-q})`),V.attr("style",`color: ${T.get("stroke")??x};`)}return p.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-k/2:k/2-d.height})`),P.attr("transform",`translate(0,${g?d.height/2+_/2:-d.height/2-_/2})`),Vt(e,O),e.intersect=function(V){if(A.info("iconSquare intersect",e,V),!e.label)return Lt.rect(e,V);const F=e.x??0,M=e.y??0,R=e.height??0;let L=[];return g?L=[{x:F-d.width/2,y:M-R/2},{x:F+d.width/2,y:M-R/2},{x:F+d.width/2,y:M-R/2+d.height+_},{x:F+m/2,y:M-R/2+d.height+_},{x:F+m/2,y:M+R/2},{x:F-m/2,y:M+R/2},{x:F-m/2,y:M-R/2+d.height+_},{x:F-d.width/2,y:M-R/2+d.height+_}]:L=[{x:F-m/2,y:M-R/2},{x:F+m/2,y:M-R/2},{x:F+m/2,y:M-R/2+y},{x:F+d.width/2,y:M-R/2+y},{x:F+d.width/2/2,y:M+R/2},{x:F-d.width/2,y:M+R/2},{x:F-d.width/2,y:M-R/2+y},{x:F-m/2,y:M-R/2+y}],Lt.polygon(e,L,V)},u}l(Ff,"iconRounded");async function Pf(t,e,{config:{themeVariables:r,flowchart:a}}){const{labelStyles:i}=Wt(e);e.labelStyle=i;const s=e.assetHeight??48,n=e.assetWidth??48,o=Math.max(s,n),h=a==null?void 0:a.wrappingWidth;e.width=Math.max(o,h??0);const{shapeSvg:u,bbox:d,halfPadding:f,label:p}=await Zt(t,e,"icon-shape default"),g=e.pos==="t",y=o+f*2,m=o+f*2,{nodeBorder:x,mainBkg:v}=r,{stylesMap:T}=qs(e),I=-m/2,B=-y/2,_=e.label?8:0,w=Ft.svg(u),D=Ot(e,{});e.look!=="handDrawn"&&(D.roughness=0,D.fillStyle="solid");const S=T.get("fill");D.stroke=S??v;const b=w.path(Di(I,B,m,y,.1),D),C=Math.max(m,d.width),k=y+d.height+_,E=w.rectangle(-C/2,-k/2,C,k,{...D,fill:"transparent",stroke:"none"}),P=u.insert(()=>b,":first-child"),O=u.insert(()=>E);if(e.icon){const V=u.append("g");V.html(`<g>${await ga(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);const F=V.node().getBBox(),M=F.width,R=F.height,L=F.x,q=F.y;V.attr("transform",`translate(${-M/2-L},${g?d.height/2+_/2-R/2-q:-d.height/2-_/2-R/2-q})`),V.attr("style",`color: ${T.get("stroke")??x};`)}return p.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-k/2:k/2-d.height})`),P.attr("transform",`translate(0,${g?d.height/2+_/2:-d.height/2-_/2})`),Vt(e,O),e.intersect=function(V){if(A.info("iconSquare intersect",e,V),!e.label)return Lt.rect(e,V);const F=e.x??0,M=e.y??0,R=e.height??0;let L=[];return g?L=[{x:F-d.width/2,y:M-R/2},{x:F+d.width/2,y:M-R/2},{x:F+d.width/2,y:M-R/2+d.height+_},{x:F+m/2,y:M-R/2+d.height+_},{x:F+m/2,y:M+R/2},{x:F-m/2,y:M+R/2},{x:F-m/2,y:M-R/2+d.height+_},{x:F-d.width/2,y:M-R/2+d.height+_}]:L=[{x:F-m/2,y:M-R/2},{x:F+m/2,y:M-R/2},{x:F+m/2,y:M-R/2+y},{x:F+d.width/2,y:M-R/2+y},{x:F+d.width/2/2,y:M+R/2},{x:F-d.width/2,y:M+R/2},{x:F-d.width/2,y:M-R/2+y},{x:F-m/2,y:M-R/2+y}],Lt.polygon(e,L,V)},u}l(Pf,"iconSquare");async function Of(t,e,{config:{flowchart:r}}){const a=new Image;a.src=(e==null?void 0:e.img)??"",await a.decode();const i=Number(a.naturalWidth.toString().replace("px","")),s=Number(a.naturalHeight.toString().replace("px",""));e.imageAspectRatio=i/s;const{labelStyles:n}=Wt(e);e.labelStyle=n;const o=r==null?void 0:r.wrappingWidth;e.defaultWidth=r==null?void 0:r.wrappingWidth;const h=Math.max(e.label?o??0:0,(e==null?void 0:e.assetWidth)??i),u=e.constraint==="on"&&e!=null&&e.assetHeight?e.assetHeight*e.imageAspectRatio:h,d=e.constraint==="on"?u/e.imageAspectRatio:(e==null?void 0:e.assetHeight)??s;e.width=Math.max(u,o??0);const{shapeSvg:f,bbox:p,label:g}=await Zt(t,e,"image-shape default"),y=e.pos==="t",m=-u/2,x=-d/2,v=e.label?8:0,T=Ft.svg(f),I=Ot(e,{});e.look!=="handDrawn"&&(I.roughness=0,I.fillStyle="solid");const B=T.rectangle(m,x,u,d,I),_=Math.max(u,p.width),w=d+p.height+v,D=T.rectangle(-_/2,-w/2,_,w,{...I,fill:"none",stroke:"none"}),S=f.insert(()=>B,":first-child"),b=f.insert(()=>D);if(e.img){const C=f.append("image");C.attr("href",e.img),C.attr("width",u),C.attr("height",d),C.attr("preserveAspectRatio","none"),C.attr("transform",`translate(${-u/2},${y?w/2-d:-w/2})`)}return g.attr("transform",`translate(${-p.width/2-(p.x-(p.left??0))},${y?-d/2-p.height/2-v/2:d/2-p.height/2+v/2})`),S.attr("transform",`translate(0,${y?p.height/2+v/2:-p.height/2-v/2})`),Vt(e,b),e.intersect=function(C){if(A.info("iconSquare intersect",e,C),!e.label)return Lt.rect(e,C);const k=e.x??0,E=e.y??0,P=e.height??0;let O=[];return y?O=[{x:k-p.width/2,y:E-P/2},{x:k+p.width/2,y:E-P/2},{x:k+p.width/2,y:E-P/2+p.height+v},{x:k+u/2,y:E-P/2+p.height+v},{x:k+u/2,y:E+P/2},{x:k-u/2,y:E+P/2},{x:k-u/2,y:E-P/2+p.height+v},{x:k-p.width/2,y:E-P/2+p.height+v}]:O=[{x:k-u/2,y:E-P/2},{x:k+u/2,y:E-P/2},{x:k+u/2,y:E-P/2+d},{x:k+p.width/2,y:E-P/2+d},{x:k+p.width/2/2,y:E+P/2},{x:k-p.width/2,y:E+P/2},{x:k-p.width/2,y:E-P/2+d},{x:k-u/2,y:E-P/2+d}],Lt.polygon(e,O,C)},f}l(Of,"imageSquare");async function Mf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),o=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),h=[{x:0,y:0},{x:n,y:0},{x:n+3*o/6,y:-o},{x:-3*o/6,y:-o}];let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=Ft.svg(i),p=Ot(e,{}),g=de(h),y=f.path(g,p);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-n/2}, ${o/2})`),d&&u.attr("style",d)}else u=Ri(i,n,o,h);return a&&u.attr("style",a),e.width=n,e.height=o,Vt(e,u),e.intersect=function(f){return Lt.polygon(e,h,f)},i}l(Mf,"inv_trapezoid");async function cl(t,e,r){const{labelStyles:a,nodeStyles:i}=Wt(e);e.labelStyle=a;const{shapeSvg:s,bbox:n}=await Zt(t,e,Jt(e)),o=Math.max(n.width+r.labelPaddingX*2,(e==null?void 0:e.width)||0),h=Math.max(n.height+r.labelPaddingY*2,(e==null?void 0:e.height)||0),u=-o/2,d=-h/2;let f,{rx:p,ry:g}=e;const{cssStyles:y}=e;if(r!=null&&r.rx&&r.ry&&(p=r.rx,g=r.ry),e.look==="handDrawn"){const m=Ft.svg(s),x=Ot(e,{}),v=p||g?m.path(Di(u,d,o,h,p||0),x):m.rectangle(u,d,o,h,x);f=s.insert(()=>v,":first-child"),f.attr("class","basic label-container").attr("style",hr(y))}else f=s.insert("rect",":first-child"),f.attr("class","basic label-container").attr("style",i).attr("rx",hr(p)).attr("ry",hr(g)).attr("x",u).attr("y",d).attr("width",o).attr("height",h);return Vt(e,f),e.intersect=function(m){return Lt.rect(e,m)},s}l(cl,"drawRect");async function $f(t,e){const{shapeSvg:r,bbox:a,label:i}=await Zt(t,e,"label"),s=r.insert("rect",":first-child");return s.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),i.attr("transform",`translate(${-(a.width/2)-(a.x-(a.left??0))}, ${-(a.height/2)-(a.y-(a.top??0))})`),Vt(e,s),e.intersect=function(h){return Lt.rect(e,h)},r}l($f,"labelRect");async function Vf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),o=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),h=[{x:0,y:0},{x:n+3*o/6,y:0},{x:n,y:-o},{x:-(3*o)/6,y:-o}];let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=Ft.svg(i),p=Ot(e,{}),g=de(h),y=f.path(g,p);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-n/2}, ${o/2})`),d&&u.attr("style",d)}else u=Ri(i,n,o,h);return a&&u.attr("style",a),e.width=n,e.height=o,Vt(e,u),e.intersect=function(f){return Lt.polygon(e,h,f)},i}l(Vf,"lean_left");async function zf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),o=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),h=[{x:-3*o/6,y:0},{x:n,y:0},{x:n+3*o/6,y:-o},{x:0,y:-o}];let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=Ft.svg(i),p=Ot(e,{}),g=de(h),y=f.path(g,p);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-n/2}, ${o/2})`),d&&u.attr("style",d)}else u=Ri(i,n,o,h);return a&&u.attr("style",a),e.width=n,e.height=o,Vt(e,u),e.intersect=function(f){return Lt.polygon(e,h,f)},i}l(zf,"lean_right");function Wf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.label="",e.labelStyle=r;const i=t.insert("g").attr("class",Jt(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,n=Math.max(35,(e==null?void 0:e.width)??0),o=Math.max(35,(e==null?void 0:e.height)??0),h=7,u=[{x:n,y:0},{x:0,y:o+h/2},{x:n-2*h,y:o+h/2},{x:0,y:2*o},{x:n,y:o-h/2},{x:2*h,y:o-h/2}],d=Ft.svg(i),f=Ot(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=de(u),g=d.path(p,f),y=i.insert(()=>g,":first-child");return s&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",s),a&&e.look!=="handDrawn"&&y.selectAll("path").attr("style",a),y.attr("transform",`translate(-${n/2},${-o})`),Vt(e,y),e.intersect=function(m){return A.info("lightningBolt intersect",e,m),Lt.polygon(e,u,m)},i}l(Wf,"lightningBolt");var N5=l((t,e,r,a,i,s,n)=>[`M${t},${e+s}`,`a${i},${s} 0,0,0 ${r},0`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-a}`,`M${t},${e+s+n}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createCylinderPathD"),F5=l((t,e,r,a,i,s,n)=>[`M${t},${e+s}`,`M${t+r},${e+s}`,`a${i},${s} 0,0,0 ${-r},0`,`l0,${a}`,`a${i},${s} 0,0,0 ${r},0`,`l0,${-a}`,`M${t},${e+s+n}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createOuterCylinderPathD"),P5=l((t,e,r,a,i,s)=>[`M${t-r/2},${-a/2}`,`a${i},${s} 0,0,0 ${r},0`].join(" "),"createInnerCylinderPathD");async function qf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0),e.width??0),h=o/2,u=h/(2.5+o/50),d=Math.max(s.height+u+(e.padding??0),e.height??0),f=d*.1;let p;const{cssStyles:g}=e;if(e.look==="handDrawn"){const y=Ft.svg(i),m=F5(0,0,o,d,h,u,f),x=P5(0,u,o,d,h,u),v=Ot(e,{}),T=y.path(m,v),I=y.path(x,v);i.insert(()=>I,":first-child").attr("class","line"),p=i.insert(()=>T,":first-child"),p.attr("class","basic label-container"),g&&p.attr("style",g)}else{const y=N5(0,0,o,d,h,u,f);p=i.insert("path",":first-child").attr("d",y).attr("class","basic label-container").attr("style",hr(g)).attr("style",a)}return p.attr("label-offset-y",u),p.attr("transform",`translate(${-o/2}, ${-(d/2+u)})`),Vt(e,p),n.attr("transform",`translate(${-(s.width/2)-(s.x-(s.left??0))}, ${-(s.height/2)+u-(s.y-(s.top??0))})`),e.intersect=function(y){const m=Lt.rect(e,y),x=m.x-(e.x??0);if(h!=0&&(Math.abs(x)<(e.width??0)/2||Math.abs(x)==(e.width??0)/2&&Math.abs(m.y-(e.y??0))>(e.height??0)/2-u)){let v=u*u*(1-x*x/(h*h));v>0&&(v=Math.sqrt(v)),v=u-v,y.y-(e.y??0)>0&&(v=-v),m.y+=v}return m},i}l(qf,"linedCylinder");async function Yf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=h/4,d=h+u,{cssStyles:f}=e,p=Ft.svg(i),g=Ot(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:-o/2-o/2*.1,y:-d/2},{x:-o/2-o/2*.1,y:d/2},...Yi(-o/2-o/2*.1,d/2,o/2+o/2*.1,d/2,u,.8),{x:o/2+o/2*.1,y:-d/2},{x:-o/2-o/2*.1,y:-d/2},{x:-o/2,y:-d/2},{x:-o/2,y:d/2*1.1},{x:-o/2,y:-d/2}],m=p.polygon(y.map(v=>[v.x,v.y]),g),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",f),a&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",a),x.attr("transform",`translate(0,${-u/2})`),n.attr("transform",`translate(${-o/2+(e.padding??0)+o/2*.1/2-(s.x-(s.left??0))},${-h/2+(e.padding??0)-u/2-(s.y-(s.top??0))})`),Vt(e,x),e.intersect=function(v){return Lt.polygon(e,y,v)},i}l(Yf,"linedWaveEdgedRect");async function Hf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=5,d=-o/2,f=-h/2,{cssStyles:p}=e,g=Ft.svg(i),y=Ot(e,{}),m=[{x:d-u,y:f+u},{x:d-u,y:f+h+u},{x:d+o-u,y:f+h+u},{x:d+o-u,y:f+h},{x:d+o,y:f+h},{x:d+o,y:f+h-u},{x:d+o+u,y:f+h-u},{x:d+o+u,y:f-u},{x:d+u,y:f-u},{x:d+u,y:f},{x:d,y:f},{x:d,y:f+u}],x=[{x:d,y:f+u},{x:d+o-u,y:f+u},{x:d+o-u,y:f+h},{x:d+o,y:f+h},{x:d+o,y:f},{x:d,y:f}];e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=de(m),T=g.path(v,y),I=de(x),B=g.path(I,{...y,fill:"none"}),_=i.insert(()=>B,":first-child");return _.insert(()=>T,":first-child"),_.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",p),a&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",a),n.attr("transform",`translate(${-(s.width/2)-u-(s.x-(s.left??0))}, ${-(s.height/2)+u-(s.y-(s.top??0))})`),Vt(e,_),e.intersect=function(w){return Lt.polygon(e,m,w)},i}l(Hf,"multiRect");async function Gf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=h/4,d=h+u,f=-o/2,p=-d/2,g=5,{cssStyles:y}=e,m=Yi(f-g,p+d+g,f+o-g,p+d+g,u,.8),x=m==null?void 0:m[m.length-1],v=[{x:f-g,y:p+g},{x:f-g,y:p+d+g},...m,{x:f+o-g,y:x.y-g},{x:f+o,y:x.y-g},{x:f+o,y:x.y-2*g},{x:f+o+g,y:x.y-2*g},{x:f+o+g,y:p-g},{x:f+g,y:p-g},{x:f+g,y:p},{x:f,y:p},{x:f,y:p+g}],T=[{x:f,y:p+g},{x:f+o-g,y:p+g},{x:f+o-g,y:x.y-g},{x:f+o,y:x.y-g},{x:f+o,y:p},{x:f,y:p}],I=Ft.svg(i),B=Ot(e,{});e.look!=="handDrawn"&&(B.roughness=0,B.fillStyle="solid");const _=de(v),w=I.path(_,B),D=de(T),S=I.path(D,B),b=i.insert(()=>w,":first-child");return b.insert(()=>S),b.attr("class","basic label-container"),y&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",y),a&&e.look!=="handDrawn"&&b.selectAll("path").attr("style",a),b.attr("transform",`translate(0,${-u/2})`),n.attr("transform",`translate(${-(s.width/2)-g-(s.x-(s.left??0))}, ${-(s.height/2)+g-u/2-(s.y-(s.top??0))})`),Vt(e,b),e.intersect=function(C){return Lt.polygon(e,v,C)},i}l(Gf,"multiWaveEdgedRectangle");async function Uf(t,e,{config:{themeVariables:r}}){var v;const{labelStyles:a,nodeStyles:i}=Wt(e);e.labelStyle=a,e.useHtmlLabels||((v=_e().flowchart)==null?void 0:v.htmlLabels)!==!1||(e.centerLabel=!0);const{shapeSvg:n,bbox:o}=await Zt(t,e,Jt(e)),h=Math.max(o.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),u=Math.max(o.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=-h/2,f=-u/2,{cssStyles:p}=e,g=Ft.svg(n),y=Ot(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=g.rectangle(d,f,h,u,y),x=n.insert(()=>m,":first-child");return x.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",p),i&&e.look!=="handDrawn"&&x.selectAll("path").attr("style",i),Vt(e,x),e.intersect=function(T){return Lt.rect(e,T)},n}l(Uf,"note");var O5=l((t,e,r)=>[`M${t+r/2},${e}`,`L${t+r},${e-r/2}`,`L${t+r/2},${e-r}`,`L${t},${e-r/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function jf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=s.width+e.padding,o=s.height+e.padding,h=n+o,u=[{x:h/2,y:0},{x:h,y:-h/2},{x:h/2,y:-h},{x:0,y:-h/2}];let d;const{cssStyles:f}=e;if(e.look==="handDrawn"){const p=Ft.svg(i),g=Ot(e,{}),y=O5(0,0,h),m=p.path(y,g);d=i.insert(()=>m,":first-child").attr("transform",`translate(${-h/2}, ${h/2})`),f&&d.attr("style",f)}else d=Ri(i,h,h,u);return a&&d.attr("style",a),Vt(e,d),e.intersect=function(p){return A.debug(`APA12 Intersect called SPLIT
point:`,p,`
node:
`,e,`
res:`,Lt.polygon(e,u,p)),Lt.polygon(e,u,p)},i}l(jf,"question");async function Xf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0),(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0),(e==null?void 0:e.height)??0),u=-o/2,d=-h/2,f=d/2,p=[{x:u+f,y:d},{x:u,y:0},{x:u+f,y:-d},{x:-u,y:-d},{x:-u,y:d}],{cssStyles:g}=e,y=Ft.svg(i),m=Ot(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=de(p),v=y.path(x,m),T=i.insert(()=>v,":first-child");return T.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",g),a&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",a),T.attr("transform",`translate(${-f/2},0)`),n.attr("transform",`translate(${-f/2-s.width/2-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Vt(e,T),e.intersect=function(I){return Lt.polygon(e,p,I)},i}l(Xf,"rect_left_inv_arrow");async function Kf(t,e){var S,b;const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;let i;e.cssClasses?i="node "+e.cssClasses:i="node default";const s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),n=s.insert("g"),o=s.insert("g").attr("class","label").attr("style",a),h=e.description,u=e.label,d=o.node().appendChild(await ca(u,e.labelStyle,!0,!0));let f={width:0,height:0};if(xe((b=(S=H())==null?void 0:S.flowchart)==null?void 0:b.htmlLabels)){const C=d.children[0],k=yt(d);f=C.getBoundingClientRect(),k.attr("width",f.width),k.attr("height",f.height)}A.info("Text 2",h);const p=h||[],g=d.getBBox(),y=o.node().appendChild(await ca(p.join?p.join("<br/>"):p,e.labelStyle,!0,!0)),m=y.children[0],x=yt(y);f=m.getBoundingClientRect(),x.attr("width",f.width),x.attr("height",f.height);const v=(e.padding||0)/2;yt(y).attr("transform","translate( "+(f.width>g.width?0:(g.width-f.width)/2)+", "+(g.height+v+5)+")"),yt(d).attr("transform","translate( "+(f.width<g.width?0:-(g.width-f.width)/2)+", 0)"),f=o.node().getBBox(),o.attr("transform","translate("+-f.width/2+", "+(-f.height/2-v+3)+")");const T=f.width+(e.padding||0),I=f.height+(e.padding||0),B=-f.width/2-v,_=-f.height/2-v;let w,D;if(e.look==="handDrawn"){const C=Ft.svg(s),k=Ot(e,{}),E=C.path(Di(B,_,T,I,e.rx||0),k),P=C.line(-f.width/2-v,-f.height/2-v+g.height+v,f.width/2+v,-f.height/2-v+g.height+v,k);D=s.insert(()=>(A.debug("Rough node insert CXC",E),P),":first-child"),w=s.insert(()=>(A.debug("Rough node insert CXC",E),E),":first-child")}else w=n.insert("rect",":first-child"),D=n.insert("line"),w.attr("class","outer title-state").attr("style",a).attr("x",-f.width/2-v).attr("y",-f.height/2-v).attr("width",f.width+(e.padding||0)).attr("height",f.height+(e.padding||0)),D.attr("class","divider").attr("x1",-f.width/2-v).attr("x2",f.width/2+v).attr("y1",-f.height/2-v+g.height+v).attr("y2",-f.height/2-v+g.height+v);return Vt(e,w),e.intersect=function(C){return Lt.rect(e,C)},s}l(Kf,"rectWithTitle");async function Qf(t,e){const r={rx:5,ry:5,labelPaddingX:((e==null?void 0:e.padding)||0)*1,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return cl(t,e,r)}l(Qf,"roundedRect");async function Zf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=(e==null?void 0:e.padding)??0,h=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),u=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=-s.width/2-o,f=-s.height/2-o,{cssStyles:p}=e,g=Ft.svg(i),y=Ot(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=[{x:d,y:f},{x:d+h+8,y:f},{x:d+h+8,y:f+u},{x:d-8,y:f+u},{x:d-8,y:f},{x:d,y:f},{x:d,y:f+u}],x=g.polygon(m.map(T=>[T.x,T.y]),y),v=i.insert(()=>x,":first-child");return v.attr("class","basic label-container").attr("style",hr(p)),a&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",a),p&&e.look!=="handDrawn"&&v.selectAll("path").attr("style",a),n.attr("transform",`translate(${-h/2+4+(e.padding??0)-(s.x-(s.left??0))},${-u/2+(e.padding??0)-(s.y-(s.top??0))})`),Vt(e,v),e.intersect=function(T){return Lt.rect(e,T)},i}l(Zf,"shadedProcess");async function Jf(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=-o/2,d=-h/2,{cssStyles:f}=e,p=Ft.svg(i),g=Ot(e,{});e.look!=="handDrawn"&&(g.roughness=0,g.fillStyle="solid");const y=[{x:u,y:d},{x:u,y:d+h},{x:u+o,y:d+h},{x:u+o,y:d-h/2}],m=de(y),x=p.path(m,g),v=i.insert(()=>x,":first-child");return v.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",f),a&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",a),v.attr("transform",`translate(0, ${h/4})`),n.attr("transform",`translate(${-o/2+(e.padding??0)-(s.x-(s.left??0))}, ${-h/4+(e.padding??0)-(s.y-(s.top??0))})`),Vt(e,v),e.intersect=function(T){return Lt.polygon(e,y,T)},i}l(Jf,"slopedRect");async function tg(t,e){const r={rx:0,ry:0,labelPaddingX:((e==null?void 0:e.padding)||0)*2,labelPaddingY:((e==null?void 0:e.padding)||0)*1};return cl(t,e,r)}l(tg,"squareRect");async function eg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=s.height+e.padding,o=s.width+n/4+e.padding;let h;const{cssStyles:u}=e;if(e.look==="handDrawn"){const d=Ft.svg(i),f=Ot(e,{}),p=Di(-o/2,-n/2,o,n,n/2),g=d.path(p,f);h=i.insert(()=>g,":first-child"),h.attr("class","basic label-container").attr("style",hr(u))}else h=i.insert("rect",":first-child"),h.attr("class","basic label-container").attr("style",a).attr("rx",n/2).attr("ry",n/2).attr("x",-o/2).attr("y",-n/2).attr("width",o).attr("height",n);return Vt(e,h),e.intersect=function(d){return Lt.rect(e,d)},i}l(eg,"stadium");async function rg(t,e){return cl(t,e,{rx:5,ry:5})}l(rg,"state");function ig(t,e,{config:{themeVariables:r}}){const{labelStyles:a,nodeStyles:i}=Wt(e);e.labelStyle=a;const{cssStyles:s}=e,{lineColor:n,stateBorder:o,nodeBorder:h}=r,u=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),d=Ft.svg(u),f=Ot(e,{});e.look!=="handDrawn"&&(f.roughness=0,f.fillStyle="solid");const p=d.circle(0,0,14,{...f,stroke:n,strokeWidth:2}),g=o??h,y=d.circle(0,0,5,{...f,fill:g,stroke:g,strokeWidth:2,fillStyle:"solid"}),m=u.insert(()=>p,":first-child");return m.insert(()=>y),s&&m.selectAll("path").attr("style",s),i&&m.selectAll("path").attr("style",i),Vt(e,m),e.intersect=function(x){return Lt.circle(e,7,x)},u}l(ig,"stateEnd");function ag(t,e,{config:{themeVariables:r}}){const{lineColor:a}=r,i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let s;if(e.look==="handDrawn"){const o=Ft.svg(i).circle(0,0,14,m5(a));s=i.insert(()=>o),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else s=i.insert("circle",":first-child"),s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return Vt(e,s),e.intersect=function(n){return Lt.circle(e,7,n)},i}l(ag,"stateStart");async function sg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=((e==null?void 0:e.padding)||0)/2,o=s.width+e.padding,h=s.height+e.padding,u=-s.width/2-n,d=-s.height/2-n,f=[{x:0,y:0},{x:o,y:0},{x:o,y:-h},{x:0,y:-h},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-h},{x:-8,y:-h},{x:-8,y:0}];if(e.look==="handDrawn"){const p=Ft.svg(i),g=Ot(e,{}),y=p.rectangle(u-8,d,o+16,h,g),m=p.line(u,d,u,d+h,g),x=p.line(u+o,d,u+o,d+h,g);i.insert(()=>m,":first-child"),i.insert(()=>x,":first-child");const v=i.insert(()=>y,":first-child"),{cssStyles:T}=e;v.attr("class","basic label-container").attr("style",hr(T)),Vt(e,v)}else{const p=Ri(i,o,h,f);a&&p.attr("style",a),Vt(e,p)}return e.intersect=function(p){return Lt.polygon(e,f,p)},i}l(sg,"subroutine");async function ng(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),o=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),h=-n/2,u=-o/2,d=.2*o,f=.2*o,{cssStyles:p}=e,g=Ft.svg(i),y=Ot(e,{}),m=[{x:h-d/2,y:u},{x:h+n+d/2,y:u},{x:h+n+d/2,y:u+o},{x:h-d/2,y:u+o}],x=[{x:h+n-d/2,y:u+o},{x:h+n+d/2,y:u+o},{x:h+n+d/2,y:u+o-f}];e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=de(m),T=g.path(v,y),I=de(x),B=g.path(I,{...y,fillStyle:"solid"}),_=i.insert(()=>B,":first-child");return _.insert(()=>T,":first-child"),_.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",p),a&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",a),Vt(e,_),e.intersect=function(w){return Lt.polygon(e,m,w)},i}l(ng,"taggedRect");async function og(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=h/4,d=.2*o,f=.2*h,p=h+u,{cssStyles:g}=e,y=Ft.svg(i),m=Ot(e,{});e.look!=="handDrawn"&&(m.roughness=0,m.fillStyle="solid");const x=[{x:-o/2-o/2*.1,y:p/2},...Yi(-o/2-o/2*.1,p/2,o/2+o/2*.1,p/2,u,.8),{x:o/2+o/2*.1,y:-p/2},{x:-o/2-o/2*.1,y:-p/2}],v=-o/2+o/2*.1,T=-p/2-f*.4,I=[{x:v+o-d,y:(T+h)*1.4},{x:v+o,y:T+h-f},{x:v+o,y:(T+h)*.9},...Yi(v+o,(T+h)*1.3,v+o-d,(T+h)*1.5,-h*.03,.5)],B=de(x),_=y.path(B,m),w=de(I),D=y.path(w,{...m,fillStyle:"solid"}),S=i.insert(()=>D,":first-child");return S.insert(()=>_,":first-child"),S.attr("class","basic label-container"),g&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",g),a&&e.look!=="handDrawn"&&S.selectAll("path").attr("style",a),S.attr("transform",`translate(0,${-u/2})`),n.attr("transform",`translate(${-o/2+(e.padding??0)-(s.x-(s.left??0))},${-h/2+(e.padding??0)-u/2-(s.y-(s.top??0))})`),Vt(e,S),e.intersect=function(b){return Lt.polygon(e,x,b)},i}l(og,"taggedWaveEdgedRectangle");async function lg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=Math.max(s.width+e.padding,(e==null?void 0:e.width)||0),o=Math.max(s.height+e.padding,(e==null?void 0:e.height)||0),h=-n/2,u=-o/2,d=i.insert("rect",":first-child");return d.attr("class","text").attr("style",a).attr("rx",0).attr("ry",0).attr("x",h).attr("y",u).attr("width",n).attr("height",o),Vt(e,d),e.intersect=function(f){return Lt.rect(e,f)},i}l(lg,"text");var M5=l((t,e,r,a,i,s)=>`M${t},${e}
    a${i},${s} 0,0,1 0,${-a}
    l${r},0
    a${i},${s} 0,0,1 0,${a}
    M${r},${-a}
    a${i},${s} 0,0,0 0,${a}
    l${-r},0`,"createCylinderPathD"),$5=l((t,e,r,a,i,s)=>[`M${t},${e}`,`M${t+r},${e}`,`a${i},${s} 0,0,0 0,${-a}`,`l${-r},0`,`a${i},${s} 0,0,0 0,${a}`,`l${r},0`].join(" "),"createOuterCylinderPathD"),V5=l((t,e,r,a,i,s)=>[`M${t+r/2},${-a/2}`,`a${i},${s} 0,0,0 0,${a}`].join(" "),"createInnerCylinderPathD");async function cg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n,halfPadding:o}=await Zt(t,e,Jt(e)),h=e.look==="neo"?o*2:o,u=s.height+h,d=u/2,f=d/(2.5+u/50),p=s.width+f+h,{cssStyles:g}=e;let y;if(e.look==="handDrawn"){const m=Ft.svg(i),x=$5(0,0,p,u,f,d),v=V5(0,0,p,u,f,d),T=m.path(x,Ot(e,{})),I=m.path(v,Ot(e,{fill:"none"}));y=i.insert(()=>I,":first-child"),y=i.insert(()=>T,":first-child"),y.attr("class","basic label-container"),g&&y.attr("style",g)}else{const m=M5(0,0,p,u,f,d);y=i.insert("path",":first-child").attr("d",m).attr("class","basic label-container").attr("style",hr(g)).attr("style",a),y.attr("class","basic label-container"),g&&y.selectAll("path").attr("style",g),a&&y.selectAll("path").attr("style",a)}return y.attr("label-offset-x",f),y.attr("transform",`translate(${-p/2}, ${u/2} )`),n.attr("transform",`translate(${-(s.width/2)-f-(s.x-(s.left??0))}, ${-(s.height/2)-(s.y-(s.top??0))})`),Vt(e,y),e.intersect=function(m){const x=Lt.rect(e,m),v=x.y-(e.y??0);if(d!=0&&(Math.abs(v)<(e.height??0)/2||Math.abs(v)==(e.height??0)/2&&Math.abs(x.x-(e.x??0))>(e.width??0)/2-f)){let T=f*f*(1-v*v/(d*d));T!=0&&(T=Math.sqrt(Math.abs(T))),T=f-T,m.x-(e.x??0)>0&&(T=-T),x.x+=T}return x},i}l(cg,"tiltedCylinder");async function hg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=s.width+e.padding,o=s.height+e.padding,h=[{x:-3*o/6,y:0},{x:n+3*o/6,y:0},{x:n,y:-o},{x:0,y:-o}];let u;const{cssStyles:d}=e;if(e.look==="handDrawn"){const f=Ft.svg(i),p=Ot(e,{}),g=de(h),y=f.path(g,p);u=i.insert(()=>y,":first-child").attr("transform",`translate(${-n/2}, ${o/2})`),d&&u.attr("style",d)}else u=Ri(i,n,o,h);return a&&u.attr("style",a),e.width=n,e.height=o,Vt(e,u),e.intersect=function(f){return Lt.polygon(e,h,f)},i}l(hg,"trapezoid");async function ug(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=60,o=20,h=Math.max(n,s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),u=Math.max(o,s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),{cssStyles:d}=e,f=Ft.svg(i),p=Ot(e,{});e.look!=="handDrawn"&&(p.roughness=0,p.fillStyle="solid");const g=[{x:-h/2*.8,y:-u/2},{x:h/2*.8,y:-u/2},{x:h/2,y:-u/2*.6},{x:h/2,y:u/2},{x:-h/2,y:u/2},{x:-h/2,y:-u/2*.6}],y=de(g),m=f.path(y,p),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container"),d&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",d),a&&e.look!=="handDrawn"&&x.selectChildren("path").attr("style",a),Vt(e,x),e.intersect=function(v){return Lt.polygon(e,g,v)},i}l(ug,"trapezoidalPentagon");async function dg(t,e){var T;const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=xe((T=H().flowchart)==null?void 0:T.htmlLabels),h=s.width+(e.padding??0),u=h+s.height,d=h+s.height,f=[{x:0,y:0},{x:d,y:0},{x:d/2,y:-u}],{cssStyles:p}=e,g=Ft.svg(i),y=Ot(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=de(f),x=g.path(m,y),v=i.insert(()=>x,":first-child").attr("transform",`translate(${-u/2}, ${u/2})`);return p&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",p),a&&e.look!=="handDrawn"&&v.selectChildren("path").attr("style",a),e.width=h,e.height=u,Vt(e,v),n.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${u/2-(s.height+(e.padding??0)/(o?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(I){return A.info("Triangle intersect",e,f,I),Lt.polygon(e,f,I)},i}l(dg,"triangle");async function pg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=h/8,d=h+u,{cssStyles:f}=e,g=70-o,y=g>0?g/2:0,m=Ft.svg(i),x=Ot(e,{});e.look!=="handDrawn"&&(x.roughness=0,x.fillStyle="solid");const v=[{x:-o/2-y,y:d/2},...Yi(-o/2-y,d/2,o/2+y,d/2,u,.8),{x:o/2+y,y:-d/2},{x:-o/2-y,y:-d/2}],T=de(v),I=m.path(T,x),B=i.insert(()=>I,":first-child");return B.attr("class","basic label-container"),f&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",f),a&&e.look!=="handDrawn"&&B.selectAll("path").attr("style",a),B.attr("transform",`translate(0,${-u/2})`),n.attr("transform",`translate(${-o/2+(e.padding??0)-(s.x-(s.left??0))},${-h/2+(e.padding??0)-u-(s.y-(s.top??0))})`),Vt(e,B),e.intersect=function(_){return Lt.polygon(e,v,_)},i}l(pg,"waveEdgedRectangle");async function fg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s}=await Zt(t,e,Jt(e)),n=100,o=50,h=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),u=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),d=h/u;let f=h,p=u;f>p*d?p=f/d:f=p*d,f=Math.max(f,n),p=Math.max(p,o);const g=Math.min(p*.2,p/4),y=p+g*2,{cssStyles:m}=e,x=Ft.svg(i),v=Ot(e,{});e.look!=="handDrawn"&&(v.roughness=0,v.fillStyle="solid");const T=[{x:-f/2,y:y/2},...Yi(-f/2,y/2,f/2,y/2,g,1),{x:f/2,y:-y/2},...Yi(f/2,-y/2,-f/2,-y/2,g,-1)],I=de(T),B=x.path(I,v),_=i.insert(()=>B,":first-child");return _.attr("class","basic label-container"),m&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",m),a&&e.look!=="handDrawn"&&_.selectAll("path").attr("style",a),Vt(e,_),e.intersect=function(w){return Lt.polygon(e,T,w)},i}l(fg,"waveRectangle");async function gg(t,e){const{labelStyles:r,nodeStyles:a}=Wt(e);e.labelStyle=r;const{shapeSvg:i,bbox:s,label:n}=await Zt(t,e,Jt(e)),o=Math.max(s.width+(e.padding??0)*2,(e==null?void 0:e.width)??0),h=Math.max(s.height+(e.padding??0)*2,(e==null?void 0:e.height)??0),u=5,d=-o/2,f=-h/2,{cssStyles:p}=e,g=Ft.svg(i),y=Ot(e,{}),m=[{x:d-u,y:f-u},{x:d-u,y:f+h},{x:d+o,y:f+h},{x:d+o,y:f-u}],x=`M${d-u},${f-u} L${d+o},${f-u} L${d+o},${f+h} L${d-u},${f+h} L${d-u},${f-u}
                M${d-u},${f} L${d+o},${f}
                M${d},${f-u} L${d},${f+h}`;e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const v=g.path(x,y),T=i.insert(()=>v,":first-child");return T.attr("transform",`translate(${u/2}, ${u/2})`),T.attr("class","basic label-container"),p&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",p),a&&e.look!=="handDrawn"&&T.selectAll("path").attr("style",a),n.attr("transform",`translate(${-(s.width/2)+u/2-(s.x-(s.left??0))}, ${-(s.height/2)+u/2-(s.y-(s.top??0))})`),Vt(e,T),e.intersect=function(I){return Lt.polygon(e,m,I)},i}l(gg,"windowPane");async function yg(t,e,r,a,i=r.class.padding??12){const s=a?0:3,n=t.insert("g").attr("class",Jt(e)).attr("id",e.domId||e.id);let o=null,h=null,u=null,d=null,f=0,p=0,g=0;if(o=n.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const T=e.annotations[0];await Xs(o,{text:`${T}`},0),f=o.node().getBBox().height}h=n.insert("g").attr("class","label-group text"),await Xs(h,e,0,["font-weight: bolder"]);const y=h.node().getBBox();p=y.height,u=n.insert("g").attr("class","members-group text");let m=0;for(const T of e.members){const I=await Xs(u,T,m,[T.parseClassifier()]);m+=I+s}g=u.node().getBBox().height,g<=0&&(g=i/2),d=n.insert("g").attr("class","methods-group text");let x=0;for(const T of e.methods){const I=await Xs(d,T,x,[T.parseClassifier()]);x+=I+s}let v=n.node().getBBox();if(o!==null){const T=o.node().getBBox();o.attr("transform",`translate(${-T.width/2})`)}return h.attr("transform",`translate(${-y.width/2}, ${f})`),v=n.node().getBBox(),u.attr("transform",`translate(0, ${f+p+i*2})`),v=n.node().getBBox(),d.attr("transform",`translate(0, ${f+p+(g?g+i*4:i*2)})`),v=n.node().getBBox(),{shapeSvg:n,bbox:v}}l(yg,"textHelper");async function Xs(t,e,r,a=[]){const i=t.insert("g").attr("class","label").attr("style",a.join("; ")),s=_e();let n="useHtmlLabels"in e?e.useHtmlLabels:xe(s.htmlLabels)??!0,o="";"text"in e?o=e.text:o=e.label,!n&&o.startsWith("\\")&&(o=o.substring(1)),ir(o)&&(n=!0);const h=await Wr(i,X1(Ai(o)),{width:zr(o,s)+50,classes:"markdown-node-label",useHtmlLabels:n},s);let u,d=1;if(n){const f=h.children[0],p=yt(h);d=f.innerHTML.split("<br>").length,f.innerHTML.includes("</math>")&&(d+=f.innerHTML.split("<mrow>").length-1);const g=f.getElementsByTagName("img");if(g){const y=o.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...g].map(m=>new Promise(x=>{function v(){var T;if(m.style.display="flex",m.style.flexDirection="column",y){const I=((T=s.fontSize)==null?void 0:T.toString())??window.getComputedStyle(document.body).fontSize,_=parseInt(I,10)*5+"px";m.style.minWidth=_,m.style.maxWidth=_}else m.style.width="100%";x(m)}l(v,"setupImage"),setTimeout(()=>{m.complete&&v()}),m.addEventListener("error",v),m.addEventListener("load",v)})))}u=f.getBoundingClientRect(),p.attr("width",u.width),p.attr("height",u.height)}else{a.includes("font-weight: bolder")&&yt(h).selectAll("tspan").attr("font-weight",""),d=h.children.length;const f=h.children[0];(h.textContent===""||h.textContent.includes("&gt"))&&(f.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim(),o[1]===" "&&(f.textContent=f.textContent[0]+" "+f.textContent.substring(1))),f.textContent==="undefined"&&(f.textContent=""),u=h.getBBox()}return i.attr("transform","translate(0,"+(-u.height/(2*d)+r)+")"),u.height}l(Xs,"addText");async function mg(t,e){var b,C;const r=H(),a=r.class.padding??12,i=a,s=e.useHtmlLabels??xe(r.htmlLabels)??!0,n=e;n.annotations=n.annotations??[],n.members=n.members??[],n.methods=n.methods??[];const{shapeSvg:o,bbox:h}=await yg(t,e,r,s,i),{labelStyles:u,nodeStyles:d}=Wt(e);e.labelStyle=u,e.cssStyles=n.styles||"";const f=((b=n.styles)==null?void 0:b.join(";"))||d||"";e.cssStyles||(e.cssStyles=f.replaceAll("!important","").split(";"));const p=n.members.length===0&&n.methods.length===0&&!((C=r.class)!=null&&C.hideEmptyMembersBox),g=Ft.svg(o),y=Ot(e,{});e.look!=="handDrawn"&&(y.roughness=0,y.fillStyle="solid");const m=h.width;let x=h.height;n.members.length===0&&n.methods.length===0?x+=i:n.members.length>0&&n.methods.length===0&&(x+=i*2);const v=-m/2,T=-x/2,I=g.rectangle(v-a,T-a-(p?a:n.members.length===0&&n.methods.length===0?-a/2:0),m+2*a,x+2*a+(p?a*2:n.members.length===0&&n.methods.length===0?-a:0),y),B=o.insert(()=>I,":first-child");B.attr("class","basic label-container");const _=B.node().getBBox();o.selectAll(".text").each((k,E,P)=>{var L;const O=yt(P[E]),V=O.attr("transform");let F=0;if(V){const N=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(V);N&&(F=parseFloat(N[2]))}let M=F+T+a-(p?a:n.members.length===0&&n.methods.length===0?-a/2:0);s||(M-=4);let R=v;(O.attr("class").includes("label-group")||O.attr("class").includes("annotation-group"))&&(R=-((L=O.node())==null?void 0:L.getBBox().width)/2||0,o.selectAll("text").each(function(q,N,j){window.getComputedStyle(j[N]).textAnchor==="middle"&&(R=0)})),O.attr("transform",`translate(${R}, ${M})`)});const w=o.select(".annotation-group").node().getBBox().height-(p?a/2:0)||0,D=o.select(".label-group").node().getBBox().height-(p?a/2:0)||0,S=o.select(".members-group").node().getBBox().height-(p?a/2:0)||0;if(n.members.length>0||n.methods.length>0||p){const k=g.line(_.x,w+D+T+a,_.x+_.width,w+D+T+a,y);o.insert(()=>k).attr("class","divider").attr("style",f)}if(p||n.members.length>0||n.methods.length>0){const k=g.line(_.x,w+D+S+T+i*2+a,_.x+_.width,w+D+S+T+a+i*2,y);o.insert(()=>k).attr("class","divider").attr("style",f)}if(n.look!=="handDrawn"&&o.selectAll("path").attr("style",f),B.select(":nth-child(2)").attr("style",f),o.selectAll(".divider").select("path").attr("style",f),e.labelStyle?o.selectAll("span").attr("style",e.labelStyle):o.selectAll("span").attr("style",f),!s){const k=RegExp(/color\s*:\s*([^;]*)/),E=k.exec(f);if(E){const P=E[0].replace("color","fill");o.selectAll("tspan").attr("style",P)}else if(u){const P=k.exec(u);if(P){const O=P[0].replace("color","fill");o.selectAll("tspan").attr("style",O)}}}return Vt(e,B),e.intersect=function(k){return Lt.rect(e,k)},o}l(mg,"classBox");var z5=l(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function xg(t,e,{config:r}){var E,P;const{labelStyles:a,nodeStyles:i}=Wt(e);e.labelStyle=a||"";const s=10,n=e.width;e.width=(e.width??200)-10;const{shapeSvg:o,bbox:h,label:u}=await Zt(t,e,Jt(e)),d=e.padding||10;let f="",p;"ticket"in e&&e.ticket&&((E=r==null?void 0:r.kanban)!=null&&E.ticketBaseUrl)&&(f=(P=r==null?void 0:r.kanban)==null?void 0:P.ticketBaseUrl.replace("#TICKET#",e.ticket),p=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",f).attr("target","_blank"));const g={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let y,m;p?{label:y,bbox:m}=await Ml(p,"ticket"in e&&e.ticket||"",g):{label:y,bbox:m}=await Ml(o,"ticket"in e&&e.ticket||"",g);const{label:x,bbox:v}=await Ml(o,"assigned"in e&&e.assigned||"",g);e.width=n;const T=10,I=(e==null?void 0:e.width)||0,B=Math.max(m.height,v.height)/2,_=Math.max(h.height+T*2,(e==null?void 0:e.height)||0)+B,w=-I/2,D=-_/2;u.attr("transform","translate("+(d-I/2)+", "+(-B-h.height/2)+")"),y.attr("transform","translate("+(d-I/2)+", "+(-B+h.height/2)+")"),x.attr("transform","translate("+(d+I/2-v.width-2*s)+", "+(-B+h.height/2)+")");let S;const{rx:b,ry:C}=e,{cssStyles:k}=e;if(e.look==="handDrawn"){const O=Ft.svg(o),V=Ot(e,{}),F=b||C?O.path(Di(w,D,I,_,b||0),V):O.rectangle(w,D,I,_,V);S=o.insert(()=>F,":first-child"),S.attr("class","basic label-container").attr("style",k||null)}else{S=o.insert("rect",":first-child"),S.attr("class","basic label-container __APA__").attr("style",i).attr("rx",b??5).attr("ry",C??5).attr("x",w).attr("y",D).attr("width",I).attr("height",_);const O="priority"in e&&e.priority;if(O){const V=o.append("line"),F=w+2,M=D+Math.floor((b??0)/2),R=D+_-Math.floor((b??0)/2);V.attr("x1",F).attr("y1",M).attr("x2",F).attr("y2",R).attr("stroke-width","4").attr("stroke",z5(O))}}return Vt(e,S),e.height=_,e.intersect=function(O){return Lt.rect(e,O)},o}l(xg,"kanbanItem");var W5=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:tg},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Qf},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:eg},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:sg},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:Cf},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:mf},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:jf},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:Df},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:zf},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:Vf},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:hg},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:Mf},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:wf},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:lg},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:gf},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Zf},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:ag},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:ig},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:Lf},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:Rf},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:kf},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:vf},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:Tf},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:Wf},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:pg},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:Bf},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:cg},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:qf},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:_f},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:Sf},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:dg},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:gg},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:Ef},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:ug},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:Af},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:Jf},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Gf},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Hf},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:ff},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:bf},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:og},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:ng},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:fg},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:Xf},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Yf}],q5=l(()=>{const e=[...Object.entries({state:rg,choice:yf,note:Uf,rectWithTitle:Kf,labelRect:$f,iconSquare:Pf,iconCircle:Nf,icon:If,iconRounded:Ff,imageSquare:Of,anchor:pf,kanbanItem:xg,classBox:mg}),...W5.flatMap(r=>[r.shortName,..."aliases"in r?r.aliases:[],..."internalAliases"in r?r.internalAliases:[]].map(i=>[i,r.handler]))];return Object.fromEntries(e)},"generateShapeMap"),bg=q5();function kg(t){return t in bg}l(kg,"isValidShape");var hl=new Map;async function ul(t,e,r){let a,i;e.shape==="rect"&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const s=e.shape?bg[e.shape]:void 0;if(!s)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let n;r.config.securityLevel==="sandbox"?n="_top":e.linkTarget&&(n=e.linkTarget||"_blank"),a=t.insert("svg:a").attr("xlink:href",e.link).attr("target",n??null),i=await s(a,e,r)}else i=await s(t,e,r),a=i;return e.tooltip&&i.attr("title",e.tooltip),hl.set(e.id,a),e.haveCallback&&a.attr("class",a.attr("class")+" clickable"),a}l(ul,"insertNode");var Y5=l((t,e)=>{hl.set(e.id,t)},"setNodeElem"),H5=l(()=>{hl.clear()},"clear"),gc=l(t=>{const e=hl.get(t.id);A.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=8,a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-r)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode"),Nr={aggregation:18,extension:18,composition:18,dependency:6,lollipop:13.5,arrow_point:4};function Ks(t,e){if(t===void 0||e===void 0)return{angle:0,deltaX:0,deltaY:0};t=Te(t),e=Te(e);const[r,a]=[t.x,t.y],[i,s]=[e.x,e.y],n=i-r,o=s-a;return{angle:Math.atan(o/n),deltaX:n,deltaY:o}}l(Ks,"calculateDeltaAndAngle");var Te=l(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),vg=l(t=>({x:l(function(e,r,a){let i=0;const s=Te(a[0]).x<Te(a[a.length-1]).x?"left":"right";if(r===0&&Object.hasOwn(Nr,t.arrowTypeStart)){const{angle:g,deltaX:y}=Ks(a[0],a[1]);i=Nr[t.arrowTypeStart]*Math.cos(g)*(y>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(Nr,t.arrowTypeEnd)){const{angle:g,deltaX:y}=Ks(a[a.length-1],a[a.length-2]);i=Nr[t.arrowTypeEnd]*Math.cos(g)*(y>=0?1:-1)}const n=Math.abs(Te(e).x-Te(a[a.length-1]).x),o=Math.abs(Te(e).y-Te(a[a.length-1]).y),h=Math.abs(Te(e).x-Te(a[0]).x),u=Math.abs(Te(e).y-Te(a[0]).y),d=Nr[t.arrowTypeStart],f=Nr[t.arrowTypeEnd],p=1;if(n<f&&n>0&&o<f){let g=f+p-n;g*=s==="right"?-1:1,i-=g}if(h<d&&h>0&&u<d){let g=d+p-h;g*=s==="right"?-1:1,i+=g}return Te(e).x+i},"x"),y:l(function(e,r,a){let i=0;const s=Te(a[0]).y<Te(a[a.length-1]).y?"down":"up";if(r===0&&Object.hasOwn(Nr,t.arrowTypeStart)){const{angle:g,deltaY:y}=Ks(a[0],a[1]);i=Nr[t.arrowTypeStart]*Math.abs(Math.sin(g))*(y>=0?1:-1)}else if(r===a.length-1&&Object.hasOwn(Nr,t.arrowTypeEnd)){const{angle:g,deltaY:y}=Ks(a[a.length-1],a[a.length-2]);i=Nr[t.arrowTypeEnd]*Math.abs(Math.sin(g))*(y>=0?1:-1)}const n=Math.abs(Te(e).y-Te(a[a.length-1]).y),o=Math.abs(Te(e).x-Te(a[a.length-1]).x),h=Math.abs(Te(e).y-Te(a[0]).y),u=Math.abs(Te(e).x-Te(a[0]).x),d=Nr[t.arrowTypeStart],f=Nr[t.arrowTypeEnd],p=1;if(n<f&&n>0&&o<f){let g=f+p-n;g*=s==="up"?-1:1,i-=g}if(h<d&&h>0&&u<d){let g=d+p-h;g*=s==="up"?-1:1,i+=g}return Te(e).y+i},"y")}),"getLineFunctionsWithOffset"),G5=l((t,e,r,a,i)=>{e.arrowTypeStart&&xd(t,"start",e.arrowTypeStart,r,a,i),e.arrowTypeEnd&&xd(t,"end",e.arrowTypeEnd,r,a,i)},"addEdgeMarkers"),U5={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},xd=l((t,e,r,a,i,s)=>{const n=U5[r];if(!n){A.warn(`Unknown arrow type: ${r}`);return}const o=e==="start"?"Start":"End";t.attr(`marker-${e}`,`url(${a}#${i}_${s}-${n}${o})`)},"addEdgeMarker"),wo=new Map,je=new Map,j5=l(()=>{wo.clear(),je.clear()},"clear"),Us=l(t=>t?t.reduce((r,a)=>r+";"+a,""):"","getLabelStyles"),Tg=l(async(t,e)=>{let r=xe(H().flowchart.htmlLabels);const a=await Wr(t,e.label,{style:Us(e.labelStyle),useHtmlLabels:r,addSvgBackground:!0,isNode:!1});A.info("abc82",e,e.labelType);const i=t.insert("g").attr("class","edgeLabel"),s=i.insert("g").attr("class","label");s.node().appendChild(a);let n=a.getBBox();if(r){const h=a.children[0],u=yt(a);n=h.getBoundingClientRect(),u.attr("width",n.width),u.attr("height",n.height)}s.attr("transform","translate("+-n.width/2+", "+-n.height/2+")"),wo.set(e.id,i),e.width=n.width,e.height=n.height;let o;if(e.startLabelLeft){const h=await ca(e.startLabelLeft,Us(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");o=d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),je.get(e.id)||je.set(e.id,{}),je.get(e.id).startLeft=u,Qs(o,e.startLabelLeft)}if(e.startLabelRight){const h=await ca(e.startLabelRight,Us(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");o=u.node().appendChild(h),d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),je.get(e.id)||je.set(e.id,{}),je.get(e.id).startRight=u,Qs(o,e.startLabelRight)}if(e.endLabelLeft){const h=await ca(e.endLabelLeft,Us(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");o=d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.node().appendChild(h),je.get(e.id)||je.set(e.id,{}),je.get(e.id).endLeft=u,Qs(o,e.endLabelLeft)}if(e.endLabelRight){const h=await ca(e.endLabelRight,Us(e.labelStyle)),u=t.insert("g").attr("class","edgeTerminals"),d=u.insert("g").attr("class","inner");o=d.node().appendChild(h);const f=h.getBBox();d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.node().appendChild(h),je.get(e.id)||je.set(e.id,{}),je.get(e.id).endRight=u,Qs(o,e.endLabelRight)}return a},"insertEdgeLabel");function Qs(t,e){H().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}l(Qs,"setTerminalWidth");var _g=l((t,e)=>{A.debug("Moving label abc88 ",t.id,t.label,wo.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath;const a=H(),{subGraphTitleTotalMargin:i}=$n(a);if(t.label){const s=wo.get(t.id);let n=t.x,o=t.y;if(r){const h=re.calcLabelPosition(r);A.debug("Moving label "+t.label+" from (",n,",",o,") to (",h.x,",",h.y,") abc88"),e.updatedPath&&(n=h.x,o=h.y)}s.attr("transform",`translate(${n}, ${o+i/2})`)}if(t.startLabelLeft){const s=je.get(t.id).startLeft;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}if(t.startLabelRight){const s=je.get(t.id).startRight;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}if(t.endLabelLeft){const s=je.get(t.id).endLeft;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}if(t.endLabelRight){const s=je.get(t.id).endRight;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}},"positionEdgeLabel"),X5=l((t,e)=>{const r=t.x,a=t.y,i=Math.abs(e.x-r),s=Math.abs(e.y-a),n=t.width/2,o=t.height/2;return i>=n||s>=o},"outsideNode"),K5=l((t,e,r)=>{A.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const a=t.x,i=t.y,s=Math.abs(a-r.x),n=t.width/2;let o=r.x<e.x?n-s:n+s;const h=t.height/2,u=Math.abs(e.y-r.y),d=Math.abs(e.x-r.x);if(Math.abs(i-e.y)*n>Math.abs(a-e.x)*h){let f=r.y<e.y?e.y-h-i:i-h-e.y;o=d*f/u;const p={x:r.x<e.x?r.x+o:r.x-d+o,y:r.y<e.y?r.y+u-f:r.y-u+f};return o===0&&(p.x=e.x,p.y=e.y),d===0&&(p.x=e.x),u===0&&(p.y=e.y),A.debug(`abc89 top/bottom calc, Q ${u}, q ${f}, R ${d}, r ${o}`,p),p}else{r.x<e.x?o=e.x-n-a:o=a-n-e.x;let f=u*o/d,p=r.x<e.x?r.x+d-o:r.x-d+o,g=r.y<e.y?r.y+f:r.y-f;return A.debug(`sides calc abc89, Q ${u}, q ${f}, R ${d}, r ${o}`,{_x:p,_y:g}),o===0&&(p=e.x,g=e.y),d===0&&(p=e.x),u===0&&(g=e.y),{x:p,y:g}}},"intersection"),bd=l((t,e)=>{A.warn("abc88 cutPathAtIntersect",t,e);let r=[],a=t[0],i=!1;return t.forEach(s=>{if(A.info("abc88 checking point",s,e),!X5(e,s)&&!i){const n=K5(e,a,s);A.debug("abc88 inside",s,a,n),A.debug("abc88 intersection",n,e);let o=!1;r.forEach(h=>{o=o||h.x===n.x&&h.y===n.y}),r.some(h=>h.x===n.x&&h.y===n.y)?A.warn("abc88 no intersect",n,r):r.push(n),i=!0}else A.warn("abc88 outside",s,a),a=s,i||r.push(s)}),A.debug("returning points",r),r},"cutPathAtIntersect");function Cg(t){const e=[],r=[];for(let a=1;a<t.length-1;a++){const i=t[a-1],s=t[a],n=t[a+1];(i.x===s.x&&s.y===n.y&&Math.abs(s.x-n.x)>5&&Math.abs(s.y-i.y)>5||i.y===s.y&&s.x===n.x&&Math.abs(s.x-i.x)>5&&Math.abs(s.y-n.y)>5)&&(e.push(s),r.push(a))}return{cornerPoints:e,cornerPointPositions:r}}l(Cg,"extractCornerPoints");var kd=l(function(t,e,r){const a=e.x-t.x,i=e.y-t.y,s=Math.sqrt(a*a+i*i),n=r/s;return{x:e.x-n*a,y:e.y-n*i}},"findAdjacentPoint"),Q5=l(function(t){const{cornerPointPositions:e}=Cg(t),r=[];for(let a=0;a<t.length;a++)if(e.includes(a)){const i=t[a-1],s=t[a+1],n=t[a],o=kd(i,n,5),h=kd(s,n,5),u=h.x-o.x,d=h.y-o.y;r.push(o);const f=Math.sqrt(2)*2;let p={x:n.x,y:n.y};if(Math.abs(s.x-i.x)>10&&Math.abs(s.y-i.y)>=10){A.debug("Corner point fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));const g=5;n.x===o.x?p={x:u<0?o.x-g+f:o.x+g-f,y:d<0?o.y-f:o.y+f}:p={x:u<0?o.x-f:o.x+f,y:d<0?o.y-g+f:o.y+g-f}}else A.debug("Corner point skipping fixing",Math.abs(s.x-i.x),Math.abs(s.y-i.y));r.push(p,h)}else r.push(t[a]);return r},"fixCorners"),Sg=l(function(t,e,r,a,i,s,n){const{handDrawnSeed:o}=H();let h=e.points,u=!1;const d=i;var f=s;f.intersect&&d.intersect&&(h=h.slice(1,e.points.length-1),h.unshift(d.intersect(h[0])),A.debug("Last point APA12",e.start,"-->",e.end,h[h.length-1],f,f.intersect(h[h.length-1])),h.push(f.intersect(h[h.length-1]))),e.toCluster&&(A.info("to cluster abc88",r.get(e.toCluster)),h=bd(e.points,r.get(e.toCluster).node),u=!0),e.fromCluster&&(A.debug("from cluster abc88",r.get(e.fromCluster),JSON.stringify(h,null,2)),h=bd(h.reverse(),r.get(e.fromCluster).node).reverse(),u=!0);let p=h.filter(D=>!Number.isNaN(D.y));p=Q5(p);let g=Dn;e.curve&&(g=e.curve);const{x:y,y:m}=vg(e),x=pa().x(y).y(m).curve(g);let v;switch(e.thickness){case"normal":v="edge-thickness-normal";break;case"thick":v="edge-thickness-thick";break;case"invisible":v="edge-thickness-invisible";break;default:v="edge-thickness-normal"}switch(e.pattern){case"solid":v+=" edge-pattern-solid";break;case"dotted":v+=" edge-pattern-dotted";break;case"dashed":v+=" edge-pattern-dashed";break;default:v+=" edge-pattern-solid"}let T,I=x(p);const B=Array.isArray(e.style)?e.style:[e.style];if(e.look==="handDrawn"){const D=Ft.svg(t);Object.assign([],p);const S=D.path(I,{roughness:.3,seed:o});v+=" transition",T=yt(S).select("path").attr("id",e.id).attr("class"," "+v+(e.classes?" "+e.classes:"")).attr("style",B?B.reduce((C,k)=>C+";"+k,""):"");let b=T.attr("d");T.attr("d",b),t.node().appendChild(T.node())}else T=t.append("path").attr("d",I).attr("id",e.id).attr("class"," "+v+(e.classes?" "+e.classes:"")).attr("style",B?B.reduce((D,S)=>D+";"+S,""):"");let _="";(H().flowchart.arrowMarkerAbsolute||H().state.arrowMarkerAbsolute)&&(_=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,_=_.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),A.info("arrowTypeStart",e.arrowTypeStart),A.info("arrowTypeEnd",e.arrowTypeEnd),G5(T,e,_,n,a);let w={};return u&&(w.updatedPath=h),w.originalPath=e.points,w},"insertEdge"),Z5=l((t,e,r,a)=>{e.forEach(i=>{lk[i](t,r,a)})},"insertMarkers"),J5=l((t,e,r)=>{A.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),tk=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),ek=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),rk=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),ik=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),ak=l((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),sk=l((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),nk=l((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),ok=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),lk={extension:J5,composition:tk,aggregation:ek,dependency:rk,lollipop:ik,point:ak,circle:sk,cross:nk,barb:ok},wg=Z5,ck={common:mt,getConfig:_e,insertCluster:Ih,insertEdge:Sg,insertEdgeLabel:Tg,insertMarkers:wg,insertNode:ul,interpolateToCurve:Ch,labelHelper:Zt,log:A,positionEdgeLabel:_g},gn={},Eg=l(t=>{for(const e of t)gn[e.name]=e},"registerLayoutLoaders"),hk=l(()=>{Eg([{name:"dagre",loader:l(async()=>await fe(()=>Promise.resolve().then(()=>Y6),void 0,import.meta.url),"loader")}])},"registerDefaultLayoutLoaders");hk();var Nh=l(async(t,e)=>{if(!(t.layoutAlgorithm in gn))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const r=gn[t.layoutAlgorithm];return(await r.loader()).render(t,e,ck,{algorithm:r.algorithm})},"render"),Ag=l((t="",{fallback:e="dagre"}={})=>{if(t in gn)return t;if(e in gn)return A.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm"),yc="11.4.1",Ki=l(t=>{var i;const{securityLevel:e}=H();let r=yt("body");if(e==="sandbox"){const n=((i=yt(`#i${t}`).node())==null?void 0:i.contentDocument)??document;r=yt(n.body)}return r.select(`#${t}`)},"selectSvgElement"),Lg="c4",uk=l(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),dk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>WT);return{diagram:e}},void 0,import.meta.url);return{id:Lg,diagram:t}},"loader"),pk={id:Lg,detector:uk,loader:dk},fk=pk,Bg="flowchart",gk=l((t,e)=>{var r,a;return((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((a=e==null?void 0:e.flowchart)==null?void 0:a.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},"detector"),yk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Uh);return{diagram:e}},void 0,import.meta.url);return{id:Bg,diagram:t}},"loader"),mk={id:Bg,detector:gk,loader:yk},xk=mk,Dg="flowchart-v2",bk=l((t,e)=>{var r,a,i;return((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"?!1:(((a=e==null?void 0:e.flowchart)==null?void 0:a.defaultRenderer)==="elk"&&(e.layout="elk"),/^\s*graph/.test(t)&&((i=e==null?void 0:e.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t))},"detector"),kk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Uh);return{diagram:e}},void 0,import.meta.url);return{id:Dg,diagram:t}},"loader"),vk={id:Dg,detector:bk,loader:kk},Tk=vk,Rg="er",_k=l(t=>/^\s*erDiagram/.test(t),"detector"),Ck=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>tC);return{diagram:e}},void 0,import.meta.url);return{id:Rg,diagram:t}},"loader"),Sk={id:Rg,detector:_k,loader:Ck},wk=Sk,Ig="gitGraph",Ek=l(t=>/^\s*gitGraph/.test(t),"detector"),Ak=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>HS);return{diagram:e}},void 0,import.meta.url);return{id:Ig,diagram:t}},"loader"),Lk={id:Ig,detector:Ek,loader:Ak},Bk=Lk,Ng="gantt",Dk=l(t=>/^\s*gantt/.test(t),"detector"),Rk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Pw);return{diagram:e}},void 0,import.meta.url);return{id:Ng,diagram:t}},"loader"),Ik={id:Ng,detector:Dk,loader:Rk},Nk=Ik,Fg="info",Fk=l(t=>/^\s*info/.test(t),"detector"),Pk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Yw);return{diagram:e}},void 0,import.meta.url);return{id:Fg,diagram:t}},"loader"),Ok={id:Fg,detector:Fk,loader:Pk},Pg="pie",Mk=l(t=>/^\s*pie/.test(t),"detector"),$k=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>oE);return{diagram:e}},void 0,import.meta.url);return{id:Pg,diagram:t}},"loader"),Vk={id:Pg,detector:Mk,loader:$k},Og="quadrantChart",zk=l(t=>/^\s*quadrantChart/.test(t),"detector"),Wk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>yE);return{diagram:e}},void 0,import.meta.url);return{id:Og,diagram:t}},"loader"),qk={id:Og,detector:zk,loader:Wk},Yk=qk,Mg="xychart",Hk=l(t=>/^\s*xychart-beta/.test(t),"detector"),Gk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>DE);return{diagram:e}},void 0,import.meta.url);return{id:Mg,diagram:t}},"loader"),Uk={id:Mg,detector:Hk,loader:Gk},jk=Uk,$g="requirement",Xk=l(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),Kk=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>c7);return{diagram:e}},void 0,import.meta.url);return{id:$g,diagram:t}},"loader"),Qk={id:$g,detector:Xk,loader:Kk},Zk=Qk,Vg="sequence",Jk=l(t=>/^\s*sequenceDiagram/.test(t),"detector"),tv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>h8);return{diagram:e}},void 0,import.meta.url);return{id:Vg,diagram:t}},"loader"),ev={id:Vg,detector:Jk,loader:tv},rv=ev,zg="class",iv=l((t,e)=>{var r;return((r=e==null?void 0:e.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},"detector"),av=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>W8);return{diagram:e}},void 0,import.meta.url);return{id:zg,diagram:t}},"loader"),sv={id:zg,detector:iv,loader:av},nv=sv,Wg="classDiagram",ov=l((t,e)=>{var r;return/^\s*classDiagram/.test(t)&&((r=e==null?void 0:e.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},"detector"),lv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Y8);return{diagram:e}},void 0,import.meta.url);return{id:Wg,diagram:t}},"loader"),cv={id:Wg,detector:ov,loader:lv},hv=cv,qg="state",uv=l((t,e)=>{var r;return((r=e==null?void 0:e.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},"detector"),dv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>e9);return{diagram:e}},void 0,import.meta.url);return{id:qg,diagram:t}},"loader"),pv={id:qg,detector:uv,loader:dv},fv=pv,Yg="stateDiagram",gv=l((t,e)=>{var r;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((r=e==null?void 0:e.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},"detector"),yv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>i9);return{diagram:e}},void 0,import.meta.url);return{id:Yg,diagram:t}},"loader"),mv={id:Yg,detector:gv,loader:yv},xv=mv,Hg="journey",bv=l(t=>/^\s*journey/.test(t),"detector"),kv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>S9);return{diagram:e}},void 0,import.meta.url);return{id:Hg,diagram:t}},"loader"),vv={id:Hg,detector:bv,loader:kv},Tv=vv,_v=l((t,e,r)=>{A.debug(`rendering svg for syntax error
`);const a=Ki(e),i=a.append("g");a.attr("viewBox","0 0 2412 512"),ar(a,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},"draw"),Gg={draw:_v},Cv=Gg,Sv={db:{},renderer:Gg,parser:{parse:l(()=>{},"parse")}},wv=Sv,Ug="flowchart-elk",Ev=l((t,e={})=>{var r;return/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&((r=e==null?void 0:e.flowchart)==null?void 0:r.defaultRenderer)==="elk"?(e.layout="elk",!0):!1},"detector"),Av=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>Uh);return{diagram:e}},void 0,import.meta.url);return{id:Ug,diagram:t}},"loader"),Lv={id:Ug,detector:Ev,loader:Av},Bv=Lv,jg="timeline",Dv=l(t=>/^\s*timeline/.test(t),"detector"),Rv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>U9);return{diagram:e}},void 0,import.meta.url);return{id:jg,diagram:t}},"loader"),Iv={id:jg,detector:Dv,loader:Rv},Nv=Iv,Xg="mindmap",Fv=l(t=>/^\s*mindmap/.test(t),"detector"),Pv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>_L);return{diagram:e}},void 0,import.meta.url);return{id:Xg,diagram:t}},"loader"),Ov={id:Xg,detector:Fv,loader:Pv},Mv=Ov,Kg="kanban",$v=l(t=>/^\s*kanban/.test(t),"detector"),Vv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>qL);return{diagram:e}},void 0,import.meta.url);return{id:Kg,diagram:t}},"loader"),zv={id:Kg,detector:$v,loader:Vv},Wv=zv,Qg="sankey",qv=l(t=>/^\s*sankey-beta/.test(t),"detector"),Yv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>sB);return{diagram:e}},void 0,import.meta.url);return{id:Qg,diagram:t}},"loader"),Hv={id:Qg,detector:qv,loader:Yv},Gv=Hv,Zg="packet",Uv=l(t=>/^\s*packet-beta/.test(t),"detector"),jv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>vB);return{diagram:e}},void 0,import.meta.url);return{id:Zg,diagram:t}},"loader"),Xv={id:Zg,detector:Uv,loader:jv},Jg="block",Kv=l(t=>/^\s*block-beta/.test(t),"detector"),Qv=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>UD);return{diagram:e}},void 0,import.meta.url);return{id:Jg,diagram:t}},"loader"),Zv={id:Jg,detector:Kv,loader:Qv},Jv=Zv,t2="architecture",t6=l(t=>/^\s*architecture/.test(t),"detector"),e6=l(async()=>{const{diagram:t}=await fe(async()=>{const{diagram:e}=await Promise.resolve().then(()=>wR);return{diagram:e}},void 0,import.meta.url);return{id:t2,diagram:t}},"loader"),r6={id:t2,detector:t6,loader:e6},i6=r6,vd=!1,dl=l(()=>{vd||(vd=!0,mo("error",wv,t=>t.toLowerCase().trim()==="error"),mo("---",{db:{clear:l(()=>{},"clear")},styles:{},renderer:{draw:l(()=>{},"draw")},parser:{parse:l(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:l(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),P1(fk,Wv,hv,nv,wk,Nk,Ok,Vk,Zk,rv,Bv,Tk,xk,Mv,Nv,Bk,xv,fv,Tv,Yk,Gv,Xv,jk,Jv,i6))},"addDiagrams"),a6=l(async()=>{A.debug("Loading registered diagrams");const e=(await Promise.allSettled(Object.entries(ws).map(async([r,{detector:a,loader:i}])=>{if(i)try{Xl(r)}catch{try{const{diagram:s,id:n}=await i();mo(n,s,a)}catch(s){throw A.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete ws[r],s}}}))).filter(r=>r.status==="rejected");if(e.length>0){A.error(`Failed to load ${e.length} external diagrams`);for(const r of e)A.error(r);throw new Error(`Failed to load ${e.length} external diagrams`)}},"loadRegisteredDiagrams"),s6="graphics-document document";function e2(t,e){t.attr("role",s6),e!==""&&t.attr("aria-roledescription",e)}l(e2,"setA11yDiagramInfo");function r2(t,e,r,a){if(t.insert!==void 0){if(r){const i=`chart-desc-${a}`;t.attr("aria-describedby",i),t.insert("desc",":first-child").attr("id",i).text(r)}if(e){const i=`chart-title-${a}`;t.attr("aria-labelledby",i),t.insert("title",":first-child").attr("id",i).text(e)}}}l(r2,"addSVGa11yTitleDescription");var da,mc=(da=class{constructor(e,r,a,i,s){this.type=e,this.text=r,this.db=a,this.parser=i,this.renderer=s}static async fromText(e,r={}){var u,d;const a=_e(),i=lh(e,a);e=f5(e)+`
`;try{Xl(i)}catch{const f=d3(i);if(!f)throw new F1(`Diagram ${i} not found.`);const{id:p,diagram:g}=await f();mo(p,g)}const{db:s,parser:n,renderer:o,init:h}=Xl(i);return n.parser&&(n.parser.yy=s),(u=s.clear)==null||u.call(s),h==null||h(a),r.title&&((d=s.setDiagramTitle)==null||d.call(s,r.title)),await n.parse(e),new da(i,e,s,n,o)}async render(e,r){await this.renderer.draw(this.text,e,r,this)}getParser(){return this.parser}getType(){return this.type}},l(da,"Diagram"),da),Td=[],n6=l(()=>{Td.forEach(t=>{t()}),Td=[]},"attachFunctions"),o6=l(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function i2(t){const e=t.match(N1);if(!e)return{text:t,metadata:{}};let r=_h(e[1],{schema:Th})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const a={};return r.displayMode&&(a.displayMode=r.displayMode.toString()),r.title&&(a.title=r.title.toString()),r.config&&(a.config=r.config),{text:t.slice(e[0].length),metadata:a}}l(i2,"extractFrontMatter");var l6=l(t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(e,r,a)=>"<"+r+a.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),c6=l(t=>{const{text:e,metadata:r}=i2(t),{displayMode:a,title:i,config:s={}}=r;return a&&(s.gantt||(s.gantt={}),s.gantt.displayMode=a),{title:i,config:s,text:e}},"processFrontmatter"),h6=l(t=>{const e=re.detectInit(t)??{},r=re.detectDirective(t,"wrap");return Array.isArray(r)?e.wrap=r.some(({type:a})=>a==="wrap"):(r==null?void 0:r.type)==="wrap"&&(e.wrap=!0),{text:a5(t),directive:e}},"processDirectives");function Fh(t){const e=l6(t),r=c6(e),a=h6(r.text),i=Bi(r.config,a.directive);return t=o6(a.text),{code:t,title:r.title,config:i}}l(Fh,"preprocessDiagram");function a2(t){const e=new TextEncoder().encode(t),r=Array.from(e,a=>String.fromCodePoint(a)).join("");return btoa(r)}l(a2,"toBase64");var u6=5e4,d6="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",p6="sandbox",f6="loose",g6="http://www.w3.org/2000/svg",y6="http://www.w3.org/1999/xlink",m6="http://www.w3.org/1999/xhtml",x6="100%",b6="100%",k6="border:0;margin:0;",v6="margin:0",T6="allow-top-navigation-by-user-activation allow-popups",_6='The "iframe" tag is not supported by your browser.',C6=["foreignobject"],S6=["dominant-baseline"];function Ph(t){const e=Fh(t);return go(),E3(e.config??{}),e}l(Ph,"processAndSetConfigs");async function s2(t,e){dl();try{const{code:r,config:a}=Ph(t);return{diagramType:(await o2(r)).type,config:a}}catch(r){if(e!=null&&e.suppressErrors)return!1;throw r}}l(s2,"parse");var _d=l((t,e,r=[])=>`
.${t} ${e} { ${r.join(" !important; ")} !important; }`,"cssImportantStyles"),w6=l((t,e=new Map)=>{var a;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const o=t.htmlLabels??((a=t.flowchart)==null?void 0:a.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(h=>{ld(h.styles)||o.forEach(u=>{r+=_d(h.id,u,h.styles)}),ld(h.textStyles)||(r+=_d(h.id,"tspan",((h==null?void 0:h.textStyles)||[]).map(u=>u.replace("color","fill"))))})}return r},"createCssStyles"),E6=l((t,e,r,a)=>{const i=w6(t,r),s=H3(e,i,t.themeVariables);return jb(Xb(`${a}{${s}}`),Kb)},"createUserStyles"),A6=l((t="",e,r)=>{let a=t;return!r&&!e&&(a=a.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),a=Ai(a),a=a.replace(/<br>/g,"<br/>"),a},"cleanUpSvgCode"),L6=l((t="",e)=>{var i,s;const r=(s=(i=e==null?void 0:e.viewBox)==null?void 0:i.baseVal)!=null&&s.height?e.viewBox.baseVal.height+"px":b6,a=a2(`<body style="${v6}">${t}</body>`);return`<iframe style="width:${x6};height:${r};${k6}" src="data:text/html;charset=UTF-8;base64,${a}" sandbox="${T6}">
  ${_6}
</iframe>`},"putIntoIFrame"),Cd=l((t,e,r,a,i)=>{const s=t.append("div");s.attr("id",r),a&&s.attr("style",a);const n=s.append("svg").attr("id",e).attr("width","100%").attr("xmlns",g6);return i&&n.attr("xmlns:xlink",i),n.append("g"),t},"appendDivSvgG");function xc(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}l(xc,"sandboxedIframe");var B6=l((t,e,r,a)=>{var i,s,n;(i=t.getElementById(e))==null||i.remove(),(s=t.getElementById(r))==null||s.remove(),(n=t.getElementById(a))==null||n.remove()},"removeExistingElements"),D6=l(async function(t,e,r){var E,P,O,V,F,M;dl();const a=Ph(e);e=a.code;const i=_e();A.debug(i),e.length>((i==null?void 0:i.maxTextSize)??u6)&&(e=d6);const s="#"+t,n="i"+t,o="#"+n,h="d"+t,u="#"+h,d=l(()=>{const L=yt(p?o:u).node();L&&"remove"in L&&L.remove()},"removeTempElements");let f=yt("body");const p=i.securityLevel===p6,g=i.securityLevel===f6,y=i.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),p){const R=xc(yt(r),n);f=yt(R.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=yt(r);Cd(f,t,h,`font-family: ${y}`,y6)}else{if(B6(document,t,h,n),p){const R=xc(yt("body"),n);f=yt(R.nodes()[0].contentDocument.body),f.node().style.margin=0}else f=yt("body");Cd(f,t,h)}let m,x;try{m=await mc.fromText(e,{title:a.title})}catch(R){if(i.suppressErrorRendering)throw d(),R;m=await mc.fromText("error"),x=R}const v=f.select(u).node(),T=m.type,I=v.firstChild,B=I.firstChild,_=(P=(E=m.renderer).getClasses)==null?void 0:P.call(E,e,m),w=E6(i,T,_,s),D=document.createElement("style");D.innerHTML=w,I.insertBefore(D,B);try{await m.renderer.draw(e,t,yc,m)}catch(R){throw i.suppressErrorRendering?d():Cv.draw(e,t,yc),R}const S=f.select(`${u} svg`),b=(V=(O=m.db).getAccTitle)==null?void 0:V.call(O),C=(M=(F=m.db).getAccDescription)==null?void 0:M.call(F);l2(T,S,b,C),f.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",m6);let k=f.select(u).node().innerHTML;if(A.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),k=A6(k,p,xe(i.arrowMarkerAbsolute)),p){const R=f.select(u+" svg").node();k=L6(k,R)}else g||(k=Ss.sanitize(k,{ADD_TAGS:C6,ADD_ATTR:S6,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(n6(),x)throw x;return d(),{diagramType:T,svg:k,bindFunctions:m.db.bindFunctions}},"render");function n2(t={}){var a;const e=Ve({},t);e!=null&&e.fontFamily&&!((a=e.themeVariables)!=null&&a.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),S3(e),e!=null&&e.theme&&e.theme in wi?e.themeVariables=wi[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=wi.default.getThemeVariables(e.themeVariables));const r=typeof e=="object"?C3(e):z1();oh(r.logLevel),dl()}l(n2,"initialize");var o2=l((t,e={})=>{const{code:r}=Fh(t);return mc.fromText(r,e)},"getDiagramFromText");function l2(t,e,r,a){e2(e,t),r2(e,r,a,e.attr("id"))}l(l2,"addA11yInfo");var ya=Object.freeze({render:D6,parse:s2,getDiagramFromText:o2,initialize:n2,getConfig:_e,setConfig:W1,getSiteConfig:z1,updateSiteConfig:w3,reset:l(()=>{go()},"reset"),globalReset:l(()=>{go(Es)},"globalReset"),defaultConfig:Es});oh(_e().logLevel);go(_e());var R6=l((t,e,r)=>{A.warn(t),Lh(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),c2=l(async function(t={querySelector:".mermaid"}){try{await I6(t)}catch(e){if(Lh(e)&&A.error(e.str),Ar.parseError&&Ar.parseError(e),!t.suppressErrors)throw A.error("Use the suppressErrors option to suppress these errors"),e}},"run"),I6=l(async function({postRenderCallback:t,querySelector:e,nodes:r}={querySelector:".mermaid"}){const a=ya.getConfig();A.debug(`${t?"":"No "}Callback function found`);let i;if(r)i=r;else if(e)i=document.querySelectorAll(e);else throw new Error("Nodes and querySelector are both undefined");A.debug(`Found ${i.length} diagrams`),(a==null?void 0:a.startOnLoad)!==void 0&&(A.debug("Start On Load: "+(a==null?void 0:a.startOnLoad)),ya.updateSiteConfig({startOnLoad:a==null?void 0:a.startOnLoad}));const s=new re.InitIDGenerator(a.deterministicIds,a.deterministicIDSeed);let n;const o=[];for(const h of Array.from(i)){if(A.info("Rendering diagram: "+h.id),h.getAttribute("data-processed"))continue;h.setAttribute("data-processed","true");const u=`mermaid-${s.next()}`;n=h.innerHTML,n=A1(re.entityDecode(n)).trim().replace(/<br\s*\/?>/gi,"<br/>");const d=re.detectInit(n);d&&A.debug("Detected early reinit: ",d);try{const{svg:f,bindFunctions:p}=await p2(u,n,h);h.innerHTML=f,t&&await t(u),p&&p(h)}catch(f){R6(f,o,Ar.parseError)}}if(o.length>0)throw o[0]},"runThrowsErrors"),h2=l(function(t){ya.initialize(t)},"initialize"),N6=l(async function(t,e,r){A.warn("mermaid.init is deprecated. Please use run instead."),t&&h2(t);const a={postRenderCallback:r,querySelector:".mermaid"};typeof e=="string"?a.querySelector=e:e&&(e instanceof HTMLElement?a.nodes=[e]:a.nodes=e),await c2(a)},"init"),F6=l(async(t,{lazyLoad:e=!0}={})=>{dl(),P1(...t),e===!1&&await a6()},"registerExternalDiagrams"),u2=l(function(){if(Ar.startOnLoad){const{startOnLoad:t}=ya.getConfig();t&&Ar.run().catch(e=>A.error("Mermaid failed to initialize",e))}},"contentLoaded");typeof document<"u"&&window.addEventListener("load",u2,!1);var P6=l(function(t){Ar.parseError=t},"setParseErrorHandler"),Eo=[],$l=!1,d2=l(async()=>{if(!$l){for($l=!0;Eo.length>0;){const t=Eo.shift();if(t)try{await t()}catch(e){A.error("Error executing queue",e)}}$l=!1}},"executeQueue"),O6=l(async(t,e)=>new Promise((r,a)=>{const i=l(()=>new Promise((s,n)=>{ya.parse(t,e).then(o=>{s(o),r(o)},o=>{var h;A.error("Error parsing",o),(h=Ar.parseError)==null||h.call(Ar,o),n(o),a(o)})}),"performCall");Eo.push(i),d2().catch(a)}),"parse"),p2=l((t,e,r)=>new Promise((a,i)=>{const s=l(()=>new Promise((n,o)=>{ya.render(t,e,r).then(h=>{n(h),a(h)},h=>{var u;A.error("Error parsing",h),(u=Ar.parseError)==null||u.call(Ar,h),o(h),i(h)})}),"performCall");Eo.push(s),d2().catch(i)}),"render"),Ar={startOnLoad:!0,mermaidAPI:ya,parse:O6,render:p2,init:N6,run:c2,registerExternalDiagrams:F6,registerLayoutLoaders:Eg,initialize:h2,parseError:void 0,contentLoaded:u2,setParseErrorHandler:P6,detectType:lh,registerIconPacks:Np},KR=Ar;/*! Check if previously processed *//*!
 * Wait for document loaded before starting the execution
 */var oe=new Map,ha=new Map,f2=new Map,M6=l(()=>{ha.clear(),f2.clear(),oe.clear()},"clear"),Ao=l((t,e)=>{const r=ha.get(e)||[];return A.trace("In isDescendant",e," ",t," = ",r.includes(t)),r.includes(t)},"isDescendant"),$6=l((t,e)=>{const r=ha.get(e)||[];return A.info("Descendants of ",e," is ",r),A.info("Edge is ",t),t.v===e||t.w===e?!1:r?r.includes(t.v)||Ao(t.v,e)||Ao(t.w,e)||r.includes(t.w):(A.debug("Tilt, ",e,",not in descendants"),!1)},"edgeInCluster"),g2=l((t,e,r,a)=>{A.warn("Copying children of ",t,"root",a,"data",e.node(t),a);const i=e.children(t)||[];t!==a&&i.push(t),A.warn("Copying (nodes) clusterId",t,"nodes",i),i.forEach(s=>{if(e.children(s).length>0)g2(s,e,r,a);else{const n=e.node(s);A.info("cp ",s," to ",a," with parent ",t),r.setNode(s,n),a!==e.parent(s)&&(A.warn("Setting parent",s,e.parent(s)),r.setParent(s,e.parent(s))),t!==a&&s!==t?(A.debug("Setting parent",s,t),r.setParent(s,t)):(A.info("In copy ",t,"root",a,"data",e.node(t),a),A.debug("Not Setting parent for node=",s,"cluster!==rootId",t!==a,"node!==clusterId",s!==t));const o=e.edges(s);A.debug("Copying Edges",o),o.forEach(h=>{A.info("Edge",h);const u=e.edge(h.v,h.w,h.name);A.info("Edge data",u,a);try{$6(h,a)?(A.info("Copying as ",h.v,h.w,u,h.name),r.setEdge(h.v,h.w,u,h.name),A.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):A.info("Skipping copy of edge ",h.v,"-->",h.w," rootId: ",a," clusterId:",t)}catch(d){A.error(d)}})}A.debug("Removing node",s),e.removeNode(s)})},"copy"),y2=l((t,e)=>{const r=e.children(t);let a=[...r];for(const i of r)f2.set(i,t),a=[...a,...y2(i,e)];return a},"extractDescendants"),V6=l((t,e,r)=>{const a=t.edges().filter(h=>h.v===e||h.w===e),i=t.edges().filter(h=>h.v===r||h.w===r),s=a.map(h=>({v:h.v===e?r:h.v,w:h.w===e?e:h.w})),n=i.map(h=>({v:h.v,w:h.w}));return s.filter(h=>n.some(u=>h.v===u.v&&h.w===u.w))},"findCommonEdges"),yn=l((t,e,r)=>{const a=e.children(t);if(A.trace("Searching children of id ",t,a),a.length<1)return t;let i;for(const s of a){const n=yn(s,e,r),o=V6(e,r,n);if(n)if(o.length>0)i=n;else return n}return i},"findNonClusterChild"),Sd=l(t=>!oe.has(t)||!oe.get(t).externalConnections?t:oe.has(t)?oe.get(t).id:t,"getAnchorId"),z6=l((t,e)=>{if(!t||e>10){A.debug("Opting out, no graph ");return}else A.debug("Opting in, graph ");t.nodes().forEach(function(r){t.children(r).length>0&&(A.warn("Cluster identified",r," Replacement id in edges: ",yn(r,t,r)),ha.set(r,y2(r,t)),oe.set(r,{id:yn(r,t,r),clusterData:t.node(r)}))}),t.nodes().forEach(function(r){const a=t.children(r),i=t.edges();a.length>0?(A.debug("Cluster identified",r,ha),i.forEach(s=>{const n=Ao(s.v,r),o=Ao(s.w,r);n^o&&(A.warn("Edge: ",s," leaves cluster ",r),A.warn("Descendants of XXX ",r,": ",ha.get(r)),oe.get(r).externalConnections=!0)})):A.debug("Not a cluster ",r,ha)});for(let r of oe.keys()){const a=oe.get(r).id,i=t.parent(a);i!==r&&oe.has(i)&&!oe.get(i).externalConnections&&(oe.get(r).id=i)}t.edges().forEach(function(r){const a=t.edge(r);A.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(r)),A.warn("Edge "+r.v+" -> "+r.w+": "+JSON.stringify(t.edge(r)));let i=r.v,s=r.w;if(A.warn("Fix XXX",oe,"ids:",r.v,r.w,"Translating: ",oe.get(r.v)," --- ",oe.get(r.w)),oe.get(r.v)||oe.get(r.w)){if(A.warn("Fixing and trying - removing XXX",r.v,r.w,r.name),i=Sd(r.v),s=Sd(r.w),t.removeEdge(r.v,r.w,r.name),i!==r.v){const n=t.parent(i);oe.get(n).externalConnections=!0,a.fromCluster=r.v}if(s!==r.w){const n=t.parent(s);oe.get(n).externalConnections=!0,a.toCluster=r.w}A.warn("Fix Replacing with XXX",i,s,r.name),t.setEdge(i,s,a,r.name)}}),A.warn("Adjusted Graph",si(t)),m2(t,0),A.trace(oe)},"adjustClustersAndEdges"),m2=l((t,e)=>{var i,s;if(A.warn("extractor - ",e,si(t),t.children("D")),e>10){A.error("Bailing out");return}let r=t.nodes(),a=!1;for(const n of r){const o=t.children(n);a=a||o.length>0}if(!a){A.debug("Done, no node has children",t.nodes());return}A.debug("Nodes = ",r,e);for(const n of r)if(A.debug("Extracting node",n,oe,oe.has(n)&&!oe.get(n).externalConnections,!t.parent(n),t.node(n),t.children("D")," Depth ",e),!oe.has(n))A.debug("Not a cluster",n,e);else if(!oe.get(n).externalConnections&&t.children(n)&&t.children(n).length>0){A.warn("Cluster without external connections, without a parent and with children",n,e);let h=t.graph().rankdir==="TB"?"LR":"TB";(s=(i=oe.get(n))==null?void 0:i.clusterData)!=null&&s.dir&&(h=oe.get(n).clusterData.dir,A.warn("Fixing dir",oe.get(n).clusterData.dir,h));const u=new $s({multigraph:!0,compound:!0}).setGraph({rankdir:h,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});A.warn("Old graph before copy",si(t)),g2(n,t,u,n),t.setNode(n,{clusterNode:!0,id:n,clusterData:oe.get(n).clusterData,label:oe.get(n).label,graph:u}),A.warn("New graph after copy node: (",n,")",si(u)),A.debug("Old graph after copy",si(t))}else A.warn("Cluster ** ",n," **not meeting the criteria !externalConnections:",!oe.get(n).externalConnections," no parent: ",!t.parent(n)," children ",t.children(n)&&t.children(n).length>0,t.children("D"),e),A.debug(oe);r=t.nodes(),A.warn("New list of nodes",r);for(const n of r){const o=t.node(n);A.warn(" Now next level",n,o),o!=null&&o.clusterNode&&m2(o.graph,e+1)}},"extractor"),x2=l((t,e)=>{if(e.length===0)return[];let r=Object.assign([],e);return e.forEach(a=>{const i=t.children(a),s=x2(t,i);r=[...r,...s]}),r},"sorter"),W6=l(t=>x2(t,t.children()),"sortNodesByHierarchy"),b2=l(async(t,e,r,a,i,s)=>{A.warn("Graph in recursive render:XAX",si(e),i);const n=e.graph().rankdir;A.trace("Dir in recursive render - dir:",n);const o=t.insert("g").attr("class","root");e.nodes()?A.info("Recursive render XXX",e.nodes()):A.info("No nodes found for",e),e.edges().length>0&&A.info("Recursive edges",e.edge(e.edges()[0]));const h=o.insert("g").attr("class","clusters"),u=o.insert("g").attr("class","edgePaths"),d=o.insert("g").attr("class","edgeLabels"),f=o.insert("g").attr("class","nodes");await Promise.all(e.nodes().map(async function(m){const x=e.node(m);if(i!==void 0){const v=JSON.parse(JSON.stringify(i.clusterData));A.trace(`Setting data for parent cluster XXX
 Node.id = `,m,`
 data=`,v.height,`
Parent cluster`,i.height),e.setNode(i.id,v),e.parent(m)||(A.trace("Setting parent",m,i.id),e.setParent(m,i.id,v))}if(A.info("(Insert) Node XXX"+m+": "+JSON.stringify(e.node(m))),x!=null&&x.clusterNode){A.info("Cluster identified XBX",m,x.width,e.node(m));const{ranksep:v,nodesep:T}=e.graph();x.graph.setGraph({...x.graph.graph(),ranksep:v+25,nodesep:T});const I=await b2(f,x.graph,r,a,e.node(m),s),B=I.elem;Vt(x,B),x.diff=I.diff||0,A.info("New compound node after recursive render XAX",m,"width",x.width,"height",x.height),Y5(B,x)}else e.children(m).length>0?(A.trace("Cluster - the non recursive path XBX",m,x.id,x,x.width,"Graph:",e),A.trace(yn(x.id,e)),oe.set(x.id,{id:yn(x.id,e),node:x})):(A.trace("Node - the non recursive path XAX",m,f,e.node(m),n),await ul(f,e.node(m),{config:s,dir:n}))})),await l(async()=>{const m=e.edges().map(async function(x){const v=e.edge(x.v,x.w,x.name);A.info("Edge "+x.v+" -> "+x.w+": "+JSON.stringify(x)),A.info("Edge "+x.v+" -> "+x.w+": ",x," ",JSON.stringify(e.edge(x))),A.info("Fix",oe,"ids:",x.v,x.w,"Translating: ",oe.get(x.v),oe.get(x.w)),await Tg(d,v)});await Promise.all(m)},"processEdges")(),A.info("Graph before layout:",JSON.stringify(si(e))),A.info("############################################# XXX"),A.info("###                Layout                 ### XXX"),A.info("############################################# XXX"),tl(e),A.info("Graph after layout:",JSON.stringify(si(e)));let g=0,{subGraphTitleTotalMargin:y}=$n(s);return await Promise.all(W6(e).map(async function(m){var v;const x=e.node(m);if(A.info("Position XBX => "+m+": ("+x.x,","+x.y,") width: ",x.width," height: ",x.height),x!=null&&x.clusterNode)x.y+=y,A.info("A tainted cluster node XBX1",m,x.id,x.width,x.height,x.x,x.y,e.parent(m)),oe.get(x.id).node=x,gc(x);else if(e.children(m).length>0){A.info("A pure cluster node XBX1",m,x.id,x.x,x.y,x.width,x.height,e.parent(m)),x.height+=y,e.node(x.parentId);const T=(x==null?void 0:x.padding)/2||0,I=((v=x==null?void 0:x.labelBBox)==null?void 0:v.height)||0,B=I-T||0;A.debug("OffsetY",B,"labelHeight",I,"halfPadding",T),await Ih(h,x),oe.get(x.id).node=x}else{const T=e.node(x.parentId);x.y+=y/2,A.info("A regular node XBX1 - using the padding",x.id,"parent",x.parentId,x.width,x.height,x.x,x.y,"offsetY",x.offsetY,"parent",T,T==null?void 0:T.offsetY,x),gc(x)}})),e.edges().forEach(function(m){const x=e.edge(m);A.info("Edge "+m.v+" -> "+m.w+": "+JSON.stringify(x),x),x.points.forEach(B=>B.y+=y/2);const v=e.node(m.v);var T=e.node(m.w);const I=Sg(u,x,oe,r,v,T,a);_g(x,I)}),e.nodes().forEach(function(m){const x=e.node(m);A.info(m,x.type,x.diff),x.isGroup&&(g=x.diff)}),A.warn("Returning from recursive render XAX",o,g),{elem:o,diff:g}},"recursiveRender"),q6=l(async(t,e)=>{var s,n,o,h,u,d;const r=new $s({multigraph:!0,compound:!0}).setGraph({rankdir:t.direction,nodesep:((s=t.config)==null?void 0:s.nodeSpacing)||((o=(n=t.config)==null?void 0:n.flowchart)==null?void 0:o.nodeSpacing)||t.nodeSpacing,ranksep:((h=t.config)==null?void 0:h.rankSpacing)||((d=(u=t.config)==null?void 0:u.flowchart)==null?void 0:d.rankSpacing)||t.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}}),a=e.select("g");wg(a,t.markers,t.type,t.diagramId),H5(),j5(),S5(),M6(),t.nodes.forEach(f=>{r.setNode(f.id,{...f}),f.parentId&&r.setParent(f.id,f.parentId)}),A.debug("Edges:",t.edges),t.edges.forEach(f=>{if(f.start===f.end){const p=f.start,g=p+"---"+p+"---1",y=p+"---"+p+"---2",m=r.node(p);r.setNode(g,{domId:g,id:g,parentId:m.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),r.setParent(g,m.parentId),r.setNode(y,{domId:y,id:y,parentId:m.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),r.setParent(y,m.parentId);const x=structuredClone(f),v=structuredClone(f),T=structuredClone(f);x.label="",x.arrowTypeEnd="none",x.id=p+"-cyclic-special-1",v.arrowTypeEnd="none",v.id=p+"-cyclic-special-mid",T.label="",m.isGroup&&(x.fromCluster=p,T.toCluster=p),T.id=p+"-cyclic-special-2",r.setEdge(p,g,x,p+"-cyclic-special-0"),r.setEdge(g,y,v,p+"-cyclic-special-1"),r.setEdge(y,p,T,p+"-cyc<lic-special-2")}else r.setEdge(f.start,f.end,{...f},f.id)}),A.warn("Graph at first:",JSON.stringify(si(r))),z6(r),A.warn("Graph after XAX:",JSON.stringify(si(r)));const i=H();await b2(a,r,t.type,t.diagramId,void 0,i)},"render");const Y6=Object.freeze(Object.defineProperty({__proto__:null,render:q6},Symbol.toStringTag,{value:"Module"}));var pl=l((t,e)=>{const r=t.append("rect");if(r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),e.name&&r.attr("name",e.name),e.rx&&r.attr("rx",e.rx),e.ry&&r.attr("ry",e.ry),e.attrs!==void 0)for(const a in e.attrs)r.attr(a,e.attrs[a]);return e.class&&r.attr("class",e.class),r},"drawRect"),k2=l((t,e)=>{const r={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};pl(t,r).lower()},"drawBackgroundRect"),H6=l((t,e)=>{const r=e.text.replace(Vs," "),a=t.append("text");a.attr("x",e.x),a.attr("y",e.y),a.attr("class","legend"),a.style("text-anchor",e.anchor),e.class&&a.attr("class",e.class);const i=a.append("tspan");return i.attr("x",e.x+e.textMargin*2),i.text(r),a},"drawText"),G6=l((t,e,r,a)=>{const i=t.append("image");i.attr("x",e),i.attr("y",r);const s=Ta(a);i.attr("xlink:href",s)},"drawImage"),U6=l((t,e,r,a)=>{const i=t.append("use");i.attr("x",e),i.attr("y",r);const s=Ta(a);i.attr("xlink:href",`#${s}`)},"drawEmbeddedImage"),_a=l(()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0}),"getNoteRect"),Oh=l(()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0}),"getTextObj"),Lo=function(){var t=l(function(qt,ut,xt,ot){for(xt=xt||{},ot=qt.length;ot--;xt[qt[ot]]=ut);return xt},"o"),e=[1,24],r=[1,25],a=[1,26],i=[1,27],s=[1,28],n=[1,63],o=[1,64],h=[1,65],u=[1,66],d=[1,67],f=[1,68],p=[1,69],g=[1,29],y=[1,30],m=[1,31],x=[1,32],v=[1,33],T=[1,34],I=[1,35],B=[1,36],_=[1,37],w=[1,38],D=[1,39],S=[1,40],b=[1,41],C=[1,42],k=[1,43],E=[1,44],P=[1,45],O=[1,46],V=[1,47],F=[1,48],M=[1,50],R=[1,51],L=[1,52],q=[1,53],N=[1,54],j=[1,55],it=[1,56],tt=[1,57],pt=[1,58],K=[1,59],nt=[1,60],ht=[14,42],st=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],rt=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Z=[1,82],at=[1,83],Q=[1,84],lt=[1,85],z=[12,14,42],Et=[12,14,33,42],X=[12,14,33,42,76,77,79,80],vt=[12,33],Ct=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],Yt={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:l(function(ut,xt,ot,ct,gt,G,Pt){var $=G.length-1;switch(gt){case 3:ct.setDirection("TB");break;case 4:ct.setDirection("BT");break;case 5:ct.setDirection("RL");break;case 6:ct.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:ct.setC4Type(G[$-3]);break;case 19:ct.setTitle(G[$].substring(6)),this.$=G[$].substring(6);break;case 20:ct.setAccDescription(G[$].substring(15)),this.$=G[$].substring(15);break;case 21:this.$=G[$].trim(),ct.setTitle(this.$);break;case 22:case 23:this.$=G[$].trim(),ct.setAccDescription(this.$);break;case 28:G[$].splice(2,0,"ENTERPRISE"),ct.addPersonOrSystemBoundary(...G[$]),this.$=G[$];break;case 29:G[$].splice(2,0,"SYSTEM"),ct.addPersonOrSystemBoundary(...G[$]),this.$=G[$];break;case 30:ct.addPersonOrSystemBoundary(...G[$]),this.$=G[$];break;case 31:G[$].splice(2,0,"CONTAINER"),ct.addContainerBoundary(...G[$]),this.$=G[$];break;case 32:ct.addDeploymentNode("node",...G[$]),this.$=G[$];break;case 33:ct.addDeploymentNode("nodeL",...G[$]),this.$=G[$];break;case 34:ct.addDeploymentNode("nodeR",...G[$]),this.$=G[$];break;case 35:ct.popBoundaryParseStack();break;case 39:ct.addPersonOrSystem("person",...G[$]),this.$=G[$];break;case 40:ct.addPersonOrSystem("external_person",...G[$]),this.$=G[$];break;case 41:ct.addPersonOrSystem("system",...G[$]),this.$=G[$];break;case 42:ct.addPersonOrSystem("system_db",...G[$]),this.$=G[$];break;case 43:ct.addPersonOrSystem("system_queue",...G[$]),this.$=G[$];break;case 44:ct.addPersonOrSystem("external_system",...G[$]),this.$=G[$];break;case 45:ct.addPersonOrSystem("external_system_db",...G[$]),this.$=G[$];break;case 46:ct.addPersonOrSystem("external_system_queue",...G[$]),this.$=G[$];break;case 47:ct.addContainer("container",...G[$]),this.$=G[$];break;case 48:ct.addContainer("container_db",...G[$]),this.$=G[$];break;case 49:ct.addContainer("container_queue",...G[$]),this.$=G[$];break;case 50:ct.addContainer("external_container",...G[$]),this.$=G[$];break;case 51:ct.addContainer("external_container_db",...G[$]),this.$=G[$];break;case 52:ct.addContainer("external_container_queue",...G[$]),this.$=G[$];break;case 53:ct.addComponent("component",...G[$]),this.$=G[$];break;case 54:ct.addComponent("component_db",...G[$]),this.$=G[$];break;case 55:ct.addComponent("component_queue",...G[$]),this.$=G[$];break;case 56:ct.addComponent("external_component",...G[$]),this.$=G[$];break;case 57:ct.addComponent("external_component_db",...G[$]),this.$=G[$];break;case 58:ct.addComponent("external_component_queue",...G[$]),this.$=G[$];break;case 60:ct.addRel("rel",...G[$]),this.$=G[$];break;case 61:ct.addRel("birel",...G[$]),this.$=G[$];break;case 62:ct.addRel("rel_u",...G[$]),this.$=G[$];break;case 63:ct.addRel("rel_d",...G[$]),this.$=G[$];break;case 64:ct.addRel("rel_l",...G[$]),this.$=G[$];break;case 65:ct.addRel("rel_r",...G[$]),this.$=G[$];break;case 66:ct.addRel("rel_b",...G[$]),this.$=G[$];break;case 67:G[$].splice(0,1),ct.addRel("rel",...G[$]),this.$=G[$];break;case 68:ct.updateElStyle("update_el_style",...G[$]),this.$=G[$];break;case 69:ct.updateRelStyle("update_rel_style",...G[$]),this.$=G[$];break;case 70:ct.updateLayoutConfig("update_layout_config",...G[$]),this.$=G[$];break;case 71:this.$=[G[$]];break;case 72:G[$].unshift(G[$-1]),this.$=G[$];break;case 73:case 75:this.$=G[$].trim();break;case 74:let Qt={};Qt[G[$-1].trim()]=G[$].trim(),this.$=Qt;break;case 76:this.$="";break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:r,24:a,26:i,28:s,29:49,30:61,32:62,34:n,36:o,37:h,38:u,39:d,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt},{13:70,19:20,20:21,21:22,22:e,23:r,24:a,26:i,28:s,29:49,30:61,32:62,34:n,36:o,37:h,38:u,39:d,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt},{13:71,19:20,20:21,21:22,22:e,23:r,24:a,26:i,28:s,29:49,30:61,32:62,34:n,36:o,37:h,38:u,39:d,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt},{13:72,19:20,20:21,21:22,22:e,23:r,24:a,26:i,28:s,29:49,30:61,32:62,34:n,36:o,37:h,38:u,39:d,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt},{13:73,19:20,20:21,21:22,22:e,23:r,24:a,26:i,28:s,29:49,30:61,32:62,34:n,36:o,37:h,38:u,39:d,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt},{14:[1,74]},t(ht,[2,13],{43:23,29:49,30:61,32:62,20:75,34:n,36:o,37:h,38:u,39:d,40:f,41:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt}),t(ht,[2,14]),t(st,[2,16],{12:[1,76]}),t(ht,[2,36],{12:[1,77]}),t(rt,[2,19]),t(rt,[2,20]),{25:[1,78]},{27:[1,79]},t(rt,[2,23]),{35:80,75:81,76:Z,77:at,79:Q,80:lt},{35:86,75:81,76:Z,77:at,79:Q,80:lt},{35:87,75:81,76:Z,77:at,79:Q,80:lt},{35:88,75:81,76:Z,77:at,79:Q,80:lt},{35:89,75:81,76:Z,77:at,79:Q,80:lt},{35:90,75:81,76:Z,77:at,79:Q,80:lt},{35:91,75:81,76:Z,77:at,79:Q,80:lt},{35:92,75:81,76:Z,77:at,79:Q,80:lt},{35:93,75:81,76:Z,77:at,79:Q,80:lt},{35:94,75:81,76:Z,77:at,79:Q,80:lt},{35:95,75:81,76:Z,77:at,79:Q,80:lt},{35:96,75:81,76:Z,77:at,79:Q,80:lt},{35:97,75:81,76:Z,77:at,79:Q,80:lt},{35:98,75:81,76:Z,77:at,79:Q,80:lt},{35:99,75:81,76:Z,77:at,79:Q,80:lt},{35:100,75:81,76:Z,77:at,79:Q,80:lt},{35:101,75:81,76:Z,77:at,79:Q,80:lt},{35:102,75:81,76:Z,77:at,79:Q,80:lt},{35:103,75:81,76:Z,77:at,79:Q,80:lt},{35:104,75:81,76:Z,77:at,79:Q,80:lt},t(z,[2,59]),{35:105,75:81,76:Z,77:at,79:Q,80:lt},{35:106,75:81,76:Z,77:at,79:Q,80:lt},{35:107,75:81,76:Z,77:at,79:Q,80:lt},{35:108,75:81,76:Z,77:at,79:Q,80:lt},{35:109,75:81,76:Z,77:at,79:Q,80:lt},{35:110,75:81,76:Z,77:at,79:Q,80:lt},{35:111,75:81,76:Z,77:at,79:Q,80:lt},{35:112,75:81,76:Z,77:at,79:Q,80:lt},{35:113,75:81,76:Z,77:at,79:Q,80:lt},{35:114,75:81,76:Z,77:at,79:Q,80:lt},{35:115,75:81,76:Z,77:at,79:Q,80:lt},{20:116,29:49,30:61,32:62,34:n,36:o,37:h,38:u,39:d,40:f,41:p,43:23,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt},{12:[1,118],33:[1,117]},{35:119,75:81,76:Z,77:at,79:Q,80:lt},{35:120,75:81,76:Z,77:at,79:Q,80:lt},{35:121,75:81,76:Z,77:at,79:Q,80:lt},{35:122,75:81,76:Z,77:at,79:Q,80:lt},{35:123,75:81,76:Z,77:at,79:Q,80:lt},{35:124,75:81,76:Z,77:at,79:Q,80:lt},{35:125,75:81,76:Z,77:at,79:Q,80:lt},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(ht,[2,15]),t(st,[2,17],{21:22,19:130,22:e,23:r,24:a,26:i,28:s}),t(ht,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:r,24:a,26:i,28:s,34:n,36:o,37:h,38:u,39:d,40:f,41:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I,51:B,52:_,53:w,54:D,55:S,56:b,57:C,58:k,59:E,60:P,61:O,62:V,63:F,64:M,65:R,66:L,67:q,68:N,69:j,70:it,71:tt,72:pt,73:K,74:nt}),t(rt,[2,21]),t(rt,[2,22]),t(z,[2,39]),t(Et,[2,71],{75:81,35:132,76:Z,77:at,79:Q,80:lt}),t(X,[2,73]),{78:[1,133]},t(X,[2,75]),t(X,[2,76]),t(z,[2,40]),t(z,[2,41]),t(z,[2,42]),t(z,[2,43]),t(z,[2,44]),t(z,[2,45]),t(z,[2,46]),t(z,[2,47]),t(z,[2,48]),t(z,[2,49]),t(z,[2,50]),t(z,[2,51]),t(z,[2,52]),t(z,[2,53]),t(z,[2,54]),t(z,[2,55]),t(z,[2,56]),t(z,[2,57]),t(z,[2,58]),t(z,[2,60]),t(z,[2,61]),t(z,[2,62]),t(z,[2,63]),t(z,[2,64]),t(z,[2,65]),t(z,[2,66]),t(z,[2,67]),t(z,[2,68]),t(z,[2,69]),t(z,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(vt,[2,28]),t(vt,[2,29]),t(vt,[2,30]),t(vt,[2,31]),t(vt,[2,32]),t(vt,[2,33]),t(vt,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(st,[2,18]),t(ht,[2,38]),t(Et,[2,72]),t(X,[2,74]),t(z,[2,24]),t(z,[2,35]),t(Ct,[2,25]),t(Ct,[2,26],{12:[1,138]}),t(Ct,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:l(function(ut,xt){if(xt.recoverable)this.trace(ut);else{var ot=new Error(ut);throw ot.hash=xt,ot}},"parseError"),parse:l(function(ut){var xt=this,ot=[0],ct=[],gt=[null],G=[],Pt=this.table,$="",Qt=0,U=0,wt=2,Bt=1,St=G.slice.call(arguments,1),Gt=Object.create(this.lexer),dt={yy:{}};for(var ce in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ce)&&(dt.yy[ce]=this.yy[ce]);Gt.setInput(ut,dt.yy),dt.yy.lexer=Gt,dt.yy.parser=this,typeof Gt.yylloc>"u"&&(Gt.yylloc={});var bt=Gt.yylloc;G.push(bt);var _r=Gt.options&&Gt.options.ranges;typeof dt.yy.parseError=="function"?this.parseError=dt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function qr(Nt){ot.length=ot.length-2*Nt,gt.length=gt.length-Nt,G.length=G.length-Nt}l(qr,"popStack");function ui(){var Nt;return Nt=ct.pop()||Gt.lex()||Bt,typeof Nt!="number"&&(Nt instanceof Array&&(ct=Nt,Nt=ct.pop()),Nt=xt.symbols_[Nt]||Nt),Nt}l(ui,"lex");for(var Se,nr,Kt,se,le={},te,he,be,Xt;;){if(nr=ot[ot.length-1],this.defaultActions[nr]?Kt=this.defaultActions[nr]:((Se===null||typeof Se>"u")&&(Se=ui()),Kt=Pt[nr]&&Pt[nr][Se]),typeof Kt>"u"||!Kt.length||!Kt[0]){var Ht="";Xt=[];for(te in Pt[nr])this.terminals_[te]&&te>wt&&Xt.push("'"+this.terminals_[te]+"'");Gt.showPosition?Ht="Parse error on line "+(Qt+1)+`:
`+Gt.showPosition()+`
Expecting `+Xt.join(", ")+", got '"+(this.terminals_[Se]||Se)+"'":Ht="Parse error on line "+(Qt+1)+": Unexpected "+(Se==Bt?"end of input":"'"+(this.terminals_[Se]||Se)+"'"),this.parseError(Ht,{text:Gt.match,token:this.terminals_[Se]||Se,line:Gt.yylineno,loc:bt,expected:Xt})}if(Kt[0]instanceof Array&&Kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+nr+", token: "+Se);switch(Kt[0]){case 1:ot.push(Se),gt.push(Gt.yytext),G.push(Gt.yylloc),ot.push(Kt[1]),Se=null,U=Gt.yyleng,$=Gt.yytext,Qt=Gt.yylineno,bt=Gt.yylloc;break;case 2:if(he=this.productions_[Kt[1]][1],le.$=gt[gt.length-he],le._$={first_line:G[G.length-(he||1)].first_line,last_line:G[G.length-1].last_line,first_column:G[G.length-(he||1)].first_column,last_column:G[G.length-1].last_column},_r&&(le._$.range=[G[G.length-(he||1)].range[0],G[G.length-1].range[1]]),se=this.performAction.apply(le,[$,U,Qt,dt.yy,Kt[1],gt,G].concat(St)),typeof se<"u")return se;he&&(ot=ot.slice(0,-1*he*2),gt=gt.slice(0,-1*he),G=G.slice(0,-1*he)),ot.push(this.productions_[Kt[1]][0]),gt.push(le.$),G.push(le._$),be=Pt[ot[ot.length-2]][ot[ot.length-1]],ot.push(be);break;case 3:return!0}}return!0},"parse")},Ut=function(){var qt={EOF:1,parseError:l(function(xt,ot){if(this.yy.parser)this.yy.parser.parseError(xt,ot);else throw new Error(xt)},"parseError"),setInput:l(function(ut,xt){return this.yy=xt||this.yy||{},this._input=ut,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var ut=this._input[0];this.yytext+=ut,this.yyleng++,this.offset++,this.match+=ut,this.matched+=ut;var xt=ut.match(/(?:\r\n?|\n).*/g);return xt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ut},"input"),unput:l(function(ut){var xt=ut.length,ot=ut.split(/(?:\r\n?|\n)/g);this._input=ut+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-xt),this.offset-=xt;var ct=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ot.length-1&&(this.yylineno-=ot.length-1);var gt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ot?(ot.length===ct.length?this.yylloc.first_column:0)+ct[ct.length-ot.length].length-ot[0].length:this.yylloc.first_column-xt},this.options.ranges&&(this.yylloc.range=[gt[0],gt[0]+this.yyleng-xt]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(ut){this.unput(this.match.slice(ut))},"less"),pastInput:l(function(){var ut=this.matched.substr(0,this.matched.length-this.match.length);return(ut.length>20?"...":"")+ut.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var ut=this.match;return ut.length<20&&(ut+=this._input.substr(0,20-ut.length)),(ut.substr(0,20)+(ut.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var ut=this.pastInput(),xt=new Array(ut.length+1).join("-");return ut+this.upcomingInput()+`
`+xt+"^"},"showPosition"),test_match:l(function(ut,xt){var ot,ct,gt;if(this.options.backtrack_lexer&&(gt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(gt.yylloc.range=this.yylloc.range.slice(0))),ct=ut[0].match(/(?:\r\n?|\n).*/g),ct&&(this.yylineno+=ct.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ct?ct[ct.length-1].length-ct[ct.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ut[0].length},this.yytext+=ut[0],this.match+=ut[0],this.matches=ut,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ut[0].length),this.matched+=ut[0],ot=this.performAction.call(this,this.yy,this,xt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ot)return ot;if(this._backtrack){for(var G in gt)this[G]=gt[G];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ut,xt,ot,ct;this._more||(this.yytext="",this.match="");for(var gt=this._currentRules(),G=0;G<gt.length;G++)if(ot=this._input.match(this.rules[gt[G]]),ot&&(!xt||ot[0].length>xt[0].length)){if(xt=ot,ct=G,this.options.backtrack_lexer){if(ut=this.test_match(ot,gt[G]),ut!==!1)return ut;if(this._backtrack){xt=!1;continue}else return!1}else if(!this.options.flex)break}return xt?(ut=this.test_match(xt,gt[ct]),ut!==!1?ut:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var xt=this.next();return xt||this.lex()},"lex"),begin:l(function(xt){this.conditionStack.push(xt)},"begin"),popState:l(function(){var xt=this.conditionStack.length-1;return xt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(xt){return xt=this.conditionStack.length-1-Math.abs(xt||0),xt>=0?this.conditionStack[xt]:"INITIAL"},"topState"),pushState:l(function(xt){this.begin(xt)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:l(function(xt,ot,ct,gt){switch(ct){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:break;case 14:c;break;case 15:return 12;case 16:break;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:return this.begin("node"),39;case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:return this.begin("rel_u"),66;case 53:return this.begin("rel_u"),66;case 54:return this.begin("rel_d"),67;case 55:return this.begin("rel_d"),67;case 56:return this.begin("rel_l"),68;case 57:return this.begin("rel_l"),68;case 58:return this.begin("rel_r"),69;case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:this.popState(),this.popState();break;case 69:return 80;case 70:break;case 71:return 80;case 72:this.begin("string");break;case 73:this.popState();break;case 74:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 79:this.popState(),this.popState();break;case 80:return"STR";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};return qt}();Yt.lexer=Ut;function ae(){this.yy={}}return l(ae,"Parser"),ae.prototype=Yt,Yt.Parser=ae,new ae}();Lo.parser=Lo;var j6=Lo,Qr=[],zi=[""],ur="global",jr="",ci=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],mn=[],Mh="",$h=!1,Bo=4,Do=2,v2,X6=l(function(){return v2},"getC4Type"),K6=l(function(t){v2=me(t,H())},"setC4Type"),Q6=l(function(t,e,r,a,i,s,n,o,h){if(t==null||e===void 0||e===null||r===void 0||r===null||a===void 0||a===null)return;let u={};const d=mn.find(f=>f.from===e&&f.to===r);if(d?u=d:mn.push(u),u.type=t,u.from=e,u.to=r,u.label={text:a},i==null)u.techn={text:""};else if(typeof i=="object"){let[f,p]=Object.entries(i)[0];u[f]={text:p}}else u.techn={text:i};if(s==null)u.descr={text:""};else if(typeof s=="object"){let[f,p]=Object.entries(s)[0];u[f]={text:p}}else u.descr={text:s};if(typeof n=="object"){let[f,p]=Object.entries(n)[0];u[f]=p}else u.sprite=n;if(typeof o=="object"){let[f,p]=Object.entries(o)[0];u[f]=p}else u.tags=o;if(typeof h=="object"){let[f,p]=Object.entries(h)[0];u[f]=p}else u.link=h;u.wrap=Qi()},"addRel"),Z6=l(function(t,e,r,a,i,s,n){if(e===null||r===null)return;let o={};const h=Qr.find(u=>u.alias===e);if(h&&e===h.alias?o=h:(o.alias=e,Qr.push(o)),r==null?o.label={text:""}:o.label={text:r},a==null)o.descr={text:""};else if(typeof a=="object"){let[u,d]=Object.entries(a)[0];o[u]={text:d}}else o.descr={text:a};if(typeof i=="object"){let[u,d]=Object.entries(i)[0];o[u]=d}else o.sprite=i;if(typeof s=="object"){let[u,d]=Object.entries(s)[0];o[u]=d}else o.tags=s;if(typeof n=="object"){let[u,d]=Object.entries(n)[0];o[u]=d}else o.link=n;o.typeC4Shape={text:t},o.parentBoundary=ur,o.wrap=Qi()},"addPersonOrSystem"),J6=l(function(t,e,r,a,i,s,n,o){if(e===null||r===null)return;let h={};const u=Qr.find(d=>d.alias===e);if(u&&e===u.alias?h=u:(h.alias=e,Qr.push(h)),r==null?h.label={text:""}:h.label={text:r},a==null)h.techn={text:""};else if(typeof a=="object"){let[d,f]=Object.entries(a)[0];h[d]={text:f}}else h.techn={text:a};if(i==null)h.descr={text:""};else if(typeof i=="object"){let[d,f]=Object.entries(i)[0];h[d]={text:f}}else h.descr={text:i};if(typeof s=="object"){let[d,f]=Object.entries(s)[0];h[d]=f}else h.sprite=s;if(typeof n=="object"){let[d,f]=Object.entries(n)[0];h[d]=f}else h.tags=n;if(typeof o=="object"){let[d,f]=Object.entries(o)[0];h[d]=f}else h.link=o;h.wrap=Qi(),h.typeC4Shape={text:t},h.parentBoundary=ur},"addContainer"),tT=l(function(t,e,r,a,i,s,n,o){if(e===null||r===null)return;let h={};const u=Qr.find(d=>d.alias===e);if(u&&e===u.alias?h=u:(h.alias=e,Qr.push(h)),r==null?h.label={text:""}:h.label={text:r},a==null)h.techn={text:""};else if(typeof a=="object"){let[d,f]=Object.entries(a)[0];h[d]={text:f}}else h.techn={text:a};if(i==null)h.descr={text:""};else if(typeof i=="object"){let[d,f]=Object.entries(i)[0];h[d]={text:f}}else h.descr={text:i};if(typeof s=="object"){let[d,f]=Object.entries(s)[0];h[d]=f}else h.sprite=s;if(typeof n=="object"){let[d,f]=Object.entries(n)[0];h[d]=f}else h.tags=n;if(typeof o=="object"){let[d,f]=Object.entries(o)[0];h[d]=f}else h.link=o;h.wrap=Qi(),h.typeC4Shape={text:t},h.parentBoundary=ur},"addComponent"),eT=l(function(t,e,r,a,i){if(t===null||e===null)return;let s={};const n=ci.find(o=>o.alias===t);if(n&&t===n.alias?s=n:(s.alias=t,ci.push(s)),e==null?s.label={text:""}:s.label={text:e},r==null)s.type={text:"system"};else if(typeof r=="object"){let[o,h]=Object.entries(r)[0];s[o]={text:h}}else s.type={text:r};if(typeof a=="object"){let[o,h]=Object.entries(a)[0];s[o]=h}else s.tags=a;if(typeof i=="object"){let[o,h]=Object.entries(i)[0];s[o]=h}else s.link=i;s.parentBoundary=ur,s.wrap=Qi(),jr=ur,ur=t,zi.push(jr)},"addPersonOrSystemBoundary"),rT=l(function(t,e,r,a,i){if(t===null||e===null)return;let s={};const n=ci.find(o=>o.alias===t);if(n&&t===n.alias?s=n:(s.alias=t,ci.push(s)),e==null?s.label={text:""}:s.label={text:e},r==null)s.type={text:"container"};else if(typeof r=="object"){let[o,h]=Object.entries(r)[0];s[o]={text:h}}else s.type={text:r};if(typeof a=="object"){let[o,h]=Object.entries(a)[0];s[o]=h}else s.tags=a;if(typeof i=="object"){let[o,h]=Object.entries(i)[0];s[o]=h}else s.link=i;s.parentBoundary=ur,s.wrap=Qi(),jr=ur,ur=t,zi.push(jr)},"addContainerBoundary"),iT=l(function(t,e,r,a,i,s,n,o){if(e===null||r===null)return;let h={};const u=ci.find(d=>d.alias===e);if(u&&e===u.alias?h=u:(h.alias=e,ci.push(h)),r==null?h.label={text:""}:h.label={text:r},a==null)h.type={text:"node"};else if(typeof a=="object"){let[d,f]=Object.entries(a)[0];h[d]={text:f}}else h.type={text:a};if(i==null)h.descr={text:""};else if(typeof i=="object"){let[d,f]=Object.entries(i)[0];h[d]={text:f}}else h.descr={text:i};if(typeof n=="object"){let[d,f]=Object.entries(n)[0];h[d]=f}else h.tags=n;if(typeof o=="object"){let[d,f]=Object.entries(o)[0];h[d]=f}else h.link=o;h.nodeType=t,h.parentBoundary=ur,h.wrap=Qi(),jr=ur,ur=e,zi.push(jr)},"addDeploymentNode"),aT=l(function(){ur=jr,zi.pop(),jr=zi.pop(),zi.push(jr)},"popBoundaryParseStack"),sT=l(function(t,e,r,a,i,s,n,o,h,u,d){let f=Qr.find(p=>p.alias===e);if(!(f===void 0&&(f=ci.find(p=>p.alias===e),f===void 0))){if(r!=null)if(typeof r=="object"){let[p,g]=Object.entries(r)[0];f[p]=g}else f.bgColor=r;if(a!=null)if(typeof a=="object"){let[p,g]=Object.entries(a)[0];f[p]=g}else f.fontColor=a;if(i!=null)if(typeof i=="object"){let[p,g]=Object.entries(i)[0];f[p]=g}else f.borderColor=i;if(s!=null)if(typeof s=="object"){let[p,g]=Object.entries(s)[0];f[p]=g}else f.shadowing=s;if(n!=null)if(typeof n=="object"){let[p,g]=Object.entries(n)[0];f[p]=g}else f.shape=n;if(o!=null)if(typeof o=="object"){let[p,g]=Object.entries(o)[0];f[p]=g}else f.sprite=o;if(h!=null)if(typeof h=="object"){let[p,g]=Object.entries(h)[0];f[p]=g}else f.techn=h;if(u!=null)if(typeof u=="object"){let[p,g]=Object.entries(u)[0];f[p]=g}else f.legendText=u;if(d!=null)if(typeof d=="object"){let[p,g]=Object.entries(d)[0];f[p]=g}else f.legendSprite=d}},"updateElStyle"),nT=l(function(t,e,r,a,i,s,n){const o=mn.find(h=>h.from===e&&h.to===r);if(o!==void 0){if(a!=null)if(typeof a=="object"){let[h,u]=Object.entries(a)[0];o[h]=u}else o.textColor=a;if(i!=null)if(typeof i=="object"){let[h,u]=Object.entries(i)[0];o[h]=u}else o.lineColor=i;if(s!=null)if(typeof s=="object"){let[h,u]=Object.entries(s)[0];o[h]=parseInt(u)}else o.offsetX=parseInt(s);if(n!=null)if(typeof n=="object"){let[h,u]=Object.entries(n)[0];o[h]=parseInt(u)}else o.offsetY=parseInt(n)}},"updateRelStyle"),oT=l(function(t,e,r){let a=Bo,i=Do;if(typeof e=="object"){const s=Object.values(e)[0];a=parseInt(s)}else a=parseInt(e);if(typeof r=="object"){const s=Object.values(r)[0];i=parseInt(s)}else i=parseInt(r);a>=1&&(Bo=a),i>=1&&(Do=i)},"updateLayoutConfig"),lT=l(function(){return Bo},"getC4ShapeInRow"),cT=l(function(){return Do},"getC4BoundaryInRow"),hT=l(function(){return ur},"getCurrentBoundaryParse"),uT=l(function(){return jr},"getParentBoundaryParse"),T2=l(function(t){return t==null?Qr:Qr.filter(e=>e.parentBoundary===t)},"getC4ShapeArray"),dT=l(function(t){return Qr.find(e=>e.alias===t)},"getC4Shape"),pT=l(function(t){return Object.keys(T2(t))},"getC4ShapeKeys"),_2=l(function(t){return t==null?ci:ci.filter(e=>e.parentBoundary===t)},"getBoundaries"),fT=_2,gT=l(function(){return mn},"getRels"),yT=l(function(){return Mh},"getTitle"),mT=l(function(t){$h=t},"setWrap"),Qi=l(function(){return $h},"autoWrap"),xT=l(function(){Qr=[],ci=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],jr="",ur="global",zi=[""],mn=[],zi=[""],Mh="",$h=!1,Bo=4,Do=2},"clear"),bT={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},kT={FILLED:0,OPEN:1},vT={LEFTOF:0,RIGHTOF:1,OVER:2},TT=l(function(t){Mh=me(t,H())},"setTitle"),bc={addPersonOrSystem:Z6,addPersonOrSystemBoundary:eT,addContainer:J6,addContainerBoundary:rT,addComponent:tT,addDeploymentNode:iT,popBoundaryParseStack:aT,addRel:Q6,updateElStyle:sT,updateRelStyle:nT,updateLayoutConfig:oT,autoWrap:Qi,setWrap:mT,getC4ShapeArray:T2,getC4Shape:dT,getC4ShapeKeys:pT,getBoundaries:_2,getBoundarys:fT,getCurrentBoundaryParse:hT,getParentBoundaryParse:uT,getRels:gT,getTitle:yT,getC4Type:X6,getC4ShapeInRow:lT,getC4BoundaryInRow:cT,setAccTitle:He,getAccTitle:Ke,getAccDescription:Ze,setAccDescription:Qe,getConfig:l(()=>H().c4,"getConfig"),clear:xT,LINETYPE:bT,ARROWTYPE:kT,PLACEMENT:vT,setTitle:TT,setC4Type:K6},Vh=l(function(t,e){return pl(t,e)},"drawRect"),C2=l(function(t,e,r,a,i,s){const n=t.append("image");n.attr("width",e),n.attr("height",r),n.attr("x",a),n.attr("y",i);let o=s.startsWith("data:image/png;base64")?s:Ta(s);n.attr("xlink:href",o)},"drawImage"),_T=l((t,e,r)=>{const a=t.append("g");let i=0;for(let s of e){let n=s.textColor?s.textColor:"#444444",o=s.lineColor?s.lineColor:"#444444",h=s.offsetX?parseInt(s.offsetX):0,u=s.offsetY?parseInt(s.offsetY):0,d="";if(i===0){let p=a.append("line");p.attr("x1",s.startPoint.x),p.attr("y1",s.startPoint.y),p.attr("x2",s.endPoint.x),p.attr("y2",s.endPoint.y),p.attr("stroke-width","1"),p.attr("stroke",o),p.style("fill","none"),s.type!=="rel_b"&&p.attr("marker-end","url("+d+"#arrowhead)"),(s.type==="birel"||s.type==="rel_b")&&p.attr("marker-start","url("+d+"#arrowend)"),i=-1}else{let p=a.append("path");p.attr("fill","none").attr("stroke-width","1").attr("stroke",o).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",s.startPoint.x).replaceAll("starty",s.startPoint.y).replaceAll("controlx",s.startPoint.x+(s.endPoint.x-s.startPoint.x)/2-(s.endPoint.x-s.startPoint.x)/4).replaceAll("controly",s.startPoint.y+(s.endPoint.y-s.startPoint.y)/2).replaceAll("stopx",s.endPoint.x).replaceAll("stopy",s.endPoint.y)),s.type!=="rel_b"&&p.attr("marker-end","url("+d+"#arrowhead)"),(s.type==="birel"||s.type==="rel_b")&&p.attr("marker-start","url("+d+"#arrowend)")}let f=r.messageFont();_i(r)(s.label.text,a,Math.min(s.startPoint.x,s.endPoint.x)+Math.abs(s.endPoint.x-s.startPoint.x)/2+h,Math.min(s.startPoint.y,s.endPoint.y)+Math.abs(s.endPoint.y-s.startPoint.y)/2+u,s.label.width,s.label.height,{fill:n},f),s.techn&&s.techn.text!==""&&(f=r.messageFont(),_i(r)("["+s.techn.text+"]",a,Math.min(s.startPoint.x,s.endPoint.x)+Math.abs(s.endPoint.x-s.startPoint.x)/2+h,Math.min(s.startPoint.y,s.endPoint.y)+Math.abs(s.endPoint.y-s.startPoint.y)/2+r.messageFontSize+5+u,Math.max(s.label.width,s.techn.width),s.techn.height,{fill:n,"font-style":"italic"},f))}},"drawRels"),CT=l(function(t,e,r){const a=t.append("g");let i=e.bgColor?e.bgColor:"none",s=e.borderColor?e.borderColor:"#444444",n=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let h={x:e.x,y:e.y,fill:i,stroke:s,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};Vh(a,h);let u=r.boundaryFont();u.fontWeight="bold",u.fontSize=u.fontSize+2,u.fontColor=n,_i(r)(e.label.text,a,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},u),e.type&&e.type.text!==""&&(u=r.boundaryFont(),u.fontColor=n,_i(r)(e.type.text,a,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},u)),e.descr&&e.descr.text!==""&&(u=r.boundaryFont(),u.fontSize=u.fontSize-2,u.fontColor=n,_i(r)(e.descr.text,a,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},u))},"drawBoundary"),ST=l(function(t,e,r){var f;let a=e.bgColor?e.bgColor:r[e.typeC4Shape.text+"_bg_color"],i=e.borderColor?e.borderColor:r[e.typeC4Shape.text+"_border_color"],s=e.fontColor?e.fontColor:"#FFFFFF",n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII=";break}const o=t.append("g");o.attr("class","person-man");const h=_a();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":h.x=e.x,h.y=e.y,h.fill=a,h.width=e.width,h.height=e.height,h.stroke=i,h.rx=2.5,h.ry=2.5,h.attrs={"stroke-width":.5},Vh(o,h);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",a).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",a).attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",i).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2));break}let u=NT(r,e.typeC4Shape.text);switch(o.append("text").attr("fill",s).attr("font-family",u.fontFamily).attr("font-size",u.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":C2(o,48,48,e.x+e.width/2-24,e.y+e.image.Y,n);break}let d=r[e.typeC4Shape.text+"Font"]();return d.fontWeight="bold",d.fontSize=d.fontSize+2,d.fontColor=s,_i(r)(e.label.text,o,e.x,e.y+e.label.Y,e.width,e.height,{fill:s},d),d=r[e.typeC4Shape.text+"Font"](),d.fontColor=s,e.techn&&((f=e.techn)==null?void 0:f.text)!==""?_i(r)(e.techn.text,o,e.x,e.y+e.techn.Y,e.width,e.height,{fill:s,"font-style":"italic"},d):e.type&&e.type.text!==""&&_i(r)(e.type.text,o,e.x,e.y+e.type.Y,e.width,e.height,{fill:s,"font-style":"italic"},d),e.descr&&e.descr.text!==""&&(d=r.personFont(),d.fontColor=s,_i(r)(e.descr.text,o,e.x,e.y+e.descr.Y,e.width,e.height,{fill:s},d)),e.height},"drawC4Shape"),wT=l(function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),ET=l(function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),AT=l(function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),LT=l(function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")},"insertArrowHead"),BT=l(function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")},"insertArrowEnd"),DT=l(function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),RT=l(function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertDynamicNumber"),IT=l(function(t){const r=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);r.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),r.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")},"insertArrowCrossHead"),NT=l((t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),"getC4ShapeFont"),_i=function(){function t(i,s,n,o,h,u,d){const f=s.append("text").attr("x",n+h/2).attr("y",o+u/2+5).style("text-anchor","middle").text(i);a(f,d)}l(t,"byText");function e(i,s,n,o,h,u,d,f){const{fontSize:p,fontFamily:g,fontWeight:y}=f,m=i.split(mt.lineBreakRegex);for(let x=0;x<m.length;x++){const v=x*p-p*(m.length-1)/2,T=s.append("text").attr("x",n+h/2).attr("y",o).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",p).style("font-weight",y).style("font-family",g);T.append("tspan").attr("dy",v).text(m[x]).attr("alignment-baseline","mathematical"),a(T,d)}}l(e,"byTspan");function r(i,s,n,o,h,u,d,f){const p=s.append("switch"),y=p.append("foreignObject").attr("x",n).attr("y",o).attr("width",h).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,p,n,o,h,u,d,f),a(y,d)}l(r,"byFo");function a(i,s){for(const n in s)s.hasOwnProperty(n)&&i.attr(n,s[n])}return l(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}}(),ii={drawRect:Vh,drawBoundary:CT,drawC4Shape:ST,drawRels:_T,drawImage:C2,insertArrowHead:LT,insertArrowEnd:BT,insertArrowFilledHead:DT,insertDynamicNumber:RT,insertArrowCrossHead:IT,insertDatabaseIcon:wT,insertComputerIcon:ET,insertClockIcon:AT},Ro=0,Io=0,S2=4,kc=2;Lo.yy=bc;var Rt={},Ua,w2=(Ua=class{constructor(e){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,vc(e.db.getConfig())}setData(e,r,a,i){this.nextData.startx=this.data.startx=e,this.nextData.stopx=this.data.stopx=r,this.nextData.starty=this.data.starty=a,this.nextData.stopy=this.data.stopy=i}updateVal(e,r,a,i){e[r]===void 0?e[r]=a:e[r]=i(a,e[r])}insert(e){this.nextData.cnt=this.nextData.cnt+1;let r=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+e.margin:this.nextData.stopx+e.margin*2,a=r+e.width,i=this.nextData.starty+e.margin*2,s=i+e.height;(r>=this.data.widthLimit||a>=this.data.widthLimit||this.nextData.cnt>S2)&&(r=this.nextData.startx+e.margin+Rt.nextLinePaddingX,i=this.nextData.stopy+e.margin*2,this.nextData.stopx=a=r+e.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=s=i+e.height,this.nextData.cnt=1),e.x=r,e.y=i,this.updateVal(this.data,"startx",r,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",a,Math.max),this.updateVal(this.data,"stopy",s,Math.max),this.updateVal(this.nextData,"startx",r,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",a,Math.max),this.updateVal(this.nextData,"stopy",s,Math.max)}init(e){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},vc(e.db.getConfig())}bumpLastMargin(e){this.data.stopx+=e,this.data.stopy+=e}},l(Ua,"Bounds"),Ua),vc=l(function(t){Ve(Rt,t),t.fontFamily&&(Rt.personFontFamily=Rt.systemFontFamily=Rt.messageFontFamily=t.fontFamily),t.fontSize&&(Rt.personFontSize=Rt.systemFontSize=Rt.messageFontSize=t.fontSize),t.fontWeight&&(Rt.personFontWeight=Rt.systemFontWeight=Rt.messageFontWeight=t.fontWeight)},"setConf"),js=l((t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]}),"c4ShapeFont"),so=l(t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight}),"boundaryFont"),FT=l(t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),"messageFont");function Vr(t,e,r,a,i){if(!e[t].width)if(r)e[t].text=Yp(e[t].text,i,a),e[t].textLines=e[t].text.split(mt.lineBreakRegex).length,e[t].width=i,e[t].height=Co(e[t].text,a);else{let s=e[t].text.split(mt.lineBreakRegex);e[t].textLines=s.length;let n=0;e[t].height=0,e[t].width=0;for(const o of s)e[t].width=Math.max(zr(o,a),e[t].width),n=Co(o,a),e[t].height=e[t].height+n}}l(Vr,"calcC4ShapeTextWH");var E2=l(function(t,e,r){e.x=r.data.startx,e.y=r.data.starty,e.width=r.data.stopx-r.data.startx,e.height=r.data.stopy-r.data.starty,e.label.y=Rt.c4ShapeMargin-35;let a=e.wrap&&Rt.wrap,i=so(Rt);i.fontSize=i.fontSize+2,i.fontWeight="bold";let s=zr(e.label.text,i);Vr("label",e,a,i,s),ii.drawBoundary(t,e,Rt)},"drawBoundary"),A2=l(function(t,e,r,a){let i=0;for(const s of a){i=0;const n=r[s];let o=js(Rt,n.typeC4Shape.text);switch(o.fontSize=o.fontSize-2,n.typeC4Shape.width=zr(""+n.typeC4Shape.text+"",o),n.typeC4Shape.height=o.fontSize+2,n.typeC4Shape.Y=Rt.c4ShapePadding,i=n.typeC4Shape.Y+n.typeC4Shape.height-4,n.image={width:0,height:0,Y:0},n.typeC4Shape.text){case"person":case"external_person":n.image.width=48,n.image.height=48,n.image.Y=i,i=n.image.Y+n.image.height;break}n.sprite&&(n.image.width=48,n.image.height=48,n.image.Y=i,i=n.image.Y+n.image.height);let h=n.wrap&&Rt.wrap,u=Rt.width-Rt.c4ShapePadding*2,d=js(Rt,n.typeC4Shape.text);if(d.fontSize=d.fontSize+2,d.fontWeight="bold",Vr("label",n,h,d,u),n.label.Y=i+8,i=n.label.Y+n.label.height,n.type&&n.type.text!==""){n.type.text="["+n.type.text+"]";let g=js(Rt,n.typeC4Shape.text);Vr("type",n,h,g,u),n.type.Y=i+5,i=n.type.Y+n.type.height}else if(n.techn&&n.techn.text!==""){n.techn.text="["+n.techn.text+"]";let g=js(Rt,n.techn.text);Vr("techn",n,h,g,u),n.techn.Y=i+5,i=n.techn.Y+n.techn.height}let f=i,p=n.label.width;if(n.descr&&n.descr.text!==""){let g=js(Rt,n.typeC4Shape.text);Vr("descr",n,h,g,u),n.descr.Y=i+20,i=n.descr.Y+n.descr.height,p=Math.max(n.label.width,n.descr.width),f=i-n.descr.textLines*5}p=p+Rt.c4ShapePadding,n.width=Math.max(n.width||Rt.width,p,Rt.width),n.height=Math.max(n.height||Rt.height,f,Rt.height),n.margin=n.margin||Rt.c4ShapeMargin,t.insert(n),ii.drawC4Shape(e,n,Rt)}t.bumpLastMargin(Rt.c4ShapeMargin)},"drawC4ShapeArray"),ja,Fr=(ja=class{constructor(e,r){this.x=e,this.y=r}},l(ja,"Point"),ja),wd=l(function(t,e){let r=t.x,a=t.y,i=e.x,s=e.y,n=r+t.width/2,o=a+t.height/2,h=Math.abs(r-i),u=Math.abs(a-s),d=u/h,f=t.height/t.width,p=null;return a==s&&r<i?p=new Fr(r+t.width,o):a==s&&r>i?p=new Fr(r,o):r==i&&a<s?p=new Fr(n,a+t.height):r==i&&a>s&&(p=new Fr(n,a)),r>i&&a<s?f>=d?p=new Fr(r,o+d*t.width/2):p=new Fr(n-h/u*t.height/2,a+t.height):r<i&&a<s?f>=d?p=new Fr(r+t.width,o+d*t.width/2):p=new Fr(n+h/u*t.height/2,a+t.height):r<i&&a>s?f>=d?p=new Fr(r+t.width,o-d*t.width/2):p=new Fr(n+t.height/2*h/u,a):r>i&&a>s&&(f>=d?p=new Fr(r,o-t.width/2*d):p=new Fr(n-t.height/2*h/u,a)),p},"getIntersectPoint"),PT=l(function(t,e){let r={x:0,y:0};r.x=e.x+e.width/2,r.y=e.y+e.height/2;let a=wd(t,r);r.x=t.x+t.width/2,r.y=t.y+t.height/2;let i=wd(e,r);return{startPoint:a,endPoint:i}},"getIntersectPoints"),OT=l(function(t,e,r,a){let i=0;for(let s of e){i=i+1;let n=s.wrap&&Rt.wrap,o=FT(Rt);a.db.getC4Type()==="C4Dynamic"&&(s.label.text=i+": "+s.label.text);let u=zr(s.label.text,o);Vr("label",s,n,o,u),s.techn&&s.techn.text!==""&&(u=zr(s.techn.text,o),Vr("techn",s,n,o,u)),s.descr&&s.descr.text!==""&&(u=zr(s.descr.text,o),Vr("descr",s,n,o,u));let d=r(s.from),f=r(s.to),p=PT(d,f);s.startPoint=p.startPoint,s.endPoint=p.endPoint}ii.drawRels(t,e,Rt)},"drawRels");function zh(t,e,r,a,i){let s=new w2(i);s.data.widthLimit=r.data.widthLimit/Math.min(kc,a.length);for(let[n,o]of a.entries()){let h=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=h,h=o.image.Y+o.image.height);let u=o.wrap&&Rt.wrap,d=so(Rt);if(d.fontSize=d.fontSize+2,d.fontWeight="bold",Vr("label",o,u,d,s.data.widthLimit),o.label.Y=h+8,h=o.label.Y+o.label.height,o.type&&o.type.text!==""){o.type.text="["+o.type.text+"]";let y=so(Rt);Vr("type",o,u,y,s.data.widthLimit),o.type.Y=h+5,h=o.type.Y+o.type.height}if(o.descr&&o.descr.text!==""){let y=so(Rt);y.fontSize=y.fontSize-2,Vr("descr",o,u,y,s.data.widthLimit),o.descr.Y=h+20,h=o.descr.Y+o.descr.height}if(n==0||n%kc===0){let y=r.data.startx+Rt.diagramMarginX,m=r.data.stopy+Rt.diagramMarginY+h;s.setData(y,y,m,m)}else{let y=s.data.stopx!==s.data.startx?s.data.stopx+Rt.diagramMarginX:s.data.startx,m=s.data.starty;s.setData(y,y,m,m)}s.name=o.alias;let f=i.db.getC4ShapeArray(o.alias),p=i.db.getC4ShapeKeys(o.alias);p.length>0&&A2(s,t,f,p),e=o.alias;let g=i.db.getBoundarys(e);g.length>0&&zh(t,e,s,g,i),o.alias!=="global"&&E2(t,o,s),r.data.stopy=Math.max(s.data.stopy+Rt.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(s.data.stopx+Rt.c4ShapeMargin,r.data.stopx),Ro=Math.max(Ro,r.data.stopx),Io=Math.max(Io,r.data.stopy)}}l(zh,"drawInsideBoundary");var MT=l(function(t,e,r,a){Rt=H().c4;const i=H().securityLevel;let s;i==="sandbox"&&(s=yt("#i"+e));const n=i==="sandbox"?yt(s.nodes()[0].contentDocument.body):yt("body");let o=a.db;a.db.setWrap(Rt.wrap),S2=o.getC4ShapeInRow(),kc=o.getC4BoundaryInRow(),A.debug(`C:${JSON.stringify(Rt,null,2)}`);const h=i==="sandbox"?n.select(`[id="${e}"]`):yt(`[id="${e}"]`);ii.insertComputerIcon(h),ii.insertDatabaseIcon(h),ii.insertClockIcon(h);let u=new w2(a);u.setData(Rt.diagramMarginX,Rt.diagramMarginX,Rt.diagramMarginY,Rt.diagramMarginY),u.data.widthLimit=screen.availWidth,Ro=Rt.diagramMarginX,Io=Rt.diagramMarginY;const d=a.db.getTitle();let f=a.db.getBoundarys("");zh(h,"",u,f,a),ii.insertArrowHead(h),ii.insertArrowEnd(h),ii.insertArrowCrossHead(h),ii.insertArrowFilledHead(h),OT(h,a.db.getRels(),a.db.getC4Shape,a),u.data.stopx=Ro,u.data.stopy=Io;const p=u.data;let y=p.stopy-p.starty+2*Rt.diagramMarginY;const x=p.stopx-p.startx+2*Rt.diagramMarginX;d&&h.append("text").text(d).attr("x",(p.stopx-p.startx)/2-4*Rt.diagramMarginX).attr("y",p.starty+Rt.diagramMarginY),ar(h,y,x,Rt.useMaxWidth);const v=d?60:0;h.attr("viewBox",p.startx-Rt.diagramMarginX+" -"+(Rt.diagramMarginY+v)+" "+x+" "+(y+v)),A.debug("models:",p)},"draw"),Ed={drawPersonOrSystemArray:A2,drawBoundary:E2,setConf:vc,draw:MT},$T=l(t=>`.person {
    stroke: ${t.personBorder};
    fill: ${t.personBkg};
  }
`,"getStyles"),VT=$T,zT={parser:j6,db:bc,renderer:Ed,styles:VT,init:l(({c4:t,wrap:e})=>{Ed.setConf(t),bc.setWrap(e)},"init")};const WT=Object.freeze(Object.defineProperty({__proto__:null,diagram:zT},Symbol.toStringTag,{value:"Module"}));var Wh=l((t,e)=>{let r;return e==="sandbox"&&(r=yt("#i"+t)),(e==="sandbox"?yt(r.nodes()[0].contentDocument.body):yt("body")).select(`[id="${t}"]`)},"getDiagramElement"),qh=l((t,e,r,a)=>{t.attr("class",r);const{width:i,height:s,x:n,y:o}=qT(t,e);ar(t,s,i,a);const h=YT(n,o,i,s,e);t.attr("viewBox",h),A.debug(`viewBox configured: ${h} with padding: ${e}`)},"setupViewPortForSVG"),qT=l((t,e)=>{var a;const r=((a=t.node())==null?void 0:a.getBBox())||{width:0,height:0,x:0,y:0};return{width:r.width+e*2,height:r.height+e*2,x:r.x,y:r.y}},"calculateDimensionsWithPadding"),YT=l((t,e,r,a,i)=>`${t-i} ${e-i} ${r} ${a}`,"createViewBox"),HT="flowchart-",Ad=0,Ds=H(),Hi=new Map,gr=[],xn=new Map,Li=[],Yh=new Map,Hh=new Map,no=0,Tc=!0,Pr,fl,gl=[],yl=l(t=>mt.sanitizeText(t,Ds),"sanitizeText"),ml=l(function(t){for(const e of Hi.values())if(e.id===t)return e.domId;return t},"lookUpDomId"),GT=l(function(t,e,r,a,i,s,n={},o){var d,f;if(!t||t.trim().length===0)return;let h,u=Hi.get(t);if(u===void 0&&(u={id:t,labelType:"text",domId:HT+t+"-"+Ad,styles:[],classes:[]},Hi.set(t,u)),Ad++,e!==void 0?(Ds=H(),h=yl(e.text.trim()),u.labelType=e.type,h.startsWith('"')&&h.endsWith('"')&&(h=h.substring(1,h.length-1)),u.text=h):u.text===void 0&&(u.text=t),r!==void 0&&(u.type=r),a!=null&&a.forEach(function(p){u.styles.push(p)}),i!=null&&i.forEach(function(p){u.classes.push(p)}),s!==void 0&&(u.dir=s),u.props===void 0?u.props=n:n!==void 0&&Object.assign(u.props,n),o!==void 0){let p;o.includes(`
`)?p=o+`
`:p=`{
`+o+`
}`;const g=_h(p,{schema:Th});if(g.shape){if(g.shape!==g.shape.toLowerCase()||g.shape.includes("_"))throw new Error(`No such shape: ${g.shape}. Shape names should be lowercase.`);if(!kg(g.shape))throw new Error(`No such shape: ${g.shape}.`);u.type=g==null?void 0:g.shape}g!=null&&g.label&&(u.text=g==null?void 0:g.label),g!=null&&g.icon&&(u.icon=g==null?void 0:g.icon,!((d=g.label)!=null&&d.trim())&&u.text===t&&(u.text="")),g!=null&&g.form&&(u.form=g==null?void 0:g.form),g!=null&&g.pos&&(u.pos=g==null?void 0:g.pos),g!=null&&g.img&&(u.img=g==null?void 0:g.img,!((f=g.label)!=null&&f.trim())&&u.text===t&&(u.text="")),g!=null&&g.constraint&&(u.constraint=g.constraint),g.w&&(u.assetWidth=Number(g.w)),g.h&&(u.assetHeight=Number(g.h))}},"addVertex"),UT=l(function(t,e,r){const s={start:t,end:e,type:void 0,text:"",labelType:"text"};A.info("abc78 Got edge...",s);const n=r.text;if(n!==void 0&&(s.text=yl(n.text.trim()),s.text.startsWith('"')&&s.text.endsWith('"')&&(s.text=s.text.substring(1,s.text.length-1)),s.labelType=n.type),r!==void 0&&(s.type=r.type,s.stroke=r.stroke,s.length=r.length>10?10:r.length),gr.length<(Ds.maxEdges??500))A.info("Pushing edge..."),gr.push(s);else throw new Error(`Edge limit exceeded. ${gr.length} edges found, but the limit is ${Ds.maxEdges}.

Initialize mermaid with maxEdges set to a higher number to allow more edges.
You cannot set this config via configuration inside the diagram as it is a secure config.
You have to call mermaid.initialize.`)},"addSingleLink"),jT=l(function(t,e,r){A.info("addLink",t,e,r);for(const a of t)for(const i of e)UT(a,i,r)},"addLink"),XT=l(function(t,e){t.forEach(function(r){r==="default"?gr.defaultInterpolate=e:gr[r].interpolate=e})},"updateLinkInterpolate"),KT=l(function(t,e){t.forEach(function(r){var a,i,s,n,o,h;if(typeof r=="number"&&r>=gr.length)throw new Error(`The index ${r} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${gr.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);r==="default"?gr.defaultStyle=e:(gr[r].style=e,(((i=(a=gr[r])==null?void 0:a.style)==null?void 0:i.length)??0)>0&&!((n=(s=gr[r])==null?void 0:s.style)!=null&&n.some(u=>u==null?void 0:u.startsWith("fill")))&&((h=(o=gr[r])==null?void 0:o.style)==null||h.push("fill:none")))})},"updateLink"),QT=l(function(t,e){t.split(",").forEach(function(r){let a=xn.get(r);a===void 0&&(a={id:r,styles:[],textStyles:[]},xn.set(r,a)),e!=null&&e.forEach(function(i){if(/color/.exec(i)){const s=i.replace("fill","bgFill");a.textStyles.push(s)}a.styles.push(i)})})},"addClass"),ZT=l(function(t){Pr=t,/.*</.exec(Pr)&&(Pr="RL"),/.*\^/.exec(Pr)&&(Pr="BT"),/.*>/.exec(Pr)&&(Pr="LR"),/.*v/.exec(Pr)&&(Pr="TB"),Pr==="TD"&&(Pr="TB")},"setDirection"),Gh=l(function(t,e){for(const r of t.split(",")){const a=Hi.get(r);a&&a.classes.push(e);const i=Yh.get(r);i&&i.classes.push(e)}},"setClass"),JT=l(function(t,e){if(e!==void 0){e=yl(e);for(const r of t.split(","))Hh.set(fl==="gen-1"?ml(r):r,e)}},"setTooltip"),t_=l(function(t,e,r){const a=ml(t);if(H().securityLevel!=="loose"||e===void 0)return;let i=[];if(typeof r=="string"){i=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let n=0;n<i.length;n++){let o=i[n].trim();o.startsWith('"')&&o.endsWith('"')&&(o=o.substr(1,o.length-2)),i[n]=o}}i.length===0&&i.push(t);const s=Hi.get(t);s&&(s.haveCallback=!0,gl.push(function(){const n=document.querySelector(`[id="${a}"]`);n!==null&&n.addEventListener("click",function(){re.runFunc(e,...i)},!1)}))},"setClickFun"),e_=l(function(t,e,r){t.split(",").forEach(function(a){const i=Hi.get(a);i!==void 0&&(i.link=re.formatUrl(e,Ds),i.linkTarget=r)}),Gh(t,"clickable")},"setLink"),L2=l(function(t){return Hh.get(t)},"getTooltip"),r_=l(function(t,e,r){t.split(",").forEach(function(a){t_(a,e,r)}),Gh(t,"clickable")},"setClickEvent"),i_=l(function(t){gl.forEach(function(e){e(t)})},"bindFunctions"),B2=l(function(){return Pr.trim()},"getDirection"),D2=l(function(){return Hi},"getVertices"),R2=l(function(){return gr},"getEdges"),a_=l(function(){return xn},"getClasses"),I2=l(function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const i=yt(this);if(i.attr("title")===null)return;const n=this==null?void 0:this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(i.attr("title")).style("left",window.scrollX+n.left+(n.right-n.left)/2+"px").style("top",window.scrollY+n.bottom+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),i.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})},"setupToolTips");gl.push(I2);var s_=l(function(t="gen-1"){Hi=new Map,xn=new Map,gr=[],gl=[I2],Li=[],Yh=new Map,no=0,Hh=new Map,Tc=!0,fl=t,Ds=H(),Ye()},"clear"),n_=l(t=>{fl=t||"gen-2"},"setGen"),o_=l(function(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"},"defaultStyle"),l_=l(function(t,e,r){let a=t.text.trim(),i=r.text;t===r&&/\s/.exec(r.text)&&(a=void 0);function s(u){const d={boolean:{},number:{},string:{}},f=[];let p;return{nodeList:u.filter(function(y){const m=typeof y;return y.stmt&&y.stmt==="dir"?(p=y.value,!1):y.trim()===""?!1:m in d?d[m].hasOwnProperty(y)?!1:d[m][y]=!0:f.includes(y)?!1:f.push(y)}),dir:p}}l(s,"uniq");const{nodeList:n,dir:o}=s(e.flat());if(fl==="gen-1")for(let u=0;u<n.length;u++)n[u]=ml(n[u]);a=a??"subGraph"+no,i=i||"",i=yl(i),no=no+1;const h={id:a,nodes:n,title:i.trim(),classes:[],dir:o,labelType:r.type};return A.info("Adding",h.id,h.nodes,h.dir),h.nodes=M2(h,Li).nodes,Li.push(h),Yh.set(a,h),a},"addSubGraph"),c_=l(function(t){for(const[e,r]of Li.entries())if(r.id===t)return e;return-1},"getPosForId"),Zs=-1,N2=[],F2=l(function(t,e){const r=Li[e].nodes;if(Zs=Zs+1,Zs>2e3)return{result:!1,count:0};if(N2[Zs]=e,Li[e].id===t)return{result:!0,count:0};let a=0,i=1;for(;a<r.length;){const s=c_(r[a]);if(s>=0){const n=F2(t,s);if(n.result)return{result:!0,count:i+n.count};i=i+n.count}a=a+1}return{result:!1,count:i}},"indexNodes2"),h_=l(function(t){return N2[t]},"getDepthFirstPos"),u_=l(function(){Zs=-1,Li.length>0&&F2("none",Li.length-1)},"indexNodes"),P2=l(function(){return Li},"getSubGraphs"),d_=l(()=>Tc?(Tc=!1,!0):!1,"firstGraph"),p_=l(t=>{let e=t.trim(),r="arrow_open";switch(e[0]){case"<":r="arrow_point",e=e.slice(1);break;case"x":r="arrow_cross",e=e.slice(1);break;case"o":r="arrow_circle",e=e.slice(1);break}let a="normal";return e.includes("=")&&(a="thick"),e.includes(".")&&(a="dotted"),{type:r,stroke:a}},"destructStartLink"),f_=l((t,e)=>{const r=e.length;let a=0;for(let i=0;i<r;++i)e[i]===t&&++a;return a},"countChar"),g_=l(t=>{const e=t.trim();let r=e.slice(0,-1),a="arrow_open";switch(e.slice(-1)){case"x":a="arrow_cross",e.startsWith("x")&&(a="double_"+a,r=r.slice(1));break;case">":a="arrow_point",e.startsWith("<")&&(a="double_"+a,r=r.slice(1));break;case"o":a="arrow_circle",e.startsWith("o")&&(a="double_"+a,r=r.slice(1));break}let i="normal",s=r.length-1;r.startsWith("=")&&(i="thick"),r.startsWith("~")&&(i="invisible");const n=f_(".",r);return n&&(i="dotted",s=n),{type:a,stroke:i,length:s}},"destructEndLink"),y_=l((t,e)=>{const r=g_(t);let a;if(e){if(a=p_(e),a.stroke!==r.stroke)return{type:"INVALID",stroke:"INVALID"};if(a.type==="arrow_open")a.type=r.type;else{if(a.type!==r.type)return{type:"INVALID",stroke:"INVALID"};a.type="double_"+a.type}return a.type==="double_arrow"&&(a.type="double_arrow_point"),a.length=r.length,a}return r},"destructLink"),O2=l((t,e)=>{for(const r of t)if(r.nodes.includes(e))return!0;return!1},"exists"),M2=l((t,e)=>{const r=[];return t.nodes.forEach((a,i)=>{O2(e,a)||r.push(t.nodes[i])}),{nodes:r}},"makeUniq"),m_={firstGraph:d_},x_=l(t=>{if(t.img)return"imageSquare";if(t.icon)return t.form==="circle"?"iconCircle":t.form==="square"?"iconSquare":t.form==="rounded"?"iconRounded":"icon";switch(t.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return t.type}},"getTypeFromVertex"),b_=l((t,e)=>t.find(r=>r.id===e),"findNode"),k_=l(t=>{let e="none",r="arrow_point";switch(t){case"arrow_point":case"arrow_circle":case"arrow_cross":r=t;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":e=t.replace("double_",""),r=e;break}return{arrowTypeStart:e,arrowTypeEnd:r}},"destructEdgeType"),v_=l((t,e,r,a,i,s)=>{var u;const n=r.get(t.id),o=a.get(t.id)??!1,h=b_(e,t.id);if(h)h.cssStyles=t.styles,h.cssCompiledStyles=No(t.classes),h.cssClasses=t.classes.join(" ");else{const d={id:t.id,label:t.text,labelStyle:"",parentId:n,padding:((u=i.flowchart)==null?void 0:u.padding)||8,cssStyles:t.styles,cssCompiledStyles:No(["default","node",...t.classes]),cssClasses:"default "+t.classes.join(" "),dir:t.dir,domId:t.domId,look:s,link:t.link,linkTarget:t.linkTarget,tooltip:L2(t.id),icon:t.icon,pos:t.pos,img:t.img,assetWidth:t.assetWidth,assetHeight:t.assetHeight,constraint:t.constraint};o?e.push({...d,isGroup:!0,shape:"rect"}):e.push({...d,isGroup:!1,shape:x_(t)})}},"addNodeFromVertex");function No(t){let e=[];for(const r of t){const a=xn.get(r);a!=null&&a.styles&&(e=[...e,...a.styles??[]].map(i=>i.trim())),a!=null&&a.textStyles&&(e=[...e,...a.textStyles??[]].map(i=>i.trim()))}return e}l(No,"getCompiledStyles");var T_=l(()=>{const t=H(),e=[],r=[],a=P2(),i=new Map,s=new Map;for(let h=a.length-1;h>=0;h--){const u=a[h];u.nodes.length>0&&s.set(u.id,!0);for(const d of u.nodes)i.set(d,u.id)}for(let h=a.length-1;h>=0;h--){const u=a[h];e.push({id:u.id,label:u.title,labelStyle:"",parentId:i.get(u.id),padding:8,cssCompiledStyles:No(u.classes),cssClasses:u.classes.join(" "),shape:"rect",dir:u.dir,isGroup:!0,look:t.look})}D2().forEach(h=>{v_(h,e,i,s,t,t.look||"classic")});const o=R2();return o.forEach((h,u)=>{const{arrowTypeStart:d,arrowTypeEnd:f}=k_(h.type),p=[...o.defaultStyle??[]];h.style&&p.push(...h.style);const g={id:Hp(h.start,h.end,{counter:u,prefix:"L"}),start:h.start,end:h.end,type:h.type??"normal",label:h.text,labelpos:"c",thickness:h.stroke,minlen:h.length,classes:(h==null?void 0:h.stroke)==="invisible"?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:(h==null?void 0:h.stroke)==="invisible"?"none":d,arrowTypeEnd:(h==null?void 0:h.stroke)==="invisible"?"none":f,arrowheadStyle:"fill: #333",labelStyle:p,style:p,pattern:h.stroke,look:t.look};r.push(g)}),{nodes:e,edges:r,other:{},config:t}},"getData"),Vl={defaultConfig:l(()=>j1.flowchart,"defaultConfig"),setAccTitle:He,getAccTitle:Ke,getAccDescription:Ze,getData:T_,setAccDescription:Qe,addVertex:GT,lookUpDomId:ml,addLink:jT,updateLinkInterpolate:XT,updateLink:KT,addClass:QT,setDirection:ZT,setClass:Gh,setTooltip:JT,getTooltip:L2,setClickEvent:r_,setLink:e_,bindFunctions:i_,getDirection:B2,getVertices:D2,getEdges:R2,getClasses:a_,clear:s_,setGen:n_,defaultStyle:o_,addSubGraph:l_,getDepthFirstPos:h_,indexNodes:u_,getSubGraphs:P2,destructLink:y_,lex:m_,exists:O2,makeUniq:M2,setDiagramTitle:dr,getDiagramTitle:Je},__=l(function(t,e){return e.db.getClasses()},"getClasses"),C_=l(async function(t,e,r,a){var g;A.info("REF0:"),A.info("Drawing state diagram (v2)",e);const{securityLevel:i,flowchart:s,layout:n}=H();let o;i==="sandbox"&&(o=yt("#i"+e));const h=i==="sandbox"?o.nodes()[0].contentDocument:document;A.debug("Before getData: ");const u=a.db.getData();A.debug("Data: ",u);const d=Wh(e,i),f=B2();u.type=a.type,u.layoutAlgorithm=Ag(n),u.layoutAlgorithm==="dagre"&&n==="elk"&&A.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),u.direction=f,u.nodeSpacing=(s==null?void 0:s.nodeSpacing)||50,u.rankSpacing=(s==null?void 0:s.rankSpacing)||50,u.markers=["point","circle","cross"],u.diagramId=e,A.debug("REF1:",u),await Nh(u,d);const p=((g=u.config.flowchart)==null?void 0:g.diagramPadding)??8;re.insertTitle(d,"flowchartTitleText",(s==null?void 0:s.titleTopMargin)||0,a.db.getDiagramTitle()),qh(d,p,"flowchart",(s==null?void 0:s.useMaxWidth)||!1);for(const y of u.nodes){const m=yt(`#${e} [id="${y.id}"]`);if(!m||!y.link)continue;const x=h.createElementNS("http://www.w3.org/2000/svg","a");x.setAttributeNS("http://www.w3.org/2000/svg","class",y.cssClasses),x.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),i==="sandbox"?x.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):y.linkTarget&&x.setAttributeNS("http://www.w3.org/2000/svg","target",y.linkTarget);const v=m.insert(function(){return x},":first-child"),T=m.select(".label-container");T&&v.append(function(){return T.node()});const I=m.select(".label");I&&v.append(function(){return I.node()})}},"draw"),S_={getClasses:__,draw:C_},_c=function(){var t=l(function(Ii,Mt,jt,ee){for(jt=jt||{},ee=Ii.length;ee--;jt[Ii[ee]]=Mt);return jt},"o"),e=[1,4],r=[1,3],a=[1,5],i=[1,8,9,10,11,27,34,36,38,44,60,83,84,85,86,87,88,101,104,105,108,110,113,114,115,120,121,122,123],s=[2,2],n=[1,13],o=[1,14],h=[1,15],u=[1,16],d=[1,23],f=[1,25],p=[1,26],g=[1,27],y=[1,49],m=[1,48],x=[1,29],v=[1,30],T=[1,31],I=[1,32],B=[1,33],_=[1,44],w=[1,46],D=[1,42],S=[1,47],b=[1,43],C=[1,50],k=[1,45],E=[1,51],P=[1,52],O=[1,34],V=[1,35],F=[1,36],M=[1,37],R=[1,57],L=[1,8,9,10,11,27,32,34,36,38,44,60,83,84,85,86,87,88,101,104,105,108,110,113,114,115,120,121,122,123],q=[1,61],N=[1,60],j=[1,62],it=[8,9,11,75,77],tt=[1,77],pt=[1,90],K=[1,95],nt=[1,94],ht=[1,91],st=[1,87],rt=[1,93],Z=[1,89],at=[1,96],Q=[1,92],lt=[1,97],z=[1,88],Et=[8,9,10,11,40,75,77],X=[8,9,10,11,40,46,75,77],vt=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,88,101,104,105,108,110,113,114,115],Ct=[8,9,11,44,60,75,77,88,101,104,105,108,110,113,114,115],Yt=[44,60,88,101,104,105,108,110,113,114,115],Ut=[1,123],ae=[1,122],qt=[1,130],ut=[1,144],xt=[1,145],ot=[1,146],ct=[1,147],gt=[1,132],G=[1,134],Pt=[1,138],$=[1,139],Qt=[1,140],U=[1,141],wt=[1,142],Bt=[1,143],St=[1,148],Gt=[1,149],dt=[1,128],ce=[1,129],bt=[1,136],_r=[1,131],qr=[1,135],ui=[1,133],Se=[8,9,10,11,27,32,34,36,38,44,60,83,84,85,86,87,88,101,104,105,108,110,113,114,115,120,121,122,123],nr=[1,151],Kt=[1,153],se=[8,9,11],le=[8,9,10,11,14,44,60,88,104,105,108,110,113,114,115],te=[1,173],he=[1,169],be=[1,170],Xt=[1,174],Ht=[1,171],Nt=[1,172],we=[77,115,118],ie=[8,9,10,11,12,14,27,29,32,44,60,75,83,84,85,86,87,88,89,104,108,110,113,114,115],di=[10,105],Cr=[31,49,51,53,55,57,62,64,66,67,69,71,115,116,117],Fe=[1,242],Br=[1,240],pr=[1,244],Sr=[1,238],Ee=[1,239],pi=[1,241],fi=[1,243],gi=[1,245],wa=[1,263],Xu=[8,9,11,105],ei=[8,9,10,11,60,83,104,105,108,109,110,111],Rl={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,edgeTextToken:78,STR:79,MD_STR:80,textToken:81,keywords:82,STYLE:83,LINKSTYLE:84,CLASSDEF:85,CLASS:86,CLICK:87,DOWN:88,UP:89,textNoTagsToken:90,stylesOpt:91,"idString[vertex]":92,"idString[class]":93,CALLBACKNAME:94,CALLBACKARGS:95,HREF:96,LINK_TARGET:97,"STR[link]":98,"STR[tooltip]":99,alphaNum:100,DEFAULT:101,numList:102,INTERPOLATE:103,NUM:104,COMMA:105,style:106,styleComponent:107,NODE_STRING:108,UNIT:109,BRKT:110,PCT:111,idStringToken:112,MINUS:113,MULT:114,UNICODE_TEXT:115,TEXT:116,TAGSTART:117,EDGE_TEXT:118,alphaNumToken:119,direction_tb:120,direction_bt:121,direction_rl:122,direction_lr:123,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",79:"STR",80:"MD_STR",83:"STYLE",84:"LINKSTYLE",85:"CLASSDEF",86:"CLASS",87:"CLICK",88:"DOWN",89:"UP",92:"idString[vertex]",93:"idString[class]",94:"CALLBACKNAME",95:"CALLBACKARGS",96:"HREF",97:"LINK_TARGET",98:"STR[link]",99:"STR[tooltip]",101:"DEFAULT",103:"INTERPOLATE",104:"NUM",105:"COMMA",108:"NODE_STRING",109:"UNIT",110:"BRKT",111:"PCT",113:"MINUS",114:"MULT",115:"UNICODE_TEXT",116:"TEXT",117:"TAGSTART",118:"EDGE_TEXT",120:"direction_tb",121:"direction_bt",122:"direction_rl",123:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[76,1],[76,2],[76,1],[76,1],[72,1],[73,3],[30,1],[30,2],[30,1],[30,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[82,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[102,1],[102,3],[91,1],[91,3],[106,1],[106,2],[107,1],[107,1],[107,1],[107,1],[107,1],[107,1],[107,1],[107,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[112,1],[81,1],[81,1],[81,1],[81,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[90,1],[78,1],[78,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[119,1],[47,1],[47,2],[100,1],[100,2],[33,1],[33,1],[33,1],[33,1]],performAction:l(function(Mt,jt,ee,kt,ve,W,Gs){var Y=W.length-1;switch(ve){case 2:this.$=[];break;case 3:(!Array.isArray(W[Y])||W[Y].length>0)&&W[Y-1].push(W[Y]),this.$=W[Y-1];break;case 4:case 181:this.$=W[Y];break;case 11:kt.setDirection("TB"),this.$="TB";break;case 12:kt.setDirection(W[Y-1]),this.$=W[Y-1];break;case 27:this.$=W[Y-1].nodes;break;case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 33:this.$=kt.addSubGraph(W[Y-6],W[Y-1],W[Y-4]);break;case 34:this.$=kt.addSubGraph(W[Y-3],W[Y-1],W[Y-3]);break;case 35:this.$=kt.addSubGraph(void 0,W[Y-1],void 0);break;case 37:this.$=W[Y].trim(),kt.setAccTitle(this.$);break;case 38:case 39:this.$=W[Y].trim(),kt.setAccDescription(this.$);break;case 43:this.$=W[Y-1]+W[Y];break;case 44:this.$=W[Y];break;case 45:kt.addVertex(W[Y-1][0],void 0,void 0,void 0,void 0,void 0,void 0,W[Y]),kt.addLink(W[Y-3].stmt,W[Y-1],W[Y-2]),this.$={stmt:W[Y-1],nodes:W[Y-1].concat(W[Y-3].nodes)};break;case 46:kt.addLink(W[Y-2].stmt,W[Y],W[Y-1]),this.$={stmt:W[Y],nodes:W[Y].concat(W[Y-2].nodes)};break;case 47:kt.addLink(W[Y-3].stmt,W[Y-1],W[Y-2]),this.$={stmt:W[Y-1],nodes:W[Y-1].concat(W[Y-3].nodes)};break;case 48:this.$={stmt:W[Y-1],nodes:W[Y-1]};break;case 49:kt.addVertex(W[Y-1][0],void 0,void 0,void 0,void 0,void 0,void 0,W[Y]),this.$={stmt:W[Y-1],nodes:W[Y-1],shapeData:W[Y]};break;case 50:this.$={stmt:W[Y],nodes:W[Y]};break;case 51:this.$=[W[Y]];break;case 52:kt.addVertex(W[Y-5][0],void 0,void 0,void 0,void 0,void 0,void 0,W[Y-4]),this.$=W[Y-5].concat(W[Y]);break;case 53:this.$=W[Y-4].concat(W[Y]);break;case 54:this.$=W[Y];break;case 55:this.$=W[Y-2],kt.setClass(W[Y-2],W[Y]);break;case 56:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"square");break;case 57:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"doublecircle");break;case 58:this.$=W[Y-5],kt.addVertex(W[Y-5],W[Y-2],"circle");break;case 59:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"ellipse");break;case 60:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"stadium");break;case 61:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"subroutine");break;case 62:this.$=W[Y-7],kt.addVertex(W[Y-7],W[Y-1],"rect",void 0,void 0,void 0,Object.fromEntries([[W[Y-5],W[Y-3]]]));break;case 63:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"cylinder");break;case 64:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"round");break;case 65:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"diamond");break;case 66:this.$=W[Y-5],kt.addVertex(W[Y-5],W[Y-2],"hexagon");break;case 67:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"odd");break;case 68:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"trapezoid");break;case 69:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"inv_trapezoid");break;case 70:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"lean_right");break;case 71:this.$=W[Y-3],kt.addVertex(W[Y-3],W[Y-1],"lean_left");break;case 72:this.$=W[Y],kt.addVertex(W[Y]);break;case 73:W[Y-1].text=W[Y],this.$=W[Y-1];break;case 74:case 75:W[Y-2].text=W[Y-1],this.$=W[Y-2];break;case 76:this.$=W[Y];break;case 77:var Dr=kt.destructLink(W[Y],W[Y-2]);this.$={type:Dr.type,stroke:Dr.stroke,length:Dr.length,text:W[Y-1]};break;case 78:this.$={text:W[Y],type:"text"};break;case 79:this.$={text:W[Y-1].text+""+W[Y],type:W[Y-1].type};break;case 80:this.$={text:W[Y],type:"string"};break;case 81:this.$={text:W[Y],type:"markdown"};break;case 82:var Dr=kt.destructLink(W[Y]);this.$={type:Dr.type,stroke:Dr.stroke,length:Dr.length};break;case 83:this.$=W[Y-1];break;case 84:this.$={text:W[Y],type:"text"};break;case 85:this.$={text:W[Y-1].text+""+W[Y],type:W[Y-1].type};break;case 86:this.$={text:W[Y],type:"string"};break;case 87:case 102:this.$={text:W[Y],type:"markdown"};break;case 99:this.$={text:W[Y],type:"text"};break;case 100:this.$={text:W[Y-1].text+""+W[Y],type:W[Y-1].type};break;case 101:this.$={text:W[Y],type:"text"};break;case 103:this.$=W[Y-4],kt.addClass(W[Y-2],W[Y]);break;case 104:this.$=W[Y-4],kt.setClass(W[Y-2],W[Y]);break;case 105:case 113:this.$=W[Y-1],kt.setClickEvent(W[Y-1],W[Y]);break;case 106:case 114:this.$=W[Y-3],kt.setClickEvent(W[Y-3],W[Y-2]),kt.setTooltip(W[Y-3],W[Y]);break;case 107:this.$=W[Y-2],kt.setClickEvent(W[Y-2],W[Y-1],W[Y]);break;case 108:this.$=W[Y-4],kt.setClickEvent(W[Y-4],W[Y-3],W[Y-2]),kt.setTooltip(W[Y-4],W[Y]);break;case 109:this.$=W[Y-2],kt.setLink(W[Y-2],W[Y]);break;case 110:this.$=W[Y-4],kt.setLink(W[Y-4],W[Y-2]),kt.setTooltip(W[Y-4],W[Y]);break;case 111:this.$=W[Y-4],kt.setLink(W[Y-4],W[Y-2],W[Y]);break;case 112:this.$=W[Y-6],kt.setLink(W[Y-6],W[Y-4],W[Y]),kt.setTooltip(W[Y-6],W[Y-2]);break;case 115:this.$=W[Y-1],kt.setLink(W[Y-1],W[Y]);break;case 116:this.$=W[Y-3],kt.setLink(W[Y-3],W[Y-2]),kt.setTooltip(W[Y-3],W[Y]);break;case 117:this.$=W[Y-3],kt.setLink(W[Y-3],W[Y-2],W[Y]);break;case 118:this.$=W[Y-5],kt.setLink(W[Y-5],W[Y-4],W[Y]),kt.setTooltip(W[Y-5],W[Y-2]);break;case 119:this.$=W[Y-4],kt.addVertex(W[Y-2],void 0,void 0,W[Y]);break;case 120:this.$=W[Y-4],kt.updateLink([W[Y-2]],W[Y]);break;case 121:this.$=W[Y-4],kt.updateLink(W[Y-2],W[Y]);break;case 122:this.$=W[Y-8],kt.updateLinkInterpolate([W[Y-6]],W[Y-2]),kt.updateLink([W[Y-6]],W[Y]);break;case 123:this.$=W[Y-8],kt.updateLinkInterpolate(W[Y-6],W[Y-2]),kt.updateLink(W[Y-6],W[Y]);break;case 124:this.$=W[Y-6],kt.updateLinkInterpolate([W[Y-4]],W[Y]);break;case 125:this.$=W[Y-6],kt.updateLinkInterpolate(W[Y-4],W[Y]);break;case 126:case 128:this.$=[W[Y]];break;case 127:case 129:W[Y-2].push(W[Y]),this.$=W[Y-2];break;case 131:this.$=W[Y-1]+W[Y];break;case 179:this.$=W[Y];break;case 180:this.$=W[Y-1]+""+W[Y];break;case 182:this.$=W[Y-1]+""+W[Y];break;case 183:this.$={stmt:"dir",value:"TB"};break;case 184:this.$={stmt:"dir",value:"BT"};break;case 185:this.$={stmt:"dir",value:"RL"};break;case 186:this.$={stmt:"dir",value:"LR"};break}},"anonymous"),table:[{3:1,4:2,9:e,10:r,12:a},{1:[3]},t(i,s,{5:6}),{4:7,9:e,10:r,12:a},{4:8,9:e,10:r,12:a},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:n,9:o,10:h,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:d,33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,83:x,84:v,85:T,86:I,87:B,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P,120:O,121:V,122:F,123:M},t(i,[2,9]),t(i,[2,10]),t(i,[2,11]),{8:[1,54],9:[1,55],10:R,15:53,18:56},t(L,[2,3]),t(L,[2,4]),t(L,[2,5]),t(L,[2,6]),t(L,[2,7]),t(L,[2,8]),{8:q,9:N,11:j,21:58,41:59,72:63,75:[1,64],77:[1,65]},{8:q,9:N,11:j,21:66},{8:q,9:N,11:j,21:67},{8:q,9:N,11:j,21:68},{8:q,9:N,11:j,21:69},{8:q,9:N,11:j,21:70},{8:q,9:N,10:[1,71],11:j,21:72},t(L,[2,36]),{35:[1,73]},{37:[1,74]},t(L,[2,39]),t(it,[2,50],{18:75,39:76,10:R,40:tt}),{10:[1,78]},{10:[1,79]},{10:[1,80]},{10:[1,81]},{14:pt,44:K,60:nt,79:[1,85],88:ht,94:[1,82],96:[1,83],100:84,104:st,105:rt,108:Z,110:at,113:Q,114:lt,115:z,119:86},t(L,[2,183]),t(L,[2,184]),t(L,[2,185]),t(L,[2,186]),t(Et,[2,51]),t(Et,[2,54],{46:[1,98]}),t(X,[2,72],{112:111,29:[1,99],44:y,48:[1,100],50:[1,101],52:[1,102],54:[1,103],56:[1,104],58:[1,105],60:m,63:[1,106],65:[1,107],67:[1,108],68:[1,109],70:[1,110],88:_,101:w,104:D,105:S,108:b,110:C,113:k,114:E,115:P}),t(vt,[2,179]),t(vt,[2,140]),t(vt,[2,141]),t(vt,[2,142]),t(vt,[2,143]),t(vt,[2,144]),t(vt,[2,145]),t(vt,[2,146]),t(vt,[2,147]),t(vt,[2,148]),t(vt,[2,149]),t(vt,[2,150]),t(i,[2,12]),t(i,[2,18]),t(i,[2,19]),{9:[1,112]},t(Ct,[2,26],{18:113,10:R}),t(L,[2,27]),{42:114,43:38,44:y,45:39,47:40,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},t(L,[2,40]),t(L,[2,41]),t(L,[2,42]),t(Yt,[2,76],{73:115,62:[1,117],74:[1,116]}),{76:118,78:119,79:[1,120],80:[1,121],115:Ut,118:ae},t([44,60,62,74,88,101,104,105,108,110,113,114,115],[2,82]),t(L,[2,28]),t(L,[2,29]),t(L,[2,30]),t(L,[2,31]),t(L,[2,32]),{10:qt,12:ut,14:xt,27:ot,28:124,32:ct,44:gt,60:G,75:Pt,79:[1,126],80:[1,127],82:137,83:$,84:Qt,85:U,86:wt,87:Bt,88:St,89:Gt,90:125,104:dt,108:ce,110:bt,113:_r,114:qr,115:ui},t(Se,s,{5:150}),t(L,[2,37]),t(L,[2,38]),t(it,[2,48],{44:nr}),t(it,[2,49],{18:152,10:R,40:Kt}),t(Et,[2,44]),{44:y,47:154,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},{101:[1,155],102:156,104:[1,157]},{44:y,47:158,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},{44:y,47:159,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},t(se,[2,105],{10:[1,160],95:[1,161]}),{79:[1,162]},t(se,[2,113],{119:164,10:[1,163],14:pt,44:K,60:nt,88:ht,104:st,105:rt,108:Z,110:at,113:Q,114:lt,115:z}),t(se,[2,115],{10:[1,165]}),t(le,[2,181]),t(le,[2,168]),t(le,[2,169]),t(le,[2,170]),t(le,[2,171]),t(le,[2,172]),t(le,[2,173]),t(le,[2,174]),t(le,[2,175]),t(le,[2,176]),t(le,[2,177]),t(le,[2,178]),{44:y,47:166,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},{30:167,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:175,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:177,50:[1,176],67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:178,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:179,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:180,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{108:[1,181]},{30:182,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:183,65:[1,184],67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:185,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:186,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{30:187,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},t(vt,[2,180]),t(i,[2,20]),t(Ct,[2,25]),t(it,[2,46],{39:188,18:189,10:R,40:tt}),t(Yt,[2,73],{10:[1,190]}),{10:[1,191]},{30:192,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{77:[1,193],78:194,115:Ut,118:ae},t(we,[2,78]),t(we,[2,80]),t(we,[2,81]),t(we,[2,166]),t(we,[2,167]),{8:q,9:N,10:qt,11:j,12:ut,14:xt,21:196,27:ot,29:[1,195],32:ct,44:gt,60:G,75:Pt,82:137,83:$,84:Qt,85:U,86:wt,87:Bt,88:St,89:Gt,90:197,104:dt,108:ce,110:bt,113:_r,114:qr,115:ui},t(ie,[2,99]),t(ie,[2,101]),t(ie,[2,102]),t(ie,[2,155]),t(ie,[2,156]),t(ie,[2,157]),t(ie,[2,158]),t(ie,[2,159]),t(ie,[2,160]),t(ie,[2,161]),t(ie,[2,162]),t(ie,[2,163]),t(ie,[2,164]),t(ie,[2,165]),t(ie,[2,88]),t(ie,[2,89]),t(ie,[2,90]),t(ie,[2,91]),t(ie,[2,92]),t(ie,[2,93]),t(ie,[2,94]),t(ie,[2,95]),t(ie,[2,96]),t(ie,[2,97]),t(ie,[2,98]),{6:11,7:12,8:n,9:o,10:h,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:d,32:[1,198],33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,83:x,84:v,85:T,86:I,87:B,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P,120:O,121:V,122:F,123:M},{10:R,18:199},{44:[1,200]},t(Et,[2,43]),{10:[1,201],44:y,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:111,113:k,114:E,115:P},{10:[1,202]},{10:[1,203],105:[1,204]},t(di,[2,126]),{10:[1,205],44:y,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:111,113:k,114:E,115:P},{10:[1,206],44:y,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:111,113:k,114:E,115:P},{79:[1,207]},t(se,[2,107],{10:[1,208]}),t(se,[2,109],{10:[1,209]}),{79:[1,210]},t(le,[2,182]),{79:[1,211],97:[1,212]},t(Et,[2,55],{112:111,44:y,60:m,88:_,101:w,104:D,105:S,108:b,110:C,113:k,114:E,115:P}),{31:[1,213],67:te,81:214,115:Xt,116:Ht,117:Nt},t(Cr,[2,84]),t(Cr,[2,86]),t(Cr,[2,87]),t(Cr,[2,151]),t(Cr,[2,152]),t(Cr,[2,153]),t(Cr,[2,154]),{49:[1,215],67:te,81:214,115:Xt,116:Ht,117:Nt},{30:216,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{51:[1,217],67:te,81:214,115:Xt,116:Ht,117:Nt},{53:[1,218],67:te,81:214,115:Xt,116:Ht,117:Nt},{55:[1,219],67:te,81:214,115:Xt,116:Ht,117:Nt},{57:[1,220],67:te,81:214,115:Xt,116:Ht,117:Nt},{60:[1,221]},{64:[1,222],67:te,81:214,115:Xt,116:Ht,117:Nt},{66:[1,223],67:te,81:214,115:Xt,116:Ht,117:Nt},{30:224,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},{31:[1,225],67:te,81:214,115:Xt,116:Ht,117:Nt},{67:te,69:[1,226],71:[1,227],81:214,115:Xt,116:Ht,117:Nt},{67:te,69:[1,229],71:[1,228],81:214,115:Xt,116:Ht,117:Nt},t(it,[2,45],{18:152,10:R,40:Kt}),t(it,[2,47],{44:nr}),t(Yt,[2,75]),t(Yt,[2,74]),{62:[1,230],67:te,81:214,115:Xt,116:Ht,117:Nt},t(Yt,[2,77]),t(we,[2,79]),{30:231,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},t(Se,s,{5:232}),t(ie,[2,100]),t(L,[2,35]),{43:233,44:y,45:39,47:40,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},{10:R,18:234},{10:Fe,60:Br,83:pr,91:235,104:Sr,106:236,107:237,108:Ee,109:pi,110:fi,111:gi},{10:Fe,60:Br,83:pr,91:246,103:[1,247],104:Sr,106:236,107:237,108:Ee,109:pi,110:fi,111:gi},{10:Fe,60:Br,83:pr,91:248,103:[1,249],104:Sr,106:236,107:237,108:Ee,109:pi,110:fi,111:gi},{104:[1,250]},{10:Fe,60:Br,83:pr,91:251,104:Sr,106:236,107:237,108:Ee,109:pi,110:fi,111:gi},{44:y,47:252,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},t(se,[2,106]),{79:[1,253]},{79:[1,254],97:[1,255]},t(se,[2,114]),t(se,[2,116],{10:[1,256]}),t(se,[2,117]),t(X,[2,56]),t(Cr,[2,85]),t(X,[2,57]),{51:[1,257],67:te,81:214,115:Xt,116:Ht,117:Nt},t(X,[2,64]),t(X,[2,59]),t(X,[2,60]),t(X,[2,61]),{108:[1,258]},t(X,[2,63]),t(X,[2,65]),{66:[1,259],67:te,81:214,115:Xt,116:Ht,117:Nt},t(X,[2,67]),t(X,[2,68]),t(X,[2,70]),t(X,[2,69]),t(X,[2,71]),t([10,44,60,88,101,104,105,108,110,113,114,115],[2,83]),{31:[1,260],67:te,81:214,115:Xt,116:Ht,117:Nt},{6:11,7:12,8:n,9:o,10:h,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:d,32:[1,261],33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,83:x,84:v,85:T,86:I,87:B,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P,120:O,121:V,122:F,123:M},t(Et,[2,53]),{43:262,44:y,45:39,47:40,60:m,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P},t(se,[2,119],{105:wa}),t(Xu,[2,128],{107:264,10:Fe,60:Br,83:pr,104:Sr,108:Ee,109:pi,110:fi,111:gi}),t(ei,[2,130]),t(ei,[2,132]),t(ei,[2,133]),t(ei,[2,134]),t(ei,[2,135]),t(ei,[2,136]),t(ei,[2,137]),t(ei,[2,138]),t(ei,[2,139]),t(se,[2,120],{105:wa}),{10:[1,265]},t(se,[2,121],{105:wa}),{10:[1,266]},t(di,[2,127]),t(se,[2,103],{105:wa}),t(se,[2,104],{112:111,44:y,60:m,88:_,101:w,104:D,105:S,108:b,110:C,113:k,114:E,115:P}),t(se,[2,108]),t(se,[2,110],{10:[1,267]}),t(se,[2,111]),{97:[1,268]},{51:[1,269]},{62:[1,270]},{66:[1,271]},{8:q,9:N,11:j,21:272},t(L,[2,34]),t(Et,[2,52]),{10:Fe,60:Br,83:pr,104:Sr,106:273,107:237,108:Ee,109:pi,110:fi,111:gi},t(ei,[2,131]),{14:pt,44:K,60:nt,88:ht,100:274,104:st,105:rt,108:Z,110:at,113:Q,114:lt,115:z,119:86},{14:pt,44:K,60:nt,88:ht,100:275,104:st,105:rt,108:Z,110:at,113:Q,114:lt,115:z,119:86},{97:[1,276]},t(se,[2,118]),t(X,[2,58]),{30:277,67:te,79:he,80:be,81:168,115:Xt,116:Ht,117:Nt},t(X,[2,66]),t(Se,s,{5:278}),t(Xu,[2,129],{107:264,10:Fe,60:Br,83:pr,104:Sr,108:Ee,109:pi,110:fi,111:gi}),t(se,[2,124],{119:164,10:[1,279],14:pt,44:K,60:nt,88:ht,104:st,105:rt,108:Z,110:at,113:Q,114:lt,115:z}),t(se,[2,125],{119:164,10:[1,280],14:pt,44:K,60:nt,88:ht,104:st,105:rt,108:Z,110:at,113:Q,114:lt,115:z}),t(se,[2,112]),{31:[1,281],67:te,81:214,115:Xt,116:Ht,117:Nt},{6:11,7:12,8:n,9:o,10:h,11:u,20:17,22:18,23:19,24:20,25:21,26:22,27:d,32:[1,282],33:24,34:f,36:p,38:g,42:28,43:38,44:y,45:39,47:40,60:m,83:x,84:v,85:T,86:I,87:B,88:_,101:w,104:D,105:S,108:b,110:C,112:41,113:k,114:E,115:P,120:O,121:V,122:F,123:M},{10:Fe,60:Br,83:pr,91:283,104:Sr,106:236,107:237,108:Ee,109:pi,110:fi,111:gi},{10:Fe,60:Br,83:pr,91:284,104:Sr,106:236,107:237,108:Ee,109:pi,110:fi,111:gi},t(X,[2,62]),t(L,[2,33]),t(se,[2,122],{105:wa}),t(se,[2,123],{105:wa})],defaultActions:{},parseError:l(function(Mt,jt){if(jt.recoverable)this.trace(Mt);else{var ee=new Error(Mt);throw ee.hash=jt,ee}},"parseError"),parse:l(function(Mt){var jt=this,ee=[0],kt=[],ve=[null],W=[],Gs=this.table,Y="",Dr=0,Ku=0,rb=2,Qu=1,ib=W.slice.call(arguments,1),qe=Object.create(this.lexer),Zi={yy:{}};for(var Il in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Il)&&(Zi.yy[Il]=this.yy[Il]);qe.setInput(Mt,Zi.yy),Zi.yy.lexer=qe,Zi.yy.parser=this,typeof qe.yylloc>"u"&&(qe.yylloc={});var Nl=qe.yylloc;W.push(Nl);var ab=qe.options&&qe.options.ranges;typeof Zi.yy.parseError=="function"?this.parseError=Zi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function sb(wr){ee.length=ee.length-2*wr,ve.length=ve.length-wr,W.length=W.length-wr}l(sb,"popStack");function Zu(){var wr;return wr=kt.pop()||qe.lex()||Qu,typeof wr!="number"&&(wr instanceof Array&&(kt=wr,wr=kt.pop()),wr=jt.symbols_[wr]||wr),wr}l(Zu,"lex");for(var fr,Ji,Rr,Fl,Ea={},Xn,yi,Ju,Kn;;){if(Ji=ee[ee.length-1],this.defaultActions[Ji]?Rr=this.defaultActions[Ji]:((fr===null||typeof fr>"u")&&(fr=Zu()),Rr=Gs[Ji]&&Gs[Ji][fr]),typeof Rr>"u"||!Rr.length||!Rr[0]){var Pl="";Kn=[];for(Xn in Gs[Ji])this.terminals_[Xn]&&Xn>rb&&Kn.push("'"+this.terminals_[Xn]+"'");qe.showPosition?Pl="Parse error on line "+(Dr+1)+`:
`+qe.showPosition()+`
Expecting `+Kn.join(", ")+", got '"+(this.terminals_[fr]||fr)+"'":Pl="Parse error on line "+(Dr+1)+": Unexpected "+(fr==Qu?"end of input":"'"+(this.terminals_[fr]||fr)+"'"),this.parseError(Pl,{text:qe.match,token:this.terminals_[fr]||fr,line:qe.yylineno,loc:Nl,expected:Kn})}if(Rr[0]instanceof Array&&Rr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ji+", token: "+fr);switch(Rr[0]){case 1:ee.push(fr),ve.push(qe.yytext),W.push(qe.yylloc),ee.push(Rr[1]),fr=null,Ku=qe.yyleng,Y=qe.yytext,Dr=qe.yylineno,Nl=qe.yylloc;break;case 2:if(yi=this.productions_[Rr[1]][1],Ea.$=ve[ve.length-yi],Ea._$={first_line:W[W.length-(yi||1)].first_line,last_line:W[W.length-1].last_line,first_column:W[W.length-(yi||1)].first_column,last_column:W[W.length-1].last_column},ab&&(Ea._$.range=[W[W.length-(yi||1)].range[0],W[W.length-1].range[1]]),Fl=this.performAction.apply(Ea,[Y,Ku,Dr,Zi.yy,Rr[1],ve,W].concat(ib)),typeof Fl<"u")return Fl;yi&&(ee=ee.slice(0,-1*yi*2),ve=ve.slice(0,-1*yi),W=W.slice(0,-1*yi)),ee.push(this.productions_[Rr[1]][0]),ve.push(Ea.$),W.push(Ea._$),Ju=Gs[ee[ee.length-2]][ee[ee.length-1]],ee.push(Ju);break;case 3:return!0}}return!0},"parse")},eb=function(){var Ii={EOF:1,parseError:l(function(jt,ee){if(this.yy.parser)this.yy.parser.parseError(jt,ee);else throw new Error(jt)},"parseError"),setInput:l(function(Mt,jt){return this.yy=jt||this.yy||{},this._input=Mt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var Mt=this._input[0];this.yytext+=Mt,this.yyleng++,this.offset++,this.match+=Mt,this.matched+=Mt;var jt=Mt.match(/(?:\r\n?|\n).*/g);return jt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Mt},"input"),unput:l(function(Mt){var jt=Mt.length,ee=Mt.split(/(?:\r\n?|\n)/g);this._input=Mt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-jt),this.offset-=jt;var kt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ee.length-1&&(this.yylineno-=ee.length-1);var ve=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ee?(ee.length===kt.length?this.yylloc.first_column:0)+kt[kt.length-ee.length].length-ee[0].length:this.yylloc.first_column-jt},this.options.ranges&&(this.yylloc.range=[ve[0],ve[0]+this.yyleng-jt]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(Mt){this.unput(this.match.slice(Mt))},"less"),pastInput:l(function(){var Mt=this.matched.substr(0,this.matched.length-this.match.length);return(Mt.length>20?"...":"")+Mt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var Mt=this.match;return Mt.length<20&&(Mt+=this._input.substr(0,20-Mt.length)),(Mt.substr(0,20)+(Mt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var Mt=this.pastInput(),jt=new Array(Mt.length+1).join("-");return Mt+this.upcomingInput()+`
`+jt+"^"},"showPosition"),test_match:l(function(Mt,jt){var ee,kt,ve;if(this.options.backtrack_lexer&&(ve={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ve.yylloc.range=this.yylloc.range.slice(0))),kt=Mt[0].match(/(?:\r\n?|\n).*/g),kt&&(this.yylineno+=kt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:kt?kt[kt.length-1].length-kt[kt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Mt[0].length},this.yytext+=Mt[0],this.match+=Mt[0],this.matches=Mt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Mt[0].length),this.matched+=Mt[0],ee=this.performAction.call(this,this.yy,this,jt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ee)return ee;if(this._backtrack){for(var W in ve)this[W]=ve[W];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Mt,jt,ee,kt;this._more||(this.yytext="",this.match="");for(var ve=this._currentRules(),W=0;W<ve.length;W++)if(ee=this._input.match(this.rules[ve[W]]),ee&&(!jt||ee[0].length>jt[0].length)){if(jt=ee,kt=W,this.options.backtrack_lexer){if(Mt=this.test_match(ee,ve[W]),Mt!==!1)return Mt;if(this._backtrack){jt=!1;continue}else return!1}else if(!this.options.flex)break}return jt?(Mt=this.test_match(jt,ve[kt]),Mt!==!1?Mt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var jt=this.next();return jt||this.lex()},"lex"),begin:l(function(jt){this.conditionStack.push(jt)},"begin"),popState:l(function(){var jt=this.conditionStack.length-1;return jt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(jt){return jt=this.conditionStack.length-1-Math.abs(jt||0),jt>=0?this.conditionStack[jt]:"INITIAL"},"topState"),pushState:l(function(jt){this.begin(jt)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:l(function(jt,ee,kt,ve){switch(kt){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),ee.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:const W=/\n\s*/g;return ee.yytext=ee.yytext.replace(W,"<br/>"),40;case 11:return 40;case 12:this.popState();break;case 13:this.begin("callbackname");break;case 14:this.popState();break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 94;case 17:this.popState();break;case 18:return 95;case 19:return"MD_STR";case 20:this.popState();break;case 21:this.begin("md_string");break;case 22:return"STR";case 23:this.popState();break;case 24:this.pushState("string");break;case 25:return 83;case 26:return 101;case 27:return 84;case 28:return 103;case 29:return 85;case 30:return 86;case 31:return 96;case 32:this.begin("click");break;case 33:this.popState();break;case 34:return 87;case 35:return jt.lex.firstGraph()&&this.begin("dir"),12;case 36:return jt.lex.firstGraph()&&this.begin("dir"),12;case 37:return jt.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:return 97;case 41:return 97;case 42:return 97;case 43:return 97;case 44:return this.popState(),13;case 45:return this.popState(),14;case 46:return this.popState(),14;case 47:return this.popState(),14;case 48:return this.popState(),14;case 49:return this.popState(),14;case 50:return this.popState(),14;case 51:return this.popState(),14;case 52:return this.popState(),14;case 53:return this.popState(),14;case 54:return this.popState(),14;case 55:return 120;case 56:return 121;case 57:return 122;case 58:return 123;case 59:return 104;case 60:return 110;case 61:return 46;case 62:return 60;case 63:return 44;case 64:return 8;case 65:return 105;case 66:return 114;case 67:return this.popState(),77;case 68:return this.pushState("edgeText"),75;case 69:return 118;case 70:return this.popState(),77;case 71:return this.pushState("thickEdgeText"),75;case 72:return 118;case 73:return this.popState(),77;case 74:return this.pushState("dottedEdgeText"),75;case 75:return 118;case 76:return 77;case 77:return this.popState(),53;case 78:return"TEXT";case 79:return this.pushState("ellipseText"),52;case 80:return this.popState(),55;case 81:return this.pushState("text"),54;case 82:return this.popState(),57;case 83:return this.pushState("text"),56;case 84:return 58;case 85:return this.pushState("text"),67;case 86:return this.popState(),64;case 87:return this.pushState("text"),63;case 88:return this.popState(),49;case 89:return this.pushState("text"),48;case 90:return this.popState(),69;case 91:return this.popState(),71;case 92:return 116;case 93:return this.pushState("trapText"),68;case 94:return this.pushState("trapText"),70;case 95:return 117;case 96:return 67;case 97:return 89;case 98:return"SEP";case 99:return 88;case 100:return 114;case 101:return 110;case 102:return 44;case 103:return 108;case 104:return 113;case 105:return 115;case 106:return this.popState(),62;case 107:return this.pushState("text"),62;case 108:return this.popState(),51;case 109:return this.pushState("text"),50;case 110:return this.popState(),31;case 111:return this.pushState("text"),29;case 112:return this.popState(),66;case 113:return this.pushState("text"),65;case 114:return"TEXT";case 115:return"QUOTE";case 116:return 9;case 117:return 10;case 118:return 11}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},shapeData:{rules:[8,11,12,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},callbackargs:{rules:[17,18,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},callbackname:{rules:[14,15,16,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},href:{rules:[21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},click:{rules:[21,24,33,34,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},dottedEdgeText:{rules:[21,24,73,75,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},thickEdgeText:{rules:[21,24,70,72,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},edgeText:{rules:[21,24,67,69,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},trapText:{rules:[21,24,76,79,81,83,87,89,90,91,92,93,94,107,109,111,113],inclusive:!1},ellipseText:{rules:[21,24,76,77,78,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},text:{rules:[21,24,76,79,80,81,82,83,86,87,88,89,93,94,106,107,108,109,110,111,112,113,114],inclusive:!1},vertex:{rules:[21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},acc_descr:{rules:[3,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},acc_title:{rules:[1,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},md_string:{rules:[19,20,21,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},string:{rules:[21,22,23,24,76,79,81,83,87,89,93,94,107,109,111,113],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,70,71,73,74,76,79,81,83,84,85,87,89,93,94,95,96,97,98,99,100,101,102,103,104,105,107,109,111,113,115,116,117,118],inclusive:!0}}};return Ii}();Rl.lexer=eb;function jn(){this.yy={}}return l(jn,"Parser"),jn.prototype=Rl,Rl.Parser=jn,new jn}();_c.parser=_c;var w_=_c,E_=l((t,e)=>{const r=B1,a=r(t,"r"),i=r(t,"g"),s=r(t,"b");return Fa(a,i,s,e)},"fade"),A_=l(t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span {
    color: ${t.titleColor};
  }
  .cluster-label span p {
    background-color: transparent;
  }

  .label text,span {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .katex path {
    fill: #000;
    stroke: #000;
    stroke-width: 1px;
  }

  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }


  .root .anchor path {
    fill: ${t.lineColor} !important;
    stroke-width: 0;
    stroke: ${t.lineColor};
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    p {
      background-color: ${t.edgeLabelBackground};
    }
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${E_(t.edgeLabelBackground,.5)};
    // background-color:
  }

  .cluster rect {
    fill: ${t.clusterBkg};
    stroke: ${t.clusterBorder};
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }

  rect.text {
    fill: none;
    stroke-width: 0;
  }

  .icon-shape, .image-shape {
    background-color: ${t.edgeLabelBackground};
    p {
      background-color: ${t.edgeLabelBackground};
      padding: 2px;
    }
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }
`,"getStyles"),L_=A_,B_={parser:w_,db:Vl,renderer:S_,styles:L_,init:l(t=>{t.flowchart||(t.flowchart={}),t.layout&&pd({layout:t.layout}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,pd({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}}),Vl.clear(),Vl.setGen("gen-2")},"init")};const Uh=Object.freeze(Object.defineProperty({__proto__:null,diagram:B_},Symbol.toStringTag,{value:"Module"}));var Cc=function(){var t=l(function(S,b,C,k){for(C=C||{},k=S.length;k--;C[S[k]]=b);return C},"o"),e=[6,8,10,20,22,24,26,27,28],r=[1,10],a=[1,11],i=[1,12],s=[1,13],n=[1,14],o=[1,15],h=[1,21],u=[1,22],d=[1,23],f=[1,24],p=[1,25],g=[6,8,10,13,15,18,19,20,22,24,26,27,28,41,42,43,44,45],y=[1,34],m=[27,28,46,47],x=[41,42,43,44,45],v=[17,34],T=[1,54],I=[1,53],B=[17,34,36,38],_={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,":":13,role:14,BLOCK_START:15,attributes:16,BLOCK_STOP:17,SQS:18,SQE:19,title:20,title_value:21,acc_title:22,acc_title_value:23,acc_descr:24,acc_descr_value:25,acc_descr_multiline_value:26,ALPHANUM:27,ENTITY_NAME:28,attribute:29,attributeType:30,attributeName:31,attributeKeyTypeList:32,attributeComment:33,ATTRIBUTE_WORD:34,attributeKeyType:35,COMMA:36,ATTRIBUTE_KEY:37,COMMENT:38,cardinality:39,relType:40,ZERO_OR_ONE:41,ZERO_OR_MORE:42,ONE_OR_MORE:43,ONLY_ONE:44,MD_PARENT:45,NON_IDENTIFYING:46,IDENTIFYING:47,WORD:48,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:":",15:"BLOCK_START",17:"BLOCK_STOP",18:"SQS",19:"SQE",20:"title",21:"title_value",22:"acc_title",23:"acc_title_value",24:"acc_descr",25:"acc_descr_value",26:"acc_descr_multiline_value",27:"ALPHANUM",28:"ENTITY_NAME",34:"ATTRIBUTE_WORD",36:"COMMA",37:"ATTRIBUTE_KEY",38:"COMMENT",41:"ZERO_OR_ONE",42:"ZERO_OR_MORE",43:"ONE_OR_MORE",44:"ONLY_ONE",45:"MD_PARENT",46:"NON_IDENTIFYING",47:"IDENTIFYING",48:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,4],[9,3],[9,1],[9,7],[9,6],[9,4],[9,2],[9,2],[9,2],[9,1],[11,1],[11,1],[16,1],[16,2],[29,2],[29,3],[29,3],[29,4],[30,1],[31,1],[32,1],[32,3],[35,1],[33,1],[12,3],[39,1],[39,1],[39,1],[39,1],[39,1],[40,1],[40,1],[14,1],[14,1],[14,1]],performAction:l(function(b,C,k,E,P,O,V){var F=O.length-1;switch(P){case 1:break;case 2:this.$=[];break;case 3:O[F-1].push(O[F]),this.$=O[F-1];break;case 4:case 5:this.$=O[F];break;case 6:case 7:this.$=[];break;case 8:E.addEntity(O[F-4]),E.addEntity(O[F-2]),E.addRelationship(O[F-4],O[F],O[F-2],O[F-3]);break;case 9:E.addEntity(O[F-3]),E.addAttributes(O[F-3],O[F-1]);break;case 10:E.addEntity(O[F-2]);break;case 11:E.addEntity(O[F]);break;case 12:E.addEntity(O[F-6],O[F-4]),E.addAttributes(O[F-6],O[F-1]);break;case 13:E.addEntity(O[F-5],O[F-3]);break;case 14:E.addEntity(O[F-3],O[F-1]);break;case 15:case 16:this.$=O[F].trim(),E.setAccTitle(this.$);break;case 17:case 18:this.$=O[F].trim(),E.setAccDescription(this.$);break;case 19:case 43:this.$=O[F];break;case 20:case 41:case 42:this.$=O[F].replace(/"/g,"");break;case 21:case 29:this.$=[O[F]];break;case 22:O[F].push(O[F-1]),this.$=O[F];break;case 23:this.$={attributeType:O[F-1],attributeName:O[F]};break;case 24:this.$={attributeType:O[F-2],attributeName:O[F-1],attributeKeyTypeList:O[F]};break;case 25:this.$={attributeType:O[F-2],attributeName:O[F-1],attributeComment:O[F]};break;case 26:this.$={attributeType:O[F-3],attributeName:O[F-2],attributeKeyTypeList:O[F-1],attributeComment:O[F]};break;case 27:case 28:case 31:this.$=O[F];break;case 30:O[F-2].push(O[F]),this.$=O[F-2];break;case 32:this.$=O[F].replace(/"/g,"");break;case 33:this.$={cardA:O[F],relType:O[F-1],cardB:O[F-2]};break;case 34:this.$=E.Cardinality.ZERO_OR_ONE;break;case 35:this.$=E.Cardinality.ZERO_OR_MORE;break;case 36:this.$=E.Cardinality.ONE_OR_MORE;break;case 37:this.$=E.Cardinality.ONLY_ONE;break;case 38:this.$=E.Cardinality.MD_PARENT;break;case 39:this.$=E.Identification.NON_IDENTIFYING;break;case 40:this.$=E.Identification.IDENTIFYING;break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,20:r,22:a,24:i,26:s,27:n,28:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:16,11:9,20:r,22:a,24:i,26:s,27:n,28:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,11],{12:17,39:20,15:[1,18],18:[1,19],41:h,42:u,43:d,44:f,45:p}),{21:[1,26]},{23:[1,27]},{25:[1,28]},t(e,[2,18]),t(g,[2,19]),t(g,[2,20]),t(e,[2,4]),{11:29,27:n,28:o},{16:30,17:[1,31],29:32,30:33,34:y},{11:35,27:n,28:o},{40:36,46:[1,37],47:[1,38]},t(m,[2,34]),t(m,[2,35]),t(m,[2,36]),t(m,[2,37]),t(m,[2,38]),t(e,[2,15]),t(e,[2,16]),t(e,[2,17]),{13:[1,39]},{17:[1,40]},t(e,[2,10]),{16:41,17:[2,21],29:32,30:33,34:y},{31:42,34:[1,43]},{34:[2,27]},{19:[1,44]},{39:45,41:h,42:u,43:d,44:f,45:p},t(x,[2,39]),t(x,[2,40]),{14:46,27:[1,49],28:[1,48],48:[1,47]},t(e,[2,9]),{17:[2,22]},t(v,[2,23],{32:50,33:51,35:52,37:T,38:I}),t([17,34,37,38],[2,28]),t(e,[2,14],{15:[1,55]}),t([27,28],[2,33]),t(e,[2,8]),t(e,[2,41]),t(e,[2,42]),t(e,[2,43]),t(v,[2,24],{33:56,36:[1,57],38:I}),t(v,[2,25]),t(B,[2,29]),t(v,[2,32]),t(B,[2,31]),{16:58,17:[1,59],29:32,30:33,34:y},t(v,[2,26]),{35:60,37:T},{17:[1,61]},t(e,[2,13]),t(B,[2,30]),t(e,[2,12])],defaultActions:{34:[2,27],41:[2,22]},parseError:l(function(b,C){if(C.recoverable)this.trace(b);else{var k=new Error(b);throw k.hash=C,k}},"parseError"),parse:l(function(b){var C=this,k=[0],E=[],P=[null],O=[],V=this.table,F="",M=0,R=0,L=2,q=1,N=O.slice.call(arguments,1),j=Object.create(this.lexer),it={yy:{}};for(var tt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,tt)&&(it.yy[tt]=this.yy[tt]);j.setInput(b,it.yy),it.yy.lexer=j,it.yy.parser=this,typeof j.yylloc>"u"&&(j.yylloc={});var pt=j.yylloc;O.push(pt);var K=j.options&&j.options.ranges;typeof it.yy.parseError=="function"?this.parseError=it.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function nt(Ct){k.length=k.length-2*Ct,P.length=P.length-Ct,O.length=O.length-Ct}l(nt,"popStack");function ht(){var Ct;return Ct=E.pop()||j.lex()||q,typeof Ct!="number"&&(Ct instanceof Array&&(E=Ct,Ct=E.pop()),Ct=C.symbols_[Ct]||Ct),Ct}l(ht,"lex");for(var st,rt,Z,at,Q={},lt,z,Et,X;;){if(rt=k[k.length-1],this.defaultActions[rt]?Z=this.defaultActions[rt]:((st===null||typeof st>"u")&&(st=ht()),Z=V[rt]&&V[rt][st]),typeof Z>"u"||!Z.length||!Z[0]){var vt="";X=[];for(lt in V[rt])this.terminals_[lt]&&lt>L&&X.push("'"+this.terminals_[lt]+"'");j.showPosition?vt="Parse error on line "+(M+1)+`:
`+j.showPosition()+`
Expecting `+X.join(", ")+", got '"+(this.terminals_[st]||st)+"'":vt="Parse error on line "+(M+1)+": Unexpected "+(st==q?"end of input":"'"+(this.terminals_[st]||st)+"'"),this.parseError(vt,{text:j.match,token:this.terminals_[st]||st,line:j.yylineno,loc:pt,expected:X})}if(Z[0]instanceof Array&&Z.length>1)throw new Error("Parse Error: multiple actions possible at state: "+rt+", token: "+st);switch(Z[0]){case 1:k.push(st),P.push(j.yytext),O.push(j.yylloc),k.push(Z[1]),st=null,R=j.yyleng,F=j.yytext,M=j.yylineno,pt=j.yylloc;break;case 2:if(z=this.productions_[Z[1]][1],Q.$=P[P.length-z],Q._$={first_line:O[O.length-(z||1)].first_line,last_line:O[O.length-1].last_line,first_column:O[O.length-(z||1)].first_column,last_column:O[O.length-1].last_column},K&&(Q._$.range=[O[O.length-(z||1)].range[0],O[O.length-1].range[1]]),at=this.performAction.apply(Q,[F,R,M,it.yy,Z[1],P,O].concat(N)),typeof at<"u")return at;z&&(k=k.slice(0,-1*z*2),P=P.slice(0,-1*z),O=O.slice(0,-1*z)),k.push(this.productions_[Z[1]][0]),P.push(Q.$),O.push(Q._$),Et=V[k[k.length-2]][k[k.length-1]],k.push(Et);break;case 3:return!0}}return!0},"parse")},w=function(){var S={EOF:1,parseError:l(function(C,k){if(this.yy.parser)this.yy.parser.parseError(C,k);else throw new Error(C)},"parseError"),setInput:l(function(b,C){return this.yy=C||this.yy||{},this._input=b,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var b=this._input[0];this.yytext+=b,this.yyleng++,this.offset++,this.match+=b,this.matched+=b;var C=b.match(/(?:\r\n?|\n).*/g);return C?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),b},"input"),unput:l(function(b){var C=b.length,k=b.split(/(?:\r\n?|\n)/g);this._input=b+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-C),this.offset-=C;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),k.length-1&&(this.yylineno-=k.length-1);var P=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:k?(k.length===E.length?this.yylloc.first_column:0)+E[E.length-k.length].length-k[0].length:this.yylloc.first_column-C},this.options.ranges&&(this.yylloc.range=[P[0],P[0]+this.yyleng-C]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(b){this.unput(this.match.slice(b))},"less"),pastInput:l(function(){var b=this.matched.substr(0,this.matched.length-this.match.length);return(b.length>20?"...":"")+b.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var b=this.match;return b.length<20&&(b+=this._input.substr(0,20-b.length)),(b.substr(0,20)+(b.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var b=this.pastInput(),C=new Array(b.length+1).join("-");return b+this.upcomingInput()+`
`+C+"^"},"showPosition"),test_match:l(function(b,C){var k,E,P;if(this.options.backtrack_lexer&&(P={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(P.yylloc.range=this.yylloc.range.slice(0))),E=b[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],k=this.performAction.call(this,this.yy,this,C,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),k)return k;if(this._backtrack){for(var O in P)this[O]=P[O];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var b,C,k,E;this._more||(this.yytext="",this.match="");for(var P=this._currentRules(),O=0;O<P.length;O++)if(k=this._input.match(this.rules[P[O]]),k&&(!C||k[0].length>C[0].length)){if(C=k,E=O,this.options.backtrack_lexer){if(b=this.test_match(k,P[O]),b!==!1)return b;if(this._backtrack){C=!1;continue}else return!1}else if(!this.options.flex)break}return C?(b=this.test_match(C,P[E]),b!==!1?b:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var C=this.next();return C||this.lex()},"lex"),begin:l(function(C){this.conditionStack.push(C)},"begin"),popState:l(function(){var C=this.conditionStack.length-1;return C>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(C){return C=this.conditionStack.length-1-Math.abs(C||0),C>=0?this.conditionStack[C]:"INITIAL"},"topState"),pushState:l(function(C){this.begin(C)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(C,k,E,P){switch(E){case 0:return this.begin("acc_title"),22;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),24;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 10;case 8:break;case 9:return 8;case 10:return 28;case 11:return 48;case 12:return 4;case 13:return this.begin("block"),15;case 14:return 36;case 15:break;case 16:return 37;case 17:return 34;case 18:return 34;case 19:return 38;case 20:break;case 21:return this.popState(),17;case 22:return k.yytext[0];case 23:return 18;case 24:return 19;case 25:return 41;case 26:return 43;case 27:return 43;case 28:return 43;case 29:return 41;case 30:return 41;case 31:return 42;case 32:return 42;case 33:return 42;case 34:return 42;case 35:return 42;case 36:return 43;case 37:return 42;case 38:return 43;case 39:return 44;case 40:return 44;case 41:return 44;case 42:return 44;case 43:return 41;case 44:return 42;case 45:return 43;case 46:return 45;case 47:return 46;case 48:return 47;case 49:return 47;case 50:return 46;case 51:return 46;case 52:return 46;case 53:return 27;case 54:return k.yytext[0];case 55:return 6}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:,)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:(.*?)[~](.*?)*[~])/i,/^(?:[\*A-Za-z_][A-Za-z0-9\-_\[\]\(\)]*)/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:[A-Za-z_][A-Za-z0-9\-_]*)/i,/^(?:.)/i,/^(?:$)/i],conditions:{acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[14,15,16,17,18,19,20,21,22],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55],inclusive:!0}}};return S}();_.lexer=w;function D(){this.yy={}}return l(D,"Parser"),D.prototype=_,_.Parser=D,new D}();Cc.parser=Cc;var D_=Cc,ra=new Map,jh=[],R_={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},I_={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},$2=l(function(t,e=void 0){return ra.has(t)?!ra.get(t).alias&&e&&(ra.get(t).alias=e,A.info(`Add alias '${e}' to entity '${t}'`)):(ra.set(t,{attributes:[],alias:e}),A.info("Added new entity :",t)),ra.get(t)},"addEntity"),N_=l(()=>ra,"getEntities"),F_=l(function(t,e){let r=$2(t),a;for(a=e.length-1;a>=0;a--)r.attributes.push(e[a]),A.debug("Added attribute ",e[a].attributeName)},"addAttributes"),P_=l(function(t,e,r,a){let i={entityA:t,roleA:e,entityB:r,relSpec:a};jh.push(i),A.debug("Added new relationship :",i)},"addRelationship"),O_=l(()=>jh,"getRelationships"),M_=l(function(){ra=new Map,jh=[],Ye()},"clear"),$_={Cardinality:R_,Identification:I_,getConfig:l(()=>H().er,"getConfig"),addEntity:$2,addAttributes:F_,getEntities:N_,addRelationship:P_,getRelationships:O_,clear:M_,setAccTitle:He,getAccTitle:Ke,setAccDescription:Qe,getAccDescription:Ze,setDiagramTitle:dr,getDiagramTitle:Je},Yr={ONLY_ONE_START:"ONLY_ONE_START",ONLY_ONE_END:"ONLY_ONE_END",ZERO_OR_ONE_START:"ZERO_OR_ONE_START",ZERO_OR_ONE_END:"ZERO_OR_ONE_END",ONE_OR_MORE_START:"ONE_OR_MORE_START",ONE_OR_MORE_END:"ONE_OR_MORE_END",ZERO_OR_MORE_START:"ZERO_OR_MORE_START",ZERO_OR_MORE_END:"ZERO_OR_MORE_END",MD_PARENT_END:"MD_PARENT_END",MD_PARENT_START:"MD_PARENT_START"},V_=l(function(t,e){let r;t.append("defs").append("marker").attr("id",Yr.MD_PARENT_START).attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",Yr.MD_PARENT_END).attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",Yr.ONLY_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",Yr.ONLY_ONE_END).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,0 L3,18 M9,0 L9,18"),r=t.append("defs").append("marker").attr("id",Yr.ZERO_OR_ONE_START).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M9,0 L9,18"),r=t.append("defs").append("marker").attr("id",Yr.ZERO_OR_ONE_END).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,0 L21,18"),t.append("defs").append("marker").attr("id",Yr.ONE_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",Yr.ONE_OR_MORE_END).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18"),r=t.append("defs").append("marker").attr("id",Yr.ZERO_OR_MORE_START).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18"),r=t.append("defs").append("marker").attr("id",Yr.ZERO_OR_MORE_END).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto"),r.append("circle").attr("stroke",e.stroke).attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),r.append("path").attr("stroke",e.stroke).attr("fill","none").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"insertMarkers"),Hr={ERMarkers:Yr,insertMarkers:V_},z_=/[^\dA-Za-z](\W)*/g,Oe={},bn=new Map,W_=l(function(t){const e=Object.keys(t);for(const r of e)Oe[r]=t[r]},"setConf"),q_=l((t,e,r)=>{const a=Oe.entityPadding/3,i=Oe.entityPadding/3,s=Oe.fontSize*.85,n=e.node().getBBox(),o=[];let h=!1,u=!1,d=0,f=0,p=0,g=0,y=n.height+a*2,m=1;r.forEach(I=>{I.attributeKeyTypeList!==void 0&&I.attributeKeyTypeList.length>0&&(h=!0),I.attributeComment!==void 0&&(u=!0)}),r.forEach(I=>{const B=`${e.node().id}-attr-${m}`;let _=0;const w=ea(I.attributeType),D=t.append("text").classed("er entityLabel",!0).attr("id",`${B}-type`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",H().fontFamily).style("font-size",s+"px").text(w),S=t.append("text").classed("er entityLabel",!0).attr("id",`${B}-name`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",H().fontFamily).style("font-size",s+"px").text(I.attributeName),b={};b.tn=D,b.nn=S;const C=D.node().getBBox(),k=S.node().getBBox();if(d=Math.max(d,C.width),f=Math.max(f,k.width),_=Math.max(C.height,k.height),h){const E=I.attributeKeyTypeList!==void 0?I.attributeKeyTypeList.join(","):"",P=t.append("text").classed("er entityLabel",!0).attr("id",`${B}-key`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",H().fontFamily).style("font-size",s+"px").text(E);b.kn=P;const O=P.node().getBBox();p=Math.max(p,O.width),_=Math.max(_,O.height)}if(u){const E=t.append("text").classed("er entityLabel",!0).attr("id",`${B}-comment`).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","left").style("font-family",H().fontFamily).style("font-size",s+"px").text(I.attributeComment||"");b.cn=E;const P=E.node().getBBox();g=Math.max(g,P.width),_=Math.max(_,P.height)}b.height=_,o.push(b),y+=_+a*2,m+=1});let x=4;h&&(x+=2),u&&(x+=2);const v=d+f+p+g,T={width:Math.max(Oe.minEntityWidth,Math.max(n.width+Oe.entityPadding*2,v+i*x)),height:r.length>0?y:Math.max(Oe.minEntityHeight,n.height+Oe.entityPadding*2)};if(r.length>0){const I=Math.max(0,(T.width-v-i*x)/(x/2));e.attr("transform","translate("+T.width/2+","+(a+n.height/2)+")");let B=n.height+a*2,_="attributeBoxOdd";o.forEach(w=>{const D=B+a+w.height/2;w.tn.attr("transform","translate("+i+","+D+")");const S=t.insert("rect","#"+w.tn.node().id).classed(`er ${_}`,!0).attr("x",0).attr("y",B).attr("width",d+i*2+I).attr("height",w.height+a*2),b=parseFloat(S.attr("x"))+parseFloat(S.attr("width"));w.nn.attr("transform","translate("+(b+i)+","+D+")");const C=t.insert("rect","#"+w.nn.node().id).classed(`er ${_}`,!0).attr("x",b).attr("y",B).attr("width",f+i*2+I).attr("height",w.height+a*2);let k=parseFloat(C.attr("x"))+parseFloat(C.attr("width"));if(h){w.kn.attr("transform","translate("+(k+i)+","+D+")");const E=t.insert("rect","#"+w.kn.node().id).classed(`er ${_}`,!0).attr("x",k).attr("y",B).attr("width",p+i*2+I).attr("height",w.height+a*2);k=parseFloat(E.attr("x"))+parseFloat(E.attr("width"))}u&&(w.cn.attr("transform","translate("+(k+i)+","+D+")"),t.insert("rect","#"+w.cn.node().id).classed(`er ${_}`,"true").attr("x",k).attr("y",B).attr("width",g+i*2+I).attr("height",w.height+a*2)),B+=w.height+a*2,_=_==="attributeBoxOdd"?"attributeBoxEven":"attributeBoxOdd"})}else T.height=Math.max(Oe.minEntityHeight,y),e.attr("transform","translate("+T.width/2+","+T.height/2+")");return T},"drawAttributes"),Y_=l(function(t,e,r){const a=[...e.keys()];let i;return a.forEach(function(s){const n=z2(s,"entity");bn.set(s,n);const o=t.append("g").attr("id",n);i=i===void 0?n:i;const h="text-"+n,u=o.append("text").classed("er entityLabel",!0).attr("id",h).attr("x",0).attr("y",0).style("dominant-baseline","middle").style("text-anchor","middle").style("font-family",H().fontFamily).style("font-size",Oe.fontSize+"px").text(e.get(s).alias??s),{width:d,height:f}=q_(o,u,e.get(s).attributes),g=o.insert("rect","#"+h).classed("er entityBox",!0).attr("x",0).attr("y",0).attr("width",d).attr("height",f).node().getBBox();r.setNode(n,{width:g.width,height:g.height,shape:"rect",id:n})}),i},"drawEntities"),H_=l(function(t,e){e.nodes().forEach(function(r){r!==void 0&&e.node(r)!==void 0&&t.select("#"+r).attr("transform","translate("+(e.node(r).x-e.node(r).width/2)+","+(e.node(r).y-e.node(r).height/2)+" )")})},"adjustEntities"),V2=l(function(t){return(t.entityA+t.roleA+t.entityB).replace(/\s/g,"")},"getEdgeName"),G_=l(function(t,e){return t.forEach(function(r){e.setEdge(bn.get(r.entityA),bn.get(r.entityB),{relationship:r},V2(r))}),t},"addRelationships"),Ld=0,U_=l(function(t,e,r,a,i){Ld++;const s=r.edge(bn.get(e.entityA),bn.get(e.entityB),V2(e)),n=pa().x(function(m){return m.x}).y(function(m){return m.y}).curve(Dn),o=t.insert("path","#"+a).classed("er relationshipLine",!0).attr("d",n(s.points)).style("stroke",Oe.stroke).style("fill","none");e.relSpec.relType===i.db.Identification.NON_IDENTIFYING&&o.attr("stroke-dasharray","8,8");let h="";switch(Oe.arrowMarkerAbsolute&&(h=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,h=h.replace(/\(/g,"\\("),h=h.replace(/\)/g,"\\)")),e.relSpec.cardA){case i.db.Cardinality.ZERO_OR_ONE:o.attr("marker-end","url("+h+"#"+Hr.ERMarkers.ZERO_OR_ONE_END+")");break;case i.db.Cardinality.ZERO_OR_MORE:o.attr("marker-end","url("+h+"#"+Hr.ERMarkers.ZERO_OR_MORE_END+")");break;case i.db.Cardinality.ONE_OR_MORE:o.attr("marker-end","url("+h+"#"+Hr.ERMarkers.ONE_OR_MORE_END+")");break;case i.db.Cardinality.ONLY_ONE:o.attr("marker-end","url("+h+"#"+Hr.ERMarkers.ONLY_ONE_END+")");break;case i.db.Cardinality.MD_PARENT:o.attr("marker-end","url("+h+"#"+Hr.ERMarkers.MD_PARENT_END+")");break}switch(e.relSpec.cardB){case i.db.Cardinality.ZERO_OR_ONE:o.attr("marker-start","url("+h+"#"+Hr.ERMarkers.ZERO_OR_ONE_START+")");break;case i.db.Cardinality.ZERO_OR_MORE:o.attr("marker-start","url("+h+"#"+Hr.ERMarkers.ZERO_OR_MORE_START+")");break;case i.db.Cardinality.ONE_OR_MORE:o.attr("marker-start","url("+h+"#"+Hr.ERMarkers.ONE_OR_MORE_START+")");break;case i.db.Cardinality.ONLY_ONE:o.attr("marker-start","url("+h+"#"+Hr.ERMarkers.ONLY_ONE_START+")");break;case i.db.Cardinality.MD_PARENT:o.attr("marker-start","url("+h+"#"+Hr.ERMarkers.MD_PARENT_START+")");break}const u=o.node().getTotalLength(),d=o.node().getPointAtLength(u*.5),f="rel"+Ld,p=e.roleA.split(/<br ?\/>/g),g=t.append("text").classed("er relationshipLabel",!0).attr("id",f).attr("x",d.x).attr("y",d.y).style("text-anchor","middle").style("dominant-baseline","middle").style("font-family",H().fontFamily).style("font-size",Oe.fontSize+"px");if(p.length==1)g.text(e.roleA);else{const m=-(p.length-1)*.5;p.forEach((x,v)=>{g.append("tspan").attr("x",d.x).attr("dy",`${v===0?m:1}em`).text(x)})}const y=g.node().getBBox();t.insert("rect","#"+f).classed("er relationshipLabelBox",!0).attr("x",d.x-y.width/2).attr("y",d.y-y.height/2).attr("width",y.width).attr("height",y.height)},"drawRelationshipFromLayout"),j_=l(function(t,e,r,a){Oe=H().er,A.info("Drawing ER diagram");const i=H().securityLevel;let s;i==="sandbox"&&(s=yt("#i"+e));const o=(i==="sandbox"?yt(s.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);Hr.insertMarkers(o,Oe);let h;h=new $s({multigraph:!0,directed:!0,compound:!1}).setGraph({rankdir:Oe.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});const u=Y_(o,a.db.getEntities(),h),d=G_(a.db.getRelationships(),h);tl(h),H_(o,h),d.forEach(function(m){U_(o,m,h,u,a)});const f=Oe.diagramPadding;re.insertTitle(o,"entityTitleText",Oe.titleTopMargin,a.db.getDiagramTitle());const p=o.node().getBBox(),g=p.width+f*2,y=p.height+f*2;ar(o,y,g,Oe.useMaxWidth),o.attr("viewBox",`${p.x-f} ${p.y-f} ${g} ${y}`)},"draw"),X_="28e9f9db-3c8d-5aa5-9faf-44286ae5937c";function z2(t="",e=""){const r=t.replace(z_,"");return`${Sc(e)}${Sc(r)}${Qb(t,X_)}`}l(z2,"generateId");function Sc(t=""){return t.length>0?`${t}-`:""}l(Sc,"strWithHyphen");var K_={setConf:W_,draw:j_},Q_=l(t=>`
  .entityBox {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxOdd {
    fill: ${t.attributeBackgroundColorOdd};
    stroke: ${t.nodeBorder};
  }

  .attributeBoxEven {
    fill:  ${t.attributeBackgroundColorEven};
    stroke: ${t.nodeBorder};
  }

  .relationshipLabelBox {
    fill: ${t.tertiaryColor};
    opacity: 0.7;
    background-color: ${t.tertiaryColor};
      rect {
        opacity: 0.5;
      }
  }

    .relationshipLine {
      stroke: ${t.lineColor};
    }

  .entityTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }    
  #MD_PARENT_START {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  #MD_PARENT_END {
    fill: #f5f5f5 !important;
    stroke: ${t.lineColor} !important;
    stroke-width: 1;
  }
  
`,"getStyles"),Z_=Q_,J_={parser:D_,db:$_,renderer:K_,styles:Z_};const tC=Object.freeze(Object.defineProperty({__proto__:null,diagram:J_},Symbol.toStringTag,{value:"Module"}));function Vn(t,e){var r,a,i;t.accDescr&&((r=e.setAccDescription)==null||r.call(e,t.accDescr)),t.accTitle&&((a=e.setAccTitle)==null||a.call(e,t.accTitle)),t.title&&((i=e.setDiagramTitle)==null||i.call(e,t.title))}l(Vn,"populateCommonDb");var Xa,Xh=(Xa=class{constructor(e){this.init=e,this.records=this.init()}reset(){this.records=this.init()}},l(Xa,"ImperativeState"),Xa),eC=Object.defineProperty,At=(t,e)=>eC(t,"name",{value:e,configurable:!0}),rC="Statement",iC="Architecture";function aC(t){return Jr.isInstance(t,iC)}At(aC,"isArchitecture");var W2="Branch";function sC(t){return Jr.isInstance(t,W2)}At(sC,"isBranch");var nC="Checkout",oC="CherryPicking",q2="Commit";function lC(t){return Jr.isInstance(t,q2)}At(lC,"isCommit");var cC="Common";function hC(t){return Jr.isInstance(t,cC)}At(hC,"isCommon");var Y2="GitGraph";function uC(t){return Jr.isInstance(t,Y2)}At(uC,"isGitGraph");var dC="Info";function pC(t){return Jr.isInstance(t,dC)}At(pC,"isInfo");var H2="Merge";function fC(t){return Jr.isInstance(t,H2)}At(fC,"isMerge");var gC="Packet";function yC(t){return Jr.isInstance(t,gC)}At(yC,"isPacket");var mC="PacketBlock";function xC(t){return Jr.isInstance(t,mC)}At(xC,"isPacketBlock");var bC="Pie";function kC(t){return Jr.isInstance(t,bC)}At(kC,"isPie");var vC="PieSection";function TC(t){return Jr.isInstance(t,vC)}At(TC,"isPieSection");var _C="Direction",Ka,G2=(Ka=class extends l3{getAllTypes(){return["Architecture","Branch","Checkout","CherryPicking","Commit","Common","Direction","Edge","GitGraph","Group","Info","Junction","Merge","Packet","PacketBlock","Pie","PieSection","Service","Statement"]}computeIsSubtype(e,r){switch(e){case W2:case nC:case oC:case q2:case H2:return this.isSubtype(rC,r);case _C:return this.isSubtype(Y2,r);default:return!1}}getReferenceType(e){const r=`${e.container.$type}:${e.property}`;switch(r){default:throw new Error(`${r} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case"Architecture":return{name:"Architecture",properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case"Branch":return{name:"Branch",properties:[{name:"name"},{name:"order"}]};case"Checkout":return{name:"Checkout",properties:[{name:"branch"}]};case"CherryPicking":return{name:"CherryPicking",properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case"Commit":return{name:"Commit",properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Common":return{name:"Common",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Edge":return{name:"Edge",properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case"GitGraph":return{name:"GitGraph",properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Group":return{name:"Group",properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case"Info":return{name:"Info",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Junction":return{name:"Junction",properties:[{name:"id"},{name:"in"}]};case"Merge":return{name:"Merge",properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Packet":return{name:"Packet",properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case"PacketBlock":return{name:"PacketBlock",properties:[{name:"end"},{name:"label"},{name:"start"}]};case"Pie":return{name:"Pie",properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case"PieSection":return{name:"PieSection",properties:[{name:"label"},{name:"value"}]};case"Service":return{name:"Service",properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case"Direction":return{name:"Direction",properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:e,properties:[]}}}},At(Ka,"MermaidAstReflection"),Ka),Jr=new G2,Bd,CC=At(()=>Bd??(Bd=Rn('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","name":"Info","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"InfoGrammar"),Dd,SC=At(()=>Dd??(Dd=Rn(`{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","name":"Packet","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}`)),"PacketGrammar"),Rd,wC=At(()=>Rd??(Rd=Rn('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","name":"Pie","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"PieGrammar"),Id,EC=At(()=>Id??(Id=Rn('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","name":"Architecture","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","fragment":true,"definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"LeftPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"RightPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Arrow","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}')),"ArchitectureGrammar"),Nd,AC=At(()=>Nd??(Nd=Rn(`{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","name":"GitGraph","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`)),"GitGraphGrammar"),LC={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},BC={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},DC={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},RC={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},IC={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},zn={AstReflection:At(()=>new G2,"AstReflection")},NC={Grammar:At(()=>CC(),"Grammar"),LanguageMetaData:At(()=>LC,"LanguageMetaData"),parser:{}},FC={Grammar:At(()=>SC(),"Grammar"),LanguageMetaData:At(()=>BC,"LanguageMetaData"),parser:{}},PC={Grammar:At(()=>wC(),"Grammar"),LanguageMetaData:At(()=>DC,"LanguageMetaData"),parser:{}},OC={Grammar:At(()=>EC(),"Grammar"),LanguageMetaData:At(()=>RC,"LanguageMetaData"),parser:{}},MC={Grammar:At(()=>AC(),"Grammar"),LanguageMetaData:At(()=>IC,"LanguageMetaData"),parser:{}},$C=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,VC=/accTitle[\t ]*:([^\n\r]*)/,zC=/title([\t ][^\n\r]*|)/,WC={ACC_DESCR:$C,ACC_TITLE:VC,TITLE:zC},Qa,Kh=(Qa=class extends c3{runConverter(e,r,a){let i=this.runCommonConverter(e,r,a);return i===void 0&&(i=this.runCustomConverter(e,r,a)),i===void 0?super.runConverter(e,r,a):i}runCommonConverter(e,r,a){const i=WC[e.name];if(i===void 0)return;const s=i.exec(r);if(s!==null){if(s[1]!==void 0)return s[1].trim().replace(/[\t ]{2,}/gm," ");if(s[2]!==void 0)return s[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},At(Qa,"AbstractMermaidValueConverter"),Qa),Za,Qh=(Za=class extends Kh{runCustomConverter(e,r,a){}},At(Za,"CommonValueConverter"),Za),Ja,Ys=(Ja=class extends h3{constructor(e){super(),this.keywords=new Set(e)}buildKeywordTokens(e,r,a){const i=super.buildKeywordTokens(e,r,a);return i.forEach(s=>{this.keywords.has(s.name)&&s.PATTERN!==void 0&&(s.PATTERN=new RegExp(s.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),i}},At(Ja,"AbstractMermaidTokenBuilder"),Ja),ts;ts=class extends Ys{},At(ts,"CommonTokenBuilder");var es,qC=(es=class extends Ys{constructor(){super(["gitGraph"])}},At(es,"GitGraphTokenBuilder"),es),U2={parser:{TokenBuilder:At(()=>new qC,"TokenBuilder"),ValueConverter:At(()=>new Qh,"ValueConverter")}};function j2(t=In){const e=oi(Nn(t),zn),r=oi(Fn({shared:e}),MC,U2);return e.ServiceRegistry.register(r),{shared:e,GitGraph:r}}At(j2,"createGitGraphServices");var rs,YC=(rs=class extends Ys{constructor(){super(["info","showInfo"])}},At(rs,"InfoTokenBuilder"),rs),X2={parser:{TokenBuilder:At(()=>new YC,"TokenBuilder"),ValueConverter:At(()=>new Qh,"ValueConverter")}};function K2(t=In){const e=oi(Nn(t),zn),r=oi(Fn({shared:e}),NC,X2);return e.ServiceRegistry.register(r),{shared:e,Info:r}}At(K2,"createInfoServices");var is,HC=(is=class extends Ys{constructor(){super(["packet-beta"])}},At(is,"PacketTokenBuilder"),is),Q2={parser:{TokenBuilder:At(()=>new HC,"TokenBuilder"),ValueConverter:At(()=>new Qh,"ValueConverter")}};function Z2(t=In){const e=oi(Nn(t),zn),r=oi(Fn({shared:e}),FC,Q2);return e.ServiceRegistry.register(r),{shared:e,Packet:r}}At(Z2,"createPacketServices");var as,GC=(as=class extends Ys{constructor(){super(["pie","showData"])}},At(as,"PieTokenBuilder"),as),ss,UC=(ss=class extends Kh{runCustomConverter(e,r,a){if(e.name==="PIE_SECTION_LABEL")return r.replace(/"/g,"").trim()}},At(ss,"PieValueConverter"),ss),J2={parser:{TokenBuilder:At(()=>new GC,"TokenBuilder"),ValueConverter:At(()=>new UC,"ValueConverter")}};function ty(t=In){const e=oi(Nn(t),zn),r=oi(Fn({shared:e}),PC,J2);return e.ServiceRegistry.register(r),{shared:e,Pie:r}}At(ty,"createPieServices");var ns,jC=(ns=class extends Ys{constructor(){super(["architecture"])}},At(ns,"ArchitectureTokenBuilder"),ns),os,XC=(os=class extends Kh{runCustomConverter(e,r,a){if(e.name==="ARCH_ICON")return r.replace(/[()]/g,"").trim();if(e.name==="ARCH_TEXT_ICON")return r.replace(/["()]/g,"");if(e.name==="ARCH_TITLE")return r.replace(/[[\]]/g,"").trim()}},At(os,"ArchitectureValueConverter"),os),ey={parser:{TokenBuilder:At(()=>new jC,"TokenBuilder"),ValueConverter:At(()=>new XC,"ValueConverter")}};function ry(t=In){const e=oi(Nn(t),zn),r=oi(Fn({shared:e}),OC,ey);return e.ServiceRegistry.register(r),{shared:e,Architecture:r}}At(ry,"createArchitectureServices");var ia={},KC={info:At(async()=>{const{createInfoServices:t}=await fe(async()=>{const{createInfoServices:r}=await Promise.resolve().then(()=>ER);return{createInfoServices:r}},void 0,import.meta.url),e=t().Info.parser.LangiumParser;ia.info=e},"info"),packet:At(async()=>{const{createPacketServices:t}=await fe(async()=>{const{createPacketServices:r}=await Promise.resolve().then(()=>AR);return{createPacketServices:r}},void 0,import.meta.url),e=t().Packet.parser.LangiumParser;ia.packet=e},"packet"),pie:At(async()=>{const{createPieServices:t}=await fe(async()=>{const{createPieServices:r}=await Promise.resolve().then(()=>LR);return{createPieServices:r}},void 0,import.meta.url),e=t().Pie.parser.LangiumParser;ia.pie=e},"pie"),architecture:At(async()=>{const{createArchitectureServices:t}=await fe(async()=>{const{createArchitectureServices:r}=await Promise.resolve().then(()=>BR);return{createArchitectureServices:r}},void 0,import.meta.url),e=t().Architecture.parser.LangiumParser;ia.architecture=e},"architecture"),gitGraph:At(async()=>{const{createGitGraphServices:t}=await fe(async()=>{const{createGitGraphServices:r}=await Promise.resolve().then(()=>DR);return{createGitGraphServices:r}},void 0,import.meta.url),e=t().GitGraph.parser.LangiumParser;ia.gitGraph=e},"gitGraph")};async function Hs(t,e){const r=KC[t];if(!r)throw new Error(`Unknown diagram type: ${t}`);ia[t]||await r();const i=ia[t].parse(e);if(i.lexerErrors.length>0||i.parserErrors.length>0)throw new QC(i);return i.value}At(Hs,"parse");var ls,QC=(ls=class extends Error{constructor(e){const r=e.lexerErrors.map(i=>i.message).join(`
`),a=e.parserErrors.map(i=>i.message).join(`
`);super(`Parsing failed: ${r} ${a}`),this.result=e}},At(ls,"MermaidParseError"),ls),ye={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4},ZC=pe.gitGraph,Ca=l(()=>Bi({...ZC,..._e().gitGraph}),"getConfig"),Tt=new Xh(()=>{const t=Ca(),e=t.mainBranchName,r=t.mainBranchOrder;return{mainBranchName:e,commits:new Map,head:null,branchConfig:new Map([[e,{name:e,order:r}]]),branches:new Map([[e,null]]),currBranch:e,direction:"LR",seq:0,options:{}}});function xl(){return qp({length:7})}l(xl,"getID");function iy(t,e){const r=Object.create(null);return t.reduce((a,i)=>{const s=e(i);return r[s]||(r[s]=!0,a.push(i)),a},[])}l(iy,"uniqBy");var JC=l(function(t){Tt.records.direction=t},"setDirection"),tS=l(function(t){A.debug("options str",t),t=t==null?void 0:t.trim(),t=t||"{}";try{Tt.records.options=JSON.parse(t)}catch(e){A.error("error while parsing gitGraph options",e.message)}},"setOptions"),eS=l(function(){return Tt.records.options},"getOptions"),rS=l(function(t){let e=t.msg,r=t.id;const a=t.type;let i=t.tags;A.info("commit",e,r,a,i),A.debug("Entering commit:",e,r,a,i);const s=Ca();r=mt.sanitizeText(r,s),e=mt.sanitizeText(e,s),i=i==null?void 0:i.map(o=>mt.sanitizeText(o,s));const n={id:r||Tt.records.seq+"-"+xl(),message:e,seq:Tt.records.seq++,type:a??ye.NORMAL,tags:i??[],parents:Tt.records.head==null?[]:[Tt.records.head.id],branch:Tt.records.currBranch};Tt.records.head=n,A.info("main branch",s.mainBranchName),Tt.records.commits.set(n.id,n),Tt.records.branches.set(Tt.records.currBranch,n.id),A.debug("in pushCommit "+n.id)},"commit"),iS=l(function(t){let e=t.name;const r=t.order;if(e=mt.sanitizeText(e,Ca()),Tt.records.branches.has(e))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${e}")`);Tt.records.branches.set(e,Tt.records.head!=null?Tt.records.head.id:null),Tt.records.branchConfig.set(e,{name:e,order:r}),ay(e),A.debug("in createBranch")},"branch"),aS=l(t=>{let e=t.branch,r=t.id;const a=t.type,i=t.tags,s=Ca();e=mt.sanitizeText(e,s),r&&(r=mt.sanitizeText(r,s));const n=Tt.records.branches.get(Tt.records.currBranch),o=Tt.records.branches.get(e),h=n?Tt.records.commits.get(n):void 0,u=o?Tt.records.commits.get(o):void 0;if(h&&u&&h.branch===e)throw new Error(`Cannot merge branch '${e}' into itself.`);if(Tt.records.currBranch===e){const p=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw p.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["branch abc"]},p}if(h===void 0||!h){const p=new Error(`Incorrect usage of "merge". Current branch (${Tt.records.currBranch})has no commits`);throw p.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["commit"]},p}if(!Tt.records.branches.has(e)){const p=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") does not exist");throw p.hash={text:`merge ${e}`,token:`merge ${e}`,expected:[`branch ${e}`]},p}if(u===void 0||!u){const p=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") has no commits");throw p.hash={text:`merge ${e}`,token:`merge ${e}`,expected:['"commit"']},p}if(h===u){const p=new Error('Incorrect usage of "merge". Both branches have same head');throw p.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["branch abc"]},p}if(r&&Tt.records.commits.has(r)){const p=new Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom Id");throw p.hash={text:`merge ${e} ${r} ${a} ${i==null?void 0:i.join(" ")}`,token:`merge ${e} ${r} ${a} ${i==null?void 0:i.join(" ")}`,expected:[`merge ${e} ${r}_UNIQUE ${a} ${i==null?void 0:i.join(" ")}`]},p}const d=o||"",f={id:r||`${Tt.records.seq}-${xl()}`,message:`merged branch ${e} into ${Tt.records.currBranch}`,seq:Tt.records.seq++,parents:Tt.records.head==null?[]:[Tt.records.head.id,d],branch:Tt.records.currBranch,type:ye.MERGE,customType:a,customId:!!r,tags:i??[]};Tt.records.head=f,Tt.records.commits.set(f.id,f),Tt.records.branches.set(Tt.records.currBranch,f.id),A.debug(Tt.records.branches),A.debug("in mergeBranch")},"merge"),sS=l(function(t){let e=t.id,r=t.targetId,a=t.tags,i=t.parent;A.debug("Entering cherryPick:",e,r,a);const s=Ca();if(e=mt.sanitizeText(e,s),r=mt.sanitizeText(r,s),a=a==null?void 0:a.map(h=>mt.sanitizeText(h,s)),i=mt.sanitizeText(i,s),!e||!Tt.records.commits.has(e)){const h=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw h.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},h}const n=Tt.records.commits.get(e);if(n===void 0||!n)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(i&&!(Array.isArray(n.parents)&&n.parents.includes(i)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");const o=n.branch;if(n.type===ye.MERGE&&!i)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!Tt.records.commits.has(r)){if(o===Tt.records.currBranch){const f=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw f.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},f}const h=Tt.records.branches.get(Tt.records.currBranch);if(h===void 0||!h){const f=new Error(`Incorrect usage of "cherry-pick". Current branch (${Tt.records.currBranch})has no commits`);throw f.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},f}const u=Tt.records.commits.get(h);if(u===void 0||!u){const f=new Error(`Incorrect usage of "cherry-pick". Current branch (${Tt.records.currBranch})has no commits`);throw f.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},f}const d={id:Tt.records.seq+"-"+xl(),message:`cherry-picked ${n==null?void 0:n.message} into ${Tt.records.currBranch}`,seq:Tt.records.seq++,parents:Tt.records.head==null?[]:[Tt.records.head.id,n.id],branch:Tt.records.currBranch,type:ye.CHERRY_PICK,tags:a?a.filter(Boolean):[`cherry-pick:${n.id}${n.type===ye.MERGE?`|parent:${i}`:""}`]};Tt.records.head=d,Tt.records.commits.set(d.id,d),Tt.records.branches.set(Tt.records.currBranch,d.id),A.debug(Tt.records.branches),A.debug("in cherryPick")}},"cherryPick"),ay=l(function(t){if(t=mt.sanitizeText(t,Ca()),Tt.records.branches.has(t)){Tt.records.currBranch=t;const e=Tt.records.branches.get(Tt.records.currBranch);e===void 0||!e?Tt.records.head=null:Tt.records.head=Tt.records.commits.get(e)??null}else{const e=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${t}")`);throw e.hash={text:`checkout ${t}`,token:`checkout ${t}`,expected:[`branch ${t}`]},e}},"checkout");function wc(t,e,r){const a=t.indexOf(e);a===-1?t.push(r):t.splice(a,1,r)}l(wc,"upsert");function Zh(t){const e=t.reduce((i,s)=>i.seq>s.seq?i:s,t[0]);let r="";t.forEach(function(i){i===e?r+="	*":r+="	|"});const a=[r,e.id,e.seq];for(const i in Tt.records.branches)Tt.records.branches.get(i)===e.id&&a.push(i);if(A.debug(a.join(" ")),e.parents&&e.parents.length==2&&e.parents[0]&&e.parents[1]){const i=Tt.records.commits.get(e.parents[0]);wc(t,e,i),e.parents[1]&&t.push(Tt.records.commits.get(e.parents[1]))}else{if(e.parents.length==0)return;if(e.parents[0]){const i=Tt.records.commits.get(e.parents[0]);wc(t,e,i)}}t=iy(t,i=>i.id),Zh(t)}l(Zh,"prettyPrintCommitHistory");var nS=l(function(){A.debug(Tt.records.commits);const t=sy()[0];Zh([t])},"prettyPrint"),oS=l(function(){Tt.reset(),Ye()},"clear"),lS=l(function(){return[...Tt.records.branchConfig.values()].map((e,r)=>e.order!==null&&e.order!==void 0?e:{...e,order:parseFloat(`0.${r}`)}).sort((e,r)=>(e.order??0)-(r.order??0)).map(({name:e})=>({name:e}))},"getBranchesAsObjArray"),cS=l(function(){return Tt.records.branches},"getBranches"),hS=l(function(){return Tt.records.commits},"getCommits"),sy=l(function(){const t=[...Tt.records.commits.values()];return t.forEach(function(e){A.debug(e.id)}),t.sort((e,r)=>e.seq-r.seq),t},"getCommitsArray"),uS=l(function(){return Tt.records.currBranch},"getCurrentBranch"),dS=l(function(){return Tt.records.direction},"getDirection"),pS=l(function(){return Tt.records.head},"getHead"),ny={commitType:ye,getConfig:Ca,setDirection:JC,setOptions:tS,getOptions:eS,commit:rS,branch:iS,merge:aS,cherryPick:sS,checkout:ay,prettyPrint:nS,clear:oS,getBranchesAsObjArray:lS,getBranches:cS,getCommits:hS,getCommitsArray:sy,getCurrentBranch:uS,getDirection:dS,getHead:pS,setAccTitle:He,getAccTitle:Ke,getAccDescription:Ze,setAccDescription:Qe,setDiagramTitle:dr,getDiagramTitle:Je},fS=l((t,e)=>{Vn(t,e),t.dir&&e.setDirection(t.dir);for(const r of t.statements)gS(r,e)},"populate"),gS=l((t,e)=>{const a={Commit:l(i=>e.commit(yS(i)),"Commit"),Branch:l(i=>e.branch(mS(i)),"Branch"),Merge:l(i=>e.merge(xS(i)),"Merge"),Checkout:l(i=>e.checkout(bS(i)),"Checkout"),CherryPicking:l(i=>e.cherryPick(kS(i)),"CherryPicking")}[t.$type];a?a(t):A.error(`Unknown statement type: ${t.$type}`)},"parseStatement"),yS=l(t=>({id:t.id,msg:t.message??"",type:t.type!==void 0?ye[t.type]:ye.NORMAL,tags:t.tags??void 0}),"parseCommit"),mS=l(t=>({name:t.name,order:t.order??0}),"parseBranch"),xS=l(t=>({branch:t.branch,id:t.id??"",type:t.type!==void 0?ye[t.type]:void 0,tags:t.tags??void 0}),"parseMerge"),bS=l(t=>t.branch,"parseCheckout"),kS=l(t=>{var r;return{id:t.id,targetId:"",tags:((r=t.tags)==null?void 0:r.length)===0?void 0:t.tags,parent:t.parent}},"parseCherryPicking"),vS={parse:l(async t=>{const e=await Hs("gitGraph",t);A.debug(e),fS(e,ny)},"parse")},zl=H(),Ne=zl==null?void 0:zl.gitGraph,Mi=10,$i=40,ri=4,vi=2,aa=8,kr=new Map,Tr=new Map,Fo=30,Js=new Map,Po=[],Pi=0,ue="LR",TS=l(()=>{kr.clear(),Tr.clear(),Js.clear(),Pi=0,Po=[],ue="LR"},"clear"),oy=l(t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","text");return(typeof t=="string"?t.split(/\\n|\n|<br\s*\/?>/gi):t).forEach(a=>{const i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),i.setAttribute("class","row"),i.textContent=a.trim(),e.appendChild(i)}),e},"drawText"),ly=l(t=>{let e,r,a;return ue==="BT"?(r=l((i,s)=>i<=s,"comparisonFunc"),a=1/0):(r=l((i,s)=>i>=s,"comparisonFunc"),a=0),t.forEach(i=>{var n,o;const s=ue==="TB"||ue=="BT"?(n=Tr.get(i))==null?void 0:n.y:(o=Tr.get(i))==null?void 0:o.x;s!==void 0&&r(s,a)&&(e=i,a=s)}),e},"findClosestParent"),_S=l(t=>{let e="",r=1/0;return t.forEach(a=>{const i=Tr.get(a).y;i<=r&&(e=a,r=i)}),e||void 0},"findClosestParentBT"),CS=l((t,e,r)=>{let a=r,i=r;const s=[];t.forEach(n=>{const o=e.get(n);if(!o)throw new Error(`Commit not found for key ${n}`);o.parents.length?(a=wS(o),i=Math.max(a,i)):s.push(o),ES(o,a)}),a=i,s.forEach(n=>{AS(n,a,r)}),t.forEach(n=>{const o=e.get(n);if(o!=null&&o.parents.length){const h=_S(o.parents);a=Tr.get(h).y-$i,a<=i&&(i=a);const u=kr.get(o.branch).pos,d=a-Mi;Tr.set(o.id,{x:u,y:d})}})},"setParallelBTPos"),SS=l(t=>{var a;const e=ly(t.parents.filter(i=>i!==null));if(!e)throw new Error(`Closest parent not found for commit ${t.id}`);const r=(a=Tr.get(e))==null?void 0:a.y;if(r===void 0)throw new Error(`Closest parent position not found for commit ${t.id}`);return r},"findClosestParentPos"),wS=l(t=>SS(t)+$i,"calculateCommitPosition"),ES=l((t,e)=>{const r=kr.get(t.branch);if(!r)throw new Error(`Branch not found for commit ${t.id}`);const a=r.pos,i=e+Mi;return Tr.set(t.id,{x:a,y:i}),{x:a,y:i}},"setCommitPosition"),AS=l((t,e,r)=>{const a=kr.get(t.branch);if(!a)throw new Error(`Branch not found for commit ${t.id}`);const i=e+r,s=a.pos;Tr.set(t.id,{x:s,y:i})},"setRootPosition"),LS=l((t,e,r,a,i,s)=>{if(s===ye.HIGHLIGHT)t.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${e.id} commit-highlight${i%aa} ${a}-outer`),t.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${e.id} commit${i%aa} ${a}-inner`);else if(s===ye.CHERRY_PICK)t.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${e.id} ${a}`),t.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${e.id} ${a}`),t.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${e.id} ${a}`),t.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${e.id} ${a}`),t.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${e.id} ${a}`);else{const n=t.append("circle");if(n.attr("cx",r.x),n.attr("cy",r.y),n.attr("r",e.type===ye.MERGE?9:10),n.attr("class",`commit ${e.id} commit${i%aa}`),s===ye.MERGE){const o=t.append("circle");o.attr("cx",r.x),o.attr("cy",r.y),o.attr("r",6),o.attr("class",`commit ${a} ${e.id} commit${i%aa}`)}s===ye.REVERSE&&t.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${a} ${e.id} commit${i%aa}`)}},"drawCommitBullet"),BS=l((t,e,r,a)=>{var i;if(e.type!==ye.CHERRY_PICK&&(e.customId&&e.type===ye.MERGE||e.type!==ye.MERGE)&&(Ne!=null&&Ne.showCommitLabel)){const s=t.append("g"),n=s.insert("rect").attr("class","commit-label-bkg"),o=s.append("text").attr("x",a).attr("y",r.y+25).attr("class","commit-label").text(e.id),h=(i=o.node())==null?void 0:i.getBBox();if(h&&(n.attr("x",r.posWithOffset-h.width/2-vi).attr("y",r.y+13.5).attr("width",h.width+2*vi).attr("height",h.height+2*vi),ue==="TB"||ue==="BT"?(n.attr("x",r.x-(h.width+4*ri+5)).attr("y",r.y-12),o.attr("x",r.x-(h.width+4*ri)).attr("y",r.y+h.height-12)):o.attr("x",r.posWithOffset-h.width/2),Ne.rotateCommitLabel))if(ue==="TB"||ue==="BT")o.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),n.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{const u=-7.5-(h.width+10)/25*9.5,d=10+h.width/25*8.5;s.attr("transform","translate("+u+", "+d+") rotate(-45, "+a+", "+r.y+")")}}},"drawCommitLabel"),DS=l((t,e,r,a)=>{var i;if(e.tags.length>0){let s=0,n=0,o=0;const h=[];for(const u of e.tags.reverse()){const d=t.insert("polygon"),f=t.append("circle"),p=t.append("text").attr("y",r.y-16-s).attr("class","tag-label").text(u),g=(i=p.node())==null?void 0:i.getBBox();if(!g)throw new Error("Tag bbox not found");n=Math.max(n,g.width),o=Math.max(o,g.height),p.attr("x",r.posWithOffset-g.width/2),h.push({tag:p,hole:f,rect:d,yOffset:s}),s+=20}for(const{tag:u,hole:d,rect:f,yOffset:p}of h){const g=o/2,y=r.y-19.2-p;if(f.attr("class","tag-label-bkg").attr("points",`
      ${a-n/2-ri/2},${y+vi}  
      ${a-n/2-ri/2},${y-vi}
      ${r.posWithOffset-n/2-ri},${y-g-vi}
      ${r.posWithOffset+n/2+ri},${y-g-vi}
      ${r.posWithOffset+n/2+ri},${y+g+vi}
      ${r.posWithOffset-n/2-ri},${y+g+vi}`),d.attr("cy",y).attr("cx",a-n/2+ri/2).attr("r",1.5).attr("class","tag-hole"),ue==="TB"||ue==="BT"){const m=a+p;f.attr("class","tag-label-bkg").attr("points",`
        ${r.x},${m+2}
        ${r.x},${m-2}
        ${r.x+Mi},${m-g-2}
        ${r.x+Mi+n+4},${m-g-2}
        ${r.x+Mi+n+4},${m+g+2}
        ${r.x+Mi},${m+g+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+a+")"),d.attr("cx",r.x+ri/2).attr("cy",m).attr("transform","translate(12,12) rotate(45, "+r.x+","+a+")"),u.attr("x",r.x+5).attr("y",m+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+a+")")}}}},"drawCommitTags"),RS=l(t=>{switch(t.customType??t.type){case ye.NORMAL:return"commit-normal";case ye.REVERSE:return"commit-reverse";case ye.HIGHLIGHT:return"commit-highlight";case ye.MERGE:return"commit-merge";case ye.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}},"getCommitClassType"),IS=l((t,e,r,a)=>{const i={x:0,y:0};if(t.parents.length>0){const s=ly(t.parents);if(s){const n=a.get(s)??i;return e==="TB"?n.y+$i:e==="BT"?(a.get(t.id)??i).y-$i:n.x+$i}}else return e==="TB"?Fo:e==="BT"?(a.get(t.id)??i).y-$i:0;return 0},"calculatePosition"),NS=l((t,e,r)=>{var n,o;const a=ue==="BT"&&r?e:e+Mi,i=ue==="TB"||ue==="BT"?a:(n=kr.get(t.branch))==null?void 0:n.pos,s=ue==="TB"||ue==="BT"?(o=kr.get(t.branch))==null?void 0:o.pos:a;if(s===void 0||i===void 0)throw new Error(`Position were undefined for commit ${t.id}`);return{x:s,y:i,posWithOffset:a}},"getCommitPosition"),Fd=l((t,e,r)=>{if(!Ne)throw new Error("GitGraph config not found");const a=t.append("g").attr("class","commit-bullets"),i=t.append("g").attr("class","commit-labels");let s=ue==="TB"||ue==="BT"?Fo:0;const n=[...e.keys()],o=(Ne==null?void 0:Ne.parallelCommits)??!1,h=l((d,f)=>{var y,m;const p=(y=e.get(d))==null?void 0:y.seq,g=(m=e.get(f))==null?void 0:m.seq;return p!==void 0&&g!==void 0?p-g:0},"sortKeys");let u=n.sort(h);ue==="BT"&&(o&&CS(u,e,s),u=u.reverse()),u.forEach(d=>{var g;const f=e.get(d);if(!f)throw new Error(`Commit not found for key ${d}`);o&&(s=IS(f,ue,s,Tr));const p=NS(f,s,o);if(r){const y=RS(f),m=f.customType??f.type,x=((g=kr.get(f.branch))==null?void 0:g.index)??0;LS(a,f,p,y,x,m),BS(i,f,p,s),DS(i,f,p,s)}ue==="TB"||ue==="BT"?Tr.set(f.id,{x:p.x,y:p.posWithOffset}):Tr.set(f.id,{x:p.posWithOffset,y:p.y}),s=ue==="BT"&&o?s+$i:s+$i+Mi,s>Pi&&(Pi=s)})},"drawCommits"),FS=l((t,e,r,a,i)=>{const n=(ue==="TB"||ue==="BT"?r.x<a.x:r.y<a.y)?e.branch:t.branch,o=l(u=>u.branch===n,"isOnBranchToGetCurve"),h=l(u=>u.seq>t.seq&&u.seq<e.seq,"isBetweenCommits");return[...i.values()].some(u=>h(u)&&o(u))},"shouldRerouteArrow"),tn=l((t,e,r=0)=>{const a=t+Math.abs(t-e)/2;if(r>5)return a;if(Po.every(n=>Math.abs(n-a)>=10))return Po.push(a),a;const s=Math.abs(t-e);return tn(t,e-s/5,r+1)},"findLane"),PS=l((t,e,r,a)=>{var g,y,m,x,v;const i=Tr.get(e.id),s=Tr.get(r.id);if(i===void 0||s===void 0)throw new Error(`Commit positions not found for commits ${e.id} and ${r.id}`);const n=FS(e,r,i,s,a);let o="",h="",u=0,d=0,f=(g=kr.get(r.branch))==null?void 0:g.index;r.type===ye.MERGE&&e.id!==r.parents[0]&&(f=(y=kr.get(e.branch))==null?void 0:y.index);let p;if(n){o="A 10 10, 0, 0, 0,",h="A 10 10, 0, 0, 1,",u=10,d=10;const T=i.y<s.y?tn(i.y,s.y):tn(s.y,i.y),I=i.x<s.x?tn(i.x,s.x):tn(s.x,i.x);ue==="TB"?i.x<s.x?p=`M ${i.x} ${i.y} L ${I-u} ${i.y} ${h} ${I} ${i.y+d} L ${I} ${s.y-u} ${o} ${I+d} ${s.y} L ${s.x} ${s.y}`:(f=(m=kr.get(e.branch))==null?void 0:m.index,p=`M ${i.x} ${i.y} L ${I+u} ${i.y} ${o} ${I} ${i.y+d} L ${I} ${s.y-u} ${h} ${I-d} ${s.y} L ${s.x} ${s.y}`):ue==="BT"?i.x<s.x?p=`M ${i.x} ${i.y} L ${I-u} ${i.y} ${o} ${I} ${i.y-d} L ${I} ${s.y+u} ${h} ${I+d} ${s.y} L ${s.x} ${s.y}`:(f=(x=kr.get(e.branch))==null?void 0:x.index,p=`M ${i.x} ${i.y} L ${I+u} ${i.y} ${h} ${I} ${i.y-d} L ${I} ${s.y+u} ${o} ${I-d} ${s.y} L ${s.x} ${s.y}`):i.y<s.y?p=`M ${i.x} ${i.y} L ${i.x} ${T-u} ${o} ${i.x+d} ${T} L ${s.x-u} ${T} ${h} ${s.x} ${T+d} L ${s.x} ${s.y}`:(f=(v=kr.get(e.branch))==null?void 0:v.index,p=`M ${i.x} ${i.y} L ${i.x} ${T+u} ${h} ${i.x+d} ${T} L ${s.x-u} ${T} ${o} ${s.x} ${T-d} L ${s.x} ${s.y}`)}else o="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",u=20,d=20,ue==="TB"?(i.x<s.x&&(r.type===ye.MERGE&&e.id!==r.parents[0]?p=`M ${i.x} ${i.y} L ${i.x} ${s.y-u} ${o} ${i.x+d} ${s.y} L ${s.x} ${s.y}`:p=`M ${i.x} ${i.y} L ${s.x-u} ${i.y} ${h} ${s.x} ${i.y+d} L ${s.x} ${s.y}`),i.x>s.x&&(o="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",u=20,d=20,r.type===ye.MERGE&&e.id!==r.parents[0]?p=`M ${i.x} ${i.y} L ${i.x} ${s.y-u} ${h} ${i.x-d} ${s.y} L ${s.x} ${s.y}`:p=`M ${i.x} ${i.y} L ${s.x+u} ${i.y} ${o} ${s.x} ${i.y+d} L ${s.x} ${s.y}`),i.x===s.x&&(p=`M ${i.x} ${i.y} L ${s.x} ${s.y}`)):ue==="BT"?(i.x<s.x&&(r.type===ye.MERGE&&e.id!==r.parents[0]?p=`M ${i.x} ${i.y} L ${i.x} ${s.y+u} ${h} ${i.x+d} ${s.y} L ${s.x} ${s.y}`:p=`M ${i.x} ${i.y} L ${s.x-u} ${i.y} ${o} ${s.x} ${i.y-d} L ${s.x} ${s.y}`),i.x>s.x&&(o="A 20 20, 0, 0, 0,",h="A 20 20, 0, 0, 1,",u=20,d=20,r.type===ye.MERGE&&e.id!==r.parents[0]?p=`M ${i.x} ${i.y} L ${i.x} ${s.y+u} ${o} ${i.x-d} ${s.y} L ${s.x} ${s.y}`:p=`M ${i.x} ${i.y} L ${s.x-u} ${i.y} ${o} ${s.x} ${i.y-d} L ${s.x} ${s.y}`),i.x===s.x&&(p=`M ${i.x} ${i.y} L ${s.x} ${s.y}`)):(i.y<s.y&&(r.type===ye.MERGE&&e.id!==r.parents[0]?p=`M ${i.x} ${i.y} L ${s.x-u} ${i.y} ${h} ${s.x} ${i.y+d} L ${s.x} ${s.y}`:p=`M ${i.x} ${i.y} L ${i.x} ${s.y-u} ${o} ${i.x+d} ${s.y} L ${s.x} ${s.y}`),i.y>s.y&&(r.type===ye.MERGE&&e.id!==r.parents[0]?p=`M ${i.x} ${i.y} L ${s.x-u} ${i.y} ${o} ${s.x} ${i.y-d} L ${s.x} ${s.y}`:p=`M ${i.x} ${i.y} L ${i.x} ${s.y+u} ${h} ${i.x+d} ${s.y} L ${s.x} ${s.y}`),i.y===s.y&&(p=`M ${i.x} ${i.y} L ${s.x} ${s.y}`));if(p===void 0)throw new Error("Line definition not found");t.append("path").attr("d",p).attr("class","arrow arrow"+f%aa)},"drawArrow"),OS=l((t,e)=>{const r=t.append("g").attr("class","commit-arrows");[...e.keys()].forEach(a=>{const i=e.get(a);i.parents&&i.parents.length>0&&i.parents.forEach(s=>{PS(r,e.get(s),i,e)})})},"drawArrows"),MS=l((t,e)=>{const r=t.append("g");e.forEach((a,i)=>{var y;const s=i%aa,n=(y=kr.get(a.name))==null?void 0:y.pos;if(n===void 0)throw new Error(`Position not found for branch ${a.name}`);const o=r.append("line");o.attr("x1",0),o.attr("y1",n),o.attr("x2",Pi),o.attr("y2",n),o.attr("class","branch branch"+s),ue==="TB"?(o.attr("y1",Fo),o.attr("x1",n),o.attr("y2",Pi),o.attr("x2",n)):ue==="BT"&&(o.attr("y1",Pi),o.attr("x1",n),o.attr("y2",Fo),o.attr("x2",n)),Po.push(n);const h=a.name,u=oy(h),d=r.insert("rect"),p=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+s);p.node().appendChild(u);const g=u.getBBox();d.attr("class","branchLabelBkg label"+s).attr("rx",4).attr("ry",4).attr("x",-g.width-4-((Ne==null?void 0:Ne.rotateCommitLabel)===!0?30:0)).attr("y",-g.height/2+8).attr("width",g.width+18).attr("height",g.height+4),p.attr("transform","translate("+(-g.width-14-((Ne==null?void 0:Ne.rotateCommitLabel)===!0?30:0))+", "+(n-g.height/2-1)+")"),ue==="TB"?(d.attr("x",n-g.width/2-10).attr("y",0),p.attr("transform","translate("+(n-g.width/2-5)+", 0)")):ue==="BT"?(d.attr("x",n-g.width/2-10).attr("y",Pi),p.attr("transform","translate("+(n-g.width/2-5)+", "+Pi+")")):d.attr("transform","translate(-19, "+(n-g.height/2)+")")})},"drawBranches"),$S=l(function(t,e,r,a,i){return kr.set(t,{pos:e,index:r}),e+=50+(i?40:0)+(ue==="TB"||ue==="BT"?a.width/2:0),e},"setBranchPosition"),VS=l(function(t,e,r,a){if(TS(),A.debug("in gitgraph renderer",t+`
`,"id:",e,r),!Ne)throw new Error("GitGraph config not found");const i=Ne.rotateCommitLabel??!1,s=a.db;Js=s.getCommits();const n=s.getBranchesAsObjArray();ue=s.getDirection();const o=yt(`[id="${e}"]`);let h=0;n.forEach((u,d)=>{var x;const f=oy(u.name),p=o.append("g"),g=p.insert("g").attr("class","branchLabel"),y=g.insert("g").attr("class","label branch-label");(x=y.node())==null||x.appendChild(f);const m=f.getBBox();h=$S(u.name,h,d,m,i),y.remove(),g.remove(),p.remove()}),Fd(o,Js,!1),Ne.showBranches&&MS(o,n),OS(o,Js),Fd(o,Js,!0),re.insertTitle(o,"gitTitleText",Ne.titleTopMargin??0,s.getDiagramTitle()),K1(void 0,o,Ne.diagramPadding,Ne.useMaxWidth)},"draw"),zS={draw:VS},WS=l(t=>`
  .commit-id,
  .commit-msg,
  .branch-label {
    fill: lightgrey;
    color: lightgrey;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
  }
  ${[0,1,2,3,4,5,6,7].map(e=>`
        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }
        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }
        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }
        .label${e}  { fill: ${t["git"+e]}; }
        .arrow${e} { stroke: ${t["git"+e]}; }
        `).join(`
`)}

  .branch {
    stroke-width: 1;
    stroke: ${t.lineColor};
    stroke-dasharray: 2;
  }
  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}
  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }
  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}
  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }
  .tag-hole { fill: ${t.textColor}; }

  .commit-merge {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }
  .commit-reverse {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
    stroke-width: 3;
  }
  .commit-highlight-outer {
  }
  .commit-highlight-inner {
    stroke: ${t.primaryColor};
    fill: ${t.primaryColor};
  }

  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}
  .gitTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,"getStyles"),qS=WS,YS={parser:vS,db:ny,renderer:zS,styles:qS};const HS=Object.freeze(Object.defineProperty({__proto__:null,diagram:YS},Symbol.toStringTag,{value:"Module"}));var Ec=function(){var t=l(function(P,O,V,F){for(V=V||{},F=P.length;F--;V[P[F]]=O);return V},"o"),e=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],r=[1,26],a=[1,27],i=[1,28],s=[1,29],n=[1,30],o=[1,31],h=[1,32],u=[1,33],d=[1,34],f=[1,9],p=[1,10],g=[1,11],y=[1,12],m=[1,13],x=[1,14],v=[1,15],T=[1,16],I=[1,19],B=[1,20],_=[1,21],w=[1,22],D=[1,23],S=[1,25],b=[1,35],C={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:l(function(O,V,F,M,R,L,q){var N=L.length-1;switch(R){case 1:return L[N-1];case 2:this.$=[];break;case 3:L[N-1].push(L[N]),this.$=L[N-1];break;case 4:case 5:this.$=L[N];break;case 6:case 7:this.$=[];break;case 8:M.setWeekday("monday");break;case 9:M.setWeekday("tuesday");break;case 10:M.setWeekday("wednesday");break;case 11:M.setWeekday("thursday");break;case 12:M.setWeekday("friday");break;case 13:M.setWeekday("saturday");break;case 14:M.setWeekday("sunday");break;case 15:M.setWeekend("friday");break;case 16:M.setWeekend("saturday");break;case 17:M.setDateFormat(L[N].substr(11)),this.$=L[N].substr(11);break;case 18:M.enableInclusiveEndDates(),this.$=L[N].substr(18);break;case 19:M.TopAxis(),this.$=L[N].substr(8);break;case 20:M.setAxisFormat(L[N].substr(11)),this.$=L[N].substr(11);break;case 21:M.setTickInterval(L[N].substr(13)),this.$=L[N].substr(13);break;case 22:M.setExcludes(L[N].substr(9)),this.$=L[N].substr(9);break;case 23:M.setIncludes(L[N].substr(9)),this.$=L[N].substr(9);break;case 24:M.setTodayMarker(L[N].substr(12)),this.$=L[N].substr(12);break;case 27:M.setDiagramTitle(L[N].substr(6)),this.$=L[N].substr(6);break;case 28:this.$=L[N].trim(),M.setAccTitle(this.$);break;case 29:case 30:this.$=L[N].trim(),M.setAccDescription(this.$);break;case 31:M.addSection(L[N].substr(8)),this.$=L[N].substr(8);break;case 33:M.addTask(L[N-1],L[N]),this.$="task";break;case 34:this.$=L[N-1],M.setClickEvent(L[N-1],L[N],null);break;case 35:this.$=L[N-2],M.setClickEvent(L[N-2],L[N-1],L[N]);break;case 36:this.$=L[N-2],M.setClickEvent(L[N-2],L[N-1],null),M.setLink(L[N-2],L[N]);break;case 37:this.$=L[N-3],M.setClickEvent(L[N-3],L[N-2],L[N-1]),M.setLink(L[N-3],L[N]);break;case 38:this.$=L[N-2],M.setClickEvent(L[N-2],L[N],null),M.setLink(L[N-2],L[N-1]);break;case 39:this.$=L[N-3],M.setClickEvent(L[N-3],L[N-1],L[N]),M.setLink(L[N-3],L[N-2]);break;case 40:this.$=L[N-1],M.setLink(L[N-1],L[N]);break;case 41:case 47:this.$=L[N-1]+" "+L[N];break;case 42:case 43:case 45:this.$=L[N-2]+" "+L[N-1]+" "+L[N];break;case 44:case 46:this.$=L[N-3]+" "+L[N-2]+" "+L[N-1]+" "+L[N];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:r,13:a,14:i,15:s,16:n,17:o,18:h,19:18,20:u,21:d,22:f,23:p,24:g,25:y,26:m,27:x,28:v,29:T,30:I,31:B,33:_,35:w,36:D,37:24,38:S,40:b},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:36,11:17,12:r,13:a,14:i,15:s,16:n,17:o,18:h,19:18,20:u,21:d,22:f,23:p,24:g,25:y,26:m,27:x,28:v,29:T,30:I,31:B,33:_,35:w,36:D,37:24,38:S,40:b},t(e,[2,5]),t(e,[2,6]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),t(e,[2,25]),t(e,[2,26]),t(e,[2,27]),{32:[1,37]},{34:[1,38]},t(e,[2,30]),t(e,[2,31]),t(e,[2,32]),{39:[1,39]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),{41:[1,40],43:[1,41]},t(e,[2,4]),t(e,[2,28]),t(e,[2,29]),t(e,[2,33]),t(e,[2,34],{42:[1,42],43:[1,43]}),t(e,[2,40],{41:[1,44]}),t(e,[2,35],{43:[1,45]}),t(e,[2,36]),t(e,[2,38],{42:[1,46]}),t(e,[2,37]),t(e,[2,39])],defaultActions:{},parseError:l(function(O,V){if(V.recoverable)this.trace(O);else{var F=new Error(O);throw F.hash=V,F}},"parseError"),parse:l(function(O){var V=this,F=[0],M=[],R=[null],L=[],q=this.table,N="",j=0,it=0,tt=2,pt=1,K=L.slice.call(arguments,1),nt=Object.create(this.lexer),ht={yy:{}};for(var st in this.yy)Object.prototype.hasOwnProperty.call(this.yy,st)&&(ht.yy[st]=this.yy[st]);nt.setInput(O,ht.yy),ht.yy.lexer=nt,ht.yy.parser=this,typeof nt.yylloc>"u"&&(nt.yylloc={});var rt=nt.yylloc;L.push(rt);var Z=nt.options&&nt.options.ranges;typeof ht.yy.parseError=="function"?this.parseError=ht.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function at(ut){F.length=F.length-2*ut,R.length=R.length-ut,L.length=L.length-ut}l(at,"popStack");function Q(){var ut;return ut=M.pop()||nt.lex()||pt,typeof ut!="number"&&(ut instanceof Array&&(M=ut,ut=M.pop()),ut=V.symbols_[ut]||ut),ut}l(Q,"lex");for(var lt,z,Et,X,vt={},Ct,Yt,Ut,ae;;){if(z=F[F.length-1],this.defaultActions[z]?Et=this.defaultActions[z]:((lt===null||typeof lt>"u")&&(lt=Q()),Et=q[z]&&q[z][lt]),typeof Et>"u"||!Et.length||!Et[0]){var qt="";ae=[];for(Ct in q[z])this.terminals_[Ct]&&Ct>tt&&ae.push("'"+this.terminals_[Ct]+"'");nt.showPosition?qt="Parse error on line "+(j+1)+`:
`+nt.showPosition()+`
Expecting `+ae.join(", ")+", got '"+(this.terminals_[lt]||lt)+"'":qt="Parse error on line "+(j+1)+": Unexpected "+(lt==pt?"end of input":"'"+(this.terminals_[lt]||lt)+"'"),this.parseError(qt,{text:nt.match,token:this.terminals_[lt]||lt,line:nt.yylineno,loc:rt,expected:ae})}if(Et[0]instanceof Array&&Et.length>1)throw new Error("Parse Error: multiple actions possible at state: "+z+", token: "+lt);switch(Et[0]){case 1:F.push(lt),R.push(nt.yytext),L.push(nt.yylloc),F.push(Et[1]),lt=null,it=nt.yyleng,N=nt.yytext,j=nt.yylineno,rt=nt.yylloc;break;case 2:if(Yt=this.productions_[Et[1]][1],vt.$=R[R.length-Yt],vt._$={first_line:L[L.length-(Yt||1)].first_line,last_line:L[L.length-1].last_line,first_column:L[L.length-(Yt||1)].first_column,last_column:L[L.length-1].last_column},Z&&(vt._$.range=[L[L.length-(Yt||1)].range[0],L[L.length-1].range[1]]),X=this.performAction.apply(vt,[N,it,j,ht.yy,Et[1],R,L].concat(K)),typeof X<"u")return X;Yt&&(F=F.slice(0,-1*Yt*2),R=R.slice(0,-1*Yt),L=L.slice(0,-1*Yt)),F.push(this.productions_[Et[1]][0]),R.push(vt.$),L.push(vt._$),Ut=q[F[F.length-2]][F[F.length-1]],F.push(Ut);break;case 3:return!0}}return!0},"parse")},k=function(){var P={EOF:1,parseError:l(function(V,F){if(this.yy.parser)this.yy.parser.parseError(V,F);else throw new Error(V)},"parseError"),setInput:l(function(O,V){return this.yy=V||this.yy||{},this._input=O,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var O=this._input[0];this.yytext+=O,this.yyleng++,this.offset++,this.match+=O,this.matched+=O;var V=O.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),O},"input"),unput:l(function(O){var V=O.length,F=O.split(/(?:\r\n?|\n)/g);this._input=O+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var M=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),F.length-1&&(this.yylineno-=F.length-1);var R=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:F?(F.length===M.length?this.yylloc.first_column:0)+M[M.length-F.length].length-F[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[R[0],R[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(O){this.unput(this.match.slice(O))},"less"),pastInput:l(function(){var O=this.matched.substr(0,this.matched.length-this.match.length);return(O.length>20?"...":"")+O.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var O=this.match;return O.length<20&&(O+=this._input.substr(0,20-O.length)),(O.substr(0,20)+(O.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var O=this.pastInput(),V=new Array(O.length+1).join("-");return O+this.upcomingInput()+`
`+V+"^"},"showPosition"),test_match:l(function(O,V){var F,M,R;if(this.options.backtrack_lexer&&(R={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(R.yylloc.range=this.yylloc.range.slice(0))),M=O[0].match(/(?:\r\n?|\n).*/g),M&&(this.yylineno+=M.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:M?M[M.length-1].length-M[M.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+O[0].length},this.yytext+=O[0],this.match+=O[0],this.matches=O,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(O[0].length),this.matched+=O[0],F=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),F)return F;if(this._backtrack){for(var L in R)this[L]=R[L];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var O,V,F,M;this._more||(this.yytext="",this.match="");for(var R=this._currentRules(),L=0;L<R.length;L++)if(F=this._input.match(this.rules[R[L]]),F&&(!V||F[0].length>V[0].length)){if(V=F,M=L,this.options.backtrack_lexer){if(O=this.test_match(F,R[L]),O!==!1)return O;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(O=this.test_match(V,R[M]),O!==!1?O:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var V=this.next();return V||this.lex()},"lex"),begin:l(function(V){this.conditionStack.push(V)},"begin"),popState:l(function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},"topState"),pushState:l(function(V){this.begin(V)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(V,F,M,R){switch(M){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:break;case 9:break;case 10:break;case 11:return 10;case 12:break;case 13:break;case 14:this.begin("href");break;case 15:this.popState();break;case 16:return 43;case 17:this.begin("callbackname");break;case 18:this.popState();break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 21:this.popState();break;case 22:return 42;case 23:this.begin("click");break;case 24:this.popState();break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}},"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};return P}();C.lexer=k;function E(){this.yy={}}return l(E,"Parser"),E.prototype=C,C.Parser=E,new E}();Ec.parser=Ec;var GS=Ec;er.extend(Zb);er.extend(Jb);er.extend(t3);var Pd={friday:5,saturday:6},ni="",Jh="",tu=void 0,eu="",Wn=[],qn=[],ru=new Map,iu=[],Oo=[],Rs="",au="",cy=["active","done","crit","milestone"],su=[],Yn=!1,nu=!1,ou="sunday",Mo="saturday",Ac=0,US=l(function(){iu=[],Oo=[],Rs="",su=[],oo=0,Bc=void 0,lo=void 0,Pe=[],ni="",Jh="",au="",tu=void 0,eu="",Wn=[],qn=[],Yn=!1,nu=!1,Ac=0,ru=new Map,Ye(),ou="sunday",Mo="saturday"},"clear"),jS=l(function(t){Jh=t},"setAxisFormat"),XS=l(function(){return Jh},"getAxisFormat"),KS=l(function(t){tu=t},"setTickInterval"),QS=l(function(){return tu},"getTickInterval"),ZS=l(function(t){eu=t},"setTodayMarker"),JS=l(function(){return eu},"getTodayMarker"),tw=l(function(t){ni=t},"setDateFormat"),ew=l(function(){Yn=!0},"enableInclusiveEndDates"),rw=l(function(){return Yn},"endDatesAreInclusive"),iw=l(function(){nu=!0},"enableTopAxis"),aw=l(function(){return nu},"topAxisEnabled"),sw=l(function(t){au=t},"setDisplayMode"),nw=l(function(){return au},"getDisplayMode"),ow=l(function(){return ni},"getDateFormat"),lw=l(function(t){Wn=t.toLowerCase().split(/[\s,]+/)},"setIncludes"),cw=l(function(){return Wn},"getIncludes"),hw=l(function(t){qn=t.toLowerCase().split(/[\s,]+/)},"setExcludes"),uw=l(function(){return qn},"getExcludes"),dw=l(function(){return ru},"getLinks"),pw=l(function(t){Rs=t,iu.push(t)},"addSection"),fw=l(function(){return iu},"getSections"),gw=l(function(){let t=Od();const e=10;let r=0;for(;!t&&r<e;)t=Od(),r++;return Oo=Pe,Oo},"getTasks"),hy=l(function(t,e,r,a){return a.includes(t.format(e.trim()))?!1:r.includes("weekends")&&(t.isoWeekday()===Pd[Mo]||t.isoWeekday()===Pd[Mo]+1)||r.includes(t.format("dddd").toLowerCase())?!0:r.includes(t.format(e.trim()))},"isInvalidDate"),yw=l(function(t){ou=t},"setWeekday"),mw=l(function(){return ou},"getWeekday"),xw=l(function(t){Mo=t},"setWeekend"),uy=l(function(t,e,r,a){if(!r.length||t.manualEndTime)return;let i;t.startTime instanceof Date?i=er(t.startTime):i=er(t.startTime,e,!0),i=i.add(1,"d");let s;t.endTime instanceof Date?s=er(t.endTime):s=er(t.endTime,e,!0);const[n,o]=bw(i,s,e,r,a);t.endTime=n.toDate(),t.renderEndTime=o},"checkTaskDates"),bw=l(function(t,e,r,a,i){let s=!1,n=null;for(;t<=e;)s||(n=e.toDate()),s=hy(t,r,a,i),s&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,n]},"fixTaskDates"),Lc=l(function(t,e,r){r=r.trim();const i=/^after\s+(?<ids>[\d\w- ]+)/.exec(r);if(i!==null){let n=null;for(const h of i.groups.ids.split(" ")){let u=Sa(h);u!==void 0&&(!n||u.endTime>n.endTime)&&(n=u)}if(n)return n.endTime;const o=new Date;return o.setHours(0,0,0,0),o}let s=er(r,e.trim(),!0);if(s.isValid())return s.toDate();{A.debug("Invalid date:"+r),A.debug("With date format:"+e.trim());const n=new Date(r);if(n===void 0||isNaN(n.getTime())||n.getFullYear()<-1e4||n.getFullYear()>1e4)throw new Error("Invalid date:"+r);return n}},"getStartDate"),dy=l(function(t){const e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return e!==null?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]},"parseDuration"),py=l(function(t,e,r,a=!1){r=r.trim();const s=/^until\s+(?<ids>[\d\w- ]+)/.exec(r);if(s!==null){let d=null;for(const p of s.groups.ids.split(" ")){let g=Sa(p);g!==void 0&&(!d||g.startTime<d.startTime)&&(d=g)}if(d)return d.startTime;const f=new Date;return f.setHours(0,0,0,0),f}let n=er(r,e.trim(),!0);if(n.isValid())return a&&(n=n.add(1,"d")),n.toDate();let o=er(t);const[h,u]=dy(r);if(!Number.isNaN(h)){const d=o.add(h,u);d.isValid()&&(o=d)}return o.toDate()},"getEndDate"),oo=0,Pa=l(function(t){return t===void 0?(oo=oo+1,"task"+oo):t},"parseId"),kw=l(function(t,e){let r;e.substr(0,1)===":"?r=e.substr(1,e.length):r=e;const a=r.split(","),i={};lu(a,i,cy);for(let n=0;n<a.length;n++)a[n]=a[n].trim();let s="";switch(a.length){case 1:i.id=Pa(),i.startTime=t.endTime,s=a[0];break;case 2:i.id=Pa(),i.startTime=Lc(void 0,ni,a[0]),s=a[1];break;case 3:i.id=Pa(a[0]),i.startTime=Lc(void 0,ni,a[1]),s=a[2];break}return s&&(i.endTime=py(i.startTime,ni,s,Yn),i.manualEndTime=er(s,"YYYY-MM-DD",!0).isValid(),uy(i,ni,qn,Wn)),i},"compileData"),vw=l(function(t,e){let r;e.substr(0,1)===":"?r=e.substr(1,e.length):r=e;const a=r.split(","),i={};lu(a,i,cy);for(let s=0;s<a.length;s++)a[s]=a[s].trim();switch(a.length){case 1:i.id=Pa(),i.startTime={type:"prevTaskEnd",id:t},i.endTime={data:a[0]};break;case 2:i.id=Pa(),i.startTime={type:"getStartDate",startData:a[0]},i.endTime={data:a[1]};break;case 3:i.id=Pa(a[0]),i.startTime={type:"getStartDate",startData:a[1]},i.endTime={data:a[2]};break}return i},"parseData"),Bc,lo,Pe=[],fy={},Tw=l(function(t,e){const r={section:Rs,type:Rs,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},a=vw(lo,e);r.raw.startTime=a.startTime,r.raw.endTime=a.endTime,r.id=a.id,r.prevTaskId=lo,r.active=a.active,r.done=a.done,r.crit=a.crit,r.milestone=a.milestone,r.order=Ac,Ac++;const i=Pe.push(r);lo=r.id,fy[r.id]=i-1},"addTask"),Sa=l(function(t){const e=fy[t];return Pe[e]},"findTaskById"),_w=l(function(t,e){const r={section:Rs,type:Rs,description:t,task:t,classes:[]},a=kw(Bc,e);r.startTime=a.startTime,r.endTime=a.endTime,r.id=a.id,r.active=a.active,r.done=a.done,r.crit=a.crit,r.milestone=a.milestone,Bc=r,Oo.push(r)},"addTaskOrg"),Od=l(function(){const t=l(function(r){const a=Pe[r];let i="";switch(Pe[r].raw.startTime.type){case"prevTaskEnd":{const s=Sa(a.prevTaskId);a.startTime=s.endTime;break}case"getStartDate":i=Lc(void 0,ni,Pe[r].raw.startTime.startData),i&&(Pe[r].startTime=i);break}return Pe[r].startTime&&(Pe[r].endTime=py(Pe[r].startTime,ni,Pe[r].raw.endTime.data,Yn),Pe[r].endTime&&(Pe[r].processed=!0,Pe[r].manualEndTime=er(Pe[r].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),uy(Pe[r],ni,qn,Wn))),Pe[r].processed},"compileTask");let e=!0;for(const[r,a]of Pe.entries())t(r),e=e&&a.processed;return e},"compileTasks"),Cw=l(function(t,e){let r=e;H().securityLevel!=="loose"&&(r=Ta(e)),t.split(",").forEach(function(a){Sa(a)!==void 0&&(yy(a,()=>{window.open(r,"_self")}),ru.set(a,r))}),gy(t,"clickable")},"setLink"),gy=l(function(t,e){t.split(",").forEach(function(r){let a=Sa(r);a!==void 0&&a.classes.push(e)})},"setClass"),Sw=l(function(t,e,r){if(H().securityLevel!=="loose"||e===void 0)return;let a=[];if(typeof r=="string"){a=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let s=0;s<a.length;s++){let n=a[s].trim();n.startsWith('"')&&n.endsWith('"')&&(n=n.substr(1,n.length-2)),a[s]=n}}a.length===0&&a.push(t),Sa(t)!==void 0&&yy(t,()=>{re.runFunc(e,...a)})},"setClickFun"),yy=l(function(t,e){su.push(function(){const r=document.querySelector(`[id="${t}"]`);r!==null&&r.addEventListener("click",function(){e()})},function(){const r=document.querySelector(`[id="${t}-text"]`);r!==null&&r.addEventListener("click",function(){e()})})},"pushFun"),ww=l(function(t,e,r){t.split(",").forEach(function(a){Sw(a,e,r)}),gy(t,"clickable")},"setClickEvent"),Ew=l(function(t){su.forEach(function(e){e(t)})},"bindFunctions"),Aw={getConfig:l(()=>H().gantt,"getConfig"),clear:US,setDateFormat:tw,getDateFormat:ow,enableInclusiveEndDates:ew,endDatesAreInclusive:rw,enableTopAxis:iw,topAxisEnabled:aw,setAxisFormat:jS,getAxisFormat:XS,setTickInterval:KS,getTickInterval:QS,setTodayMarker:ZS,getTodayMarker:JS,setAccTitle:He,getAccTitle:Ke,setDiagramTitle:dr,getDiagramTitle:Je,setDisplayMode:sw,getDisplayMode:nw,setAccDescription:Qe,getAccDescription:Ze,addSection:pw,getSections:fw,getTasks:gw,addTask:Tw,findTaskById:Sa,addTaskOrg:_w,setIncludes:lw,getIncludes:cw,setExcludes:hw,getExcludes:uw,setClickEvent:ww,setLink:Cw,getLinks:dw,bindFunctions:Ew,parseDuration:dy,isInvalidDate:hy,setWeekday:yw,getWeekday:mw,setWeekend:xw};function lu(t,e,r){let a=!0;for(;a;)a=!1,r.forEach(function(i){const s="^\\s*"+i+"\\s*$",n=new RegExp(s);t[0].match(n)&&(e[i]=!0,t.shift(1),a=!0)})}l(lu,"getTaskTags");var Lw=l(function(){A.debug("Something is calling, setConf, remove the call")},"setConf"),Md={monday:Pb,tuesday:Fb,wednesday:Nb,thursday:Ib,friday:Rb,saturday:Db,sunday:Bb},Bw=l((t,e)=>{let r=[...t].map(()=>-1/0),a=[...t].sort((s,n)=>s.startTime-n.startTime||s.order-n.order),i=0;for(const s of a)for(let n=0;n<r.length;n++)if(s.startTime>=r[n]){r[n]=s.endTime,s.order=n+e,n>i&&(i=n);break}return i},"getMaxIntersections"),xi,Dw=l(function(t,e,r,a){const i=H().gantt,s=H().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body"),h=s==="sandbox"?n.nodes()[0].contentDocument:document,u=h.getElementById(e);xi=u.parentElement.offsetWidth,xi===void 0&&(xi=1200),i.useWidth!==void 0&&(xi=i.useWidth);const d=a.db.getTasks();let f=[];for(const S of d)f.push(S.type);f=D(f);const p={};let g=2*i.topPadding;if(a.db.getDisplayMode()==="compact"||i.displayMode==="compact"){const S={};for(const C of d)S[C.section]===void 0?S[C.section]=[C]:S[C.section].push(C);let b=0;for(const C of Object.keys(S)){const k=Bw(S[C],b)+1;b+=k,g+=k*(i.barHeight+i.barGap),p[C]=k}}else{g+=d.length*(i.barHeight+i.barGap);for(const S of f)p[S]=d.filter(b=>b.type===S).length}u.setAttribute("viewBox","0 0 "+xi+" "+g);const y=o.select(`[id="${e}"]`),m=Sb().domain([wb(d,function(S){return S.startTime}),Eb(d,function(S){return S.endTime})]).rangeRound([0,xi-i.leftPadding-i.rightPadding]);function x(S,b){const C=S.startTime,k=b.startTime;let E=0;return C>k?E=1:C<k&&(E=-1),E}l(x,"taskCompare"),d.sort(x),v(d,xi,g),ar(y,g,xi,i.useMaxWidth),y.append("text").text(a.db.getDiagramTitle()).attr("x",xi/2).attr("y",i.titleTopMargin).attr("class","titleText");function v(S,b,C){const k=i.barHeight,E=k+i.barGap,P=i.topPadding,O=i.leftPadding,V=hn().domain([0,f.length]).range(["#00B9FA","#F95002"]).interpolate(Ab);I(E,P,O,b,C,S,a.db.getExcludes(),a.db.getIncludes()),B(O,P,b,C),T(S,E,P,O,k,V,b),_(E,P),w(O,P,b,C)}l(v,"makeGantt");function T(S,b,C,k,E,P,O){const F=[...new Set(S.map(q=>q.order))].map(q=>S.find(N=>N.order===q));y.append("g").selectAll("rect").data(F).enter().append("rect").attr("x",0).attr("y",function(q,N){return N=q.order,N*b+C-2}).attr("width",function(){return O-i.rightPadding/2}).attr("height",b).attr("class",function(q){for(const[N,j]of f.entries())if(q.type===j)return"section section"+N%i.numberSectionStyles;return"section section0"});const M=y.append("g").selectAll("rect").data(S).enter(),R=a.db.getLinks();if(M.append("rect").attr("id",function(q){return q.id}).attr("rx",3).attr("ry",3).attr("x",function(q){return q.milestone?m(q.startTime)+k+.5*(m(q.endTime)-m(q.startTime))-.5*E:m(q.startTime)+k}).attr("y",function(q,N){return N=q.order,N*b+C}).attr("width",function(q){return q.milestone?E:m(q.renderEndTime||q.endTime)-m(q.startTime)}).attr("height",E).attr("transform-origin",function(q,N){return N=q.order,(m(q.startTime)+k+.5*(m(q.endTime)-m(q.startTime))).toString()+"px "+(N*b+C+.5*E).toString()+"px"}).attr("class",function(q){const N="task";let j="";q.classes.length>0&&(j=q.classes.join(" "));let it=0;for(const[pt,K]of f.entries())q.type===K&&(it=pt%i.numberSectionStyles);let tt="";return q.active?q.crit?tt+=" activeCrit":tt=" active":q.done?q.crit?tt=" doneCrit":tt=" done":q.crit&&(tt+=" crit"),tt.length===0&&(tt=" task"),q.milestone&&(tt=" milestone "+tt),tt+=it,tt+=" "+j,N+tt}),M.append("text").attr("id",function(q){return q.id+"-text"}).text(function(q){return q.task}).attr("font-size",i.fontSize).attr("x",function(q){let N=m(q.startTime),j=m(q.renderEndTime||q.endTime);q.milestone&&(N+=.5*(m(q.endTime)-m(q.startTime))-.5*E),q.milestone&&(j=N+E);const it=this.getBBox().width;return it>j-N?j+it+1.5*i.leftPadding>O?N+k-5:j+k+5:(j-N)/2+N+k}).attr("y",function(q,N){return N=q.order,N*b+i.barHeight/2+(i.fontSize/2-2)+C}).attr("text-height",E).attr("class",function(q){const N=m(q.startTime);let j=m(q.endTime);q.milestone&&(j=N+E);const it=this.getBBox().width;let tt="";q.classes.length>0&&(tt=q.classes.join(" "));let pt=0;for(const[nt,ht]of f.entries())q.type===ht&&(pt=nt%i.numberSectionStyles);let K="";return q.active&&(q.crit?K="activeCritText"+pt:K="activeText"+pt),q.done?q.crit?K=K+" doneCritText"+pt:K=K+" doneText"+pt:q.crit&&(K=K+" critText"+pt),q.milestone&&(K+=" milestoneText"),it>j-N?j+it+1.5*i.leftPadding>O?tt+" taskTextOutsideLeft taskTextOutside"+pt+" "+K:tt+" taskTextOutsideRight taskTextOutside"+pt+" "+K+" width-"+it:tt+" taskText taskText"+pt+" "+K+" width-"+it}),H().securityLevel==="sandbox"){let q;q=yt("#i"+e);const N=q.nodes()[0].contentDocument;M.filter(function(j){return R.has(j.id)}).each(function(j){var it=N.querySelector("#"+j.id),tt=N.querySelector("#"+j.id+"-text");const pt=it.parentNode;var K=N.createElement("a");K.setAttribute("xlink:href",R.get(j.id)),K.setAttribute("target","_top"),pt.appendChild(K),K.appendChild(it),K.appendChild(tt)})}}l(T,"drawRects");function I(S,b,C,k,E,P,O,V){if(O.length===0&&V.length===0)return;let F,M;for(const{startTime:it,endTime:tt}of P)(F===void 0||it<F)&&(F=it),(M===void 0||tt>M)&&(M=tt);if(!F||!M)return;if(er(M).diff(er(F),"year")>5){A.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");return}const R=a.db.getDateFormat(),L=[];let q=null,N=er(F);for(;N.valueOf()<=M;)a.db.isInvalidDate(N,R,O,V)?q?q.end=N:q={start:N,end:N}:q&&(L.push(q),q=null),N=N.add(1,"d");y.append("g").selectAll("rect").data(L).enter().append("rect").attr("id",function(it){return"exclude-"+it.start.format("YYYY-MM-DD")}).attr("x",function(it){return m(it.start)+C}).attr("y",i.gridLineStartPadding).attr("width",function(it){const tt=it.end.add(1,"day");return m(tt)-m(it.start)}).attr("height",E-b-i.gridLineStartPadding).attr("transform-origin",function(it,tt){return(m(it.start)+C+.5*(m(it.end)-m(it.start))).toString()+"px "+(tt*S+.5*E).toString()+"px"}).attr("class","exclude-range")}l(I,"drawExcludeDays");function B(S,b,C,k){let E=Lb(m).tickSize(-k+b+i.gridLineStartPadding).tickFormat(td(a.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));const O=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(a.db.getTickInterval()||i.tickInterval);if(O!==null){const V=O[1],F=O[2],M=a.db.getWeekday()||i.weekday;switch(F){case"millisecond":E.ticks(nd.every(V));break;case"second":E.ticks(sd.every(V));break;case"minute":E.ticks(ad.every(V));break;case"hour":E.ticks(id.every(V));break;case"day":E.ticks(rd.every(V));break;case"week":E.ticks(Md[M].every(V));break;case"month":E.ticks(ed.every(V));break}}if(y.append("g").attr("class","grid").attr("transform","translate("+S+", "+(k-50)+")").call(E).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),a.db.topAxisEnabled()||i.topAxis){let V=Ob(m).tickSize(-k+b+i.gridLineStartPadding).tickFormat(td(a.db.getAxisFormat()||i.axisFormat||"%Y-%m-%d"));if(O!==null){const F=O[1],M=O[2],R=a.db.getWeekday()||i.weekday;switch(M){case"millisecond":V.ticks(nd.every(F));break;case"second":V.ticks(sd.every(F));break;case"minute":V.ticks(ad.every(F));break;case"hour":V.ticks(id.every(F));break;case"day":V.ticks(rd.every(F));break;case"week":V.ticks(Md[R].every(F));break;case"month":V.ticks(ed.every(F));break}}y.append("g").attr("class","grid").attr("transform","translate("+S+", "+b+")").call(V).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}l(B,"makeGrid");function _(S,b){let C=0;const k=Object.keys(p).map(E=>[E,p[E]]);y.append("g").selectAll("text").data(k).enter().append(function(E){const P=E[0].split(mt.lineBreakRegex),O=-(P.length-1)/2,V=h.createElementNS("http://www.w3.org/2000/svg","text");V.setAttribute("dy",O+"em");for(const[F,M]of P.entries()){const R=h.createElementNS("http://www.w3.org/2000/svg","tspan");R.setAttribute("alignment-baseline","central"),R.setAttribute("x","10"),F>0&&R.setAttribute("dy","1em"),R.textContent=M,V.appendChild(R)}return V}).attr("x",10).attr("y",function(E,P){if(P>0)for(let O=0;O<P;O++)return C+=k[P-1][1],E[1]*S/2+C*S+b;else return E[1]*S/2+b}).attr("font-size",i.sectionFontSize).attr("class",function(E){for(const[P,O]of f.entries())if(E[0]===O)return"sectionTitle sectionTitle"+P%i.numberSectionStyles;return"sectionTitle"})}l(_,"vertLabels");function w(S,b,C,k){const E=a.db.getTodayMarker();if(E==="off")return;const P=y.append("g").attr("class","today"),O=new Date,V=P.append("line");V.attr("x1",m(O)+S).attr("x2",m(O)+S).attr("y1",i.titleTopMargin).attr("y2",k-i.titleTopMargin).attr("class","today"),E!==""&&V.attr("style",E.replace(/,/g,";"))}l(w,"drawToday");function D(S){const b={},C=[];for(let k=0,E=S.length;k<E;++k)Object.prototype.hasOwnProperty.call(b,S[k])||(b[S[k]]=!0,C.push(S[k]));return C}l(D,"checkUnique")},"draw"),Rw={setConf:Lw,draw:Dw},Iw=l(t=>`
  .mermaid-main-font {
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .exclude-range {
    fill: ${t.excludeBkgColor};
  }

  .section {
    stroke: none;
    opacity: 0.2;
  }

  .section0 {
    fill: ${t.sectionBkgColor};
  }

  .section2 {
    fill: ${t.sectionBkgColor2};
  }

  .section1,
  .section3 {
    fill: ${t.altSectionBkgColor};
    opacity: 0.2;
  }

  .sectionTitle0 {
    fill: ${t.titleColor};
  }

  .sectionTitle1 {
    fill: ${t.titleColor};
  }

  .sectionTitle2 {
    fill: ${t.titleColor};
  }

  .sectionTitle3 {
    fill: ${t.titleColor};
  }

  .sectionTitle {
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }


  /* Grid and axis */

  .grid .tick {
    stroke: ${t.gridColor};
    opacity: 0.8;
    shape-rendering: crispEdges;
  }

  .grid .tick text {
    font-family: ${t.fontFamily};
    fill: ${t.textColor};
  }

  .grid path {
    stroke-width: 0;
  }


  /* Today line */

  .today {
    fill: none;
    stroke: ${t.todayLineColor};
    stroke-width: 2px;
  }


  /* Task styling */

  /* Default task */

  .task {
    stroke-width: 2;
  }

  .taskText {
    text-anchor: middle;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideRight {
    fill: ${t.taskTextDarkColor};
    text-anchor: start;
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }

  .taskTextOutsideLeft {
    fill: ${t.taskTextDarkColor};
    text-anchor: end;
  }


  /* Special case clickable */

  .task.clickable {
    cursor: pointer;
  }

  .taskText.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideLeft.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }

  .taskTextOutsideRight.clickable {
    cursor: pointer;
    fill: ${t.taskTextClickableColor} !important;
    font-weight: bold;
  }


  /* Specific task settings for the sections*/

  .taskText0,
  .taskText1,
  .taskText2,
  .taskText3 {
    fill: ${t.taskTextColor};
  }

  .task0,
  .task1,
  .task2,
  .task3 {
    fill: ${t.taskBkgColor};
    stroke: ${t.taskBorderColor};
  }

  .taskTextOutside0,
  .taskTextOutside2
  {
    fill: ${t.taskTextOutsideColor};
  }

  .taskTextOutside1,
  .taskTextOutside3 {
    fill: ${t.taskTextOutsideColor};
  }


  /* Active task */

  .active0,
  .active1,
  .active2,
  .active3 {
    fill: ${t.activeTaskBkgColor};
    stroke: ${t.activeTaskBorderColor};
  }

  .activeText0,
  .activeText1,
  .activeText2,
  .activeText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Completed task */

  .done0,
  .done1,
  .done2,
  .done3 {
    stroke: ${t.doneTaskBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
  }

  .doneText0,
  .doneText1,
  .doneText2,
  .doneText3 {
    fill: ${t.taskTextDarkColor} !important;
  }


  /* Tasks on the critical line */

  .crit0,
  .crit1,
  .crit2,
  .crit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.critBkgColor};
    stroke-width: 2;
  }

  .activeCrit0,
  .activeCrit1,
  .activeCrit2,
  .activeCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.activeTaskBkgColor};
    stroke-width: 2;
  }

  .doneCrit0,
  .doneCrit1,
  .doneCrit2,
  .doneCrit3 {
    stroke: ${t.critBorderColor};
    fill: ${t.doneTaskBkgColor};
    stroke-width: 2;
    cursor: pointer;
    shape-rendering: crispEdges;
  }

  .milestone {
    transform: rotate(45deg) scale(0.8,0.8);
  }

  .milestoneText {
    font-style: italic;
  }
  .doneCritText0,
  .doneCritText1,
  .doneCritText2,
  .doneCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .activeCritText0,
  .activeCritText1,
  .activeCritText2,
  .activeCritText3 {
    fill: ${t.taskTextDarkColor} !important;
  }

  .titleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.titleColor||t.textColor};
    font-family: var(--mermaid-font-family, "trebuchet ms", verdana, arial, sans-serif);
  }
`,"getStyles"),Nw=Iw,Fw={parser:GS,db:Aw,renderer:Rw,styles:Nw};const Pw=Object.freeze(Object.defineProperty({__proto__:null,diagram:Fw},Symbol.toStringTag,{value:"Module"}));var Ow={parse:l(async t=>{const e=await Hs("info",t);A.debug(e)},"parse")},Mw={version:yc},$w=l(()=>Mw.version,"getVersion"),Vw={getVersion:$w},zw=l((t,e,r)=>{A.debug(`rendering info diagram
`+t);const a=Ki(e);ar(a,100,400,!0),a.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${r}`)},"draw"),Ww={draw:zw},qw={parser:Ow,db:Vw,renderer:Ww};const Yw=Object.freeze(Object.defineProperty({__proto__:null,diagram:qw},Symbol.toStringTag,{value:"Module"}));var Hw=pe.pie,cu={sections:new Map,showData:!1},$o=cu.sections,hu=cu.showData,Gw=structuredClone(Hw),Uw=l(()=>structuredClone(Gw),"getConfig"),jw=l(()=>{$o=new Map,hu=cu.showData,Ye()},"clear"),Xw=l(({label:t,value:e})=>{$o.has(t)||($o.set(t,e),A.debug(`added new section: ${t}, with value: ${e}`))},"addSection"),Kw=l(()=>$o,"getSections"),Qw=l(t=>{hu=t},"setShowData"),Zw=l(()=>hu,"getShowData"),my={getConfig:Uw,clear:jw,setDiagramTitle:dr,getDiagramTitle:Je,setAccTitle:He,getAccTitle:Ke,setAccDescription:Qe,getAccDescription:Ze,addSection:Xw,getSections:Kw,setShowData:Qw,getShowData:Zw},Jw=l((t,e)=>{Vn(t,e),e.setShowData(t.showData),t.sections.map(e.addSection)},"populateDb"),tE={parse:l(async t=>{const e=await Hs("pie",t);A.debug(e),Jw(e,my)},"parse")},eE=l(t=>`
  .pieCircle{
    stroke: ${t.pieStrokeColor};
    stroke-width : ${t.pieStrokeWidth};
    opacity : ${t.pieOpacity};
  }
  .pieOuterCircle{
    stroke: ${t.pieOuterStrokeColor};
    stroke-width: ${t.pieOuterStrokeWidth};
    fill: none;
  }
  .pieTitleText {
    text-anchor: middle;
    font-size: ${t.pieTitleTextSize};
    fill: ${t.pieTitleTextColor};
    font-family: ${t.fontFamily};
  }
  .slice {
    font-family: ${t.fontFamily};
    fill: ${t.pieSectionTextColor};
    font-size:${t.pieSectionTextSize};
    // fill: white;
  }
  .legend text {
    fill: ${t.pieLegendTextColor};
    font-family: ${t.fontFamily};
    font-size: ${t.pieLegendTextSize};
  }
`,"getStyles"),rE=eE,iE=l(t=>{const e=[...t.entries()].map(a=>({label:a[0],value:a[1]})).sort((a,i)=>i.value-a.value);return Mb().value(a=>a.value)(e)},"createPieArcs"),aE=l((t,e,r,a)=>{A.debug(`rendering pie chart
`+t);const i=a.db,s=H(),n=Bi(i.getConfig(),s.pie),o=40,h=18,u=4,d=450,f=d,p=Ki(e),g=p.append("g");g.attr("transform","translate("+f/2+","+d/2+")");const{themeVariables:y}=s;let[m]=Xi(y.pieOuterStrokeWidth);m??(m=2);const x=n.textPosition,v=Math.min(f,d)/2-o,T=Cs().innerRadius(0).outerRadius(v),I=Cs().innerRadius(v*x).outerRadius(v*x);g.append("circle").attr("cx",0).attr("cy",0).attr("r",v+m/2).attr("class","pieOuterCircle");const B=i.getSections(),_=iE(B),w=[y.pie1,y.pie2,y.pie3,y.pie4,y.pie5,y.pie6,y.pie7,y.pie8,y.pie9,y.pie10,y.pie11,y.pie12],D=L1(w);g.selectAll("mySlices").data(_).enter().append("path").attr("d",T).attr("fill",E=>D(E.data.label)).attr("class","pieCircle");let S=0;B.forEach(E=>{S+=E}),g.selectAll("mySlices").data(_).enter().append("text").text(E=>(E.data.value/S*100).toFixed(0)+"%").attr("transform",E=>"translate("+I.centroid(E)+")").style("text-anchor","middle").attr("class","slice"),g.append("text").text(i.getDiagramTitle()).attr("x",0).attr("y",-400/2).attr("class","pieTitleText");const b=g.selectAll(".legend").data(D.domain()).enter().append("g").attr("class","legend").attr("transform",(E,P)=>{const O=h+u,V=O*D.domain().length/2,F=12*h,M=P*O-V;return"translate("+F+","+M+")"});b.append("rect").attr("width",h).attr("height",h).style("fill",D).style("stroke",D),b.data(_).append("text").attr("x",h+u).attr("y",h-u).text(E=>{const{label:P,value:O}=E.data;return i.getShowData()?`${P} [${O}]`:P});const C=Math.max(...b.selectAll("text").nodes().map(E=>(E==null?void 0:E.getBoundingClientRect().width)??0)),k=f+o+h+u+C;p.attr("viewBox",`0 0 ${k} ${d}`),ar(p,d,k,n.useMaxWidth)},"draw"),sE={draw:aE},nE={parser:tE,db:my,renderer:sE,styles:rE};const oE=Object.freeze(Object.defineProperty({__proto__:null,diagram:nE},Symbol.toStringTag,{value:"Module"}));var Dc=function(){var t=l(function(Qt,U,wt,Bt){for(wt=wt||{},Bt=Qt.length;Bt--;wt[Qt[Bt]]=U);return wt},"o"),e=[1,3],r=[1,4],a=[1,5],i=[1,6],s=[1,7],n=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],o=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],h=[55,56,57],u=[2,36],d=[1,37],f=[1,36],p=[1,38],g=[1,35],y=[1,43],m=[1,41],x=[1,14],v=[1,23],T=[1,18],I=[1,19],B=[1,20],_=[1,21],w=[1,22],D=[1,24],S=[1,25],b=[1,26],C=[1,27],k=[1,28],E=[1,29],P=[1,32],O=[1,33],V=[1,34],F=[1,39],M=[1,40],R=[1,42],L=[1,44],q=[1,62],N=[1,61],j=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],it=[1,65],tt=[1,66],pt=[1,67],K=[1,68],nt=[1,69],ht=[1,70],st=[1,71],rt=[1,72],Z=[1,73],at=[1,74],Q=[1,75],lt=[1,76],z=[4,5,6,7,8,9,10,11,12,13,14,15,18],Et=[1,90],X=[1,91],vt=[1,92],Ct=[1,99],Yt=[1,93],Ut=[1,96],ae=[1,94],qt=[1,95],ut=[1,97],xt=[1,98],ot=[1,102],ct=[10,55,56,57],gt=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],G={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:l(function(U,wt,Bt,St,Gt,dt,ce){var bt=dt.length-1;switch(Gt){case 23:this.$=dt[bt];break;case 24:this.$=dt[bt-1]+""+dt[bt];break;case 26:this.$=dt[bt-1]+dt[bt];break;case 27:this.$=[dt[bt].trim()];break;case 28:dt[bt-2].push(dt[bt].trim()),this.$=dt[bt-2];break;case 29:this.$=dt[bt-4],St.addClass(dt[bt-2],dt[bt]);break;case 37:this.$=[];break;case 42:this.$=dt[bt].trim(),St.setDiagramTitle(this.$);break;case 43:this.$=dt[bt].trim(),St.setAccTitle(this.$);break;case 44:case 45:this.$=dt[bt].trim(),St.setAccDescription(this.$);break;case 46:St.addSection(dt[bt].substr(8)),this.$=dt[bt].substr(8);break;case 47:St.addPoint(dt[bt-3],"",dt[bt-1],dt[bt],[]);break;case 48:St.addPoint(dt[bt-4],dt[bt-3],dt[bt-1],dt[bt],[]);break;case 49:St.addPoint(dt[bt-4],"",dt[bt-2],dt[bt-1],dt[bt]);break;case 50:St.addPoint(dt[bt-5],dt[bt-4],dt[bt-2],dt[bt-1],dt[bt]);break;case 51:St.setXAxisLeftText(dt[bt-2]),St.setXAxisRightText(dt[bt]);break;case 52:dt[bt-1].text+="  ",St.setXAxisLeftText(dt[bt-1]);break;case 53:St.setXAxisLeftText(dt[bt]);break;case 54:St.setYAxisBottomText(dt[bt-2]),St.setYAxisTopText(dt[bt]);break;case 55:dt[bt-1].text+="  ",St.setYAxisBottomText(dt[bt-1]);break;case 56:St.setYAxisBottomText(dt[bt]);break;case 57:St.setQuadrant1Text(dt[bt]);break;case 58:St.setQuadrant2Text(dt[bt]);break;case 59:St.setQuadrant3Text(dt[bt]);break;case 60:St.setQuadrant4Text(dt[bt]);break;case 64:this.$={text:dt[bt],type:"text"};break;case 65:this.$={text:dt[bt-1].text+""+dt[bt],type:dt[bt-1].type};break;case 66:this.$={text:dt[bt],type:"text"};break;case 67:this.$={text:dt[bt],type:"markdown"};break;case 68:this.$=dt[bt];break;case 69:this.$=dt[bt-1]+""+dt[bt];break}},"anonymous"),table:[{18:e,26:1,27:2,28:r,55:a,56:i,57:s},{1:[3]},{18:e,26:8,27:2,28:r,55:a,56:i,57:s},{18:e,26:9,27:2,28:r,55:a,56:i,57:s},t(n,[2,33],{29:10}),t(o,[2,61]),t(o,[2,62]),t(o,[2,63]),{1:[2,30]},{1:[2,31]},t(h,u,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:d,5:f,10:p,12:g,13:y,14:m,18:x,25:v,35:T,37:I,39:B,41:_,42:w,48:D,50:S,51:b,52:C,53:k,54:E,60:P,61:O,63:V,64:F,65:M,66:R,67:L}),t(n,[2,34]),{27:45,55:a,56:i,57:s},t(h,[2,37]),t(h,u,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:d,5:f,10:p,12:g,13:y,14:m,18:x,25:v,35:T,37:I,39:B,41:_,42:w,48:D,50:S,51:b,52:C,53:k,54:E,60:P,61:O,63:V,64:F,65:M,66:R,67:L}),t(h,[2,39]),t(h,[2,40]),t(h,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},t(h,[2,45]),t(h,[2,46]),{18:[1,50]},{4:d,5:f,10:p,12:g,13:y,14:m,43:51,58:31,60:P,61:O,63:V,64:F,65:M,66:R,67:L},{4:d,5:f,10:p,12:g,13:y,14:m,43:52,58:31,60:P,61:O,63:V,64:F,65:M,66:R,67:L},{4:d,5:f,10:p,12:g,13:y,14:m,43:53,58:31,60:P,61:O,63:V,64:F,65:M,66:R,67:L},{4:d,5:f,10:p,12:g,13:y,14:m,43:54,58:31,60:P,61:O,63:V,64:F,65:M,66:R,67:L},{4:d,5:f,10:p,12:g,13:y,14:m,43:55,58:31,60:P,61:O,63:V,64:F,65:M,66:R,67:L},{4:d,5:f,10:p,12:g,13:y,14:m,43:56,58:31,60:P,61:O,63:V,64:F,65:M,66:R,67:L},{4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,44:[1,57],47:[1,58],58:60,59:59,63:V,64:F,65:M,66:R,67:L},t(j,[2,64]),t(j,[2,66]),t(j,[2,67]),t(j,[2,70]),t(j,[2,71]),t(j,[2,72]),t(j,[2,73]),t(j,[2,74]),t(j,[2,75]),t(j,[2,76]),t(j,[2,77]),t(j,[2,78]),t(j,[2,79]),t(j,[2,80]),t(n,[2,35]),t(h,[2,38]),t(h,[2,42]),t(h,[2,43]),t(h,[2,44]),{3:64,4:it,5:tt,6:pt,7:K,8:nt,9:ht,10:st,11:rt,12:Z,13:at,14:Q,15:lt,21:63},t(h,[2,53],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,49:[1,77],63:V,64:F,65:M,66:R,67:L}),t(h,[2,56],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,49:[1,78],63:V,64:F,65:M,66:R,67:L}),t(h,[2,57],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,63:V,64:F,65:M,66:R,67:L}),t(h,[2,58],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,63:V,64:F,65:M,66:R,67:L}),t(h,[2,59],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,63:V,64:F,65:M,66:R,67:L}),t(h,[2,60],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,63:V,64:F,65:M,66:R,67:L}),{45:[1,79]},{44:[1,80]},t(j,[2,65]),t(j,[2,81]),t(j,[2,82]),t(j,[2,83]),{3:82,4:it,5:tt,6:pt,7:K,8:nt,9:ht,10:st,11:rt,12:Z,13:at,14:Q,15:lt,18:[1,81]},t(z,[2,23]),t(z,[2,1]),t(z,[2,2]),t(z,[2,3]),t(z,[2,4]),t(z,[2,5]),t(z,[2,6]),t(z,[2,7]),t(z,[2,8]),t(z,[2,9]),t(z,[2,10]),t(z,[2,11]),t(z,[2,12]),t(h,[2,52],{58:31,43:83,4:d,5:f,10:p,12:g,13:y,14:m,60:P,61:O,63:V,64:F,65:M,66:R,67:L}),t(h,[2,55],{58:31,43:84,4:d,5:f,10:p,12:g,13:y,14:m,60:P,61:O,63:V,64:F,65:M,66:R,67:L}),{46:[1,85]},{45:[1,86]},{4:Et,5:X,6:vt,8:Ct,11:Yt,13:Ut,16:89,17:ae,18:qt,19:ut,20:xt,22:88,23:87},t(z,[2,24]),t(h,[2,51],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,63:V,64:F,65:M,66:R,67:L}),t(h,[2,54],{59:59,58:60,4:d,5:f,8:q,10:p,12:g,13:y,14:m,18:N,63:V,64:F,65:M,66:R,67:L}),t(h,[2,47],{22:88,16:89,23:100,4:Et,5:X,6:vt,8:Ct,11:Yt,13:Ut,17:ae,18:qt,19:ut,20:xt}),{46:[1,101]},t(h,[2,29],{10:ot}),t(ct,[2,27],{16:103,4:Et,5:X,6:vt,8:Ct,11:Yt,13:Ut,17:ae,18:qt,19:ut,20:xt}),t(gt,[2,25]),t(gt,[2,13]),t(gt,[2,14]),t(gt,[2,15]),t(gt,[2,16]),t(gt,[2,17]),t(gt,[2,18]),t(gt,[2,19]),t(gt,[2,20]),t(gt,[2,21]),t(gt,[2,22]),t(h,[2,49],{10:ot}),t(h,[2,48],{22:88,16:89,23:104,4:Et,5:X,6:vt,8:Ct,11:Yt,13:Ut,17:ae,18:qt,19:ut,20:xt}),{4:Et,5:X,6:vt,8:Ct,11:Yt,13:Ut,16:89,17:ae,18:qt,19:ut,20:xt,22:105},t(gt,[2,26]),t(h,[2,50],{10:ot}),t(ct,[2,28],{16:103,4:Et,5:X,6:vt,8:Ct,11:Yt,13:Ut,17:ae,18:qt,19:ut,20:xt})],defaultActions:{8:[2,30],9:[2,31]},parseError:l(function(U,wt){if(wt.recoverable)this.trace(U);else{var Bt=new Error(U);throw Bt.hash=wt,Bt}},"parseError"),parse:l(function(U){var wt=this,Bt=[0],St=[],Gt=[null],dt=[],ce=this.table,bt="",_r=0,qr=0,ui=2,Se=1,nr=dt.slice.call(arguments,1),Kt=Object.create(this.lexer),se={yy:{}};for(var le in this.yy)Object.prototype.hasOwnProperty.call(this.yy,le)&&(se.yy[le]=this.yy[le]);Kt.setInput(U,se.yy),se.yy.lexer=Kt,se.yy.parser=this,typeof Kt.yylloc>"u"&&(Kt.yylloc={});var te=Kt.yylloc;dt.push(te);var he=Kt.options&&Kt.options.ranges;typeof se.yy.parseError=="function"?this.parseError=se.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function be(Ee){Bt.length=Bt.length-2*Ee,Gt.length=Gt.length-Ee,dt.length=dt.length-Ee}l(be,"popStack");function Xt(){var Ee;return Ee=St.pop()||Kt.lex()||Se,typeof Ee!="number"&&(Ee instanceof Array&&(St=Ee,Ee=St.pop()),Ee=wt.symbols_[Ee]||Ee),Ee}l(Xt,"lex");for(var Ht,Nt,we,ie,di={},Cr,Fe,Br,pr;;){if(Nt=Bt[Bt.length-1],this.defaultActions[Nt]?we=this.defaultActions[Nt]:((Ht===null||typeof Ht>"u")&&(Ht=Xt()),we=ce[Nt]&&ce[Nt][Ht]),typeof we>"u"||!we.length||!we[0]){var Sr="";pr=[];for(Cr in ce[Nt])this.terminals_[Cr]&&Cr>ui&&pr.push("'"+this.terminals_[Cr]+"'");Kt.showPosition?Sr="Parse error on line "+(_r+1)+`:
`+Kt.showPosition()+`
Expecting `+pr.join(", ")+", got '"+(this.terminals_[Ht]||Ht)+"'":Sr="Parse error on line "+(_r+1)+": Unexpected "+(Ht==Se?"end of input":"'"+(this.terminals_[Ht]||Ht)+"'"),this.parseError(Sr,{text:Kt.match,token:this.terminals_[Ht]||Ht,line:Kt.yylineno,loc:te,expected:pr})}if(we[0]instanceof Array&&we.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Nt+", token: "+Ht);switch(we[0]){case 1:Bt.push(Ht),Gt.push(Kt.yytext),dt.push(Kt.yylloc),Bt.push(we[1]),Ht=null,qr=Kt.yyleng,bt=Kt.yytext,_r=Kt.yylineno,te=Kt.yylloc;break;case 2:if(Fe=this.productions_[we[1]][1],di.$=Gt[Gt.length-Fe],di._$={first_line:dt[dt.length-(Fe||1)].first_line,last_line:dt[dt.length-1].last_line,first_column:dt[dt.length-(Fe||1)].first_column,last_column:dt[dt.length-1].last_column},he&&(di._$.range=[dt[dt.length-(Fe||1)].range[0],dt[dt.length-1].range[1]]),ie=this.performAction.apply(di,[bt,qr,_r,se.yy,we[1],Gt,dt].concat(nr)),typeof ie<"u")return ie;Fe&&(Bt=Bt.slice(0,-1*Fe*2),Gt=Gt.slice(0,-1*Fe),dt=dt.slice(0,-1*Fe)),Bt.push(this.productions_[we[1]][0]),Gt.push(di.$),dt.push(di._$),Br=ce[Bt[Bt.length-2]][Bt[Bt.length-1]],Bt.push(Br);break;case 3:return!0}}return!0},"parse")},Pt=function(){var Qt={EOF:1,parseError:l(function(wt,Bt){if(this.yy.parser)this.yy.parser.parseError(wt,Bt);else throw new Error(wt)},"parseError"),setInput:l(function(U,wt){return this.yy=wt||this.yy||{},this._input=U,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var U=this._input[0];this.yytext+=U,this.yyleng++,this.offset++,this.match+=U,this.matched+=U;var wt=U.match(/(?:\r\n?|\n).*/g);return wt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),U},"input"),unput:l(function(U){var wt=U.length,Bt=U.split(/(?:\r\n?|\n)/g);this._input=U+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-wt),this.offset-=wt;var St=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Bt.length-1&&(this.yylineno-=Bt.length-1);var Gt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Bt?(Bt.length===St.length?this.yylloc.first_column:0)+St[St.length-Bt.length].length-Bt[0].length:this.yylloc.first_column-wt},this.options.ranges&&(this.yylloc.range=[Gt[0],Gt[0]+this.yyleng-wt]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(U){this.unput(this.match.slice(U))},"less"),pastInput:l(function(){var U=this.matched.substr(0,this.matched.length-this.match.length);return(U.length>20?"...":"")+U.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var U=this.match;return U.length<20&&(U+=this._input.substr(0,20-U.length)),(U.substr(0,20)+(U.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var U=this.pastInput(),wt=new Array(U.length+1).join("-");return U+this.upcomingInput()+`
`+wt+"^"},"showPosition"),test_match:l(function(U,wt){var Bt,St,Gt;if(this.options.backtrack_lexer&&(Gt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Gt.yylloc.range=this.yylloc.range.slice(0))),St=U[0].match(/(?:\r\n?|\n).*/g),St&&(this.yylineno+=St.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:St?St[St.length-1].length-St[St.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+U[0].length},this.yytext+=U[0],this.match+=U[0],this.matches=U,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(U[0].length),this.matched+=U[0],Bt=this.performAction.call(this,this.yy,this,wt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Bt)return Bt;if(this._backtrack){for(var dt in Gt)this[dt]=Gt[dt];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var U,wt,Bt,St;this._more||(this.yytext="",this.match="");for(var Gt=this._currentRules(),dt=0;dt<Gt.length;dt++)if(Bt=this._input.match(this.rules[Gt[dt]]),Bt&&(!wt||Bt[0].length>wt[0].length)){if(wt=Bt,St=dt,this.options.backtrack_lexer){if(U=this.test_match(Bt,Gt[dt]),U!==!1)return U;if(this._backtrack){wt=!1;continue}else return!1}else if(!this.options.flex)break}return wt?(U=this.test_match(wt,Gt[St]),U!==!1?U:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var wt=this.next();return wt||this.lex()},"lex"),begin:l(function(wt){this.conditionStack.push(wt)},"begin"),popState:l(function(){var wt=this.conditionStack.length-1;return wt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(wt){return wt=this.conditionStack.length-1-Math.abs(wt||0),wt>=0?this.conditionStack[wt]:"INITIAL"},"topState"),pushState:l(function(wt){this.begin(wt)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(wt,Bt,St,Gt){switch(St){case 0:break;case 1:break;case 2:return 55;case 3:break;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 23:this.popState();break;case 24:this.begin("string");break;case 25:this.popState();break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 31:this.popState();break;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:return 65;case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return Qt}();G.lexer=Pt;function $(){this.yy={}}return l($,"Parser"),$.prototype=G,G.Parser=$,new $}();Dc.parser=Dc;var lE=Dc,or=ch(),cs,cE=(cs=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){var e,r,a,i,s,n,o,h,u,d,f,p,g,y,m,x,v,T;return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:((e=pe.quadrantChart)==null?void 0:e.chartWidth)||500,chartWidth:((r=pe.quadrantChart)==null?void 0:r.chartHeight)||500,titlePadding:((a=pe.quadrantChart)==null?void 0:a.titlePadding)||10,titleFontSize:((i=pe.quadrantChart)==null?void 0:i.titleFontSize)||20,quadrantPadding:((s=pe.quadrantChart)==null?void 0:s.quadrantPadding)||5,xAxisLabelPadding:((n=pe.quadrantChart)==null?void 0:n.xAxisLabelPadding)||5,yAxisLabelPadding:((o=pe.quadrantChart)==null?void 0:o.yAxisLabelPadding)||5,xAxisLabelFontSize:((h=pe.quadrantChart)==null?void 0:h.xAxisLabelFontSize)||16,yAxisLabelFontSize:((u=pe.quadrantChart)==null?void 0:u.yAxisLabelFontSize)||16,quadrantLabelFontSize:((d=pe.quadrantChart)==null?void 0:d.quadrantLabelFontSize)||16,quadrantTextTopPadding:((f=pe.quadrantChart)==null?void 0:f.quadrantTextTopPadding)||5,pointTextPadding:((p=pe.quadrantChart)==null?void 0:p.pointTextPadding)||5,pointLabelFontSize:((g=pe.quadrantChart)==null?void 0:g.pointLabelFontSize)||12,pointRadius:((y=pe.quadrantChart)==null?void 0:y.pointRadius)||5,xAxisPosition:((m=pe.quadrantChart)==null?void 0:m.xAxisPosition)||"top",yAxisPosition:((x=pe.quadrantChart)==null?void 0:x.yAxisPosition)||"left",quadrantInternalBorderStrokeWidth:((v=pe.quadrantChart)==null?void 0:v.quadrantInternalBorderStrokeWidth)||1,quadrantExternalBorderStrokeWidth:((T=pe.quadrantChart)==null?void 0:T.quadrantExternalBorderStrokeWidth)||2}}getDefaultThemeConfig(){return{quadrant1Fill:or.quadrant1Fill,quadrant2Fill:or.quadrant2Fill,quadrant3Fill:or.quadrant3Fill,quadrant4Fill:or.quadrant4Fill,quadrant1TextFill:or.quadrant1TextFill,quadrant2TextFill:or.quadrant2TextFill,quadrant3TextFill:or.quadrant3TextFill,quadrant4TextFill:or.quadrant4TextFill,quadrantPointFill:or.quadrantPointFill,quadrantPointTextFill:or.quadrantPointTextFill,quadrantXAxisTextFill:or.quadrantXAxisTextFill,quadrantYAxisTextFill:or.quadrantYAxisTextFill,quadrantTitleFill:or.quadrantTitleFill,quadrantInternalBorderStrokeFill:or.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:or.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,A.info("clear called")}setData(e){this.data={...this.data,...e}}addPoints(e){this.data.points=[...e,...this.data.points]}addClass(e,r){this.classes.set(e,r)}setConfig(e){A.trace("setConfig called with: ",e),this.config={...this.config,...e}}setThemeConfig(e){A.trace("setThemeConfig called with: ",e),this.themeConfig={...this.themeConfig,...e}}calculateSpace(e,r,a,i){const s=this.config.xAxisLabelPadding*2+this.config.xAxisLabelFontSize,n={top:e==="top"&&r?s:0,bottom:e==="bottom"&&r?s:0},o=this.config.yAxisLabelPadding*2+this.config.yAxisLabelFontSize,h={left:this.config.yAxisPosition==="left"&&a?o:0,right:this.config.yAxisPosition==="right"&&a?o:0},u=this.config.titleFontSize+this.config.titlePadding*2,d={top:i?u:0},f=this.config.quadrantPadding+h.left,p=this.config.quadrantPadding+n.top+d.top,g=this.config.chartWidth-this.config.quadrantPadding*2-h.left-h.right,y=this.config.chartHeight-this.config.quadrantPadding*2-n.top-n.bottom-d.top,m=g/2,x=y/2;return{xAxisSpace:n,yAxisSpace:h,titleSpace:d,quadrantSpace:{quadrantLeft:f,quadrantTop:p,quadrantWidth:g,quadrantHalfWidth:m,quadrantHeight:y,quadrantHalfHeight:x}}}getAxisLabels(e,r,a,i){const{quadrantSpace:s,titleSpace:n}=i,{quadrantHalfHeight:o,quadrantHeight:h,quadrantLeft:u,quadrantHalfWidth:d,quadrantTop:f,quadrantWidth:p}=s,g=!!this.data.xAxisRightText,y=!!this.data.yAxisTopText,m=[];return this.data.xAxisLeftText&&r&&m.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:u+(g?d/2:0),y:e==="top"?this.config.xAxisLabelPadding+n.top:this.config.xAxisLabelPadding+f+h+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&r&&m.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:u+d+(g?d/2:0),y:e==="top"?this.config.xAxisLabelPadding+n.top:this.config.xAxisLabelPadding+f+h+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:g?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&a&&m.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+u+p+this.config.quadrantPadding,y:f+h-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&a&&m.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:this.config.yAxisPosition==="left"?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+u+p+this.config.quadrantPadding,y:f+o-(y?o/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:y?"center":"left",horizontalPos:"top",rotation:-90}),m}getQuadrants(e){const{quadrantSpace:r}=e,{quadrantHalfHeight:a,quadrantLeft:i,quadrantHalfWidth:s,quadrantTop:n}=r,o=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+s,y:n,width:s,height:a,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:n,width:s,height:a,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:n+a,width:s,height:a,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+s,y:n+a,width:s,height:a,fill:this.themeConfig.quadrant4Fill}];for(const h of o)h.text.x=h.x+h.width/2,this.data.points.length===0?(h.text.y=h.y+h.height/2,h.text.horizontalPos="middle"):(h.text.y=h.y+this.config.quadrantTextTopPadding,h.text.horizontalPos="top");return o}getQuadrantPoints(e){const{quadrantSpace:r}=e,{quadrantHeight:a,quadrantLeft:i,quadrantTop:s,quadrantWidth:n}=r,o=hn().domain([0,1]).range([i,n+i]),h=hn().domain([0,1]).range([a+s,s]);return this.data.points.map(d=>{const f=this.classes.get(d.className);return f&&(d={...f,...d}),{x:o(d.x),y:h(d.y),fill:d.color??this.themeConfig.quadrantPointFill,radius:d.radius??this.config.pointRadius,text:{text:d.text,fill:this.themeConfig.quadrantPointTextFill,x:o(d.x),y:h(d.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:d.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:d.strokeWidth??"0px"}})}getBorders(e){const r=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:a}=e,{quadrantHalfHeight:i,quadrantHeight:s,quadrantLeft:n,quadrantHalfWidth:o,quadrantTop:h,quadrantWidth:u}=a;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:n-r,y1:h,x2:n+u+r,y2:h},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:n+u,y1:h+r,x2:n+u,y2:h+s-r},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:n-r,y1:h+s,x2:n+u+r,y2:h+s},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:n,y1:h+r,x2:n,y2:h+s-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:n+o,y1:h+r,x2:n+o,y2:h+s-r},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:n+r,y1:h+i,x2:n+u-r,y2:h+i}]}getTitle(e){if(e)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){const e=this.config.showXAxis&&!!(this.data.xAxisLeftText||this.data.xAxisRightText),r=this.config.showYAxis&&!!(this.data.yAxisTopText||this.data.yAxisBottomText),a=this.config.showTitle&&!!this.data.titleText,i=this.data.points.length>0?"bottom":this.config.xAxisPosition,s=this.calculateSpace(i,e,r,a);return{points:this.getQuadrantPoints(s),quadrants:this.getQuadrants(s),axisLabels:this.getAxisLabels(i,e,r,s),borderLines:this.getBorders(s),title:this.getTitle(a)}}},l(cs,"QuadrantBuilder"),cs),hs,Zn=(hs=class extends Error{constructor(e,r,a){super(`value for ${e} ${r} is invalid, please use a valid ${a}`),this.name="InvalidStyleError"}},l(hs,"InvalidStyleError"),hs);function Rc(t){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(t)}l(Rc,"validateHexCode");function xy(t){return!/^\d+$/.test(t)}l(xy,"validateNumber");function by(t){return!/^\d+px$/.test(t)}l(by,"validateSizeInPixels");var hE=H();function hi(t){return me(t.trim(),hE)}l(hi,"textSanitizer");var Xe=new cE;function ky(t){Xe.setData({quadrant1Text:hi(t.text)})}l(ky,"setQuadrant1Text");function vy(t){Xe.setData({quadrant2Text:hi(t.text)})}l(vy,"setQuadrant2Text");function Ty(t){Xe.setData({quadrant3Text:hi(t.text)})}l(Ty,"setQuadrant3Text");function _y(t){Xe.setData({quadrant4Text:hi(t.text)})}l(_y,"setQuadrant4Text");function Cy(t){Xe.setData({xAxisLeftText:hi(t.text)})}l(Cy,"setXAxisLeftText");function Sy(t){Xe.setData({xAxisRightText:hi(t.text)})}l(Sy,"setXAxisRightText");function wy(t){Xe.setData({yAxisTopText:hi(t.text)})}l(wy,"setYAxisTopText");function Ey(t){Xe.setData({yAxisBottomText:hi(t.text)})}l(Ey,"setYAxisBottomText");function bl(t){const e={};for(const r of t){const[a,i]=r.trim().split(/\s*:\s*/);if(a==="radius"){if(xy(i))throw new Zn(a,i,"number");e.radius=parseInt(i)}else if(a==="color"){if(Rc(i))throw new Zn(a,i,"hex code");e.color=i}else if(a==="stroke-color"){if(Rc(i))throw new Zn(a,i,"hex code");e.strokeColor=i}else if(a==="stroke-width"){if(by(i))throw new Zn(a,i,"number of pixels (eg. 10px)");e.strokeWidth=i}else throw new Error(`style named ${a} is not supported.`)}return e}l(bl,"parseStyles");function Ay(t,e,r,a,i){const s=bl(i);Xe.addPoints([{x:r,y:a,text:hi(t.text),className:e,...s}])}l(Ay,"addPoint");function Ly(t,e){Xe.addClass(t,bl(e))}l(Ly,"addClass");function By(t){Xe.setConfig({chartWidth:t})}l(By,"setWidth");function Dy(t){Xe.setConfig({chartHeight:t})}l(Dy,"setHeight");function Ry(){const t=H(),{themeVariables:e,quadrantChart:r}=t;return r&&Xe.setConfig(r),Xe.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),Xe.setData({titleText:Je()}),Xe.build()}l(Ry,"getQuadrantData");var uE=l(function(){Xe.clear(),Ye()},"clear"),dE={setWidth:By,setHeight:Dy,setQuadrant1Text:ky,setQuadrant2Text:vy,setQuadrant3Text:Ty,setQuadrant4Text:_y,setXAxisLeftText:Cy,setXAxisRightText:Sy,setYAxisTopText:wy,setYAxisBottomText:Ey,parseStyles:bl,addPoint:Ay,addClass:Ly,getQuadrantData:Ry,clear:uE,setAccTitle:He,getAccTitle:Ke,setDiagramTitle:dr,getDiagramTitle:Je,getAccDescription:Ze,setAccDescription:Qe},pE=l((t,e,r,a)=>{var S,b,C;function i(k){return k==="top"?"hanging":"middle"}l(i,"getDominantBaseLine");function s(k){return k==="left"?"start":"middle"}l(s,"getTextAnchor");function n(k){return`translate(${k.x}, ${k.y}) rotate(${k.rotation||0})`}l(n,"getTransformation");const o=H();A.debug(`Rendering quadrant chart
`+t);const h=o.securityLevel;let u;h==="sandbox"&&(u=yt("#i"+e));const f=(h==="sandbox"?yt(u.nodes()[0].contentDocument.body):yt("body")).select(`[id="${e}"]`),p=f.append("g").attr("class","main"),g=((S=o.quadrantChart)==null?void 0:S.chartWidth)??500,y=((b=o.quadrantChart)==null?void 0:b.chartHeight)??500;ar(f,y,g,((C=o.quadrantChart)==null?void 0:C.useMaxWidth)??!0),f.attr("viewBox","0 0 "+g+" "+y),a.db.setHeight(y),a.db.setWidth(g);const m=a.db.getQuadrantData(),x=p.append("g").attr("class","quadrants"),v=p.append("g").attr("class","border"),T=p.append("g").attr("class","data-points"),I=p.append("g").attr("class","labels"),B=p.append("g").attr("class","title");m.title&&B.append("text").attr("x",0).attr("y",0).attr("fill",m.title.fill).attr("font-size",m.title.fontSize).attr("dominant-baseline",i(m.title.horizontalPos)).attr("text-anchor",s(m.title.verticalPos)).attr("transform",n(m.title)).text(m.title.text),m.borderLines&&v.selectAll("line").data(m.borderLines).enter().append("line").attr("x1",k=>k.x1).attr("y1",k=>k.y1).attr("x2",k=>k.x2).attr("y2",k=>k.y2).style("stroke",k=>k.strokeFill).style("stroke-width",k=>k.strokeWidth);const _=x.selectAll("g.quadrant").data(m.quadrants).enter().append("g").attr("class","quadrant");_.append("rect").attr("x",k=>k.x).attr("y",k=>k.y).attr("width",k=>k.width).attr("height",k=>k.height).attr("fill",k=>k.fill),_.append("text").attr("x",0).attr("y",0).attr("fill",k=>k.text.fill).attr("font-size",k=>k.text.fontSize).attr("dominant-baseline",k=>i(k.text.horizontalPos)).attr("text-anchor",k=>s(k.text.verticalPos)).attr("transform",k=>n(k.text)).text(k=>k.text.text),I.selectAll("g.label").data(m.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text(k=>k.text).attr("fill",k=>k.fill).attr("font-size",k=>k.fontSize).attr("dominant-baseline",k=>i(k.horizontalPos)).attr("text-anchor",k=>s(k.verticalPos)).attr("transform",k=>n(k));const D=T.selectAll("g.data-point").data(m.points).enter().append("g").attr("class","data-point");D.append("circle").attr("cx",k=>k.x).attr("cy",k=>k.y).attr("r",k=>k.radius).attr("fill",k=>k.fill).attr("stroke",k=>k.strokeColor).attr("stroke-width",k=>k.strokeWidth),D.append("text").attr("x",0).attr("y",0).text(k=>k.text.text).attr("fill",k=>k.text.fill).attr("font-size",k=>k.text.fontSize).attr("dominant-baseline",k=>i(k.text.horizontalPos)).attr("text-anchor",k=>s(k.text.verticalPos)).attr("transform",k=>n(k.text))},"draw"),fE={draw:pE},gE={parser:lE,db:dE,renderer:fE,styles:l(()=>"","styles")};const yE=Object.freeze(Object.defineProperty({__proto__:null,diagram:gE},Symbol.toStringTag,{value:"Module"}));var Ic=function(){var t=l(function(V,F,M,R){for(M=M||{},R=V.length;R--;M[V[R]]=F);return M},"o"),e=[1,10,12,14,16,18,19,21,23],r=[2,6],a=[1,3],i=[1,5],s=[1,6],n=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],h=[1,25],u=[1,26],d=[1,28],f=[1,29],p=[1,30],g=[1,31],y=[1,32],m=[1,33],x=[1,34],v=[1,35],T=[1,36],I=[1,37],B=[1,43],_=[1,42],w=[1,47],D=[1,50],S=[1,10,12,14,16,18,19,21,23,34,35,36],b=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],C=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],k=[1,64],E={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:l(function(F,M,R,L,q,N,j){var it=N.length-1;switch(q){case 5:L.setOrientation(N[it]);break;case 9:L.setDiagramTitle(N[it].text.trim());break;case 12:L.setLineData({text:"",type:"text"},N[it]);break;case 13:L.setLineData(N[it-1],N[it]);break;case 14:L.setBarData({text:"",type:"text"},N[it]);break;case 15:L.setBarData(N[it-1],N[it]);break;case 16:this.$=N[it].trim(),L.setAccTitle(this.$);break;case 17:case 18:this.$=N[it].trim(),L.setAccDescription(this.$);break;case 19:this.$=N[it-1];break;case 20:this.$=[Number(N[it-2]),...N[it]];break;case 21:this.$=[Number(N[it])];break;case 22:L.setXAxisTitle(N[it]);break;case 23:L.setXAxisTitle(N[it-1]);break;case 24:L.setXAxisTitle({type:"text",text:""});break;case 25:L.setXAxisBand(N[it]);break;case 26:L.setXAxisRangeData(Number(N[it-2]),Number(N[it]));break;case 27:this.$=N[it-1];break;case 28:this.$=[N[it-2],...N[it]];break;case 29:this.$=[N[it]];break;case 30:L.setYAxisTitle(N[it]);break;case 31:L.setYAxisTitle(N[it-1]);break;case 32:L.setYAxisTitle({type:"text",text:""});break;case 33:L.setYAxisRangeData(Number(N[it-2]),Number(N[it]));break;case 37:this.$={text:N[it],type:"text"};break;case 38:this.$={text:N[it],type:"text"};break;case 39:this.$={text:N[it],type:"markdown"};break;case 40:this.$=N[it];break;case 41:this.$=N[it-1]+""+N[it];break}},"anonymous"),table:[t(e,r,{3:1,4:2,7:4,5:a,34:i,35:s,36:n}),{1:[3]},t(e,r,{4:2,7:4,3:8,5:a,34:i,35:s,36:n}),t(e,r,{4:2,7:4,6:9,3:10,5:a,8:[1,11],34:i,35:s,36:n}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,r,{4:2,7:4,3:21,5:a,34:i,35:s,36:n}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:i,35:s,36:n}),{11:23,37:24,38:h,39:u,40:27,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I},{11:39,13:38,24:B,27:_,29:40,30:41,37:24,38:h,39:u,40:27,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I},{11:45,15:44,27:w,33:46,37:24,38:h,39:u,40:27,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I},{11:49,17:48,24:D,37:24,38:h,39:u,40:27,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I},{11:52,17:51,24:D,37:24,38:h,39:u,40:27,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I},{20:[1,53]},{22:[1,54]},t(S,[2,18]),{1:[2,2]},t(S,[2,8]),t(S,[2,9]),t(b,[2,37],{40:55,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I}),t(b,[2,38]),t(b,[2,39]),t(C,[2,40]),t(C,[2,42]),t(C,[2,43]),t(C,[2,44]),t(C,[2,45]),t(C,[2,46]),t(C,[2,47]),t(C,[2,48]),t(C,[2,49]),t(C,[2,50]),t(C,[2,51]),t(S,[2,10]),t(S,[2,22],{30:41,29:56,24:B,27:_}),t(S,[2,24]),t(S,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:h,39:u,40:27,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I},t(S,[2,11]),t(S,[2,30],{33:60,27:w}),t(S,[2,32]),{31:[1,61]},t(S,[2,12]),{17:62,24:D},{25:63,27:k},t(S,[2,14]),{17:65,24:D},t(S,[2,16]),t(S,[2,17]),t(C,[2,41]),t(S,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(S,[2,31]),{27:[1,69]},t(S,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(S,[2,15]),t(S,[2,26]),t(S,[2,27]),{11:59,32:72,37:24,38:h,39:u,40:27,41:d,42:f,43:p,44:g,45:y,46:m,47:x,48:v,49:T,50:I},t(S,[2,33]),t(S,[2,19]),{25:73,27:k},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:l(function(F,M){if(M.recoverable)this.trace(F);else{var R=new Error(F);throw R.hash=M,R}},"parseError"),parse:l(function(F){var M=this,R=[0],L=[],q=[null],N=[],j=this.table,it="",tt=0,pt=0,K=2,nt=1,ht=N.slice.call(arguments,1),st=Object.create(this.lexer),rt={yy:{}};for(var Z in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Z)&&(rt.yy[Z]=this.yy[Z]);st.setInput(F,rt.yy),rt.yy.lexer=st,rt.yy.parser=this,typeof st.yylloc>"u"&&(st.yylloc={});var at=st.yylloc;N.push(at);var Q=st.options&&st.options.ranges;typeof rt.yy.parseError=="function"?this.parseError=rt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function lt(ot){R.length=R.length-2*ot,q.length=q.length-ot,N.length=N.length-ot}l(lt,"popStack");function z(){var ot;return ot=L.pop()||st.lex()||nt,typeof ot!="number"&&(ot instanceof Array&&(L=ot,ot=L.pop()),ot=M.symbols_[ot]||ot),ot}l(z,"lex");for(var Et,X,vt,Ct,Yt={},Ut,ae,qt,ut;;){if(X=R[R.length-1],this.defaultActions[X]?vt=this.defaultActions[X]:((Et===null||typeof Et>"u")&&(Et=z()),vt=j[X]&&j[X][Et]),typeof vt>"u"||!vt.length||!vt[0]){var xt="";ut=[];for(Ut in j[X])this.terminals_[Ut]&&Ut>K&&ut.push("'"+this.terminals_[Ut]+"'");st.showPosition?xt="Parse error on line "+(tt+1)+`:
`+st.showPosition()+`
Expecting `+ut.join(", ")+", got '"+(this.terminals_[Et]||Et)+"'":xt="Parse error on line "+(tt+1)+": Unexpected "+(Et==nt?"end of input":"'"+(this.terminals_[Et]||Et)+"'"),this.parseError(xt,{text:st.match,token:this.terminals_[Et]||Et,line:st.yylineno,loc:at,expected:ut})}if(vt[0]instanceof Array&&vt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+X+", token: "+Et);switch(vt[0]){case 1:R.push(Et),q.push(st.yytext),N.push(st.yylloc),R.push(vt[1]),Et=null,pt=st.yyleng,it=st.yytext,tt=st.yylineno,at=st.yylloc;break;case 2:if(ae=this.productions_[vt[1]][1],Yt.$=q[q.length-ae],Yt._$={first_line:N[N.length-(ae||1)].first_line,last_line:N[N.length-1].last_line,first_column:N[N.length-(ae||1)].first_column,last_column:N[N.length-1].last_column},Q&&(Yt._$.range=[N[N.length-(ae||1)].range[0],N[N.length-1].range[1]]),Ct=this.performAction.apply(Yt,[it,pt,tt,rt.yy,vt[1],q,N].concat(ht)),typeof Ct<"u")return Ct;ae&&(R=R.slice(0,-1*ae*2),q=q.slice(0,-1*ae),N=N.slice(0,-1*ae)),R.push(this.productions_[vt[1]][0]),q.push(Yt.$),N.push(Yt._$),qt=j[R[R.length-2]][R[R.length-1]],R.push(qt);break;case 3:return!0}}return!0},"parse")},P=function(){var V={EOF:1,parseError:l(function(M,R){if(this.yy.parser)this.yy.parser.parseError(M,R);else throw new Error(M)},"parseError"),setInput:l(function(F,M){return this.yy=M||this.yy||{},this._input=F,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var F=this._input[0];this.yytext+=F,this.yyleng++,this.offset++,this.match+=F,this.matched+=F;var M=F.match(/(?:\r\n?|\n).*/g);return M?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),F},"input"),unput:l(function(F){var M=F.length,R=F.split(/(?:\r\n?|\n)/g);this._input=F+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-M),this.offset-=M;var L=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),R.length-1&&(this.yylineno-=R.length-1);var q=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:R?(R.length===L.length?this.yylloc.first_column:0)+L[L.length-R.length].length-R[0].length:this.yylloc.first_column-M},this.options.ranges&&(this.yylloc.range=[q[0],q[0]+this.yyleng-M]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(F){this.unput(this.match.slice(F))},"less"),pastInput:l(function(){var F=this.matched.substr(0,this.matched.length-this.match.length);return(F.length>20?"...":"")+F.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var F=this.match;return F.length<20&&(F+=this._input.substr(0,20-F.length)),(F.substr(0,20)+(F.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var F=this.pastInput(),M=new Array(F.length+1).join("-");return F+this.upcomingInput()+`
`+M+"^"},"showPosition"),test_match:l(function(F,M){var R,L,q;if(this.options.backtrack_lexer&&(q={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(q.yylloc.range=this.yylloc.range.slice(0))),L=F[0].match(/(?:\r\n?|\n).*/g),L&&(this.yylineno+=L.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:L?L[L.length-1].length-L[L.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+F[0].length},this.yytext+=F[0],this.match+=F[0],this.matches=F,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(F[0].length),this.matched+=F[0],R=this.performAction.call(this,this.yy,this,M,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),R)return R;if(this._backtrack){for(var N in q)this[N]=q[N];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var F,M,R,L;this._more||(this.yytext="",this.match="");for(var q=this._currentRules(),N=0;N<q.length;N++)if(R=this._input.match(this.rules[q[N]]),R&&(!M||R[0].length>M[0].length)){if(M=R,L=N,this.options.backtrack_lexer){if(F=this.test_match(R,q[N]),F!==!1)return F;if(this._backtrack){M=!1;continue}else return!1}else if(!this.options.flex)break}return M?(F=this.test_match(M,q[L]),F!==!1?F:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var M=this.next();return M||this.lex()},"lex"),begin:l(function(M){this.conditionStack.push(M)},"begin"),popState:l(function(){var M=this.conditionStack.length-1;return M>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(M){return M=this.conditionStack.length-1-Math.abs(M||0),M>=0?this.conditionStack[M]:"INITIAL"},"topState"),pushState:l(function(M){this.begin(M)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(M,R,L,q){switch(L){case 0:break;case 1:break;case 2:return this.popState(),34;case 3:return this.popState(),34;case 4:return 34;case 5:break;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 5;case 15:return 8;case 16:return this.pushState("axis_data"),"X_AXIS";case 17:return this.pushState("axis_data"),"Y_AXIS";case 18:return this.pushState("axis_band_data"),24;case 19:return 31;case 20:return this.pushState("data"),16;case 21:return this.pushState("data"),18;case 22:return this.pushState("data_inner"),24;case 23:return 27;case 24:return this.popState(),26;case 25:this.popState();break;case 26:this.pushState("string");break;case 27:this.popState();break;case 28:return"STR";case 29:return 24;case 30:return 26;case 31:return 43;case 32:return"COLON";case 33:return 44;case 34:return 28;case 35:return 45;case 36:return 46;case 37:return 48;case 38:return 50;case 39:return 47;case 40:return 41;case 41:return 49;case 42:return 42;case 43:break;case 44:return 35;case 45:return 36}},"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,23,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,20,21,22,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,24,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,23,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[27,28],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,20,21,25,26,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45],inclusive:!0}}};return V}();E.lexer=P;function O(){this.yy={}}return l(O,"Parser"),O.prototype=E,E.Parser=O,new O}();Ic.parser=Ic;var mE=Ic;function Nc(t){return t.type==="bar"}l(Nc,"isBarPlot");function uu(t){return t.type==="band"}l(uu,"isBandAxisData");function Oa(t){return t.type==="linear"}l(Oa,"isLinearAxisData");var us,Iy=(us=class{constructor(e){this.parentGroup=e}getMaxDimension(e,r){if(!this.parentGroup)return{width:e.reduce((s,n)=>Math.max(n.length,s),0)*r,height:r};const a={width:0,height:0},i=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",r);for(const s of e){const n=tf(i,1,s),o=n?n.width:s.length*r,h=n?n.height:r;a.width=Math.max(a.width,o),a.height=Math.max(a.height,h)}return i.remove(),a}},l(us,"TextDimensionCalculatorWithFont"),us),$d=.7,Vd=.2,ds,Ny=(ds=class{constructor(e,r,a,i){this.axisConfig=e,this.title=r,this.textDimensionCalculator=a,this.axisThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}setRange(e){this.range=e,this.axisPosition==="left"||this.axisPosition==="right"?this.boundingRect.height=e[1]-e[0]:this.boundingRect.width=e[1]-e[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(e){this.axisPosition=e,this.setRange(this.range)}getTickDistance(){const e=this.getRange();return Math.abs(e[0]-e[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map(e=>e.toString()),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){$d*this.getTickDistance()>this.outerPadding*2&&(this.outerPadding=Math.floor($d*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(e){let r=e.height;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const a=this.getLabelDimension(),i=Vd*e.width;this.outerPadding=Math.min(a.width/2,i);const s=a.height+this.axisConfig.labelPadding*2;this.labelTextHeight=a.height,s<=r&&(r-=s,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const a=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=a.height+this.axisConfig.titlePadding*2;this.titleTextHeight=a.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=e.width,this.boundingRect.height=e.height-r}calculateSpaceIfDrawnVertical(e){let r=e.width;if(this.axisConfig.showAxisLine&&r>this.axisConfig.axisLineWidth&&(r-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){const a=this.getLabelDimension(),i=Vd*e.height;this.outerPadding=Math.min(a.height/2,i);const s=a.width+this.axisConfig.labelPadding*2;s<=r&&(r-=s,this.showLabel=!0)}if(this.axisConfig.showTick&&r>=this.axisConfig.tickLength&&(this.showTick=!0,r-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){const a=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),i=a.height+this.axisConfig.titlePadding*2;this.titleTextHeight=a.height,i<=r&&(r-=i,this.showTitle=!0)}this.boundingRect.width=e.width-r,this.boundingRect.height=e.height}calculateSpace(e){return this.axisPosition==="left"||this.axisPosition==="right"?this.calculateSpaceIfDrawnVertical(e):this.calculateSpaceIfDrawnHorizontally(e),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}getDrawableElementsForLeftAxis(){const e=[];if(this.showAxisLine){const r=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${r},${this.boundingRect.y} L ${r},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(r),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"}))}),this.showTick){const r=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map(a=>({path:`M ${r},${this.getScaleValue(a)} L ${r-this.axisConfig.tickLength},${this.getScaleValue(a)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForBottomAxis(){const e=[];if(this.showAxisLine){const r=this.boundingRect.y+this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);e.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map(a=>({path:`M ${this.getScaleValue(a)},${r} L ${this.getScaleValue(a)},${r+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElementsForTopAxis(){const e=[];if(this.showAxisLine){const r=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;e.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${r} L ${this.boundingRect.x+this.boundingRect.width},${r}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&e.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map(r=>({text:r.toString(),x:this.getScaleValue(r),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+this.axisConfig.titlePadding*2:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}))}),this.showTick){const r=this.boundingRect.y;e.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map(a=>({path:`M ${this.getScaleValue(a)},${r+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(a)},${r+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth}))})}return this.showTitle&&e.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),e}getDrawableElements(){if(this.axisPosition==="left")return this.getDrawableElementsForLeftAxis();if(this.axisPosition==="right")throw Error("Drawing of right axis is not implemented");return this.axisPosition==="bottom"?this.getDrawableElementsForBottomAxis():this.axisPosition==="top"?this.getDrawableElementsForTopAxis():[]}},l(ds,"BaseAxis"),ds),ps,xE=(ps=class extends Ny{constructor(e,r,a,i,s){super(e,i,s,r),this.categories=a,this.scale=od().domain(this.categories).range(this.getRange())}setRange(e){super.setRange(e)}recalculateScale(){this.scale=od().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),A.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(e){return this.scale(e)??this.getRange()[0]}},l(ps,"BandAxis"),ps),fs,bE=(fs=class extends Ny{constructor(e,r,a,i,s){super(e,i,s,r),this.domain=a,this.scale=hn().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){const e=[...this.domain];this.axisPosition==="left"&&e.reverse(),this.scale=hn().domain(e).range(this.getRange())}getScaleValue(e){return this.scale(e)}},l(fs,"LinearAxis"),fs);function Fc(t,e,r,a){const i=new Iy(a);return uu(t)?new xE(e,r,t.categories,t.title,i):new bE(e,r,[t.min,t.max],t.title,i)}l(Fc,"getAxis");var gs,kE=(gs=class{constructor(e,r,a,i){this.textDimensionCalculator=e,this.chartConfig=r,this.chartData=a,this.chartThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){const r=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),a=Math.max(r.width,e.width),i=r.height+2*this.chartConfig.titlePadding;return r.width<=a&&r.height<=i&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=a,this.boundingRect.height=i,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){const e=[];return this.showChartTitle&&e.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),e}},l(gs,"ChartTitle"),gs);function Fy(t,e,r,a){const i=new Iy(a);return new kE(i,t,e,r)}l(Fy,"getChartTitleComponent");var ys,vE=(ys=class{constructor(e,r,a,i,s){this.plotData=e,this.xAxis=r,this.yAxis=a,this.orientation=i,this.plotIndex=s}getDrawableElement(){const e=this.plotData.data.map(a=>[this.xAxis.getScaleValue(a[0]),this.yAxis.getScaleValue(a[1])]);let r;return this.orientation==="horizontal"?r=pa().y(a=>a[0]).x(a=>a[1])(e):r=pa().x(a=>a[0]).y(a=>a[1])(e),r?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:r,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}},l(ys,"LinePlot"),ys),ms,TE=(ms=class{constructor(e,r,a,i,s,n){this.barData=e,this.boundingRect=r,this.xAxis=a,this.yAxis=i,this.orientation=s,this.plotIndex=n}getDrawableElement(){const e=this.barData.data.map(s=>[this.xAxis.getScaleValue(s[0]),this.yAxis.getScaleValue(s[1])]),a=Math.min(this.xAxis.getAxisOuterPadding()*2,this.xAxis.getTickDistance())*(1-.05),i=a/2;return this.orientation==="horizontal"?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(s=>({x:this.boundingRect.x,y:s[0]-i,height:a,width:s[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:e.map(s=>({x:s[0]-i,y:s[1],width:a,height:this.boundingRect.y+this.boundingRect.height-s[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill}))}]}},l(ms,"BarPlot"),ms),xs,_E=(xs=class{constructor(e,r,a){this.chartConfig=e,this.chartData=r,this.chartThemeConfig=a,this.boundingRect={x:0,y:0,width:0,height:0}}setAxes(e,r){this.xAxis=e,this.yAxis=r}setBoundingBoxXY(e){this.boundingRect.x=e.x,this.boundingRect.y=e.y}calculateSpace(e){return this.boundingRect.width=e.width,this.boundingRect.height=e.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!(this.xAxis&&this.yAxis))throw Error("Axes must be passed to render Plots");const e=[];for(const[r,a]of this.chartData.plots.entries())switch(a.type){case"line":{const i=new vE(a,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);e.push(...i.getDrawableElement())}break;case"bar":{const i=new TE(a,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,r);e.push(...i.getDrawableElement())}break}return e}},l(xs,"BasePlot"),xs);function Py(t,e,r){return new _E(t,e,r)}l(Py,"getPlotComponent");var bs,CE=(bs=class{constructor(e,r,a,i){this.chartConfig=e,this.chartData=r,this.componentStore={title:Fy(e,r,a,i),plot:Py(e,r,a),xAxis:Fc(r.xAxis,e.xAxis,{titleColor:a.xAxisTitleColor,labelColor:a.xAxisLabelColor,tickColor:a.xAxisTickColor,axisLineColor:a.xAxisLineColor},i),yAxis:Fc(r.yAxis,e.yAxis,{titleColor:a.yAxisTitleColor,labelColor:a.yAxisLabelColor,tickColor:a.yAxisTickColor,axisLineColor:a.yAxisLineColor},i)}}calculateVerticalSpace(){let e=this.chartConfig.width,r=this.chartConfig.height,a=0,i=0,s=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),n=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:s,height:n});e-=o.width,r-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),i=o.height,r-=o.height,this.componentStore.xAxis.setAxisPosition("bottom"),o=this.componentStore.xAxis.calculateSpace({width:e,height:r}),r-=o.height,this.componentStore.yAxis.setAxisPosition("left"),o=this.componentStore.yAxis.calculateSpace({width:e,height:r}),a=o.width,e-=o.width,e>0&&(s+=e,e=0),r>0&&(n+=r,r=0),this.componentStore.plot.calculateSpace({width:s,height:n}),this.componentStore.plot.setBoundingBoxXY({x:a,y:i}),this.componentStore.xAxis.setRange([a,a+s]),this.componentStore.xAxis.setBoundingBoxXY({x:a,y:i+n}),this.componentStore.yAxis.setRange([i,i+n]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:i}),this.chartData.plots.some(h=>Nc(h))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let e=this.chartConfig.width,r=this.chartConfig.height,a=0,i=0,s=0,n=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=Math.floor(r*this.chartConfig.plotReservedSpacePercent/100),h=this.componentStore.plot.calculateSpace({width:n,height:o});e-=h.width,r-=h.height,h=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:r}),a=h.height,r-=h.height,this.componentStore.xAxis.setAxisPosition("left"),h=this.componentStore.xAxis.calculateSpace({width:e,height:r}),e-=h.width,i=h.width,this.componentStore.yAxis.setAxisPosition("top"),h=this.componentStore.yAxis.calculateSpace({width:e,height:r}),r-=h.height,s=a+h.height,e>0&&(n+=e,e=0),r>0&&(o+=r,r=0),this.componentStore.plot.calculateSpace({width:n,height:o}),this.componentStore.plot.setBoundingBoxXY({x:i,y:s}),this.componentStore.yAxis.setRange([i,i+n]),this.componentStore.yAxis.setBoundingBoxXY({x:i,y:a}),this.componentStore.xAxis.setRange([s,s+o]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:s}),this.chartData.plots.some(u=>Nc(u))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){this.chartConfig.chartOrientation==="horizontal"?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();const e=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(const r of Object.values(this.componentStore))e.push(...r.getDrawableElements());return e}},l(bs,"Orchestrator"),bs),ks,SE=(ks=class{static build(e,r,a,i){return new CE(e,r,a,i).getDrawableElement()}},l(ks,"XYChartBuilder"),ks),kn=0,Oy,vn=fu(),Tn=pu(),ge=gu(),Pc=Tn.plotColorPalette.split(",").map(t=>t.trim()),kl=!1,du=!1;function pu(){const t=ch(),e=_e();return Bi(t.xyChart,e.themeVariables.xyChart)}l(pu,"getChartDefaultThemeConfig");function fu(){const t=_e();return Bi(pe.xyChart,t.xyChart)}l(fu,"getChartDefaultConfig");function gu(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}l(gu,"getChartDefaultData");function vl(t){const e=_e();return me(t.trim(),e)}l(vl,"textSanitizer");function My(t){Oy=t}l(My,"setTmpSVGG");function $y(t){t==="horizontal"?vn.chartOrientation="horizontal":vn.chartOrientation="vertical"}l($y,"setOrientation");function Vy(t){ge.xAxis.title=vl(t.text)}l(Vy,"setXAxisTitle");function yu(t,e){ge.xAxis={type:"linear",title:ge.xAxis.title,min:t,max:e},kl=!0}l(yu,"setXAxisRangeData");function zy(t){ge.xAxis={type:"band",title:ge.xAxis.title,categories:t.map(e=>vl(e.text))},kl=!0}l(zy,"setXAxisBand");function Wy(t){ge.yAxis.title=vl(t.text)}l(Wy,"setYAxisTitle");function qy(t,e){ge.yAxis={type:"linear",title:ge.yAxis.title,min:t,max:e},du=!0}l(qy,"setYAxisRangeData");function Yy(t){const e=Math.min(...t),r=Math.max(...t),a=Oa(ge.yAxis)?ge.yAxis.min:1/0,i=Oa(ge.yAxis)?ge.yAxis.max:-1/0;ge.yAxis={type:"linear",title:ge.yAxis.title,min:Math.min(a,e),max:Math.max(i,r)}}l(Yy,"setYAxisRangeFromPlotData");function mu(t){let e=[];if(t.length===0)return e;if(!kl){const r=Oa(ge.xAxis)?ge.xAxis.min:1/0,a=Oa(ge.xAxis)?ge.xAxis.max:-1/0;yu(Math.min(r,1),Math.max(a,t.length))}if(du||Yy(t),uu(ge.xAxis)&&(e=ge.xAxis.categories.map((r,a)=>[r,t[a]])),Oa(ge.xAxis)){const r=ge.xAxis.min,a=ge.xAxis.max,i=(a-r)/(t.length-1),s=[];for(let n=r;n<=a;n+=i)s.push(`${n}`);e=s.map((n,o)=>[n,t[o]])}return e}l(mu,"transformDataWithoutCategory");function xu(t){return Pc[t===0?0:t%Pc.length]}l(xu,"getPlotColorFromPalette");function Hy(t,e){const r=mu(e);ge.plots.push({type:"line",strokeFill:xu(kn),strokeWidth:2,data:r}),kn++}l(Hy,"setLineData");function Gy(t,e){const r=mu(e);ge.plots.push({type:"bar",fill:xu(kn),data:r}),kn++}l(Gy,"setBarData");function Uy(){if(ge.plots.length===0)throw Error("No Plot to render, please provide a plot with some data");return ge.title=Je(),SE.build(vn,ge,Tn,Oy)}l(Uy,"getDrawableElem");function jy(){return Tn}l(jy,"getChartThemeConfig");function Xy(){return vn}l(Xy,"getChartConfig");var wE=l(function(){Ye(),kn=0,vn=fu(),ge=gu(),Tn=pu(),Pc=Tn.plotColorPalette.split(",").map(t=>t.trim()),kl=!1,du=!1},"clear"),EE={getDrawableElem:Uy,clear:wE,setAccTitle:He,getAccTitle:Ke,setDiagramTitle:dr,getDiagramTitle:Je,getAccDescription:Ze,setAccDescription:Qe,setOrientation:$y,setXAxisTitle:Vy,setXAxisRangeData:yu,setXAxisBand:zy,setYAxisTitle:Wy,setYAxisRangeData:qy,setLineData:Hy,setBarData:Gy,setTmpSVGG:My,getChartThemeConfig:jy,getChartConfig:Xy},AE=l((t,e,r,a)=>{const i=a.db,s=i.getChartThemeConfig(),n=i.getChartConfig();function o(x){return x==="top"?"text-before-edge":"middle"}l(o,"getDominantBaseLine");function h(x){return x==="left"?"start":x==="right"?"end":"middle"}l(h,"getTextAnchor");function u(x){return`translate(${x.x}, ${x.y}) rotate(${x.rotation||0})`}l(u,"getTextTransformation"),A.debug(`Rendering xychart chart
`+t);const d=Ki(e),f=d.append("g").attr("class","main"),p=f.append("rect").attr("width",n.width).attr("height",n.height).attr("class","background");ar(d,n.height,n.width,!0),d.attr("viewBox",`0 0 ${n.width} ${n.height}`),p.attr("fill",s.backgroundColor),i.setTmpSVGG(d.append("g").attr("class","mermaid-tmp-group"));const g=i.getDrawableElem(),y={};function m(x){let v=f,T="";for(const[I]of x.entries()){let B=f;I>0&&y[T]&&(B=y[T]),T+=x[I],v=y[T],v||(v=y[T]=B.append("g").attr("class",x[I]))}return v}l(m,"getGroup");for(const x of g){if(x.data.length===0)continue;const v=m(x.groupTexts);switch(x.type){case"rect":v.selectAll("rect").data(x.data).enter().append("rect").attr("x",T=>T.x).attr("y",T=>T.y).attr("width",T=>T.width).attr("height",T=>T.height).attr("fill",T=>T.fill).attr("stroke",T=>T.strokeFill).attr("stroke-width",T=>T.strokeWidth);break;case"text":v.selectAll("text").data(x.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",T=>T.fill).attr("font-size",T=>T.fontSize).attr("dominant-baseline",T=>o(T.verticalPos)).attr("text-anchor",T=>h(T.horizontalPos)).attr("transform",T=>u(T)).text(T=>T.text);break;case"path":v.selectAll("path").data(x.data).enter().append("path").attr("d",T=>T.path).attr("fill",T=>T.fill?T.fill:"none").attr("stroke",T=>T.strokeFill).attr("stroke-width",T=>T.strokeWidth);break}}},"draw"),LE={draw:AE},BE={parser:mE,db:EE,renderer:LE};const DE=Object.freeze(Object.defineProperty({__proto__:null,diagram:BE},Symbol.toStringTag,{value:"Module"}));var Oc=function(){var t=l(function(pt,K,nt,ht){for(nt=nt||{},ht=pt.length;ht--;nt[pt[ht]]=K);return nt},"o"),e=[1,3],r=[1,4],a=[1,5],i=[1,6],s=[5,6,8,9,11,13,31,32,33,34,35,36,44,62,63],n=[1,18],o=[2,7],h=[1,22],u=[1,23],d=[1,24],f=[1,25],p=[1,26],g=[1,27],y=[1,20],m=[1,28],x=[1,29],v=[62,63],T=[5,8,9,11,13,31,32,33,34,35,36,44,51,53,62,63],I=[1,47],B=[1,48],_=[1,49],w=[1,50],D=[1,51],S=[1,52],b=[1,53],C=[53,54],k=[1,64],E=[1,60],P=[1,61],O=[1,62],V=[1,63],F=[1,65],M=[1,69],R=[1,70],L=[1,67],q=[1,68],N=[5,8,9,11,13,31,32,33,34,35,36,44,62,63],j={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,requirementType:17,requirementName:18,STRUCT_START:19,requirementBody:20,ID:21,COLONSEP:22,id:23,TEXT:24,text:25,RISK:26,riskLevel:27,VERIFYMTHD:28,verifyType:29,STRUCT_STOP:30,REQUIREMENT:31,FUNCTIONAL_REQUIREMENT:32,INTERFACE_REQUIREMENT:33,PERFORMANCE_REQUIREMENT:34,PHYSICAL_REQUIREMENT:35,DESIGN_CONSTRAINT:36,LOW_RISK:37,MED_RISK:38,HIGH_RISK:39,VERIFY_ANALYSIS:40,VERIFY_DEMONSTRATION:41,VERIFY_INSPECTION:42,VERIFY_TEST:43,ELEMENT:44,elementName:45,elementBody:46,TYPE:47,type:48,DOCREF:49,ref:50,END_ARROW_L:51,relationship:52,LINE:53,END_ARROW_R:54,CONTAINS:55,COPIES:56,DERIVES:57,SATISFIES:58,VERIFIES:59,REFINES:60,TRACES:61,unqString:62,qString:63,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",19:"STRUCT_START",21:"ID",22:"COLONSEP",24:"TEXT",26:"RISK",28:"VERIFYMTHD",30:"STRUCT_STOP",31:"REQUIREMENT",32:"FUNCTIONAL_REQUIREMENT",33:"INTERFACE_REQUIREMENT",34:"PERFORMANCE_REQUIREMENT",35:"PHYSICAL_REQUIREMENT",36:"DESIGN_CONSTRAINT",37:"LOW_RISK",38:"MED_RISK",39:"HIGH_RISK",40:"VERIFY_ANALYSIS",41:"VERIFY_DEMONSTRATION",42:"VERIFY_INSPECTION",43:"VERIFY_TEST",44:"ELEMENT",47:"TYPE",49:"DOCREF",51:"END_ARROW_L",53:"LINE",54:"END_ARROW_R",55:"CONTAINS",56:"COPIES",57:"DERIVES",58:"SATISFIES",59:"VERIFIES",60:"REFINES",61:"TRACES",62:"unqString",63:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[14,5],[20,5],[20,5],[20,5],[20,5],[20,2],[20,1],[17,1],[17,1],[17,1],[17,1],[17,1],[17,1],[27,1],[27,1],[27,1],[29,1],[29,1],[29,1],[29,1],[15,5],[46,5],[46,5],[46,2],[46,1],[16,5],[16,5],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[52,1],[18,1],[18,1],[23,1],[23,1],[25,1],[25,1],[45,1],[45,1],[48,1],[48,1],[50,1],[50,1]],performAction:l(function(K,nt,ht,st,rt,Z,at){var Q=Z.length-1;switch(rt){case 4:this.$=Z[Q].trim(),st.setAccTitle(this.$);break;case 5:case 6:this.$=Z[Q].trim(),st.setAccDescription(this.$);break;case 7:this.$=[];break;case 13:st.addRequirement(Z[Q-3],Z[Q-4]);break;case 14:st.setNewReqId(Z[Q-2]);break;case 15:st.setNewReqText(Z[Q-2]);break;case 16:st.setNewReqRisk(Z[Q-2]);break;case 17:st.setNewReqVerifyMethod(Z[Q-2]);break;case 20:this.$=st.RequirementType.REQUIREMENT;break;case 21:this.$=st.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 22:this.$=st.RequirementType.INTERFACE_REQUIREMENT;break;case 23:this.$=st.RequirementType.PERFORMANCE_REQUIREMENT;break;case 24:this.$=st.RequirementType.PHYSICAL_REQUIREMENT;break;case 25:this.$=st.RequirementType.DESIGN_CONSTRAINT;break;case 26:this.$=st.RiskLevel.LOW_RISK;break;case 27:this.$=st.RiskLevel.MED_RISK;break;case 28:this.$=st.RiskLevel.HIGH_RISK;break;case 29:this.$=st.VerifyType.VERIFY_ANALYSIS;break;case 30:this.$=st.VerifyType.VERIFY_DEMONSTRATION;break;case 31:this.$=st.VerifyType.VERIFY_INSPECTION;break;case 32:this.$=st.VerifyType.VERIFY_TEST;break;case 33:st.addElement(Z[Q-3]);break;case 34:st.setNewElementType(Z[Q-2]);break;case 35:st.setNewElementDocRef(Z[Q-2]);break;case 38:st.addRelationship(Z[Q-2],Z[Q],Z[Q-4]);break;case 39:st.addRelationship(Z[Q-2],Z[Q-4],Z[Q]);break;case 40:this.$=st.Relationships.CONTAINS;break;case 41:this.$=st.Relationships.COPIES;break;case 42:this.$=st.Relationships.DERIVES;break;case 43:this.$=st.Relationships.SATISFIES;break;case 44:this.$=st.Relationships.VERIFIES;break;case 45:this.$=st.Relationships.REFINES;break;case 46:this.$=st.Relationships.TRACES;break}},"anonymous"),table:[{3:1,4:2,6:e,9:r,11:a,13:i},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:r,11:a,13:i},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(s,[2,6]),{3:12,4:2,6:e,9:r,11:a,13:i},{1:[2,2]},{4:17,5:n,7:13,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:19,23:21,31:h,32:u,33:d,34:f,35:p,36:g,44:y,62:m,63:x},t(s,[2,4]),t(s,[2,5]),{1:[2,1]},{8:[1,30]},{4:17,5:n,7:31,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:19,23:21,31:h,32:u,33:d,34:f,35:p,36:g,44:y,62:m,63:x},{4:17,5:n,7:32,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:19,23:21,31:h,32:u,33:d,34:f,35:p,36:g,44:y,62:m,63:x},{4:17,5:n,7:33,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:19,23:21,31:h,32:u,33:d,34:f,35:p,36:g,44:y,62:m,63:x},{4:17,5:n,7:34,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:19,23:21,31:h,32:u,33:d,34:f,35:p,36:g,44:y,62:m,63:x},{4:17,5:n,7:35,8:o,9:r,11:a,13:i,14:14,15:15,16:16,17:19,23:21,31:h,32:u,33:d,34:f,35:p,36:g,44:y,62:m,63:x},{18:36,62:[1,37],63:[1,38]},{45:39,62:[1,40],63:[1,41]},{51:[1,42],53:[1,43]},t(v,[2,20]),t(v,[2,21]),t(v,[2,22]),t(v,[2,23]),t(v,[2,24]),t(v,[2,25]),t(T,[2,49]),t(T,[2,50]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{19:[1,44]},{19:[2,47]},{19:[2,48]},{19:[1,45]},{19:[2,53]},{19:[2,54]},{52:46,55:I,56:B,57:_,58:w,59:D,60:S,61:b},{52:54,55:I,56:B,57:_,58:w,59:D,60:S,61:b},{5:[1,55]},{5:[1,56]},{53:[1,57]},t(C,[2,40]),t(C,[2,41]),t(C,[2,42]),t(C,[2,43]),t(C,[2,44]),t(C,[2,45]),t(C,[2,46]),{54:[1,58]},{5:k,20:59,21:E,24:P,26:O,28:V,30:F},{5:M,30:R,46:66,47:L,49:q},{23:71,62:m,63:x},{23:72,62:m,63:x},t(N,[2,13]),{22:[1,73]},{22:[1,74]},{22:[1,75]},{22:[1,76]},{5:k,20:77,21:E,24:P,26:O,28:V,30:F},t(N,[2,19]),t(N,[2,33]),{22:[1,78]},{22:[1,79]},{5:M,30:R,46:80,47:L,49:q},t(N,[2,37]),t(N,[2,38]),t(N,[2,39]),{23:81,62:m,63:x},{25:82,62:[1,83],63:[1,84]},{27:85,37:[1,86],38:[1,87],39:[1,88]},{29:89,40:[1,90],41:[1,91],42:[1,92],43:[1,93]},t(N,[2,18]),{48:94,62:[1,95],63:[1,96]},{50:97,62:[1,98],63:[1,99]},t(N,[2,36]),{5:[1,100]},{5:[1,101]},{5:[2,51]},{5:[2,52]},{5:[1,102]},{5:[2,26]},{5:[2,27]},{5:[2,28]},{5:[1,103]},{5:[2,29]},{5:[2,30]},{5:[2,31]},{5:[2,32]},{5:[1,104]},{5:[2,55]},{5:[2,56]},{5:[1,105]},{5:[2,57]},{5:[2,58]},{5:k,20:106,21:E,24:P,26:O,28:V,30:F},{5:k,20:107,21:E,24:P,26:O,28:V,30:F},{5:k,20:108,21:E,24:P,26:O,28:V,30:F},{5:k,20:109,21:E,24:P,26:O,28:V,30:F},{5:M,30:R,46:110,47:L,49:q},{5:M,30:R,46:111,47:L,49:q},t(N,[2,14]),t(N,[2,15]),t(N,[2,16]),t(N,[2,17]),t(N,[2,34]),t(N,[2,35])],defaultActions:{8:[2,2],12:[2,1],30:[2,3],31:[2,8],32:[2,9],33:[2,10],34:[2,11],35:[2,12],37:[2,47],38:[2,48],40:[2,53],41:[2,54],83:[2,51],84:[2,52],86:[2,26],87:[2,27],88:[2,28],90:[2,29],91:[2,30],92:[2,31],93:[2,32],95:[2,55],96:[2,56],98:[2,57],99:[2,58]},parseError:l(function(K,nt){if(nt.recoverable)this.trace(K);else{var ht=new Error(K);throw ht.hash=nt,ht}},"parseError"),parse:l(function(K){var nt=this,ht=[0],st=[],rt=[null],Z=[],at=this.table,Q="",lt=0,z=0,Et=2,X=1,vt=Z.slice.call(arguments,1),Ct=Object.create(this.lexer),Yt={yy:{}};for(var Ut in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ut)&&(Yt.yy[Ut]=this.yy[Ut]);Ct.setInput(K,Yt.yy),Yt.yy.lexer=Ct,Yt.yy.parser=this,typeof Ct.yylloc>"u"&&(Ct.yylloc={});var ae=Ct.yylloc;Z.push(ae);var qt=Ct.options&&Ct.options.ranges;typeof Yt.yy.parseError=="function"?this.parseError=Yt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ut(St){ht.length=ht.length-2*St,rt.length=rt.length-St,Z.length=Z.length-St}l(ut,"popStack");function xt(){var St;return St=st.pop()||Ct.lex()||X,typeof St!="number"&&(St instanceof Array&&(st=St,St=st.pop()),St=nt.symbols_[St]||St),St}l(xt,"lex");for(var ot,ct,gt,G,Pt={},$,Qt,U,wt;;){if(ct=ht[ht.length-1],this.defaultActions[ct]?gt=this.defaultActions[ct]:((ot===null||typeof ot>"u")&&(ot=xt()),gt=at[ct]&&at[ct][ot]),typeof gt>"u"||!gt.length||!gt[0]){var Bt="";wt=[];for($ in at[ct])this.terminals_[$]&&$>Et&&wt.push("'"+this.terminals_[$]+"'");Ct.showPosition?Bt="Parse error on line "+(lt+1)+`:
`+Ct.showPosition()+`
Expecting `+wt.join(", ")+", got '"+(this.terminals_[ot]||ot)+"'":Bt="Parse error on line "+(lt+1)+": Unexpected "+(ot==X?"end of input":"'"+(this.terminals_[ot]||ot)+"'"),this.parseError(Bt,{text:Ct.match,token:this.terminals_[ot]||ot,line:Ct.yylineno,loc:ae,expected:wt})}if(gt[0]instanceof Array&&gt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+ct+", token: "+ot);switch(gt[0]){case 1:ht.push(ot),rt.push(Ct.yytext),Z.push(Ct.yylloc),ht.push(gt[1]),ot=null,z=Ct.yyleng,Q=Ct.yytext,lt=Ct.yylineno,ae=Ct.yylloc;break;case 2:if(Qt=this.productions_[gt[1]][1],Pt.$=rt[rt.length-Qt],Pt._$={first_line:Z[Z.length-(Qt||1)].first_line,last_line:Z[Z.length-1].last_line,first_column:Z[Z.length-(Qt||1)].first_column,last_column:Z[Z.length-1].last_column},qt&&(Pt._$.range=[Z[Z.length-(Qt||1)].range[0],Z[Z.length-1].range[1]]),G=this.performAction.apply(Pt,[Q,z,lt,Yt.yy,gt[1],rt,Z].concat(vt)),typeof G<"u")return G;Qt&&(ht=ht.slice(0,-1*Qt*2),rt=rt.slice(0,-1*Qt),Z=Z.slice(0,-1*Qt)),ht.push(this.productions_[gt[1]][0]),rt.push(Pt.$),Z.push(Pt._$),U=at[ht[ht.length-2]][ht[ht.length-1]],ht.push(U);break;case 3:return!0}}return!0},"parse")},it=function(){var pt={EOF:1,parseError:l(function(nt,ht){if(this.yy.parser)this.yy.parser.parseError(nt,ht);else throw new Error(nt)},"parseError"),setInput:l(function(K,nt){return this.yy=nt||this.yy||{},this._input=K,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var K=this._input[0];this.yytext+=K,this.yyleng++,this.offset++,this.match+=K,this.matched+=K;var nt=K.match(/(?:\r\n?|\n).*/g);return nt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),K},"input"),unput:l(function(K){var nt=K.length,ht=K.split(/(?:\r\n?|\n)/g);this._input=K+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-nt),this.offset-=nt;var st=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ht.length-1&&(this.yylineno-=ht.length-1);var rt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ht?(ht.length===st.length?this.yylloc.first_column:0)+st[st.length-ht.length].length-ht[0].length:this.yylloc.first_column-nt},this.options.ranges&&(this.yylloc.range=[rt[0],rt[0]+this.yyleng-nt]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(K){this.unput(this.match.slice(K))},"less"),pastInput:l(function(){var K=this.matched.substr(0,this.matched.length-this.match.length);return(K.length>20?"...":"")+K.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var K=this.match;return K.length<20&&(K+=this._input.substr(0,20-K.length)),(K.substr(0,20)+(K.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var K=this.pastInput(),nt=new Array(K.length+1).join("-");return K+this.upcomingInput()+`
`+nt+"^"},"showPosition"),test_match:l(function(K,nt){var ht,st,rt;if(this.options.backtrack_lexer&&(rt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(rt.yylloc.range=this.yylloc.range.slice(0))),st=K[0].match(/(?:\r\n?|\n).*/g),st&&(this.yylineno+=st.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:st?st[st.length-1].length-st[st.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+K[0].length},this.yytext+=K[0],this.match+=K[0],this.matches=K,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(K[0].length),this.matched+=K[0],ht=this.performAction.call(this,this.yy,this,nt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ht)return ht;if(this._backtrack){for(var Z in rt)this[Z]=rt[Z];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var K,nt,ht,st;this._more||(this.yytext="",this.match="");for(var rt=this._currentRules(),Z=0;Z<rt.length;Z++)if(ht=this._input.match(this.rules[rt[Z]]),ht&&(!nt||ht[0].length>nt[0].length)){if(nt=ht,st=Z,this.options.backtrack_lexer){if(K=this.test_match(ht,rt[Z]),K!==!1)return K;if(this._backtrack){nt=!1;continue}else return!1}else if(!this.options.flex)break}return nt?(K=this.test_match(nt,rt[st]),K!==!1?K:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var nt=this.next();return nt||this.lex()},"lex"),begin:l(function(nt){this.conditionStack.push(nt)},"begin"),popState:l(function(){var nt=this.conditionStack.length-1;return nt>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(nt){return nt=this.conditionStack.length-1-Math.abs(nt||0),nt>=0?this.conditionStack[nt]:"INITIAL"},"topState"),pushState:l(function(nt){this.begin(nt)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(nt,ht,st,rt){switch(st){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 5;case 9:break;case 10:break;case 11:break;case 12:return 8;case 13:return 6;case 14:return 19;case 15:return 30;case 16:return 22;case 17:return 21;case 18:return 24;case 19:return 26;case 20:return 28;case 21:return 31;case 22:return 32;case 23:return 33;case 24:return 34;case 25:return 35;case 26:return 36;case 27:return 37;case 28:return 38;case 29:return 39;case 30:return 40;case 31:return 41;case 32:return 42;case 33:return 43;case 34:return 44;case 35:return 55;case 36:return 56;case 37:return 57;case 38:return 58;case 39:return 59;case 40:return 60;case 41:return 61;case 42:return 47;case 43:return 49;case 44:return 51;case 45:return 54;case 46:return 53;case 47:this.begin("string");break;case 48:this.popState();break;case 49:return"qString";case 50:return ht.yytext=ht.yytext.trim(),62}},"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^\r\n\{\<\>\-\=]*)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},unqString:{rules:[],inclusive:!1},token:{rules:[],inclusive:!1},string:{rules:[48,49],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,50],inclusive:!0}}};return pt}();j.lexer=it;function tt(){this.yy={}}return l(tt,"Parser"),tt.prototype=j,j.Parser=tt,new tt}();Oc.parser=Oc;var RE=Oc,bu=[],vr={},on=new Map,Wi={},ln=new Map,IE={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},NE={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},FE={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},PE={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},OE=l((t,e)=>(on.has(t)||on.set(t,{name:t,type:e,id:vr.id,text:vr.text,risk:vr.risk,verifyMethod:vr.verifyMethod}),vr={},on.get(t)),"addRequirement"),ME=l(()=>on,"getRequirements"),$E=l(t=>{vr!==void 0&&(vr.id=t)},"setNewReqId"),VE=l(t=>{vr!==void 0&&(vr.text=t)},"setNewReqText"),zE=l(t=>{vr!==void 0&&(vr.risk=t)},"setNewReqRisk"),WE=l(t=>{vr!==void 0&&(vr.verifyMethod=t)},"setNewReqVerifyMethod"),qE=l(t=>(ln.has(t)||(ln.set(t,{name:t,type:Wi.type,docRef:Wi.docRef}),A.info("Added new requirement: ",t)),Wi={},ln.get(t)),"addElement"),YE=l(()=>ln,"getElements"),HE=l(t=>{Wi!==void 0&&(Wi.type=t)},"setNewElementType"),GE=l(t=>{Wi!==void 0&&(Wi.docRef=t)},"setNewElementDocRef"),UE=l((t,e,r)=>{bu.push({type:t,src:e,dst:r})},"addRelationship"),jE=l(()=>bu,"getRelationships"),XE=l(()=>{bu=[],vr={},on=new Map,Wi={},ln=new Map,Ye()},"clear"),KE={RequirementType:IE,RiskLevel:NE,VerifyType:FE,Relationships:PE,getConfig:l(()=>H().req,"getConfig"),addRequirement:OE,getRequirements:ME,setNewReqId:$E,setNewReqText:VE,setNewReqRisk:zE,setNewReqVerifyMethod:WE,setAccTitle:He,getAccTitle:Ke,setAccDescription:Qe,getAccDescription:Ze,addElement:qE,getElements:YE,setNewElementType:HE,setNewElementDocRef:GE,addRelationship:UE,getRelationships:jE,clear:XE},QE=l(t=>`

  marker {
    fill: ${t.relationColor};
    stroke: ${t.relationColor};
  }

  marker.cross {
    stroke: ${t.lineColor};
  }

  svg {
    font-family: ${t.fontFamily};
    font-size: ${t.fontSize};
  }

  .reqBox {
    fill: ${t.requirementBackground};
    fill-opacity: 1.0;
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  
  .reqTitle, .reqLabel{
    fill:  ${t.requirementTextColor};
  }
  .reqLabelBox {
    fill: ${t.relationLabelBackground};
    fill-opacity: 1.0;
  }

  .req-title-line {
    stroke: ${t.requirementBorderColor};
    stroke-width: ${t.requirementBorderSize};
  }
  .relationshipLine {
    stroke: ${t.relationColor};
    stroke-width: 1;
  }
  .relationshipLabel {
    fill: ${t.relationLabelColor};
  }

`,"getStyles"),ZE=QE,Mc={CONTAINS:"contains",ARROW:"arrow"},JE=l((t,e)=>{let r=t.append("defs").append("marker").attr("id",Mc.CONTAINS+"_line_ending").attr("refX",0).attr("refY",e.line_height/2).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("g");r.append("circle").attr("cx",e.line_height/2).attr("cy",e.line_height/2).attr("r",e.line_height/2).attr("fill","none"),r.append("line").attr("x1",0).attr("x2",e.line_height).attr("y1",e.line_height/2).attr("y2",e.line_height/2).attr("stroke-width",1),r.append("line").attr("y1",0).attr("y2",e.line_height).attr("x1",e.line_height/2).attr("x2",e.line_height/2).attr("stroke-width",1),t.append("defs").append("marker").attr("id",Mc.ARROW+"_line_ending").attr("refX",e.line_height).attr("refY",.5*e.line_height).attr("markerWidth",e.line_height).attr("markerHeight",e.line_height).attr("orient","auto").append("path").attr("d",`M0,0
      L${e.line_height},${e.line_height/2}
      M${e.line_height},${e.line_height/2}
      L0,${e.line_height}`).attr("stroke-width",1)},"insertLineEndings"),Ky={ReqMarkers:Mc,insertLineEndings:JE},Ae={},zd=0,Qy=l((t,e)=>t.insert("rect","#"+e).attr("class","req reqBox").attr("x",0).attr("y",0).attr("width",Ae.rect_min_width+"px").attr("height",Ae.rect_min_height+"px"),"newRectNode"),Zy=l((t,e,r)=>{let a=Ae.rect_min_width/2,i=t.append("text").attr("class","req reqLabel reqTitle").attr("id",e).attr("x",a).attr("y",Ae.rect_padding).attr("dominant-baseline","hanging"),s=0;r.forEach(u=>{s==0?i.append("tspan").attr("text-anchor","middle").attr("x",Ae.rect_min_width/2).attr("dy",0).text(u):i.append("tspan").attr("text-anchor","middle").attr("x",Ae.rect_min_width/2).attr("dy",Ae.line_height*.75).text(u),s++});let n=1.5*Ae.rect_padding,o=s*Ae.line_height*.75,h=n+o;return t.append("line").attr("class","req-title-line").attr("x1","0").attr("x2",Ae.rect_min_width).attr("y1",h).attr("y2",h),{titleNode:i,y:h}},"newTitleNode"),Jy=l((t,e,r,a)=>{let i=t.append("text").attr("class","req reqLabel").attr("id",e).attr("x",Ae.rect_padding).attr("y",a).attr("dominant-baseline","hanging"),s=0;const n=30;let o=[];return r.forEach(h=>{let u=h.length;for(;u>n&&s<3;){let d=h.substring(0,n);h=h.substring(n,h.length),u=h.length,o[o.length]=d,s++}if(s==3){let d=o[o.length-1];o[o.length-1]=d.substring(0,d.length-4)+"..."}else o[o.length]=h;s=0}),o.forEach(h=>{i.append("tspan").attr("x",Ae.rect_padding).attr("dy",Ae.line_height).text(h)}),i},"newBodyNode"),t7=l((t,e,r,a)=>{const i=e.node().getTotalLength(),s=e.node().getPointAtLength(i*.5),n="rel"+zd;zd++;const h=t.append("text").attr("class","req relationshipLabel").attr("id",n).attr("x",s.x).attr("y",s.y).attr("text-anchor","middle").attr("dominant-baseline","middle").text(a).node().getBBox();t.insert("rect","#"+n).attr("class","req reqLabelBox").attr("x",s.x-h.width/2).attr("y",s.y-h.height/2).attr("width",h.width).attr("height",h.height).attr("fill","white").attr("fill-opacity","85%")},"addEdgeLabel"),e7=l(function(t,e,r,a,i){const s=r.edge(Is(e.src),Is(e.dst)),n=pa().x(function(h){return h.x}).y(function(h){return h.y}),o=t.insert("path","#"+a).attr("class","er relationshipLine").attr("d",n(s.points)).attr("fill","none");e.type==i.db.Relationships.CONTAINS?o.attr("marker-start","url("+mt.getUrl(Ae.arrowMarkerAbsolute)+"#"+e.type+"_line_ending)"):(o.attr("stroke-dasharray","10,7"),o.attr("marker-end","url("+mt.getUrl(Ae.arrowMarkerAbsolute)+"#"+Ky.ReqMarkers.ARROW+"_line_ending)")),t7(t,o,Ae,`<<${e.type}>>`)},"drawRelationshipFromLayout"),r7=l((t,e,r)=>{t.forEach((a,i)=>{i=Is(i),A.info("Added new requirement: ",i);const s=r.append("g").attr("id",i),n="req-"+i,o=Qy(s,n);let h=[],u=Zy(s,i+"_title",[`<<${a.type}>>`,`${a.name}`]);h.push(u.titleNode);let d=Jy(s,i+"_body",[`Id: ${a.id}`,`Text: ${a.text}`,`Risk: ${a.risk}`,`Verification: ${a.verifyMethod}`],u.y);h.push(d);const f=o.node().getBBox();e.setNode(i,{width:f.width,height:f.height,shape:"rect",id:i})})},"drawReqs"),i7=l((t,e,r)=>{t.forEach((a,i)=>{const s=Is(i),n=r.append("g").attr("id",s),o="element-"+s,h=Qy(n,o);let u=[],d=Zy(n,o+"_title",["<<Element>>",`${i}`]);u.push(d.titleNode);let f=Jy(n,o+"_body",[`Type: ${a.type||"Not Specified"}`,`Doc Ref: ${a.docRef||"None"}`],d.y);u.push(f);const p=h.node().getBBox();e.setNode(s,{width:p.width,height:p.height,shape:"rect",id:s})})},"drawElements"),a7=l((t,e)=>(t.forEach(function(r){let a=Is(r.src),i=Is(r.dst);e.setEdge(a,i,{relationship:r})}),t),"addRelationships"),s7=l(function(t,e){e.nodes().forEach(function(r){r!==void 0&&e.node(r)!==void 0&&(t.select("#"+r),t.select("#"+r).attr("transform","translate("+(e.node(r).x-e.node(r).width/2)+","+(e.node(r).y-e.node(r).height/2)+" )"))})},"adjustEntities"),Is=l(t=>t.replace(/\s/g,"").replace(/\./g,"_"),"elementString"),n7=l((t,e,r,a)=>{Ae=H().requirement;const i=Ae.securityLevel;let s;i==="sandbox"&&(s=yt("#i"+e));const o=(i==="sandbox"?yt(s.nodes()[0].contentDocument.body):yt("body")).select(`[id='${e}']`);Ky.insertLineEndings(o,Ae);const h=new $s({multigraph:!1,compound:!1,directed:!0}).setGraph({rankdir:Ae.layoutDirection,marginx:20,marginy:20,nodesep:100,edgesep:100,ranksep:100}).setDefaultEdgeLabel(function(){return{}});let u=a.db.getRequirements(),d=a.db.getElements(),f=a.db.getRelationships();r7(u,h,o),i7(d,h,o),a7(f,h),tl(h),s7(o,h),f.forEach(function(x){e7(o,x,h,e,a)});const p=Ae.rect_padding,g=o.node().getBBox(),y=g.width+p*2,m=g.height+p*2;ar(o,m,y,Ae.useMaxWidth),o.attr("viewBox",`${g.x-p} ${g.y-p} ${y} ${m}`)},"draw"),o7={draw:n7},l7={parser:RE,db:KE,renderer:o7,styles:ZE};const c7=Object.freeze(Object.defineProperty({__proto__:null,diagram:l7},Symbol.toStringTag,{value:"Module"}));var $c=function(){var t=l(function(st,rt,Z,at){for(Z=Z||{},at=st.length;at--;Z[st[at]]=rt);return Z},"o"),e=[1,2],r=[1,3],a=[1,4],i=[2,4],s=[1,9],n=[1,11],o=[1,13],h=[1,14],u=[1,16],d=[1,17],f=[1,18],p=[1,24],g=[1,25],y=[1,26],m=[1,27],x=[1,28],v=[1,29],T=[1,30],I=[1,31],B=[1,32],_=[1,33],w=[1,34],D=[1,35],S=[1,36],b=[1,37],C=[1,38],k=[1,39],E=[1,41],P=[1,42],O=[1,43],V=[1,44],F=[1,45],M=[1,46],R=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,54,59,60,61,62,70],L=[4,5,16,50,52,53],q=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],N=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,54,59,60,61,62,70],j=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,54,59,60,61,62,70],it=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,54,59,60,61,62,70],tt=[68,69,70],pt=[1,122],K={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,note:54,placement:55,text2:56,over:57,actor_pair:58,links:59,link:60,properties:61,details:62,spaceList:63,",":64,left_of:65,right_of:66,signaltype:67,"+":68,"-":69,ACTOR:70,SOLID_OPEN_ARROW:71,DOTTED_OPEN_ARROW:72,SOLID_ARROW:73,BIDIRECTIONAL_SOLID_ARROW:74,DOTTED_ARROW:75,BIDIRECTIONAL_DOTTED_ARROW:76,SOLID_CROSS:77,DOTTED_CROSS:78,SOLID_POINT:79,DOTTED_POINT:80,TXT:81,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",54:"note",57:"over",59:"links",60:"link",61:"properties",62:"details",64:",",65:"left_of",66:"right_of",68:"+",69:"-",70:"ACTOR",71:"SOLID_OPEN_ARROW",72:"DOTTED_OPEN_ARROW",73:"SOLID_ARROW",74:"BIDIRECTIONAL_SOLID_ARROW",75:"DOTTED_ARROW",76:"BIDIRECTIONAL_DOTTED_ARROW",77:"SOLID_CROSS",78:"DOTTED_CROSS",79:"SOLID_POINT",80:"DOTTED_POINT",81:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[63,2],[63,1],[58,3],[58,1],[55,1],[55,1],[17,5],[17,5],[17,4],[22,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[67,1],[56,1]],performAction:l(function(rt,Z,at,Q,lt,z,Et){var X=z.length-1;switch(lt){case 3:return Q.apply(z[X]),z[X];case 4:case 9:this.$=[];break;case 5:case 10:z[X-1].push(z[X]),this.$=z[X-1];break;case 6:case 7:case 11:case 12:this.$=z[X];break;case 8:case 13:this.$=[];break;case 15:z[X].type="createParticipant",this.$=z[X];break;case 16:z[X-1].unshift({type:"boxStart",boxData:Q.parseBoxData(z[X-2])}),z[X-1].push({type:"boxEnd",boxText:z[X-2]}),this.$=z[X-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(z[X-2]),sequenceIndexStep:Number(z[X-1]),sequenceVisible:!0,signalType:Q.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(z[X-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:Q.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:Q.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:Q.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:Q.LINETYPE.ACTIVE_START,actor:z[X-1].actor};break;case 23:this.$={type:"activeEnd",signalType:Q.LINETYPE.ACTIVE_END,actor:z[X-1].actor};break;case 29:Q.setDiagramTitle(z[X].substring(6)),this.$=z[X].substring(6);break;case 30:Q.setDiagramTitle(z[X].substring(7)),this.$=z[X].substring(7);break;case 31:this.$=z[X].trim(),Q.setAccTitle(this.$);break;case 32:case 33:this.$=z[X].trim(),Q.setAccDescription(this.$);break;case 34:z[X-1].unshift({type:"loopStart",loopText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.LOOP_START}),z[X-1].push({type:"loopEnd",loopText:z[X-2],signalType:Q.LINETYPE.LOOP_END}),this.$=z[X-1];break;case 35:z[X-1].unshift({type:"rectStart",color:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.RECT_START}),z[X-1].push({type:"rectEnd",color:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.RECT_END}),this.$=z[X-1];break;case 36:z[X-1].unshift({type:"optStart",optText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.OPT_START}),z[X-1].push({type:"optEnd",optText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.OPT_END}),this.$=z[X-1];break;case 37:z[X-1].unshift({type:"altStart",altText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.ALT_START}),z[X-1].push({type:"altEnd",signalType:Q.LINETYPE.ALT_END}),this.$=z[X-1];break;case 38:z[X-1].unshift({type:"parStart",parText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.PAR_START}),z[X-1].push({type:"parEnd",signalType:Q.LINETYPE.PAR_END}),this.$=z[X-1];break;case 39:z[X-1].unshift({type:"parStart",parText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.PAR_OVER_START}),z[X-1].push({type:"parEnd",signalType:Q.LINETYPE.PAR_END}),this.$=z[X-1];break;case 40:z[X-1].unshift({type:"criticalStart",criticalText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.CRITICAL_START}),z[X-1].push({type:"criticalEnd",signalType:Q.LINETYPE.CRITICAL_END}),this.$=z[X-1];break;case 41:z[X-1].unshift({type:"breakStart",breakText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.BREAK_START}),z[X-1].push({type:"breakEnd",optText:Q.parseMessage(z[X-2]),signalType:Q.LINETYPE.BREAK_END}),this.$=z[X-1];break;case 43:this.$=z[X-3].concat([{type:"option",optionText:Q.parseMessage(z[X-1]),signalType:Q.LINETYPE.CRITICAL_OPTION},z[X]]);break;case 45:this.$=z[X-3].concat([{type:"and",parText:Q.parseMessage(z[X-1]),signalType:Q.LINETYPE.PAR_AND},z[X]]);break;case 47:this.$=z[X-3].concat([{type:"else",altText:Q.parseMessage(z[X-1]),signalType:Q.LINETYPE.ALT_ELSE},z[X]]);break;case 48:z[X-3].draw="participant",z[X-3].type="addParticipant",z[X-3].description=Q.parseMessage(z[X-1]),this.$=z[X-3];break;case 49:z[X-1].draw="participant",z[X-1].type="addParticipant",this.$=z[X-1];break;case 50:z[X-3].draw="actor",z[X-3].type="addParticipant",z[X-3].description=Q.parseMessage(z[X-1]),this.$=z[X-3];break;case 51:z[X-1].draw="actor",z[X-1].type="addParticipant",this.$=z[X-1];break;case 52:z[X-1].type="destroyParticipant",this.$=z[X-1];break;case 53:this.$=[z[X-1],{type:"addNote",placement:z[X-2],actor:z[X-1].actor,text:z[X]}];break;case 54:z[X-2]=[].concat(z[X-1],z[X-1]).slice(0,2),z[X-2][0]=z[X-2][0].actor,z[X-2][1]=z[X-2][1].actor,this.$=[z[X-1],{type:"addNote",placement:Q.PLACEMENT.OVER,actor:z[X-2].slice(0,2),text:z[X]}];break;case 55:this.$=[z[X-1],{type:"addLinks",actor:z[X-1].actor,text:z[X]}];break;case 56:this.$=[z[X-1],{type:"addALink",actor:z[X-1].actor,text:z[X]}];break;case 57:this.$=[z[X-1],{type:"addProperties",actor:z[X-1].actor,text:z[X]}];break;case 58:this.$=[z[X-1],{type:"addDetails",actor:z[X-1].actor,text:z[X]}];break;case 61:this.$=[z[X-2],z[X]];break;case 62:this.$=z[X];break;case 63:this.$=Q.PLACEMENT.LEFTOF;break;case 64:this.$=Q.PLACEMENT.RIGHTOF;break;case 65:this.$=[z[X-4],z[X-1],{type:"addMessage",from:z[X-4].actor,to:z[X-1].actor,signalType:z[X-3],msg:z[X],activate:!0},{type:"activeStart",signalType:Q.LINETYPE.ACTIVE_START,actor:z[X-1].actor}];break;case 66:this.$=[z[X-4],z[X-1],{type:"addMessage",from:z[X-4].actor,to:z[X-1].actor,signalType:z[X-3],msg:z[X]},{type:"activeEnd",signalType:Q.LINETYPE.ACTIVE_END,actor:z[X-4].actor}];break;case 67:this.$=[z[X-3],z[X-1],{type:"addMessage",from:z[X-3].actor,to:z[X-1].actor,signalType:z[X-2],msg:z[X]}];break;case 68:this.$={type:"addParticipant",actor:z[X]};break;case 69:this.$=Q.LINETYPE.SOLID_OPEN;break;case 70:this.$=Q.LINETYPE.DOTTED_OPEN;break;case 71:this.$=Q.LINETYPE.SOLID;break;case 72:this.$=Q.LINETYPE.BIDIRECTIONAL_SOLID;break;case 73:this.$=Q.LINETYPE.DOTTED;break;case 74:this.$=Q.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 75:this.$=Q.LINETYPE.SOLID_CROSS;break;case 76:this.$=Q.LINETYPE.DOTTED_CROSS;break;case 77:this.$=Q.LINETYPE.SOLID_POINT;break;case 78:this.$=Q.LINETYPE.DOTTED_POINT;break;case 79:this.$=Q.parseMessage(z[X].trim().substring(1));break}},"anonymous"),table:[{3:1,4:e,5:r,6:a},{1:[3]},{3:5,4:e,5:r,6:a},{3:6,4:e,5:r,6:a},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,54,59,60,61,62,70],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:s,5:n,8:8,9:10,12:12,13:o,14:h,17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},t(R,[2,5]),{9:47,12:12,13:o,14:h,17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},t(R,[2,7]),t(R,[2,8]),t(R,[2,14]),{12:48,50:b,52:C,53:k},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,70:M},{22:55,70:M},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(R,[2,29]),t(R,[2,30]),{32:[1,61]},{34:[1,62]},t(R,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,70:M},{22:72,70:M},{22:73,70:M},{67:74,71:[1,75],72:[1,76],73:[1,77],74:[1,78],75:[1,79],76:[1,80],77:[1,81],78:[1,82],79:[1,83],80:[1,84]},{55:85,57:[1,86],65:[1,87],66:[1,88]},{22:89,70:M},{22:90,70:M},{22:91,70:M},{22:92,70:M},t([5,51,64,71,72,73,74,75,76,77,78,79,80,81],[2,68]),t(R,[2,6]),t(R,[2,15]),t(L,[2,9],{10:93}),t(R,[2,17]),{5:[1,95],19:[1,94]},{5:[1,96]},t(R,[2,21]),{5:[1,97]},{5:[1,98]},t(R,[2,24]),t(R,[2,25]),t(R,[2,26]),t(R,[2,27]),t(R,[2,28]),t(R,[2,31]),t(R,[2,32]),t(q,i,{7:99}),t(q,i,{7:100}),t(q,i,{7:101}),t(N,i,{40:102,7:103}),t(j,i,{42:104,7:105}),t(j,i,{7:105,42:106}),t(it,i,{45:107,7:108}),t(q,i,{7:109}),{5:[1,111],51:[1,110]},{5:[1,113],51:[1,112]},{5:[1,114]},{22:117,68:[1,115],69:[1,116],70:M},t(tt,[2,69]),t(tt,[2,70]),t(tt,[2,71]),t(tt,[2,72]),t(tt,[2,73]),t(tt,[2,74]),t(tt,[2,75]),t(tt,[2,76]),t(tt,[2,77]),t(tt,[2,78]),{22:118,70:M},{22:120,58:119,70:M},{70:[2,63]},{70:[2,64]},{56:121,81:pt},{56:123,81:pt},{56:124,81:pt},{56:125,81:pt},{4:[1,128],5:[1,130],11:127,12:129,16:[1,126],50:b,52:C,53:k},{5:[1,131]},t(R,[2,19]),t(R,[2,20]),t(R,[2,22]),t(R,[2,23]),{4:s,5:n,8:8,9:10,12:12,13:o,14:h,16:[1,132],17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},{4:s,5:n,8:8,9:10,12:12,13:o,14:h,16:[1,133],17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},{4:s,5:n,8:8,9:10,12:12,13:o,14:h,16:[1,134],17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},{16:[1,135]},{4:s,5:n,8:8,9:10,12:12,13:o,14:h,16:[2,46],17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,49:[1,136],50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},{16:[1,137]},{4:s,5:n,8:8,9:10,12:12,13:o,14:h,16:[2,44],17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,48:[1,138],50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},{16:[1,139]},{16:[1,140]},{4:s,5:n,8:8,9:10,12:12,13:o,14:h,16:[2,42],17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,47:[1,141],50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},{4:s,5:n,8:8,9:10,12:12,13:o,14:h,16:[1,142],17:15,18:u,21:d,22:40,23:f,24:19,25:20,26:21,27:22,28:23,29:p,30:g,31:y,33:m,35:x,36:v,37:T,38:I,39:B,41:_,43:w,44:D,46:S,50:b,52:C,53:k,54:E,59:P,60:O,61:V,62:F,70:M},{15:[1,143]},t(R,[2,49]),{15:[1,144]},t(R,[2,51]),t(R,[2,52]),{22:145,70:M},{22:146,70:M},{56:147,81:pt},{56:148,81:pt},{56:149,81:pt},{64:[1,150],81:[2,62]},{5:[2,55]},{5:[2,79]},{5:[2,56]},{5:[2,57]},{5:[2,58]},t(R,[2,16]),t(L,[2,10]),{12:151,50:b,52:C,53:k},t(L,[2,12]),t(L,[2,13]),t(R,[2,18]),t(R,[2,34]),t(R,[2,35]),t(R,[2,36]),t(R,[2,37]),{15:[1,152]},t(R,[2,38]),{15:[1,153]},t(R,[2,39]),t(R,[2,40]),{15:[1,154]},t(R,[2,41]),{5:[1,155]},{5:[1,156]},{56:157,81:pt},{56:158,81:pt},{5:[2,67]},{5:[2,53]},{5:[2,54]},{22:159,70:M},t(L,[2,11]),t(N,i,{7:103,40:160}),t(j,i,{7:105,42:161}),t(it,i,{7:108,45:162}),t(R,[2,48]),t(R,[2,50]),{5:[2,65]},{5:[2,66]},{81:[2,61]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],87:[2,63],88:[2,64],121:[2,55],122:[2,79],123:[2,56],124:[2,57],125:[2,58],147:[2,67],148:[2,53],149:[2,54],157:[2,65],158:[2,66],159:[2,61],160:[2,47],161:[2,45],162:[2,43]},parseError:l(function(rt,Z){if(Z.recoverable)this.trace(rt);else{var at=new Error(rt);throw at.hash=Z,at}},"parseError"),parse:l(function(rt){var Z=this,at=[0],Q=[],lt=[null],z=[],Et=this.table,X="",vt=0,Ct=0,Yt=2,Ut=1,ae=z.slice.call(arguments,1),qt=Object.create(this.lexer),ut={yy:{}};for(var xt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,xt)&&(ut.yy[xt]=this.yy[xt]);qt.setInput(rt,ut.yy),ut.yy.lexer=qt,ut.yy.parser=this,typeof qt.yylloc>"u"&&(qt.yylloc={});var ot=qt.yylloc;z.push(ot);var ct=qt.options&&qt.options.ranges;typeof ut.yy.parseError=="function"?this.parseError=ut.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function gt(bt){at.length=at.length-2*bt,lt.length=lt.length-bt,z.length=z.length-bt}l(gt,"popStack");function G(){var bt;return bt=Q.pop()||qt.lex()||Ut,typeof bt!="number"&&(bt instanceof Array&&(Q=bt,bt=Q.pop()),bt=Z.symbols_[bt]||bt),bt}l(G,"lex");for(var Pt,$,Qt,U,wt={},Bt,St,Gt,dt;;){if($=at[at.length-1],this.defaultActions[$]?Qt=this.defaultActions[$]:((Pt===null||typeof Pt>"u")&&(Pt=G()),Qt=Et[$]&&Et[$][Pt]),typeof Qt>"u"||!Qt.length||!Qt[0]){var ce="";dt=[];for(Bt in Et[$])this.terminals_[Bt]&&Bt>Yt&&dt.push("'"+this.terminals_[Bt]+"'");qt.showPosition?ce="Parse error on line "+(vt+1)+`:
`+qt.showPosition()+`
Expecting `+dt.join(", ")+", got '"+(this.terminals_[Pt]||Pt)+"'":ce="Parse error on line "+(vt+1)+": Unexpected "+(Pt==Ut?"end of input":"'"+(this.terminals_[Pt]||Pt)+"'"),this.parseError(ce,{text:qt.match,token:this.terminals_[Pt]||Pt,line:qt.yylineno,loc:ot,expected:dt})}if(Qt[0]instanceof Array&&Qt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$+", token: "+Pt);switch(Qt[0]){case 1:at.push(Pt),lt.push(qt.yytext),z.push(qt.yylloc),at.push(Qt[1]),Pt=null,Ct=qt.yyleng,X=qt.yytext,vt=qt.yylineno,ot=qt.yylloc;break;case 2:if(St=this.productions_[Qt[1]][1],wt.$=lt[lt.length-St],wt._$={first_line:z[z.length-(St||1)].first_line,last_line:z[z.length-1].last_line,first_column:z[z.length-(St||1)].first_column,last_column:z[z.length-1].last_column},ct&&(wt._$.range=[z[z.length-(St||1)].range[0],z[z.length-1].range[1]]),U=this.performAction.apply(wt,[X,Ct,vt,ut.yy,Qt[1],lt,z].concat(ae)),typeof U<"u")return U;St&&(at=at.slice(0,-1*St*2),lt=lt.slice(0,-1*St),z=z.slice(0,-1*St)),at.push(this.productions_[Qt[1]][0]),lt.push(wt.$),z.push(wt._$),Gt=Et[at[at.length-2]][at[at.length-1]],at.push(Gt);break;case 3:return!0}}return!0},"parse")},nt=function(){var st={EOF:1,parseError:l(function(Z,at){if(this.yy.parser)this.yy.parser.parseError(Z,at);else throw new Error(Z)},"parseError"),setInput:l(function(rt,Z){return this.yy=Z||this.yy||{},this._input=rt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var rt=this._input[0];this.yytext+=rt,this.yyleng++,this.offset++,this.match+=rt,this.matched+=rt;var Z=rt.match(/(?:\r\n?|\n).*/g);return Z?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),rt},"input"),unput:l(function(rt){var Z=rt.length,at=rt.split(/(?:\r\n?|\n)/g);this._input=rt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Z),this.offset-=Z;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),at.length-1&&(this.yylineno-=at.length-1);var lt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:at?(at.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-at.length].length-at[0].length:this.yylloc.first_column-Z},this.options.ranges&&(this.yylloc.range=[lt[0],lt[0]+this.yyleng-Z]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(rt){this.unput(this.match.slice(rt))},"less"),pastInput:l(function(){var rt=this.matched.substr(0,this.matched.length-this.match.length);return(rt.length>20?"...":"")+rt.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var rt=this.match;return rt.length<20&&(rt+=this._input.substr(0,20-rt.length)),(rt.substr(0,20)+(rt.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var rt=this.pastInput(),Z=new Array(rt.length+1).join("-");return rt+this.upcomingInput()+`
`+Z+"^"},"showPosition"),test_match:l(function(rt,Z){var at,Q,lt;if(this.options.backtrack_lexer&&(lt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(lt.yylloc.range=this.yylloc.range.slice(0))),Q=rt[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+rt[0].length},this.yytext+=rt[0],this.match+=rt[0],this.matches=rt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(rt[0].length),this.matched+=rt[0],at=this.performAction.call(this,this.yy,this,Z,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),at)return at;if(this._backtrack){for(var z in lt)this[z]=lt[z];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var rt,Z,at,Q;this._more||(this.yytext="",this.match="");for(var lt=this._currentRules(),z=0;z<lt.length;z++)if(at=this._input.match(this.rules[lt[z]]),at&&(!Z||at[0].length>Z[0].length)){if(Z=at,Q=z,this.options.backtrack_lexer){if(rt=this.test_match(at,lt[z]),rt!==!1)return rt;if(this._backtrack){Z=!1;continue}else return!1}else if(!this.options.flex)break}return Z?(rt=this.test_match(Z,lt[Q]),rt!==!1?rt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var Z=this.next();return Z||this.lex()},"lex"),begin:l(function(Z){this.conditionStack.push(Z)},"begin"),popState:l(function(){var Z=this.conditionStack.length-1;return Z>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(Z){return Z=this.conditionStack.length-1-Math.abs(Z||0),Z>=0?this.conditionStack[Z]:"INITIAL"},"topState"),pushState:l(function(Z){this.begin(Z)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(Z,at,Q,lt){switch(Q){case 0:return 5;case 1:break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:return 19;case 7:return this.begin("LINE"),14;case 8:return this.begin("ID"),50;case 9:return this.begin("ID"),52;case 10:return 13;case 11:return this.begin("ID"),53;case 12:return at.yytext=at.yytext.trim(),this.begin("ALIAS"),70;case 13:return this.popState(),this.popState(),this.begin("LINE"),51;case 14:return this.popState(),this.popState(),5;case 15:return this.begin("LINE"),36;case 16:return this.begin("LINE"),37;case 17:return this.begin("LINE"),38;case 18:return this.begin("LINE"),39;case 19:return this.begin("LINE"),49;case 20:return this.begin("LINE"),41;case 21:return this.begin("LINE"),43;case 22:return this.begin("LINE"),48;case 23:return this.begin("LINE"),44;case 24:return this.begin("LINE"),47;case 25:return this.begin("LINE"),46;case 26:return this.popState(),15;case 27:return 16;case 28:return 65;case 29:return 66;case 30:return 59;case 31:return 60;case 32:return 61;case 33:return 62;case 34:return 57;case 35:return 54;case 36:return this.begin("ID"),21;case 37:return this.begin("ID"),23;case 38:return 29;case 39:return 30;case 40:return this.begin("acc_title"),31;case 41:return this.popState(),"acc_title_value";case 42:return this.begin("acc_descr"),33;case 43:return this.popState(),"acc_descr_value";case 44:this.begin("acc_descr_multiline");break;case 45:this.popState();break;case 46:return"acc_descr_multiline_value";case 47:return 6;case 48:return 18;case 49:return 20;case 50:return 64;case 51:return 5;case 52:return at.yytext=at.yytext.trim(),70;case 53:return 73;case 54:return 74;case 55:return 75;case 56:return 76;case 57:return 71;case 58:return 72;case 59:return 77;case 60:return 78;case 61:return 79;case 62:return 80;case 63:return 81;case 64:return 68;case 65:return 69;case 66:return 5;case 67:return"INVALID"}},"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^\<->\->:\n,;]+?([\-]*[^\<->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^\+\<->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+\<->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]+)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[45,46],inclusive:!1},acc_descr:{rules:[43],inclusive:!1},acc_title:{rules:[41],inclusive:!1},ID:{rules:[2,3,12],inclusive:!1},ALIAS:{rules:[2,3,13,14],inclusive:!1},LINE:{rules:[2,3,26],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,32,33,34,35,36,37,38,39,40,42,44,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],inclusive:!0}}};return st}();K.lexer=nt;function ht(){this.yy={}}return l(ht,"Parser"),ht.prototype=K,K.Parser=ht,new ht}();$c.parser=$c;var h7=$c,It=new Xh(()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0})),u7=l(function(t){It.records.boxes.push({name:t.text,wrap:t.wrap??ma(),fill:t.color,actorKeys:[]}),It.records.currentBox=It.records.boxes.slice(-1)[0]},"addBox"),Vc=l(function(t,e,r,a){let i=It.records.currentBox;const s=It.records.actors.get(t);if(s){if(It.records.currentBox&&s.box&&It.records.currentBox!==s.box)throw new Error(`A same participant should only be defined in one Box: ${s.name} can't be in '${s.box.name}' and in '${It.records.currentBox.name}' at the same time.`);if(i=s.box?s.box:It.records.currentBox,s.box=i,s&&e===s.name&&r==null)return}if((r==null?void 0:r.text)==null&&(r={text:e,type:a}),(a==null||r.text==null)&&(r={text:e,type:a}),It.records.actors.set(t,{box:i,name:e,description:r.text,wrap:r.wrap??ma(),prevActor:It.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:a??"participant"}),It.records.prevActor){const n=It.records.actors.get(It.records.prevActor);n&&(n.nextActor=t)}It.records.currentBox&&It.records.currentBox.actorKeys.push(t),It.records.prevActor=t},"addActor"),d7=l(t=>{let e,r=0;if(!t)return 0;for(e=0;e<It.records.messages.length;e++)It.records.messages[e].type===_n.ACTIVE_START&&It.records.messages[e].from===t&&r++,It.records.messages[e].type===_n.ACTIVE_END&&It.records.messages[e].from===t&&r--;return r},"activationCount"),p7=l(function(t,e,r,a){It.records.messages.push({from:t,to:e,message:r.text,wrap:r.wrap??ma(),answer:a})},"addMessage"),Be=l(function(t,e,r,a,i=!1){if(a===_n.ACTIVE_END&&d7(t??"")<1){const n=new Error("Trying to inactivate an inactive participant ("+t+")");throw n.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},n}return It.records.messages.push({from:t,to:e,message:(r==null?void 0:r.text)??"",wrap:(r==null?void 0:r.wrap)??ma(),type:a,activate:i}),!0},"addSignal"),f7=l(function(){return It.records.boxes.length>0},"hasAtLeastOneBox"),g7=l(function(){return It.records.boxes.some(t=>t.name)},"hasAtLeastOneBoxWithTitle"),y7=l(function(){return It.records.messages},"getMessages"),m7=l(function(){return It.records.boxes},"getBoxes"),x7=l(function(){return It.records.actors},"getActors"),b7=l(function(){return It.records.createdActors},"getCreatedActors"),k7=l(function(){return It.records.destroyedActors},"getDestroyedActors"),Hn=l(function(t){return It.records.actors.get(t)},"getActor"),v7=l(function(){return[...It.records.actors.keys()]},"getActorKeys"),T7=l(function(){It.records.sequenceNumbersEnabled=!0},"enableSequenceNumbers"),_7=l(function(){It.records.sequenceNumbersEnabled=!1},"disableSequenceNumbers"),C7=l(()=>It.records.sequenceNumbersEnabled,"showSequenceNumbers"),S7=l(function(t){It.records.wrapEnabled=t},"setWrap"),tm=l(t=>{if(t===void 0)return{};t=t.trim();const e=/^:?wrap:/.exec(t)!==null?!0:/^:?nowrap:/.exec(t)!==null?!1:void 0;return{cleanedText:(e===void 0?t:t.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:e}},"extractWrap"),ma=l(()=>{var t;return It.records.wrapEnabled!==void 0?It.records.wrapEnabled:((t=H().sequence)==null?void 0:t.wrap)??!1},"autoWrap"),w7=l(function(){It.reset(),Ye()},"clear"),E7=l(function(t){const e=t.trim(),{wrap:r,cleanedText:a}=tm(e),i={text:a,wrap:r};return A.debug(`parseMessage: ${JSON.stringify(i)}`),i},"parseMessage"),A7=l(function(t){const e=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(t);let r=e!=null&&e[1]?e[1].trim():"transparent",a=e!=null&&e[2]?e[2].trim():void 0;if(window!=null&&window.CSS)window.CSS.supports("color",r)||(r="transparent",a=t.trim());else{const n=new Option().style;n.color=r,n.color!==r&&(r="transparent",a=t.trim())}const{wrap:i,cleanedText:s}=tm(a);return{text:s?me(s,H()):void 0,color:r,wrap:i}},"parseBoxData"),_n={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},L7={FILLED:0,OPEN:1},B7={LEFTOF:0,RIGHTOF:1,OVER:2},em=l(function(t,e,r){const a={actor:t,placement:e,message:r.text,wrap:r.wrap??ma()},i=[].concat(t,t);It.records.notes.push(a),It.records.messages.push({from:i[0],to:i[1],message:r.text,wrap:r.wrap??ma(),type:_n.NOTE,placement:e})},"addNote"),rm=l(function(t,e){const r=Hn(t);try{let a=me(e.text,H());a=a.replace(/&amp;/g,"&"),a=a.replace(/&equals;/g,"=");const i=JSON.parse(a);Tl(r,i)}catch(a){A.error("error while parsing actor link text",a)}},"addLinks"),D7=l(function(t,e){const r=Hn(t);try{const a={};let i=me(e.text,H());const s=i.indexOf("@");i=i.replace(/&amp;/g,"&"),i=i.replace(/&equals;/g,"=");const n=i.slice(0,s-1).trim(),o=i.slice(s+1).trim();a[n]=o,Tl(r,a)}catch(a){A.error("error while parsing actor link text",a)}},"addALink");function Tl(t,e){if(t.links==null)t.links=e;else for(const r in e)t.links[r]=e[r]}l(Tl,"insertLinks");var im=l(function(t,e){const r=Hn(t);try{const a=me(e.text,H()),i=JSON.parse(a);ku(r,i)}catch(a){A.error("error while parsing actor properties text",a)}},"addProperties");function ku(t,e){if(t.properties==null)t.properties=e;else for(const r in e)t.properties[r]=e[r]}l(ku,"insertProperties");function am(){It.records.currentBox=void 0}l(am,"boxEnd");var sm=l(function(t,e){const r=Hn(t),a=document.getElementById(e.text);try{const i=a.innerHTML,s=JSON.parse(i);s.properties&&ku(r,s.properties),s.links&&Tl(r,s.links)}catch(i){A.error("error while parsing actor details text",i)}},"addDetails"),R7=l(function(t,e){if((t==null?void 0:t.properties)!==void 0)return t.properties[e]},"getActorProperty"),nm=l(function(t){if(Array.isArray(t))t.forEach(function(e){nm(e)});else switch(t.type){case"sequenceIndex":It.records.messages.push({from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":Vc(t.actor,t.actor,t.description,t.draw);break;case"createParticipant":if(It.records.actors.has(t.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");It.records.lastCreated=t.actor,Vc(t.actor,t.actor,t.description,t.draw),It.records.createdActors.set(t.actor,It.records.messages.length);break;case"destroyParticipant":It.records.lastDestroyed=t.actor,It.records.destroyedActors.set(t.actor,It.records.messages.length);break;case"activeStart":Be(t.actor,void 0,void 0,t.signalType);break;case"activeEnd":Be(t.actor,void 0,void 0,t.signalType);break;case"addNote":em(t.actor,t.placement,t.text);break;case"addLinks":rm(t.actor,t.text);break;case"addALink":D7(t.actor,t.text);break;case"addProperties":im(t.actor,t.text);break;case"addDetails":sm(t.actor,t.text);break;case"addMessage":if(It.records.lastCreated){if(t.to!==It.records.lastCreated)throw new Error("The created participant "+It.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");It.records.lastCreated=void 0}else if(It.records.lastDestroyed){if(t.to!==It.records.lastDestroyed&&t.from!==It.records.lastDestroyed)throw new Error("The destroyed participant "+It.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");It.records.lastDestroyed=void 0}Be(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":u7(t.boxData);break;case"boxEnd":am();break;case"loopStart":Be(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":Be(void 0,void 0,void 0,t.signalType);break;case"rectStart":Be(void 0,void 0,t.color,t.signalType);break;case"rectEnd":Be(void 0,void 0,void 0,t.signalType);break;case"optStart":Be(void 0,void 0,t.optText,t.signalType);break;case"optEnd":Be(void 0,void 0,void 0,t.signalType);break;case"altStart":Be(void 0,void 0,t.altText,t.signalType);break;case"else":Be(void 0,void 0,t.altText,t.signalType);break;case"altEnd":Be(void 0,void 0,void 0,t.signalType);break;case"setAccTitle":He(t.text);break;case"parStart":Be(void 0,void 0,t.parText,t.signalType);break;case"and":Be(void 0,void 0,t.parText,t.signalType);break;case"parEnd":Be(void 0,void 0,void 0,t.signalType);break;case"criticalStart":Be(void 0,void 0,t.criticalText,t.signalType);break;case"option":Be(void 0,void 0,t.optionText,t.signalType);break;case"criticalEnd":Be(void 0,void 0,void 0,t.signalType);break;case"breakStart":Be(void 0,void 0,t.breakText,t.signalType);break;case"breakEnd":Be(void 0,void 0,void 0,t.signalType);break}},"apply"),Wd={addActor:Vc,addMessage:p7,addSignal:Be,addLinks:rm,addDetails:sm,addProperties:im,autoWrap:ma,setWrap:S7,enableSequenceNumbers:T7,disableSequenceNumbers:_7,showSequenceNumbers:C7,getMessages:y7,getActors:x7,getCreatedActors:b7,getDestroyedActors:k7,getActor:Hn,getActorKeys:v7,getActorProperty:R7,getAccTitle:Ke,getBoxes:m7,getDiagramTitle:Je,setDiagramTitle:dr,getConfig:l(()=>H().sequence,"getConfig"),clear:w7,parseMessage:E7,parseBoxData:A7,LINETYPE:_n,ARROWTYPE:L7,PLACEMENT:B7,addNote:em,setAccTitle:He,apply:nm,setAccDescription:Qe,getAccDescription:Ze,hasAtLeastOneBox:f7,hasAtLeastOneBoxWithTitle:g7},I7=l(t=>`.actor {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }

  text.actor > tspan {
    fill: ${t.actorTextColor};
    stroke: none;
  }

  .actor-line {
    stroke: ${t.actorLineColor};
  }

  .messageLine0 {
    stroke-width: 1.5;
    stroke-dasharray: none;
    stroke: ${t.signalColor};
  }

  .messageLine1 {
    stroke-width: 1.5;
    stroke-dasharray: 2, 2;
    stroke: ${t.signalColor};
  }

  #arrowhead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .sequenceNumber {
    fill: ${t.sequenceNumberColor};
  }

  #sequencenumber {
    fill: ${t.signalColor};
  }

  #crosshead path {
    fill: ${t.signalColor};
    stroke: ${t.signalColor};
  }

  .messageText {
    fill: ${t.signalTextColor};
    stroke: none;
  }

  .labelBox {
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBkgColor};
  }

  .labelText, .labelText > tspan {
    fill: ${t.labelTextColor};
    stroke: none;
  }

  .loopText, .loopText > tspan {
    fill: ${t.loopTextColor};
    stroke: none;
  }

  .loopLine {
    stroke-width: 2px;
    stroke-dasharray: 2, 2;
    stroke: ${t.labelBoxBorderColor};
    fill: ${t.labelBoxBorderColor};
  }

  .note {
    //stroke: #decc93;
    stroke: ${t.noteBorderColor};
    fill: ${t.noteBkgColor};
  }

  .noteText, .noteText > tspan {
    fill: ${t.noteTextColor};
    stroke: none;
  }

  .activation0 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation1 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .activation2 {
    fill: ${t.activationBkgColor};
    stroke: ${t.activationBorderColor};
  }

  .actorPopupMenu {
    position: absolute;
  }

  .actorPopupMenuPanel {
    position: absolute;
    fill: ${t.actorBkg};
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));
}
  .actor-man line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
  }
  .actor-man circle, line {
    stroke: ${t.actorBorder};
    fill: ${t.actorBkg};
    stroke-width: 2px;
  }
`,"getStyles"),N7=I7,ua=18*2,om="actor-top",lm="actor-bottom",F7="actor-box",qd="actor-man",vu=l(function(t,e){return pl(t,e)},"drawRect"),P7=l(function(t,e,r,a,i){if(e.links===void 0||e.links===null||Object.keys(e.links).length===0)return{height:0,width:0};const s=e.links,n=e.actorCnt,o=e.rectData;var h="none";i&&(h="block !important");const u=t.append("g");u.attr("id","actor"+n+"_popup"),u.attr("class","actorPopupMenu"),u.attr("display",h);var d="";o.class!==void 0&&(d=" "+o.class);let f=o.width>r?o.width:r;const p=u.append("rect");if(p.attr("class","actorPopupMenuPanel"+d),p.attr("x",o.x),p.attr("y",o.height),p.attr("fill",o.fill),p.attr("stroke",o.stroke),p.attr("width",f),p.attr("height",o.height),p.attr("rx",o.rx),p.attr("ry",o.ry),s!=null){var g=20;for(let x in s){var y=u.append("a"),m=Ta(s[x]);y.attr("xlink:href",m),y.attr("target","_blank"),J7(a)(x,y,o.x+10,o.height+g,f,20,{class:"actor"},a),g+=30}}return p.attr("height",g),{height:o.height+g,width:f}},"drawPopup"),O7=l(function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"},"popupMenuToggle"),Vo=l(async function(t,e,r=null){let a=t.append("foreignObject");const i=await On(e.text,_e()),n=a.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(i).node().getBoundingClientRect();if(a.attr("height",Math.round(n.height)).attr("width",Math.round(n.width)),e.class==="noteText"){const o=t.node().firstChild;o.setAttribute("height",n.height+2*e.textMargin);const h=o.getBBox();a.attr("x",Math.round(h.x+h.width/2-n.width/2)).attr("y",Math.round(h.y+h.height/2-n.height/2))}else if(r){let{startx:o,stopx:h,starty:u}=r;if(o>h){const d=o;o=h,h=d}a.attr("x",Math.round(o+Math.abs(o-h)/2-n.width/2)),e.class==="loopText"?a.attr("y",Math.round(u)):a.attr("y",Math.round(u-n.height))}return[a]},"drawKatex"),Ns=l(function(t,e){let r=0,a=0;const i=e.text.split(mt.lineBreakRegex),[s,n]=Xi(e.fontSize);let o=[],h=0,u=l(()=>e.y,"yfunc");if(e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0)switch(e.valign){case"top":case"start":u=l(()=>Math.round(e.y+e.textMargin),"yfunc");break;case"middle":case"center":u=l(()=>Math.round(e.y+(r+a+e.textMargin)/2),"yfunc");break;case"bottom":case"end":u=l(()=>Math.round(e.y+(r+a+2*e.textMargin)-e.textMargin),"yfunc");break}if(e.anchor!==void 0&&e.textMargin!==void 0&&e.width!==void 0)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle";break}for(let[d,f]of i.entries()){e.textMargin!==void 0&&e.textMargin===0&&s!==void 0&&(h=d*s);const p=t.append("text");p.attr("x",e.x),p.attr("y",u()),e.anchor!==void 0&&p.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),e.fontFamily!==void 0&&p.style("font-family",e.fontFamily),n!==void 0&&p.style("font-size",n),e.fontWeight!==void 0&&p.style("font-weight",e.fontWeight),e.fill!==void 0&&p.attr("fill",e.fill),e.class!==void 0&&p.attr("class",e.class),e.dy!==void 0?p.attr("dy",e.dy):h!==0&&p.attr("dy",h);const g=f||Fp;if(e.tspan){const y=p.append("tspan");y.attr("x",e.x),e.fill!==void 0&&y.attr("fill",e.fill),y.text(g)}else p.text(g);e.valign!==void 0&&e.textMargin!==void 0&&e.textMargin>0&&(a+=(p._groups||p)[0][0].getBBox().height,r=a),o.push(p)}return o},"drawText"),cm=l(function(t,e){function r(i,s,n,o,h){return i+","+s+" "+(i+n)+","+s+" "+(i+n)+","+(s+o-h)+" "+(i+n-h*1.2)+","+(s+o)+" "+i+","+(s+o)}l(r,"genPoints");const a=t.append("polygon");return a.attr("points",r(e.x,e.y,e.width,e.height,7)),a.attr("class","labelBox"),e.y=e.y+e.height/2,Ns(t,e),a},"drawLabel"),ai=-1,hm=l((t,e,r,a)=>{t.select&&r.forEach(i=>{const s=e.get(i),n=t.select("#actor"+s.actorCnt);!a.mirrorActors&&s.stopy?n.attr("y2",s.stopy+s.height/2):a.mirrorActors&&n.attr("y2",s.stopy)})},"fixLifeLineHeights"),M7=l(function(t,e,r,a){var g,y;const i=a?e.stopy:e.starty,s=e.x+e.width/2,n=i+e.height,o=t.append("g").lower();var h=o;a||(ai++,Object.keys(e.links||{}).length&&!r.forceMenus&&h.attr("onclick",O7(`actor${ai}_popup`)).attr("cursor","pointer"),h.append("line").attr("id","actor"+ai).attr("x1",s).attr("y1",n).attr("x2",s).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),h=o.append("g"),e.actorCnt=ai,e.links!=null&&h.attr("id","root-"+ai));const u=_a();var d="actor";(g=e.properties)!=null&&g.class?d=e.properties.class:u.fill="#eaeaea",a?d+=` ${lm}`:d+=` ${om}`,u.x=e.x,u.y=i,u.width=e.width,u.height=e.height,u.class=d,u.rx=3,u.ry=3,u.name=e.name;const f=vu(h,u);if(e.rectData=u,(y=e.properties)!=null&&y.icon){const m=e.properties.icon.trim();m.charAt(0)==="@"?U6(h,u.x+u.width-20,u.y+10,m.substr(1)):G6(h,u.x+u.width-20,u.y+10,m)}Tu(r,ir(e.description))(e.description,h,u.x,u.y,u.width,u.height,{class:`actor ${F7}`},r);let p=e.height;if(f.node){const m=f.node().getBBox();e.height=m.height,p=m.height}return p},"drawActorTypeParticipant"),$7=l(function(t,e,r,a){const i=a?e.stopy:e.starty,s=e.x+e.width/2,n=i+80,o=t.append("g").lower();a||(ai++,o.append("line").attr("id","actor"+ai).attr("x1",s).attr("y1",n).attr("x2",s).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),e.actorCnt=ai);const h=t.append("g");let u=qd;a?u+=` ${lm}`:u+=` ${om}`,h.attr("class",u),h.attr("name",e.name);const d=_a();d.x=e.x,d.y=i,d.fill="#eaeaea",d.width=e.width,d.height=e.height,d.class="actor",d.rx=3,d.ry=3,h.append("line").attr("id","actor-man-torso"+ai).attr("x1",s).attr("y1",i+25).attr("x2",s).attr("y2",i+45),h.append("line").attr("id","actor-man-arms"+ai).attr("x1",s-ua/2).attr("y1",i+33).attr("x2",s+ua/2).attr("y2",i+33),h.append("line").attr("x1",s-ua/2).attr("y1",i+60).attr("x2",s).attr("y2",i+45),h.append("line").attr("x1",s).attr("y1",i+45).attr("x2",s+ua/2-2).attr("y2",i+60);const f=h.append("circle");f.attr("cx",e.x+e.width/2),f.attr("cy",i+10),f.attr("r",15),f.attr("width",e.width),f.attr("height",e.height);const p=h.node().getBBox();return e.height=p.height,Tu(r,ir(e.description))(e.description,h,d.x,d.y+35,d.width,d.height,{class:`actor ${qd}`},r),e.height},"drawActorTypeActor"),V7=l(async function(t,e,r,a){switch(e.type){case"actor":return await $7(t,e,r,a);case"participant":return await M7(t,e,r,a)}},"drawActor"),z7=l(function(t,e,r){const i=t.append("g");um(i,e),e.name&&Tu(r)(e.name,i,e.x,e.y+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},r),i.lower()},"drawBox"),W7=l(function(t){return t.append("g")},"anchorElement"),q7=l(function(t,e,r,a,i){const s=_a(),n=e.anchored;s.x=e.startx,s.y=e.starty,s.class="activation"+i%3,s.width=e.stopx-e.startx,s.height=r-e.starty,vu(n,s)},"drawActivation"),Y7=l(async function(t,e,r,a){const{boxMargin:i,boxTextMargin:s,labelBoxHeight:n,labelBoxWidth:o,messageFontFamily:h,messageFontSize:u,messageFontWeight:d}=a,f=t.append("g"),p=l(function(m,x,v,T){return f.append("line").attr("x1",m).attr("y1",x).attr("x2",v).attr("y2",T).attr("class","loopLine")},"drawLoopLine");p(e.startx,e.starty,e.stopx,e.starty),p(e.stopx,e.starty,e.stopx,e.stopy),p(e.startx,e.stopy,e.stopx,e.stopy),p(e.startx,e.starty,e.startx,e.stopy),e.sections!==void 0&&e.sections.forEach(function(m){p(e.startx,m.y,e.stopx,m.y).style("stroke-dasharray","3, 3")});let g=Oh();g.text=r,g.x=e.startx,g.y=e.starty,g.fontFamily=h,g.fontSize=u,g.fontWeight=d,g.anchor="middle",g.valign="middle",g.tspan=!1,g.width=o||50,g.height=n||20,g.textMargin=s,g.class="labelText",cm(f,g),g=dm(),g.text=e.title,g.x=e.startx+o/2+(e.stopx-e.startx)/2,g.y=e.starty+i+s,g.anchor="middle",g.valign="middle",g.textMargin=s,g.class="loopText",g.fontFamily=h,g.fontSize=u,g.fontWeight=d,g.wrap=!0;let y=ir(g.text)?await Vo(f,g,e):Ns(f,g);if(e.sectionTitles!==void 0){for(const[m,x]of Object.entries(e.sectionTitles))if(x.message){g.text=x.message,g.x=e.startx+(e.stopx-e.startx)/2,g.y=e.sections[m].y+i+s,g.class="loopText",g.anchor="middle",g.valign="middle",g.tspan=!1,g.fontFamily=h,g.fontSize=u,g.fontWeight=d,g.wrap=e.wrap,ir(g.text)?(e.starty=e.sections[m].y,await Vo(f,g,e)):Ns(f,g);let v=Math.round(y.map(T=>(T._groups||T)[0][0].getBBox().height).reduce((T,I)=>T+I));e.sections[m].height+=v-(i+s)}}return e.height=Math.round(e.stopy-e.starty),f},"drawLoop"),um=l(function(t,e){k2(t,e)},"drawBackgroundRect"),H7=l(function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")},"insertDatabaseIcon"),G7=l(function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")},"insertComputerIcon"),U7=l(function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")},"insertClockIcon"),j7=l(function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")},"insertArrowHead"),X7=l(function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertArrowFilledHead"),K7=l(function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)},"insertSequenceNumber"),Q7=l(function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")},"insertArrowCrossHead"),dm=l(function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}},"getTextObj"),Z7=l(function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),Tu=function(){function t(s,n,o,h,u,d,f){const p=n.append("text").attr("x",o+u/2).attr("y",h+d/2+5).style("text-anchor","middle").text(s);i(p,f)}l(t,"byText");function e(s,n,o,h,u,d,f,p){const{actorFontSize:g,actorFontFamily:y,actorFontWeight:m}=p,[x,v]=Xi(g),T=s.split(mt.lineBreakRegex);for(let I=0;I<T.length;I++){const B=I*x-x*(T.length-1)/2,_=n.append("text").attr("x",o+u/2).attr("y",h).style("text-anchor","middle").style("font-size",v).style("font-weight",m).style("font-family",y);_.append("tspan").attr("x",o+u/2).attr("dy",B).text(T[I]),_.attr("y",h+d/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(_,f)}}l(e,"byTspan");function r(s,n,o,h,u,d,f,p){const g=n.append("switch"),m=g.append("foreignObject").attr("x",o).attr("y",h).attr("width",u).attr("height",d).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");m.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(s),e(s,g,o,h,u,d,f,p),i(m,f)}l(r,"byFo");async function a(s,n,o,h,u,d,f,p){const g=await Pn(s,_e()),y=n.append("switch"),x=y.append("foreignObject").attr("x",o+u/2-g.width/2).attr("y",h+d/2-g.height/2).attr("width",g.width).attr("height",g.height).append("xhtml:div").style("height","100%").style("width","100%");x.append("div").style("text-align","center").style("vertical-align","middle").html(await On(s,_e())),e(s,y,o,h,u,d,f,p),i(x,f)}l(a,"byKatex");function i(s,n){for(const o in n)n.hasOwnProperty(o)&&s.attr(o,n[o])}return l(i,"_setTextAttrs"),function(s,n=!1){return n?a:s.textPlacement==="fo"?r:s.textPlacement==="old"?t:e}}(),J7=function(){function t(i,s,n,o,h,u,d){const f=s.append("text").attr("x",n).attr("y",o).style("text-anchor","start").text(i);a(f,d)}l(t,"byText");function e(i,s,n,o,h,u,d,f){const{actorFontSize:p,actorFontFamily:g,actorFontWeight:y}=f,m=i.split(mt.lineBreakRegex);for(let x=0;x<m.length;x++){const v=x*p-p*(m.length-1)/2,T=s.append("text").attr("x",n).attr("y",o).style("text-anchor","start").style("font-size",p).style("font-weight",y).style("font-family",g);T.append("tspan").attr("x",n).attr("dy",v).text(m[x]),T.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),a(T,d)}}l(e,"byTspan");function r(i,s,n,o,h,u,d,f){const p=s.append("switch"),y=p.append("foreignObject").attr("x",n).attr("y",o).attr("width",h).attr("height",u).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,p,n,o,h,u,d,f),a(y,d)}l(r,"byFo");function a(i,s){for(const n in s)s.hasOwnProperty(n)&&i.attr(n,s[n])}return l(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}}(),De={drawRect:vu,drawText:Ns,drawLabel:cm,drawActor:V7,drawBox:z7,drawPopup:P7,anchorElement:W7,drawActivation:q7,drawLoop:Y7,drawBackgroundRect:um,insertArrowHead:j7,insertArrowFilledHead:X7,insertSequenceNumber:K7,insertArrowCrossHead:Q7,insertDatabaseIcon:H7,insertComputerIcon:G7,insertClockIcon:U7,getTextObj:dm,getNoteRect:Z7,fixLifeLineHeights:hm,sanitizeUrl:Ta},J={},ft={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:l(function(){return Math.max.apply(null,this.actors.length===0?[0]:this.actors.map(t=>t.height||0))+(this.loops.length===0?0:this.loops.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.messages.length===0?0:this.messages.map(t=>t.height||0).reduce((t,e)=>t+e))+(this.notes.length===0?0:this.notes.map(t=>t.height||0).reduce((t,e)=>t+e))},"getHeight"),clear:l(function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]},"clear"),addBox:l(function(t){this.boxes.push(t)},"addBox"),addActor:l(function(t){this.actors.push(t)},"addActor"),addLoop:l(function(t){this.loops.push(t)},"addLoop"),addMessage:l(function(t){this.messages.push(t)},"addMessage"),addNote:l(function(t){this.notes.push(t)},"addNote"),lastActor:l(function(){return this.actors[this.actors.length-1]},"lastActor"),lastLoop:l(function(){return this.loops[this.loops.length-1]},"lastLoop"),lastMessage:l(function(){return this.messages[this.messages.length-1]},"lastMessage"),lastNote:l(function(){return this.notes[this.notes.length-1]},"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:l(function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,gm(H())},"init"),updateVal:l(function(t,e,r,a){t[e]===void 0?t[e]=r:t[e]=a(r,t[e])},"updateVal"),updateBounds:l(function(t,e,r,a){const i=this;let s=0;function n(o){return l(function(u){s++;const d=i.sequenceItems.length-s+1;i.updateVal(u,"starty",e-d*J.boxMargin,Math.min),i.updateVal(u,"stopy",a+d*J.boxMargin,Math.max),i.updateVal(ft.data,"startx",t-d*J.boxMargin,Math.min),i.updateVal(ft.data,"stopx",r+d*J.boxMargin,Math.max),o!=="activation"&&(i.updateVal(u,"startx",t-d*J.boxMargin,Math.min),i.updateVal(u,"stopx",r+d*J.boxMargin,Math.max),i.updateVal(ft.data,"starty",e-d*J.boxMargin,Math.min),i.updateVal(ft.data,"stopy",a+d*J.boxMargin,Math.max))},"updateItemBounds")}l(n,"updateFn"),this.sequenceItems.forEach(n()),this.activations.forEach(n("activation"))},"updateBounds"),insert:l(function(t,e,r,a){const i=mt.getMin(t,r),s=mt.getMax(t,r),n=mt.getMin(e,a),o=mt.getMax(e,a);this.updateVal(ft.data,"startx",i,Math.min),this.updateVal(ft.data,"starty",n,Math.min),this.updateVal(ft.data,"stopx",s,Math.max),this.updateVal(ft.data,"stopy",o,Math.max),this.updateBounds(i,n,s,o)},"insert"),newActivation:l(function(t,e,r){const a=r.get(t.from),i=_l(t.from).length||0,s=a.x+a.width/2+(i-1)*J.activationWidth/2;this.activations.push({startx:s,starty:this.verticalPos+2,stopx:s+J.activationWidth,stopy:void 0,actor:t.from,anchored:De.anchorElement(e)})},"newActivation"),endActivation:l(function(t){const e=this.activations.map(function(r){return r.actor}).lastIndexOf(t.from);return this.activations.splice(e,1)[0]},"endActivation"),createLoop:l(function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}},"createLoop"),newLoop:l(function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))},"newLoop"),endLoop:l(function(){return this.sequenceItems.pop()},"endLoop"),isLoopOverlap:l(function(){return this.sequenceItems.length?this.sequenceItems[this.sequenceItems.length-1].overlap:!1},"isLoopOverlap"),addSectionToLoop:l(function(t){const e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:ft.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)},"addSectionToLoop"),saveVerticalPos:l(function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)},"saveVerticalPos"),resetVerticalPos:l(function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)},"resetVerticalPos"),bumpVerticalPos:l(function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=mt.getMax(this.data.stopy,this.verticalPos)},"bumpVerticalPos"),getVerticalPos:l(function(){return this.verticalPos},"getVerticalPos"),getBounds:l(function(){return{bounds:this.data,models:this.models}},"getBounds")},t8=l(async function(t,e){ft.bumpVerticalPos(J.boxMargin),e.height=J.boxMargin,e.starty=ft.getVerticalPos();const r=_a();r.x=e.startx,r.y=e.starty,r.width=e.width||J.width,r.class="note";const a=t.append("g"),i=De.drawRect(a,r),s=Oh();s.x=e.startx,s.y=e.starty,s.width=r.width,s.dy="1em",s.text=e.message,s.class="noteText",s.fontFamily=J.noteFontFamily,s.fontSize=J.noteFontSize,s.fontWeight=J.noteFontWeight,s.anchor=J.noteAlign,s.textMargin=J.noteMargin,s.valign="center";const n=ir(s.text)?await Vo(a,s):Ns(a,s),o=Math.round(n.map(h=>(h._groups||h)[0][0].getBBox().height).reduce((h,u)=>h+u));i.attr("height",o+2*J.noteMargin),e.height+=o+2*J.noteMargin,ft.bumpVerticalPos(o+2*J.noteMargin),e.stopy=e.starty+o+2*J.noteMargin,e.stopx=e.startx+r.width,ft.insert(e.startx,e.starty,e.stopx,e.stopy),ft.models.addNote(e)},"drawNote"),xa=l(t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight}),"messageFont"),Ba=l(t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight}),"noteFont"),zc=l(t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight}),"actorFont");async function pm(t,e){ft.bumpVerticalPos(10);const{startx:r,stopx:a,message:i}=e,s=mt.splitBreaks(i).length,n=ir(i),o=n?await Pn(i,H()):re.calculateTextDimensions(i,xa(J));if(!n){const f=o.height/s;e.height+=f,ft.bumpVerticalPos(f)}let h,u=o.height-10;const d=o.width;if(r===a){h=ft.getVerticalPos()+u,J.rightAngles||(u+=J.boxMargin,h=ft.getVerticalPos()+u),u+=30;const f=mt.getMax(d/2,J.width/2);ft.insert(r-f,ft.getVerticalPos()-10+u,a+f,ft.getVerticalPos()+30+u)}else u+=J.boxMargin,h=ft.getVerticalPos()+u,ft.insert(r,h-10,a,h);return ft.bumpVerticalPos(u),e.height+=u,e.stopy=e.starty+e.height,ft.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),h}l(pm,"boundMessage");var e8=l(async function(t,e,r,a){const{startx:i,stopx:s,starty:n,message:o,type:h,sequenceIndex:u,sequenceVisible:d}=e,f=re.calculateTextDimensions(o,xa(J)),p=Oh();p.x=i,p.y=n+10,p.width=s-i,p.class="messageText",p.dy="1em",p.text=o,p.fontFamily=J.messageFontFamily,p.fontSize=J.messageFontSize,p.fontWeight=J.messageFontWeight,p.anchor=J.messageAlign,p.valign="center",p.textMargin=J.wrapPadding,p.tspan=!1,ir(p.text)?await Vo(t,p,{startx:i,stopx:s,starty:r}):Ns(t,p);const g=f.width;let y;i===s?J.rightAngles?y=t.append("path").attr("d",`M  ${i},${r} H ${i+mt.getMax(J.width/2,g/2)} V ${r+25} H ${i}`):y=t.append("path").attr("d","M "+i+","+r+" C "+(i+60)+","+(r-10)+" "+(i+60)+","+(r+30)+" "+i+","+(r+20)):(y=t.append("line"),y.attr("x1",i),y.attr("y1",r),y.attr("x2",s),y.attr("y2",r)),h===a.db.LINETYPE.DOTTED||h===a.db.LINETYPE.DOTTED_CROSS||h===a.db.LINETYPE.DOTTED_POINT||h===a.db.LINETYPE.DOTTED_OPEN||h===a.db.LINETYPE.BIDIRECTIONAL_DOTTED?(y.style("stroke-dasharray","3, 3"),y.attr("class","messageLine1")):y.attr("class","messageLine0");let m="";J.arrowMarkerAbsolute&&(m=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,m=m.replace(/\(/g,"\\("),m=m.replace(/\)/g,"\\)")),y.attr("stroke-width",2),y.attr("stroke","none"),y.style("fill","none"),(h===a.db.LINETYPE.SOLID||h===a.db.LINETYPE.DOTTED)&&y.attr("marker-end","url("+m+"#arrowhead)"),(h===a.db.LINETYPE.BIDIRECTIONAL_SOLID||h===a.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(y.attr("marker-start","url("+m+"#arrowhead)"),y.attr("marker-end","url("+m+"#arrowhead)")),(h===a.db.LINETYPE.SOLID_POINT||h===a.db.LINETYPE.DOTTED_POINT)&&y.attr("marker-end","url("+m+"#filled-head)"),(h===a.db.LINETYPE.SOLID_CROSS||h===a.db.LINETYPE.DOTTED_CROSS)&&y.attr("marker-end","url("+m+"#crosshead)"),(d||J.showSequenceNumbers)&&(y.attr("marker-start","url("+m+"#sequencenumber)"),t.append("text").attr("x",i).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(u))},"drawMessage"),r8=l(function(t,e,r,a,i,s,n){let o=0,h=0,u,d=0;for(const f of a){const p=e.get(f),g=p.box;u&&u!=g&&(n||ft.models.addBox(u),h+=J.boxMargin+u.margin),g&&g!=u&&(n||(g.x=o+h,g.y=i),h+=g.margin),p.width=p.width||J.width,p.height=mt.getMax(p.height||J.height,J.height),p.margin=p.margin||J.actorMargin,d=mt.getMax(d,p.height),r.get(p.name)&&(h+=p.width/2),p.x=o+h,p.starty=ft.getVerticalPos(),ft.insert(p.x,i,p.x+p.width,p.height),o+=p.width+h,p.box&&(p.box.width=o+g.margin-p.box.x),h=p.margin,u=p.box,ft.models.addActor(p)}u&&!n&&ft.models.addBox(u),ft.bumpVerticalPos(d)},"addActorRenderingData"),Wc=l(async function(t,e,r,a){if(a){let i=0;ft.bumpVerticalPos(J.boxMargin*2);for(const s of r){const n=e.get(s);n.stopy||(n.stopy=ft.getVerticalPos());const o=await De.drawActor(t,n,J,!0);i=mt.getMax(i,o)}ft.bumpVerticalPos(i+J.boxMargin)}else for(const i of r){const s=e.get(i);await De.drawActor(t,s,J,!1)}},"drawActors"),fm=l(function(t,e,r,a){let i=0,s=0;for(const n of r){const o=e.get(n),h=a8(o),u=De.drawPopup(t,o,h,J,J.forceMenus,a);u.height>i&&(i=u.height),u.width+o.x>s&&(s=u.width+o.x)}return{maxHeight:i,maxWidth:s}},"drawActorsPopup"),gm=l(function(t){Ve(J,t),t.fontFamily&&(J.actorFontFamily=J.noteFontFamily=J.messageFontFamily=t.fontFamily),t.fontSize&&(J.actorFontSize=J.noteFontSize=J.messageFontSize=t.fontSize),t.fontWeight&&(J.actorFontWeight=J.noteFontWeight=J.messageFontWeight=t.fontWeight)},"setConf"),_l=l(function(t){return ft.activations.filter(function(e){return e.actor===t})},"actorActivations"),Yd=l(function(t,e){const r=e.get(t),a=_l(t),i=a.reduce(function(n,o){return mt.getMin(n,o.startx)},r.x+r.width/2-1),s=a.reduce(function(n,o){return mt.getMax(n,o.stopx)},r.x+r.width/2+1);return[i,s]},"activationBounds");function Gr(t,e,r,a,i){ft.bumpVerticalPos(r);let s=a;if(e.id&&e.message&&t[e.id]){const n=t[e.id].width,o=xa(J);e.message=re.wrapLabel(`[${e.message}]`,n-2*J.wrapPadding,o),e.width=n,e.wrap=!0;const h=re.calculateTextDimensions(e.message,o),u=mt.getMax(h.height,J.labelBoxHeight);s=a+u,A.debug(`${u} - ${e.message}`)}i(e),ft.bumpVerticalPos(s)}l(Gr,"adjustLoopHeightForWrap");function ym(t,e,r,a,i,s,n){function o(u,d){u.x<i.get(t.from).x?(ft.insert(e.stopx-d,e.starty,e.startx,e.stopy+u.height/2+J.noteMargin),e.stopx=e.stopx+d):(ft.insert(e.startx,e.starty,e.stopx+d,e.stopy+u.height/2+J.noteMargin),e.stopx=e.stopx-d)}l(o,"receiverAdjustment");function h(u,d){u.x<i.get(t.to).x?(ft.insert(e.startx-d,e.starty,e.stopx,e.stopy+u.height/2+J.noteMargin),e.startx=e.startx+d):(ft.insert(e.stopx,e.starty,e.startx+d,e.stopy+u.height/2+J.noteMargin),e.startx=e.startx-d)}if(l(h,"senderAdjustment"),s.get(t.to)==a){const u=i.get(t.to),d=u.type=="actor"?ua/2+3:u.width/2+3;o(u,d),u.starty=r-u.height/2,ft.bumpVerticalPos(u.height/2)}else if(n.get(t.from)==a){const u=i.get(t.from);if(J.mirrorActors){const d=u.type=="actor"?ua/2:u.width/2;h(u,d)}u.stopy=r-u.height/2,ft.bumpVerticalPos(u.height/2)}else if(n.get(t.to)==a){const u=i.get(t.to);if(J.mirrorActors){const d=u.type=="actor"?ua/2+3:u.width/2+3;o(u,d)}u.stopy=r-u.height/2,ft.bumpVerticalPos(u.height/2)}}l(ym,"adjustCreatedDestroyedData");var i8=l(async function(t,e,r,a){const{securityLevel:i,sequence:s}=H();J=s;let n;i==="sandbox"&&(n=yt("#i"+e));const o=i==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body"),h=i==="sandbox"?n.nodes()[0].contentDocument:document;ft.init(),A.debug(a.db);const u=i==="sandbox"?o.select(`[id="${e}"]`):yt(`[id="${e}"]`),d=a.db.getActors(),f=a.db.getCreatedActors(),p=a.db.getDestroyedActors(),g=a.db.getBoxes();let y=a.db.getActorKeys();const m=a.db.getMessages(),x=a.db.getDiagramTitle(),v=a.db.hasAtLeastOneBox(),T=a.db.hasAtLeastOneBoxWithTitle(),I=await mm(d,m,a);if(J.height=await xm(d,I,g),De.insertComputerIcon(u),De.insertDatabaseIcon(u),De.insertClockIcon(u),v&&(ft.bumpVerticalPos(J.boxMargin),T&&ft.bumpVerticalPos(g[0].textMaxHeight)),J.hideUnusedParticipants===!0){const R=new Set;m.forEach(L=>{R.add(L.from),R.add(L.to)}),y=y.filter(L=>R.has(L))}r8(u,d,f,y,0,m,!1);const B=await o8(m,d,I,a);De.insertArrowHead(u),De.insertArrowCrossHead(u),De.insertArrowFilledHead(u),De.insertSequenceNumber(u);function _(R,L){const q=ft.endActivation(R);q.starty+18>L&&(q.starty=L-6,L+=12),De.drawActivation(u,q,L,J,_l(R.from).length),ft.insert(q.startx,L-10,q.stopx,L)}l(_,"activeEnd");let w=1,D=1;const S=[],b=[];let C=0;for(const R of m){let L,q,N;switch(R.type){case a.db.LINETYPE.NOTE:ft.resetVerticalPos(),q=R.noteModel,await t8(u,q);break;case a.db.LINETYPE.ACTIVE_START:ft.newActivation(R,u,d);break;case a.db.LINETYPE.ACTIVE_END:_(R,ft.getVerticalPos());break;case a.db.LINETYPE.LOOP_START:Gr(B,R,J.boxMargin,J.boxMargin+J.boxTextMargin,j=>ft.newLoop(j));break;case a.db.LINETYPE.LOOP_END:L=ft.endLoop(),await De.drawLoop(u,L,"loop",J),ft.bumpVerticalPos(L.stopy-ft.getVerticalPos()),ft.models.addLoop(L);break;case a.db.LINETYPE.RECT_START:Gr(B,R,J.boxMargin,J.boxMargin,j=>ft.newLoop(void 0,j.message));break;case a.db.LINETYPE.RECT_END:L=ft.endLoop(),b.push(L),ft.models.addLoop(L),ft.bumpVerticalPos(L.stopy-ft.getVerticalPos());break;case a.db.LINETYPE.OPT_START:Gr(B,R,J.boxMargin,J.boxMargin+J.boxTextMargin,j=>ft.newLoop(j));break;case a.db.LINETYPE.OPT_END:L=ft.endLoop(),await De.drawLoop(u,L,"opt",J),ft.bumpVerticalPos(L.stopy-ft.getVerticalPos()),ft.models.addLoop(L);break;case a.db.LINETYPE.ALT_START:Gr(B,R,J.boxMargin,J.boxMargin+J.boxTextMargin,j=>ft.newLoop(j));break;case a.db.LINETYPE.ALT_ELSE:Gr(B,R,J.boxMargin+J.boxTextMargin,J.boxMargin,j=>ft.addSectionToLoop(j));break;case a.db.LINETYPE.ALT_END:L=ft.endLoop(),await De.drawLoop(u,L,"alt",J),ft.bumpVerticalPos(L.stopy-ft.getVerticalPos()),ft.models.addLoop(L);break;case a.db.LINETYPE.PAR_START:case a.db.LINETYPE.PAR_OVER_START:Gr(B,R,J.boxMargin,J.boxMargin+J.boxTextMargin,j=>ft.newLoop(j)),ft.saveVerticalPos();break;case a.db.LINETYPE.PAR_AND:Gr(B,R,J.boxMargin+J.boxTextMargin,J.boxMargin,j=>ft.addSectionToLoop(j));break;case a.db.LINETYPE.PAR_END:L=ft.endLoop(),await De.drawLoop(u,L,"par",J),ft.bumpVerticalPos(L.stopy-ft.getVerticalPos()),ft.models.addLoop(L);break;case a.db.LINETYPE.AUTONUMBER:w=R.message.start||w,D=R.message.step||D,R.message.visible?a.db.enableSequenceNumbers():a.db.disableSequenceNumbers();break;case a.db.LINETYPE.CRITICAL_START:Gr(B,R,J.boxMargin,J.boxMargin+J.boxTextMargin,j=>ft.newLoop(j));break;case a.db.LINETYPE.CRITICAL_OPTION:Gr(B,R,J.boxMargin+J.boxTextMargin,J.boxMargin,j=>ft.addSectionToLoop(j));break;case a.db.LINETYPE.CRITICAL_END:L=ft.endLoop(),await De.drawLoop(u,L,"critical",J),ft.bumpVerticalPos(L.stopy-ft.getVerticalPos()),ft.models.addLoop(L);break;case a.db.LINETYPE.BREAK_START:Gr(B,R,J.boxMargin,J.boxMargin+J.boxTextMargin,j=>ft.newLoop(j));break;case a.db.LINETYPE.BREAK_END:L=ft.endLoop(),await De.drawLoop(u,L,"break",J),ft.bumpVerticalPos(L.stopy-ft.getVerticalPos()),ft.models.addLoop(L);break;default:try{N=R.msgModel,N.starty=ft.getVerticalPos(),N.sequenceIndex=w,N.sequenceVisible=a.db.showSequenceNumbers();const j=await pm(u,N);ym(R,N,j,C,d,f,p),S.push({messageModel:N,lineStartY:j}),ft.models.addMessage(N)}catch(j){A.error("error while drawing message",j)}}[a.db.LINETYPE.SOLID_OPEN,a.db.LINETYPE.DOTTED_OPEN,a.db.LINETYPE.SOLID,a.db.LINETYPE.DOTTED,a.db.LINETYPE.SOLID_CROSS,a.db.LINETYPE.DOTTED_CROSS,a.db.LINETYPE.SOLID_POINT,a.db.LINETYPE.DOTTED_POINT,a.db.LINETYPE.BIDIRECTIONAL_SOLID,a.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(R.type)&&(w=w+D),C++}A.debug("createdActors",f),A.debug("destroyedActors",p),await Wc(u,d,y,!1);for(const R of S)await e8(u,R.messageModel,R.lineStartY,a);J.mirrorActors&&await Wc(u,d,y,!0),b.forEach(R=>De.drawBackgroundRect(u,R)),hm(u,d,y,J);for(const R of ft.models.boxes)R.height=ft.getVerticalPos()-R.y,ft.insert(R.x,R.y,R.x+R.width,R.height),R.startx=R.x,R.starty=R.y,R.stopx=R.startx+R.width,R.stopy=R.starty+R.height,R.stroke="rgb(0,0,0, 0.5)",De.drawBox(u,R,J);v&&ft.bumpVerticalPos(J.boxMargin);const k=fm(u,d,y,h),{bounds:E}=ft.getBounds();E.startx===void 0&&(E.startx=0),E.starty===void 0&&(E.starty=0),E.stopx===void 0&&(E.stopx=0),E.stopy===void 0&&(E.stopy=0);let P=E.stopy-E.starty;P<k.maxHeight&&(P=k.maxHeight);let O=P+2*J.diagramMarginY;J.mirrorActors&&(O=O-J.boxMargin+J.bottomMarginAdj);let V=E.stopx-E.startx;V<k.maxWidth&&(V=k.maxWidth);const F=V+2*J.diagramMarginX;x&&u.append("text").text(x).attr("x",(E.stopx-E.startx)/2-2*J.diagramMarginX).attr("y",-25),ar(u,O,F,J.useMaxWidth);const M=x?40:0;u.attr("viewBox",E.startx-J.diagramMarginX+" -"+(J.diagramMarginY+M)+" "+F+" "+(O+M)),A.debug("models:",ft.models)},"draw");async function mm(t,e,r){const a={};for(const i of e)if(t.get(i.to)&&t.get(i.from)){const s=t.get(i.to);if(i.placement===r.db.PLACEMENT.LEFTOF&&!s.prevActor||i.placement===r.db.PLACEMENT.RIGHTOF&&!s.nextActor)continue;const n=i.placement!==void 0,o=!n,h=n?Ba(J):xa(J),u=i.wrap?re.wrapLabel(i.message,J.width-2*J.wrapPadding,h):i.message,f=(ir(u)?await Pn(i.message,H()):re.calculateTextDimensions(u,h)).width+2*J.wrapPadding;o&&i.from===s.nextActor?a[i.to]=mt.getMax(a[i.to]||0,f):o&&i.from===s.prevActor?a[i.from]=mt.getMax(a[i.from]||0,f):o&&i.from===i.to?(a[i.from]=mt.getMax(a[i.from]||0,f/2),a[i.to]=mt.getMax(a[i.to]||0,f/2)):i.placement===r.db.PLACEMENT.RIGHTOF?a[i.from]=mt.getMax(a[i.from]||0,f):i.placement===r.db.PLACEMENT.LEFTOF?a[s.prevActor]=mt.getMax(a[s.prevActor]||0,f):i.placement===r.db.PLACEMENT.OVER&&(s.prevActor&&(a[s.prevActor]=mt.getMax(a[s.prevActor]||0,f/2)),s.nextActor&&(a[i.from]=mt.getMax(a[i.from]||0,f/2)))}return A.debug("maxMessageWidthPerActor:",a),a}l(mm,"getMaxMessageWidthPerActor");var a8=l(function(t){let e=0;const r=zc(J);for(const a in t.links){const s=re.calculateTextDimensions(a,r).width+2*J.wrapPadding+2*J.boxMargin;e<s&&(e=s)}return e},"getRequiredPopupWidth");async function xm(t,e,r){let a=0;for(const s of t.keys()){const n=t.get(s);n.wrap&&(n.description=re.wrapLabel(n.description,J.width-2*J.wrapPadding,zc(J)));const o=ir(n.description)?await Pn(n.description,H()):re.calculateTextDimensions(n.description,zc(J));n.width=n.wrap?J.width:mt.getMax(J.width,o.width+2*J.wrapPadding),n.height=n.wrap?mt.getMax(o.height,J.height):J.height,a=mt.getMax(a,n.height)}for(const s in e){const n=t.get(s);if(!n)continue;const o=t.get(n.nextActor);if(!o){const f=e[s]+J.actorMargin-n.width/2;n.margin=mt.getMax(f,J.actorMargin);continue}const u=e[s]+J.actorMargin-n.width/2-o.width/2;n.margin=mt.getMax(u,J.actorMargin)}let i=0;return r.forEach(s=>{const n=xa(J);let o=s.actorKeys.reduce((d,f)=>d+=t.get(f).width+(t.get(f).margin||0),0);o-=2*J.boxTextMargin,s.wrap&&(s.name=re.wrapLabel(s.name,o-2*J.wrapPadding,n));const h=re.calculateTextDimensions(s.name,n);i=mt.getMax(h.height,i);const u=mt.getMax(o,h.width+2*J.wrapPadding);if(s.margin=J.boxTextMargin,o<u){const d=(u-o)/2;s.margin+=d}}),r.forEach(s=>s.textMaxHeight=i),mt.getMax(a,J.height)}l(xm,"calculateActorMargins");var s8=l(async function(t,e,r){const a=e.get(t.from),i=e.get(t.to),s=a.x,n=i.x,o=t.wrap&&t.message;let h=ir(t.message)?await Pn(t.message,H()):re.calculateTextDimensions(o?re.wrapLabel(t.message,J.width,Ba(J)):t.message,Ba(J));const u={width:o?J.width:mt.getMax(J.width,h.width+2*J.noteMargin),height:0,startx:a.x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===r.db.PLACEMENT.RIGHTOF?(u.width=o?mt.getMax(J.width,h.width):mt.getMax(a.width/2+i.width/2,h.width+2*J.noteMargin),u.startx=s+(a.width+J.actorMargin)/2):t.placement===r.db.PLACEMENT.LEFTOF?(u.width=o?mt.getMax(J.width,h.width+2*J.noteMargin):mt.getMax(a.width/2+i.width/2,h.width+2*J.noteMargin),u.startx=s-u.width+(a.width-J.actorMargin)/2):t.to===t.from?(h=re.calculateTextDimensions(o?re.wrapLabel(t.message,mt.getMax(J.width,a.width),Ba(J)):t.message,Ba(J)),u.width=o?mt.getMax(J.width,a.width):mt.getMax(a.width,J.width,h.width+2*J.noteMargin),u.startx=s+(a.width-u.width)/2):(u.width=Math.abs(s+a.width/2-(n+i.width/2))+J.actorMargin,u.startx=s<n?s+a.width/2-J.actorMargin/2:n+i.width/2-J.actorMargin/2),o&&(u.message=re.wrapLabel(t.message,u.width-2*J.wrapPadding,Ba(J))),A.debug(`NM:[${u.startx},${u.stopx},${u.starty},${u.stopy}:${u.width},${u.height}=${t.message}]`),u},"buildNoteModel"),n8=l(function(t,e,r){if(![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT,r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(t.type))return{};const[a,i]=Yd(t.from,e),[s,n]=Yd(t.to,e),o=a<=s;let h=o?i:a,u=o?s:n;const d=Math.abs(s-n)>2,f=l(m=>o?-m:m,"adjustValue");t.from===t.to?u=h:(t.activate&&!d&&(u+=f(J.activationWidth/2-1)),[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(u+=f(3)),[r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(t.type)&&(h-=f(3)));const p=[a,i,s,n],g=Math.abs(h-u);t.wrap&&t.message&&(t.message=re.wrapLabel(t.message,mt.getMax(g+2*J.wrapPadding,J.width),xa(J)));const y=re.calculateTextDimensions(t.message,xa(J));return{width:mt.getMax(t.wrap?0:y.width+2*J.wrapPadding,g+2*J.wrapPadding,J.width),height:0,startx:h,stopx:u,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,p),toBounds:Math.max.apply(null,p)}},"buildMessageModel"),o8=l(async function(t,e,r,a){const i={},s=[];let n,o,h;for(const u of t){switch(u.id=re.random({length:10}),u.type){case a.db.LINETYPE.LOOP_START:case a.db.LINETYPE.ALT_START:case a.db.LINETYPE.OPT_START:case a.db.LINETYPE.PAR_START:case a.db.LINETYPE.PAR_OVER_START:case a.db.LINETYPE.CRITICAL_START:case a.db.LINETYPE.BREAK_START:s.push({id:u.id,msg:u.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case a.db.LINETYPE.ALT_ELSE:case a.db.LINETYPE.PAR_AND:case a.db.LINETYPE.CRITICAL_OPTION:u.message&&(n=s.pop(),i[n.id]=n,i[u.id]=n,s.push(n));break;case a.db.LINETYPE.LOOP_END:case a.db.LINETYPE.ALT_END:case a.db.LINETYPE.OPT_END:case a.db.LINETYPE.PAR_END:case a.db.LINETYPE.CRITICAL_END:case a.db.LINETYPE.BREAK_END:n=s.pop(),i[n.id]=n;break;case a.db.LINETYPE.ACTIVE_START:{const f=e.get(u.from?u.from:u.to.actor),p=_l(u.from?u.from:u.to.actor).length,g=f.x+f.width/2+(p-1)*J.activationWidth/2,y={startx:g,stopx:g+J.activationWidth,actor:u.from,enabled:!0};ft.activations.push(y)}break;case a.db.LINETYPE.ACTIVE_END:{const f=ft.activations.map(p=>p.actor).lastIndexOf(u.from);ft.activations.splice(f,1).splice(0,1)}break}u.placement!==void 0?(o=await s8(u,e,a),u.noteModel=o,s.forEach(f=>{n=f,n.from=mt.getMin(n.from,o.startx),n.to=mt.getMax(n.to,o.startx+o.width),n.width=mt.getMax(n.width,Math.abs(n.from-n.to))-J.labelBoxWidth})):(h=n8(u,e,a),u.msgModel=h,h.startx&&h.stopx&&s.length>0&&s.forEach(f=>{if(n=f,h.startx===h.stopx){const p=e.get(u.from),g=e.get(u.to);n.from=mt.getMin(p.x-h.width/2,p.x-p.width/2,n.from),n.to=mt.getMax(g.x+h.width/2,g.x+p.width/2,n.to),n.width=mt.getMax(n.width,Math.abs(n.to-n.from))-J.labelBoxWidth}else n.from=mt.getMin(h.startx,n.from),n.to=mt.getMax(h.stopx,n.to),n.width=mt.getMax(n.width,h.width)-J.labelBoxWidth}))}return ft.activations=[],A.debug("Loop type widths:",i),i},"calculateLoopBounds"),l8={bounds:ft,drawActors:Wc,drawActorsPopup:fm,setConf:gm,draw:i8},c8={parser:h7,db:Wd,renderer:l8,styles:N7,init:l(({wrap:t})=>{Wd.setWrap(t)},"init")};const h8=Object.freeze(Object.defineProperty({__proto__:null,diagram:c8},Symbol.toStringTag,{value:"Module"}));var qc=function(){var t=l(function(xt,ot,ct,gt){for(ct=ct||{},gt=xt.length;gt--;ct[xt[gt]]=ot);return ct},"o"),e=[1,18],r=[1,19],a=[1,20],i=[1,41],s=[1,42],n=[1,26],o=[1,24],h=[1,25],u=[1,32],d=[1,33],f=[1,34],p=[1,45],g=[1,35],y=[1,36],m=[1,37],x=[1,38],v=[1,27],T=[1,28],I=[1,29],B=[1,30],_=[1,31],w=[1,44],D=[1,46],S=[1,43],b=[1,47],C=[1,9],k=[1,8,9],E=[1,58],P=[1,59],O=[1,60],V=[1,61],F=[1,62],M=[1,63],R=[1,64],L=[1,8,9,41],q=[1,76],N=[1,8,9,12,13,22,39,41,44,66,67,68,69,70,71,72,77,79],j=[1,8,9,12,13,17,20,22,39,41,44,48,58,66,67,68,69,70,71,72,77,79,84,99,101,102],it=[13,58,84,99,101,102],tt=[13,58,71,72,84,99,101,102],pt=[13,58,66,67,68,69,70,84,99,101,102],K=[1,98],nt=[1,115],ht=[1,107],st=[1,113],rt=[1,108],Z=[1,109],at=[1,110],Q=[1,111],lt=[1,112],z=[1,114],Et=[22,58,59,80,84,85,86,87,88,89],X=[1,8,9,39,41,44],vt=[1,8,9,22],Ct=[1,143],Yt=[1,8,9,59],Ut=[1,8,9,22,58,59,80,84,85,86,87,88,89],ae={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,DOT:17,className:18,classLiteralName:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,ANNOTATION_START:47,ANNOTATION_END:48,MEMBER:49,SEPARATOR:50,relation:51,NOTE_FOR:52,noteText:53,NOTE:54,CLASSDEF:55,classList:56,stylesOpt:57,ALPHA:58,COMMA:59,direction_tb:60,direction_bt:61,direction_rl:62,direction_lr:63,relationType:64,lineType:65,AGGREGATION:66,EXTENSION:67,COMPOSITION:68,DEPENDENCY:69,LOLLIPOP:70,LINE:71,DOTTED_LINE:72,CALLBACK:73,LINK:74,LINK_TARGET:75,CLICK:76,CALLBACK_NAME:77,CALLBACK_ARGS:78,HREF:79,STYLE:80,CSSCLASS:81,style:82,styleComponent:83,NUM:84,COLON:85,UNIT:86,SPACE:87,BRKT:88,PCT:89,commentToken:90,textToken:91,graphCodeTokens:92,textNoTagsToken:93,TAGSTART:94,TAGEND:95,"==":96,"--":97,DEFAULT:98,MINUS:99,keywords:100,UNICODE_TEXT:101,BQUOTE_STR:102,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",17:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",47:"ANNOTATION_START",48:"ANNOTATION_END",49:"MEMBER",50:"SEPARATOR",52:"NOTE_FOR",54:"NOTE",55:"CLASSDEF",58:"ALPHA",59:"COMMA",60:"direction_tb",61:"direction_bt",62:"direction_rl",63:"direction_lr",66:"AGGREGATION",67:"EXTENSION",68:"COMPOSITION",69:"DEPENDENCY",70:"LOLLIPOP",71:"LINE",72:"DOTTED_LINE",73:"CALLBACK",74:"LINK",75:"LINK_TARGET",76:"CLICK",77:"CALLBACK_NAME",78:"CALLBACK_ARGS",79:"HREF",80:"STYLE",81:"CSSCLASS",84:"NUM",85:"COLON",86:"UNIT",87:"SPACE",88:"BRKT",89:"PCT",92:"graphCodeTokens",94:"TAGSTART",95:"TAGEND",96:"==",97:"--",98:"DEFAULT",99:"MINUS",100:"keywords",101:"UNICODE_TEXT",102:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,3],[15,2],[18,1],[18,3],[18,1],[18,2],[18,2],[18,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,6],[43,2],[43,3],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[56,1],[56,3],[32,1],[32,1],[32,1],[32,1],[51,3],[51,2],[51,2],[51,1],[64,1],[64,1],[64,1],[64,1],[64,1],[65,1],[65,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[57,1],[57,3],[82,1],[82,2],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[90,1],[90,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[93,1],[93,1],[93,1],[93,1],[16,1],[16,1],[16,1],[16,1],[19,1],[53,1]],performAction:l(function(ot,ct,gt,G,Pt,$,Qt){var U=$.length-1;switch(Pt){case 8:this.$=$[U-1];break;case 9:case 12:case 14:this.$=$[U];break;case 10:case 13:this.$=$[U-2]+"."+$[U];break;case 11:case 15:this.$=$[U-1]+$[U];break;case 16:case 17:this.$=$[U-1]+"~"+$[U]+"~";break;case 18:G.addRelation($[U]);break;case 19:$[U-1].title=G.cleanupLabel($[U]),G.addRelation($[U-1]);break;case 30:this.$=$[U].trim(),G.setAccTitle(this.$);break;case 31:case 32:this.$=$[U].trim(),G.setAccDescription(this.$);break;case 33:G.addClassesToNamespace($[U-3],$[U-1]);break;case 34:G.addClassesToNamespace($[U-4],$[U-1]);break;case 35:this.$=$[U],G.addNamespace($[U]);break;case 36:this.$=[$[U]];break;case 37:this.$=[$[U-1]];break;case 38:$[U].unshift($[U-2]),this.$=$[U];break;case 40:G.setCssClass($[U-2],$[U]);break;case 41:G.addMembers($[U-3],$[U-1]);break;case 42:G.setCssClass($[U-5],$[U-3]),G.addMembers($[U-5],$[U-1]);break;case 43:this.$=$[U],G.addClass($[U]);break;case 44:this.$=$[U-1],G.addClass($[U-1]),G.setClassLabel($[U-1],$[U]);break;case 45:G.addAnnotation($[U],$[U-2]);break;case 46:case 59:this.$=[$[U]];break;case 47:$[U].push($[U-1]),this.$=$[U];break;case 48:break;case 49:G.addMember($[U-1],G.cleanupLabel($[U]));break;case 50:break;case 51:break;case 52:this.$={id1:$[U-2],id2:$[U],relation:$[U-1],relationTitle1:"none",relationTitle2:"none"};break;case 53:this.$={id1:$[U-3],id2:$[U],relation:$[U-1],relationTitle1:$[U-2],relationTitle2:"none"};break;case 54:this.$={id1:$[U-3],id2:$[U],relation:$[U-2],relationTitle1:"none",relationTitle2:$[U-1]};break;case 55:this.$={id1:$[U-4],id2:$[U],relation:$[U-2],relationTitle1:$[U-3],relationTitle2:$[U-1]};break;case 56:G.addNote($[U],$[U-1]);break;case 57:G.addNote($[U]);break;case 58:this.$=$[U-2],G.defineClass($[U-1],$[U]);break;case 60:this.$=$[U-2].concat([$[U]]);break;case 61:G.setDirection("TB");break;case 62:G.setDirection("BT");break;case 63:G.setDirection("RL");break;case 64:G.setDirection("LR");break;case 65:this.$={type1:$[U-2],type2:$[U],lineType:$[U-1]};break;case 66:this.$={type1:"none",type2:$[U],lineType:$[U-1]};break;case 67:this.$={type1:$[U-1],type2:"none",lineType:$[U]};break;case 68:this.$={type1:"none",type2:"none",lineType:$[U]};break;case 69:this.$=G.relationType.AGGREGATION;break;case 70:this.$=G.relationType.EXTENSION;break;case 71:this.$=G.relationType.COMPOSITION;break;case 72:this.$=G.relationType.DEPENDENCY;break;case 73:this.$=G.relationType.LOLLIPOP;break;case 74:this.$=G.lineType.LINE;break;case 75:this.$=G.lineType.DOTTED_LINE;break;case 76:case 82:this.$=$[U-2],G.setClickEvent($[U-1],$[U]);break;case 77:case 83:this.$=$[U-3],G.setClickEvent($[U-2],$[U-1]),G.setTooltip($[U-2],$[U]);break;case 78:this.$=$[U-2],G.setLink($[U-1],$[U]);break;case 79:this.$=$[U-3],G.setLink($[U-2],$[U-1],$[U]);break;case 80:this.$=$[U-3],G.setLink($[U-2],$[U-1]),G.setTooltip($[U-2],$[U]);break;case 81:this.$=$[U-4],G.setLink($[U-3],$[U-2],$[U]),G.setTooltip($[U-3],$[U-1]);break;case 84:this.$=$[U-3],G.setClickEvent($[U-2],$[U-1],$[U]);break;case 85:this.$=$[U-4],G.setClickEvent($[U-3],$[U-2],$[U-1]),G.setTooltip($[U-3],$[U]);break;case 86:this.$=$[U-3],G.setLink($[U-2],$[U]);break;case 87:this.$=$[U-4],G.setLink($[U-3],$[U-1],$[U]);break;case 88:this.$=$[U-4],G.setLink($[U-3],$[U-1]),G.setTooltip($[U-3],$[U]);break;case 89:this.$=$[U-5],G.setLink($[U-4],$[U-2],$[U]),G.setTooltip($[U-4],$[U-1]);break;case 90:this.$=$[U-2],G.setCssStyle($[U-1],$[U]);break;case 91:G.setCssClass($[U-1],$[U]);break;case 92:this.$=[$[U]];break;case 93:$[U-2].push($[U]),this.$=$[U-2];break;case 95:this.$=$[U-1]+$[U];break}},"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:e,35:r,37:a,38:22,42:i,43:23,46:s,47:n,49:o,50:h,52:u,54:d,55:f,58:p,60:g,61:y,62:m,63:x,73:v,74:T,76:I,80:B,81:_,84:w,99:D,101:S,102:b},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(C,[2,5],{8:[1,48]}),{8:[1,49]},t(k,[2,18],{22:[1,50]}),t(k,[2,20]),t(k,[2,21]),t(k,[2,22]),t(k,[2,23]),t(k,[2,24]),t(k,[2,25]),t(k,[2,26]),t(k,[2,27]),t(k,[2,28]),t(k,[2,29]),{34:[1,51]},{36:[1,52]},t(k,[2,32]),t(k,[2,48],{51:53,64:56,65:57,13:[1,54],22:[1,55],66:E,67:P,68:O,69:V,70:F,71:M,72:R}),{39:[1,65]},t(L,[2,39],{39:[1,67],44:[1,66]}),t(k,[2,50]),t(k,[2,51]),{16:68,58:p,84:w,99:D,101:S},{16:39,18:69,19:40,58:p,84:w,99:D,101:S,102:b},{16:39,18:70,19:40,58:p,84:w,99:D,101:S,102:b},{16:39,18:71,19:40,58:p,84:w,99:D,101:S,102:b},{58:[1,72]},{13:[1,73]},{16:39,18:74,19:40,58:p,84:w,99:D,101:S,102:b},{13:q,53:75},{56:77,58:[1,78]},t(k,[2,61]),t(k,[2,62]),t(k,[2,63]),t(k,[2,64]),t(N,[2,12],{16:39,19:40,18:80,17:[1,79],20:[1,81],58:p,84:w,99:D,101:S,102:b}),t(N,[2,14],{20:[1,82]}),{15:83,16:84,58:p,84:w,99:D,101:S},{16:39,18:85,19:40,58:p,84:w,99:D,101:S,102:b},t(j,[2,118]),t(j,[2,119]),t(j,[2,120]),t(j,[2,121]),t([1,8,9,12,13,20,22,39,41,44,66,67,68,69,70,71,72,77,79],[2,122]),t(C,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,18:21,38:22,43:23,16:39,19:40,5:86,33:e,35:r,37:a,42:i,46:s,47:n,49:o,50:h,52:u,54:d,55:f,58:p,60:g,61:y,62:m,63:x,73:v,74:T,76:I,80:B,81:_,84:w,99:D,101:S,102:b}),{5:87,10:5,16:39,18:21,19:40,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:e,35:r,37:a,38:22,42:i,43:23,46:s,47:n,49:o,50:h,52:u,54:d,55:f,58:p,60:g,61:y,62:m,63:x,73:v,74:T,76:I,80:B,81:_,84:w,99:D,101:S,102:b},t(k,[2,19]),t(k,[2,30]),t(k,[2,31]),{13:[1,89],16:39,18:88,19:40,58:p,84:w,99:D,101:S,102:b},{51:90,64:56,65:57,66:E,67:P,68:O,69:V,70:F,71:M,72:R},t(k,[2,49]),{65:91,71:M,72:R},t(it,[2,68],{64:92,66:E,67:P,68:O,69:V,70:F}),t(tt,[2,69]),t(tt,[2,70]),t(tt,[2,71]),t(tt,[2,72]),t(tt,[2,73]),t(pt,[2,74]),t(pt,[2,75]),{8:[1,94],24:95,40:93,43:23,46:s},{16:96,58:p,84:w,99:D,101:S},{45:97,49:K},{48:[1,99]},{13:[1,100]},{13:[1,101]},{77:[1,102],79:[1,103]},{22:nt,57:104,58:ht,80:st,82:105,83:106,84:rt,85:Z,86:at,87:Q,88:lt,89:z},{58:[1,116]},{13:q,53:117},t(k,[2,57]),t(k,[2,123]),{22:nt,57:118,58:ht,59:[1,119],80:st,82:105,83:106,84:rt,85:Z,86:at,87:Q,88:lt,89:z},t(Et,[2,59]),{16:39,18:120,19:40,58:p,84:w,99:D,101:S,102:b},t(N,[2,15]),t(N,[2,16]),t(N,[2,17]),{39:[2,35]},{15:122,16:84,17:[1,121],39:[2,9],58:p,84:w,99:D,101:S},t(X,[2,43],{11:123,12:[1,124]}),t(C,[2,7]),{9:[1,125]},t(vt,[2,52]),{16:39,18:126,19:40,58:p,84:w,99:D,101:S,102:b},{13:[1,128],16:39,18:127,19:40,58:p,84:w,99:D,101:S,102:b},t(it,[2,67],{64:129,66:E,67:P,68:O,69:V,70:F}),t(it,[2,66]),{41:[1,130]},{24:95,40:131,43:23,46:s},{8:[1,132],41:[2,36]},t(L,[2,40],{39:[1,133]}),{41:[1,134]},{41:[2,46],45:135,49:K},{16:39,18:136,19:40,58:p,84:w,99:D,101:S,102:b},t(k,[2,76],{13:[1,137]}),t(k,[2,78],{13:[1,139],75:[1,138]}),t(k,[2,82],{13:[1,140],78:[1,141]}),{13:[1,142]},t(k,[2,90],{59:Ct}),t(Yt,[2,92],{83:144,22:nt,58:ht,80:st,84:rt,85:Z,86:at,87:Q,88:lt,89:z}),t(Ut,[2,94]),t(Ut,[2,96]),t(Ut,[2,97]),t(Ut,[2,98]),t(Ut,[2,99]),t(Ut,[2,100]),t(Ut,[2,101]),t(Ut,[2,102]),t(Ut,[2,103]),t(Ut,[2,104]),t(k,[2,91]),t(k,[2,56]),t(k,[2,58],{59:Ct}),{58:[1,145]},t(N,[2,13]),{15:146,16:84,58:p,84:w,99:D,101:S},{39:[2,11]},t(X,[2,44]),{13:[1,147]},{1:[2,4]},t(vt,[2,54]),t(vt,[2,53]),{16:39,18:148,19:40,58:p,84:w,99:D,101:S,102:b},t(it,[2,65]),t(k,[2,33]),{41:[1,149]},{24:95,40:150,41:[2,37],43:23,46:s},{45:151,49:K},t(L,[2,41]),{41:[2,47]},t(k,[2,45]),t(k,[2,77]),t(k,[2,79]),t(k,[2,80],{75:[1,152]}),t(k,[2,83]),t(k,[2,84],{13:[1,153]}),t(k,[2,86],{13:[1,155],75:[1,154]}),{22:nt,58:ht,80:st,82:156,83:106,84:rt,85:Z,86:at,87:Q,88:lt,89:z},t(Ut,[2,95]),t(Et,[2,60]),{39:[2,10]},{14:[1,157]},t(vt,[2,55]),t(k,[2,34]),{41:[2,38]},{41:[1,158]},t(k,[2,81]),t(k,[2,85]),t(k,[2,87]),t(k,[2,88],{75:[1,159]}),t(Yt,[2,93],{83:144,22:nt,58:ht,80:st,84:rt,85:Z,86:at,87:Q,88:lt,89:z}),t(X,[2,8]),t(L,[2,42]),t(k,[2,89])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,35],122:[2,11],125:[2,4],135:[2,47],146:[2,10],150:[2,38]},parseError:l(function(ot,ct){if(ct.recoverable)this.trace(ot);else{var gt=new Error(ot);throw gt.hash=ct,gt}},"parseError"),parse:l(function(ot){var ct=this,gt=[0],G=[],Pt=[null],$=[],Qt=this.table,U="",wt=0,Bt=0,St=2,Gt=1,dt=$.slice.call(arguments,1),ce=Object.create(this.lexer),bt={yy:{}};for(var _r in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_r)&&(bt.yy[_r]=this.yy[_r]);ce.setInput(ot,bt.yy),bt.yy.lexer=ce,bt.yy.parser=this,typeof ce.yylloc>"u"&&(ce.yylloc={});var qr=ce.yylloc;$.push(qr);var ui=ce.options&&ce.options.ranges;typeof bt.yy.parseError=="function"?this.parseError=bt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Se(ie){gt.length=gt.length-2*ie,Pt.length=Pt.length-ie,$.length=$.length-ie}l(Se,"popStack");function nr(){var ie;return ie=G.pop()||ce.lex()||Gt,typeof ie!="number"&&(ie instanceof Array&&(G=ie,ie=G.pop()),ie=ct.symbols_[ie]||ie),ie}l(nr,"lex");for(var Kt,se,le,te,he={},be,Xt,Ht,Nt;;){if(se=gt[gt.length-1],this.defaultActions[se]?le=this.defaultActions[se]:((Kt===null||typeof Kt>"u")&&(Kt=nr()),le=Qt[se]&&Qt[se][Kt]),typeof le>"u"||!le.length||!le[0]){var we="";Nt=[];for(be in Qt[se])this.terminals_[be]&&be>St&&Nt.push("'"+this.terminals_[be]+"'");ce.showPosition?we="Parse error on line "+(wt+1)+`:
`+ce.showPosition()+`
Expecting `+Nt.join(", ")+", got '"+(this.terminals_[Kt]||Kt)+"'":we="Parse error on line "+(wt+1)+": Unexpected "+(Kt==Gt?"end of input":"'"+(this.terminals_[Kt]||Kt)+"'"),this.parseError(we,{text:ce.match,token:this.terminals_[Kt]||Kt,line:ce.yylineno,loc:qr,expected:Nt})}if(le[0]instanceof Array&&le.length>1)throw new Error("Parse Error: multiple actions possible at state: "+se+", token: "+Kt);switch(le[0]){case 1:gt.push(Kt),Pt.push(ce.yytext),$.push(ce.yylloc),gt.push(le[1]),Kt=null,Bt=ce.yyleng,U=ce.yytext,wt=ce.yylineno,qr=ce.yylloc;break;case 2:if(Xt=this.productions_[le[1]][1],he.$=Pt[Pt.length-Xt],he._$={first_line:$[$.length-(Xt||1)].first_line,last_line:$[$.length-1].last_line,first_column:$[$.length-(Xt||1)].first_column,last_column:$[$.length-1].last_column},ui&&(he._$.range=[$[$.length-(Xt||1)].range[0],$[$.length-1].range[1]]),te=this.performAction.apply(he,[U,Bt,wt,bt.yy,le[1],Pt,$].concat(dt)),typeof te<"u")return te;Xt&&(gt=gt.slice(0,-1*Xt*2),Pt=Pt.slice(0,-1*Xt),$=$.slice(0,-1*Xt)),gt.push(this.productions_[le[1]][0]),Pt.push(he.$),$.push(he._$),Ht=Qt[gt[gt.length-2]][gt[gt.length-1]],gt.push(Ht);break;case 3:return!0}}return!0},"parse")},qt=function(){var xt={EOF:1,parseError:l(function(ct,gt){if(this.yy.parser)this.yy.parser.parseError(ct,gt);else throw new Error(ct)},"parseError"),setInput:l(function(ot,ct){return this.yy=ct||this.yy||{},this._input=ot,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var ot=this._input[0];this.yytext+=ot,this.yyleng++,this.offset++,this.match+=ot,this.matched+=ot;var ct=ot.match(/(?:\r\n?|\n).*/g);return ct?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ot},"input"),unput:l(function(ot){var ct=ot.length,gt=ot.split(/(?:\r\n?|\n)/g);this._input=ot+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ct),this.offset-=ct;var G=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),gt.length-1&&(this.yylineno-=gt.length-1);var Pt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:gt?(gt.length===G.length?this.yylloc.first_column:0)+G[G.length-gt.length].length-gt[0].length:this.yylloc.first_column-ct},this.options.ranges&&(this.yylloc.range=[Pt[0],Pt[0]+this.yyleng-ct]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(ot){this.unput(this.match.slice(ot))},"less"),pastInput:l(function(){var ot=this.matched.substr(0,this.matched.length-this.match.length);return(ot.length>20?"...":"")+ot.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var ot=this.match;return ot.length<20&&(ot+=this._input.substr(0,20-ot.length)),(ot.substr(0,20)+(ot.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var ot=this.pastInput(),ct=new Array(ot.length+1).join("-");return ot+this.upcomingInput()+`
`+ct+"^"},"showPosition"),test_match:l(function(ot,ct){var gt,G,Pt;if(this.options.backtrack_lexer&&(Pt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Pt.yylloc.range=this.yylloc.range.slice(0))),G=ot[0].match(/(?:\r\n?|\n).*/g),G&&(this.yylineno+=G.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:G?G[G.length-1].length-G[G.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+ot[0].length},this.yytext+=ot[0],this.match+=ot[0],this.matches=ot,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(ot[0].length),this.matched+=ot[0],gt=this.performAction.call(this,this.yy,this,ct,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),gt)return gt;if(this._backtrack){for(var $ in Pt)this[$]=Pt[$];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var ot,ct,gt,G;this._more||(this.yytext="",this.match="");for(var Pt=this._currentRules(),$=0;$<Pt.length;$++)if(gt=this._input.match(this.rules[Pt[$]]),gt&&(!ct||gt[0].length>ct[0].length)){if(ct=gt,G=$,this.options.backtrack_lexer){if(ot=this.test_match(gt,Pt[$]),ot!==!1)return ot;if(this._backtrack){ct=!1;continue}else return!1}else if(!this.options.flex)break}return ct?(ot=this.test_match(ct,Pt[G]),ot!==!1?ot:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var ct=this.next();return ct||this.lex()},"lex"),begin:l(function(ct){this.conditionStack.push(ct)},"begin"),popState:l(function(){var ct=this.conditionStack.length-1;return ct>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(ct){return ct=this.conditionStack.length-1-Math.abs(ct||0),ct>=0?this.conditionStack[ct]:"INITIAL"},"topState"),pushState:l(function(ct){this.begin(ct)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:l(function(ct,gt,G,Pt){switch(G){case 0:return 60;case 1:return 61;case 2:return 62;case 3:return 63;case 4:break;case 5:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 8;case 14:break;case 15:return 7;case 16:return 7;case 17:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 19:this.popState();break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 77;case 22:this.popState();break;case 23:return 78;case 24:this.popState();break;case 25:return"STR";case 26:this.begin("string");break;case 27:return 80;case 28:return 55;case 29:return this.begin("namespace"),42;case 30:return this.popState(),8;case 31:break;case 32:return this.begin("namespace-body"),39;case 33:return this.popState(),41;case 34:return"EOF_IN_STRUCT";case 35:return 8;case 36:break;case 37:return"EDGE_STATE";case 38:return this.begin("class"),46;case 39:return this.popState(),8;case 40:break;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 43:return this.popState(),41;case 44:return"EOF_IN_STRUCT";case 45:return"EDGE_STATE";case 46:return"OPEN_IN_STRUCT";case 47:break;case 48:return"MEMBER";case 49:return 81;case 50:return 73;case 51:return 74;case 52:return 76;case 53:return 52;case 54:return 54;case 55:return 47;case 56:return 48;case 57:return 79;case 58:this.popState();break;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 61:this.popState();break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:return 75;case 65:return 75;case 66:return 75;case 67:return 75;case 68:return 67;case 69:return 67;case 70:return 69;case 71:return 69;case 72:return 68;case 73:return 66;case 74:return 70;case 75:return 71;case 76:return 72;case 77:return 22;case 78:return 44;case 79:return 99;case 80:return 17;case 81:return"PLUS";case 82:return 85;case 83:return 59;case 84:return 88;case 85:return 88;case 86:return 89;case 87:return"EQUALS";case 88:return"EQUALS";case 89:return 58;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 84;case 94:return 101;case 95:return 87;case 96:return 87;case 97:return 9}},"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};return xt}();ae.lexer=qt;function ut(){this.yy={}}return l(ut,"Parser"),ut.prototype=ae,ae.Parser=ut,new ut}();qc.parser=qc;var bm=qc,Hd=["#","+","~","-",""],vs,Gd=(vs=class{constructor(e,r){this.memberType=r,this.visibility="",this.classifier="",this.text="";const a=me(e,H());this.parseMember(a)}getDisplayDetails(){let e=this.visibility+ea(this.id);this.memberType==="method"&&(e+=`(${ea(this.parameters.trim())})`,this.returnType&&(e+=" : "+ea(this.returnType))),e=e.trim();const r=this.parseClassifier();return{displayText:e,cssStyle:r}}parseMember(e){let r="";if(this.memberType==="method"){const s=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(e);if(s){const n=s[1]?s[1].trim():"";if(Hd.includes(n)&&(this.visibility=n),this.id=s[2],this.parameters=s[3]?s[3].trim():"",r=s[4]?s[4].trim():"",this.returnType=s[5]?s[5].trim():"",r===""){const o=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(o)&&(r=o,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{const i=e.length,s=e.substring(0,1),n=e.substring(i-1);Hd.includes(s)&&(this.visibility=s),/[$*]/.exec(n)&&(r=n),this.id=e.substring(this.visibility===""?0:1,r===""?i:i-1)}this.classifier=r,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();const a=`${this.visibility?"\\"+this.visibility:""}${ea(this.id)}${this.memberType==="method"?`(${ea(this.parameters)})${this.returnType?" : "+ea(this.returnType):""}`:""}`;this.text=a.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}},l(vs,"ClassMember"),vs),Cl="classId-",Sl=[],ke=new Map,Ud=new Map,Cn=[],Fs=[],jd=0,Zr=new Map,Yc=0,Sn=[],ba=l(t=>mt.sanitizeText(t,H()),"sanitizeText"),ka=l(function(t){const e=mt.sanitizeText(t,H());let r="",a=e;if(e.indexOf("~")>0){const i=e.split("~");a=ba(i[0]),r=ba(i[1])}return{className:a,type:r}},"splitClassNameAndType"),u8=l(function(t,e){const r=mt.sanitizeText(t,H());e&&(e=ba(e));const{className:a}=ka(r);ke.get(a).label=e,ke.get(a).text=`${e}${ke.get(a).type?`<${ke.get(a).type}>`:""}`},"setClassLabel"),Ia=l(function(t){const e=mt.sanitizeText(t,H()),{className:r,type:a}=ka(e);if(ke.has(r))return;const i=mt.sanitizeText(r,H());ke.set(i,{id:i,type:a,label:i,text:`${i}${a?`&lt;${a}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:Cl+i+"-"+jd}),jd++},"addClass"),Xd=l(function(t,e){const r={id:`interface${Fs.length}`,label:t,classId:e};Fs.push(r)},"addInterface"),km=l(function(t){const e=mt.sanitizeText(t,H());if(ke.has(e))return ke.get(e).domId;throw new Error("Class not found: "+e)},"lookUpDomId"),d8=l(function(){Sl=[],ke=new Map,Cn=[],Fs=[],Sn=[],Sn.push(Tm),Zr=new Map,Yc=0,Cu="TB",Ye()},"clear"),p8=l(function(t){return ke.get(t)},"getClass"),f8=l(function(){return ke},"getClasses"),g8=l(function(){return Sl},"getRelations"),y8=l(function(){return Cn},"getNotes"),m8=l(function(t){A.debug("Adding relation: "+JSON.stringify(t));const e=[Fi.LOLLIPOP,Fi.AGGREGATION,Fi.COMPOSITION,Fi.DEPENDENCY,Fi.EXTENSION];t.relation.type1===Fi.LOLLIPOP&&!e.includes(t.relation.type2)?(Ia(t.id2),Xd(t.id1,t.id2),t.id1=`interface${Fs.length-1}`):t.relation.type2===Fi.LOLLIPOP&&!e.includes(t.relation.type1)?(Ia(t.id1),Xd(t.id2,t.id1),t.id2=`interface${Fs.length-1}`):(Ia(t.id1),Ia(t.id2)),t.id1=ka(t.id1).className,t.id2=ka(t.id2).className,t.relationTitle1=mt.sanitizeText(t.relationTitle1.trim(),H()),t.relationTitle2=mt.sanitizeText(t.relationTitle2.trim(),H()),Sl.push(t)},"addRelation"),x8=l(function(t,e){const r=ka(t).className;ke.get(r).annotations.push(e)},"addAnnotation"),vm=l(function(t,e){Ia(t);const r=ka(t).className,a=ke.get(r);if(typeof e=="string"){const i=e.trim();i.startsWith("<<")&&i.endsWith(">>")?a.annotations.push(ba(i.substring(2,i.length-2))):i.indexOf(")")>0?a.methods.push(new Gd(i,"method")):i&&a.members.push(new Gd(i,"attribute"))}},"addMember"),b8=l(function(t,e){Array.isArray(e)&&(e.reverse(),e.forEach(r=>vm(t,r)))},"addMembers"),k8=l(function(t,e){const r={id:`note${Cn.length}`,class:e,text:t};Cn.push(r)},"addNote"),v8=l(function(t){return t.startsWith(":")&&(t=t.substring(1)),ba(t.trim())},"cleanupLabel"),_u=l(function(t,e){t.split(",").forEach(function(r){let a=r;/\d/.exec(r[0])&&(a=Cl+a);const i=ke.get(a);i&&(i.cssClasses+=" "+e)})},"setCssClass"),T8=l(function(t,e){for(const r of t){let a=Ud.get(r);a===void 0&&(a={id:r,styles:[],textStyles:[]},Ud.set(r,a)),e&&e.forEach(function(i){if(/color/.exec(i)){const s=i.replace("fill","bgFill");a.textStyles.push(s)}a.styles.push(i)}),ke.forEach(i=>{i.cssClasses.includes(r)&&i.styles.push(...e.flatMap(s=>s.split(",")))})}},"defineClass"),_8=l(function(t,e){t.split(",").forEach(function(r){e!==void 0&&(ke.get(r).tooltip=ba(e))})},"setTooltip"),C8=l(function(t,e){return e&&Zr.has(e)?Zr.get(e).classes.get(t).tooltip:ke.get(t).tooltip},"getTooltip"),S8=l(function(t,e,r){const a=H();t.split(",").forEach(function(i){let s=i;/\d/.exec(i[0])&&(s=Cl+s);const n=ke.get(s);n&&(n.link=re.formatUrl(e,a),a.securityLevel==="sandbox"?n.linkTarget="_top":typeof r=="string"?n.linkTarget=ba(r):n.linkTarget="_blank")}),_u(t,"clickable")},"setLink"),w8=l(function(t,e,r){t.split(",").forEach(function(a){E8(a,e,r),ke.get(a).haveCallback=!0}),_u(t,"clickable")},"setClickEvent"),E8=l(function(t,e,r){const a=mt.sanitizeText(t,H());if(H().securityLevel!=="loose"||e===void 0)return;const s=a;if(ke.has(s)){const n=km(s);let o=[];if(typeof r=="string"){o=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let h=0;h<o.length;h++){let u=o[h].trim();u.startsWith('"')&&u.endsWith('"')&&(u=u.substr(1,u.length-2)),o[h]=u}}o.length===0&&o.push(n),Sn.push(function(){const h=document.querySelector(`[id="${n}"]`);h!==null&&h.addEventListener("click",function(){re.runFunc(e,...o)},!1)})}},"setClickFunc"),A8=l(function(t){Sn.forEach(function(e){e(t)})},"bindFunctions"),L8={LINE:0,DOTTED_LINE:1},Fi={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},Tm=l(function(t){let e=yt(".mermaidTooltip");(e._groups||e)[0][0]===null&&(e=yt("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),yt(t).select("svg").selectAll("g.node").on("mouseover",function(){const i=yt(this);if(i.attr("title")===null)return;const n=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(i.attr("title")).style("left",window.scrollX+n.left+(n.right-n.left)/2+"px").style("top",window.scrollY+n.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),i.classed("hover",!0)}).on("mouseout",function(){e.transition().duration(500).style("opacity",0),yt(this).classed("hover",!1)})},"setupToolTips");Sn.push(Tm);var Cu="TB",_m=l(()=>Cu,"getDirection"),B8=l(t=>{Cu=t},"setDirection"),D8=l(function(t){Zr.has(t)||(Zr.set(t,{id:t,classes:new Map,children:{},domId:Cl+t+"-"+Yc}),Yc++)},"addNamespace"),R8=l(function(t){return Zr.get(t)},"getNamespace"),I8=l(function(){return Zr},"getNamespaces"),N8=l(function(t,e){if(Zr.has(t))for(const r of e){const{className:a}=ka(r);ke.get(a).parent=t,Zr.get(t).classes.set(a,ke.get(a))}},"addClassesToNamespace"),F8=l(function(t,e){const r=ke.get(t);if(!(!e||!r))for(const a of e)a.includes(",")?r.styles.push(...a.split(",")):r.styles.push(a)},"setCssStyle");function Hc(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}l(Hc,"getArrowMarker");var P8=l(()=>{var i;const t=[],e=[],r=H();for(const s of Zr.keys()){const n=Zr.get(s);if(n){const o={id:n.id,label:n.id,isGroup:!0,padding:r.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:r.look};t.push(o)}}for(const s of ke.keys()){const n=ke.get(s);if(n){const o=n;o.parentId=n.parent,o.look=r.look,t.push(o)}}let a=0;for(const s of Cn){a++;const n={id:s.id,label:s.text,isGroup:!1,shape:"note",padding:r.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${r.themeVariables.noteBkgColor}`,`stroke: ${r.themeVariables.noteBorderColor}`],look:r.look};t.push(n);const o=((i=ke.get(s.class))==null?void 0:i.id)??"";if(o){const h={id:`edgeNote${a}`,start:s.id,end:o,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:r.look};e.push(h)}}for(const s of Fs){const n={id:s.id,label:s.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:r.look};t.push(n)}a=0;for(const s of Sl){a++;const n={id:Hp(s.id1,s.id2,{prefix:"id",counter:a}),start:s.id1,end:s.id2,type:"normal",label:s.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:Hc(s.relation.type1),arrowTypeEnd:Hc(s.relation.type2),startLabelRight:s.relationTitle1==="none"?"":s.relationTitle1,endLabelLeft:s.relationTitle2==="none"?"":s.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:s.style||"",pattern:s.relation.lineType==1?"dashed":"solid",look:r.look};e.push(n)}return{nodes:t,edges:e,other:{},config:r,direction:_m()}},"getData"),zo={setAccTitle:He,getAccTitle:Ke,getAccDescription:Ze,setAccDescription:Qe,getConfig:l(()=>H().class,"getConfig"),addClass:Ia,bindFunctions:A8,clear:d8,getClass:p8,getClasses:f8,getNotes:y8,addAnnotation:x8,addNote:k8,getRelations:g8,addRelation:m8,getDirection:_m,setDirection:B8,addMember:vm,addMembers:b8,cleanupLabel:v8,lineType:L8,relationType:Fi,setClickEvent:w8,setCssClass:_u,defineClass:T8,setLink:S8,getTooltip:C8,setTooltip:_8,lookUpDomId:km,setDiagramTitle:dr,getDiagramTitle:Je,setClassLabel:u8,addNamespace:D8,addClassesToNamespace:N8,getNamespace:R8,getNamespaces:I8,setCssStyle:F8,getData:P8},O8=l(t=>`g.classGroup text {
  fill: ${t.nodeBorder||t.classText};
  stroke: none;
  font-family: ${t.fontFamily};
  font-size: 10px;

  .title {
    font-weight: bolder;
  }

}

.nodeLabel, .edgeLabel {
  color: ${t.classText};
}
.edgeLabel .label rect {
  fill: ${t.mainBkg};
}
.label text {
  fill: ${t.classText};
}

.labelBkg {
  background: ${t.mainBkg};
}
.edgeLabel .label span {
  background: ${t.mainBkg};
}

.classTitle {
  font-weight: bolder;
}
.node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }


.divider {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

g.clickable {
  cursor: pointer;
}

g.classGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.classGroup line {
  stroke: ${t.nodeBorder};
  stroke-width: 1;
}

.classLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.classLabel .label {
  fill: ${t.nodeBorder};
  font-size: 10px;
}

.relation {
  stroke: ${t.lineColor};
  stroke-width: 1;
  fill: none;
}

.dashed-line{
  stroke-dasharray: 3;
}

.dotted-line{
  stroke-dasharray: 1 2;
}

#compositionStart, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#compositionEnd, .composition {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#dependencyStart, .dependency {
  fill: ${t.lineColor} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionStart, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#extensionEnd, .extension {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationStart, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#aggregationEnd, .aggregation {
  fill: transparent !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopStart, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

#lollipopEnd, .lollipop {
  fill: ${t.mainBkg} !important;
  stroke: ${t.lineColor} !important;
  stroke-width: 1;
}

.edgeTerminals {
  font-size: 11px;
  line-height: initial;
}

.classTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,"getStyles"),Cm=O8,M8=l((t,e="TB")=>{if(!t.doc)return e;let r=e;for(const a of t.doc)a.stmt==="dir"&&(r=a.value);return r},"getDir"),$8=l(function(t,e){return e.db.getClasses()},"getClasses"),V8=l(async function(t,e,r,a){A.info("REF0:"),A.info("Drawing class diagram (v3)",e);const{securityLevel:i,state:s,layout:n}=H(),o=a.db.getData(),h=Wh(e,i);o.type=a.type,o.layoutAlgorithm=Ag(n),o.nodeSpacing=(s==null?void 0:s.nodeSpacing)||50,o.rankSpacing=(s==null?void 0:s.rankSpacing)||50,o.markers=["aggregation","extension","composition","dependency","lollipop"],o.diagramId=e,await Nh(o,h);const u=8;re.insertTitle(h,"classDiagramTitleText",(s==null?void 0:s.titleTopMargin)??25,a.db.getDiagramTitle()),qh(h,u,"classDiagram",(s==null?void 0:s.useMaxWidth)??!0)},"draw"),Sm={getClasses:$8,draw:V8,getDir:M8},z8={parser:bm,db:zo,renderer:Sm,styles:Cm,init:l(t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,zo.clear()},"init")};const W8=Object.freeze(Object.defineProperty({__proto__:null,diagram:z8},Symbol.toStringTag,{value:"Module"}));var q8={parser:bm,db:zo,renderer:Sm,styles:Cm,init:l(t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute,zo.clear()},"init")};const Y8=Object.freeze(Object.defineProperty({__proto__:null,diagram:q8},Symbol.toStringTag,{value:"Module"}));var Gc=function(){var t=l(function(R,L,q,N){for(q=q||{},N=R.length;N--;q[R[N]]=L);return q},"o"),e=[1,2],r=[1,3],a=[1,4],i=[2,4],s=[1,9],n=[1,11],o=[1,16],h=[1,17],u=[1,18],d=[1,19],f=[1,32],p=[1,20],g=[1,21],y=[1,22],m=[1,23],x=[1,24],v=[1,26],T=[1,27],I=[1,28],B=[1,29],_=[1,30],w=[1,31],D=[1,34],S=[1,35],b=[1,36],C=[1,37],k=[1,33],E=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],P=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],O=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],V={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"-->":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,classDef:38,CLASSDEF_ID:39,CLASSDEF_STYLEOPTS:40,DEFAULT:41,style:42,STYLE_IDS:43,STYLEDEF_STYLEOPTS:44,class:45,CLASSENTITY_IDS:46,STYLECLASS:47,direction_tb:48,direction_bt:49,direction_rl:50,direction_lr:51,eol:52,";":53,EDGE_STATE:54,STYLE_SEPARATOR:55,left_of:56,right_of:57,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"-->",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"classDef",39:"CLASSDEF_ID",40:"CLASSDEF_STYLEOPTS",41:"DEFAULT",42:"style",43:"STYLE_IDS",44:"STYLEDEF_STYLEOPTS",45:"class",46:"CLASSENTITY_IDS",47:"STYLECLASS",48:"direction_tb",49:"direction_bt",50:"direction_rl",51:"direction_lr",53:";",54:"EDGE_STATE",55:"STYLE_SEPARATOR",56:"left_of",57:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[52,1],[52,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:l(function(L,q,N,j,it,tt,pt){var K=tt.length-1;switch(it){case 3:return j.setRootDoc(tt[K]),tt[K];case 4:this.$=[];break;case 5:tt[K]!="nl"&&(tt[K-1].push(tt[K]),this.$=tt[K-1]);break;case 6:case 7:this.$=tt[K];break;case 8:this.$="nl";break;case 12:this.$=tt[K];break;case 13:const rt=tt[K-1];rt.description=j.trimColon(tt[K]),this.$=rt;break;case 14:this.$={stmt:"relation",state1:tt[K-2],state2:tt[K]};break;case 15:const Z=j.trimColon(tt[K]);this.$={stmt:"relation",state1:tt[K-3],state2:tt[K-1],description:Z};break;case 19:this.$={stmt:"state",id:tt[K-3],type:"default",description:"",doc:tt[K-1]};break;case 20:var nt=tt[K],ht=tt[K-2].trim();if(tt[K].match(":")){var st=tt[K].split(":");nt=st[0],ht=[ht,st[1]]}this.$={stmt:"state",id:nt,type:"default",description:ht};break;case 21:this.$={stmt:"state",id:tt[K-3],type:"default",description:tt[K-5],doc:tt[K-1]};break;case 22:this.$={stmt:"state",id:tt[K],type:"fork"};break;case 23:this.$={stmt:"state",id:tt[K],type:"join"};break;case 24:this.$={stmt:"state",id:tt[K],type:"choice"};break;case 25:this.$={stmt:"state",id:j.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:tt[K-1].trim(),note:{position:tt[K-2].trim(),text:tt[K].trim()}};break;case 29:this.$=tt[K].trim(),j.setAccTitle(this.$);break;case 30:case 31:this.$=tt[K].trim(),j.setAccDescription(this.$);break;case 32:case 33:this.$={stmt:"classDef",id:tt[K-1].trim(),classes:tt[K].trim()};break;case 34:this.$={stmt:"style",id:tt[K-1].trim(),styleClass:tt[K].trim()};break;case 35:this.$={stmt:"applyClass",id:tt[K-1].trim(),styleClass:tt[K].trim()};break;case 36:j.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 37:j.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 38:j.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 39:j.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 42:case 43:this.$={stmt:"state",id:tt[K].trim(),type:"default",description:""};break;case 44:this.$={stmt:"state",id:tt[K-2].trim(),classes:[tt[K].trim()],type:"default",description:""};break;case 45:this.$={stmt:"state",id:tt[K-2].trim(),classes:[tt[K].trim()],type:"default",description:""};break}},"anonymous"),table:[{3:1,4:e,5:r,6:a},{1:[3]},{3:5,4:e,5:r,6:a},{3:6,4:e,5:r,6:a},t([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,42,45,48,49,50,51,54],i,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:s,5:n,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:h,19:u,22:d,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:v,35:T,37:I,38:B,42:_,45:w,48:D,49:S,50:b,51:C,54:k},t(E,[2,5]),{9:38,10:12,11:13,12:14,13:15,16:o,17:h,19:u,22:d,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:v,35:T,37:I,38:B,42:_,45:w,48:D,49:S,50:b,51:C,54:k},t(E,[2,7]),t(E,[2,8]),t(E,[2,9]),t(E,[2,10]),t(E,[2,11]),t(E,[2,12],{14:[1,39],15:[1,40]}),t(E,[2,16]),{18:[1,41]},t(E,[2,18],{20:[1,42]}),{23:[1,43]},t(E,[2,22]),t(E,[2,23]),t(E,[2,24]),t(E,[2,25]),{30:44,31:[1,45],56:[1,46],57:[1,47]},t(E,[2,28]),{34:[1,48]},{36:[1,49]},t(E,[2,31]),{39:[1,50],41:[1,51]},{43:[1,52]},{46:[1,53]},t(P,[2,42],{55:[1,54]}),t(P,[2,43],{55:[1,55]}),t(E,[2,36]),t(E,[2,37]),t(E,[2,38]),t(E,[2,39]),t(E,[2,6]),t(E,[2,13]),{13:56,24:f,54:k},t(E,[2,17]),t(O,i,{7:57}),{24:[1,58]},{24:[1,59]},{23:[1,60]},{24:[2,46]},{24:[2,47]},t(E,[2,29]),t(E,[2,30]),{40:[1,61]},{40:[1,62]},{44:[1,63]},{47:[1,64]},{24:[1,65]},{24:[1,66]},t(E,[2,14],{14:[1,67]}),{4:s,5:n,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:h,19:u,21:[1,68],22:d,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:v,35:T,37:I,38:B,42:_,45:w,48:D,49:S,50:b,51:C,54:k},t(E,[2,20],{20:[1,69]}),{31:[1,70]},{24:[1,71]},t(E,[2,32]),t(E,[2,33]),t(E,[2,34]),t(E,[2,35]),t(P,[2,44]),t(P,[2,45]),t(E,[2,15]),t(E,[2,19]),t(O,i,{7:72}),t(E,[2,26]),t(E,[2,27]),{4:s,5:n,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:h,19:u,21:[1,73],22:d,24:f,25:p,26:g,27:y,28:m,29:x,32:25,33:v,35:T,37:I,38:B,42:_,45:w,48:D,49:S,50:b,51:C,54:k},t(E,[2,21])],defaultActions:{5:[2,1],6:[2,2],46:[2,46],47:[2,47]},parseError:l(function(L,q){if(q.recoverable)this.trace(L);else{var N=new Error(L);throw N.hash=q,N}},"parseError"),parse:l(function(L){var q=this,N=[0],j=[],it=[null],tt=[],pt=this.table,K="",nt=0,ht=0,st=2,rt=1,Z=tt.slice.call(arguments,1),at=Object.create(this.lexer),Q={yy:{}};for(var lt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,lt)&&(Q.yy[lt]=this.yy[lt]);at.setInput(L,Q.yy),Q.yy.lexer=at,Q.yy.parser=this,typeof at.yylloc>"u"&&(at.yylloc={});var z=at.yylloc;tt.push(z);var Et=at.options&&at.options.ranges;typeof Q.yy.parseError=="function"?this.parseError=Q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function X(G){N.length=N.length-2*G,it.length=it.length-G,tt.length=tt.length-G}l(X,"popStack");function vt(){var G;return G=j.pop()||at.lex()||rt,typeof G!="number"&&(G instanceof Array&&(j=G,G=j.pop()),G=q.symbols_[G]||G),G}l(vt,"lex");for(var Ct,Yt,Ut,ae,qt={},ut,xt,ot,ct;;){if(Yt=N[N.length-1],this.defaultActions[Yt]?Ut=this.defaultActions[Yt]:((Ct===null||typeof Ct>"u")&&(Ct=vt()),Ut=pt[Yt]&&pt[Yt][Ct]),typeof Ut>"u"||!Ut.length||!Ut[0]){var gt="";ct=[];for(ut in pt[Yt])this.terminals_[ut]&&ut>st&&ct.push("'"+this.terminals_[ut]+"'");at.showPosition?gt="Parse error on line "+(nt+1)+`:
`+at.showPosition()+`
Expecting `+ct.join(", ")+", got '"+(this.terminals_[Ct]||Ct)+"'":gt="Parse error on line "+(nt+1)+": Unexpected "+(Ct==rt?"end of input":"'"+(this.terminals_[Ct]||Ct)+"'"),this.parseError(gt,{text:at.match,token:this.terminals_[Ct]||Ct,line:at.yylineno,loc:z,expected:ct})}if(Ut[0]instanceof Array&&Ut.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Yt+", token: "+Ct);switch(Ut[0]){case 1:N.push(Ct),it.push(at.yytext),tt.push(at.yylloc),N.push(Ut[1]),Ct=null,ht=at.yyleng,K=at.yytext,nt=at.yylineno,z=at.yylloc;break;case 2:if(xt=this.productions_[Ut[1]][1],qt.$=it[it.length-xt],qt._$={first_line:tt[tt.length-(xt||1)].first_line,last_line:tt[tt.length-1].last_line,first_column:tt[tt.length-(xt||1)].first_column,last_column:tt[tt.length-1].last_column},Et&&(qt._$.range=[tt[tt.length-(xt||1)].range[0],tt[tt.length-1].range[1]]),ae=this.performAction.apply(qt,[K,ht,nt,Q.yy,Ut[1],it,tt].concat(Z)),typeof ae<"u")return ae;xt&&(N=N.slice(0,-1*xt*2),it=it.slice(0,-1*xt),tt=tt.slice(0,-1*xt)),N.push(this.productions_[Ut[1]][0]),it.push(qt.$),tt.push(qt._$),ot=pt[N[N.length-2]][N[N.length-1]],N.push(ot);break;case 3:return!0}}return!0},"parse")},F=function(){var R={EOF:1,parseError:l(function(q,N){if(this.yy.parser)this.yy.parser.parseError(q,N);else throw new Error(q)},"parseError"),setInput:l(function(L,q){return this.yy=q||this.yy||{},this._input=L,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var L=this._input[0];this.yytext+=L,this.yyleng++,this.offset++,this.match+=L,this.matched+=L;var q=L.match(/(?:\r\n?|\n).*/g);return q?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),L},"input"),unput:l(function(L){var q=L.length,N=L.split(/(?:\r\n?|\n)/g);this._input=L+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-q),this.offset-=q;var j=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),N.length-1&&(this.yylineno-=N.length-1);var it=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:N?(N.length===j.length?this.yylloc.first_column:0)+j[j.length-N.length].length-N[0].length:this.yylloc.first_column-q},this.options.ranges&&(this.yylloc.range=[it[0],it[0]+this.yyleng-q]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(L){this.unput(this.match.slice(L))},"less"),pastInput:l(function(){var L=this.matched.substr(0,this.matched.length-this.match.length);return(L.length>20?"...":"")+L.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var L=this.match;return L.length<20&&(L+=this._input.substr(0,20-L.length)),(L.substr(0,20)+(L.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var L=this.pastInput(),q=new Array(L.length+1).join("-");return L+this.upcomingInput()+`
`+q+"^"},"showPosition"),test_match:l(function(L,q){var N,j,it;if(this.options.backtrack_lexer&&(it={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(it.yylloc.range=this.yylloc.range.slice(0))),j=L[0].match(/(?:\r\n?|\n).*/g),j&&(this.yylineno+=j.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:j?j[j.length-1].length-j[j.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+L[0].length},this.yytext+=L[0],this.match+=L[0],this.matches=L,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(L[0].length),this.matched+=L[0],N=this.performAction.call(this,this.yy,this,q,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),N)return N;if(this._backtrack){for(var tt in it)this[tt]=it[tt];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var L,q,N,j;this._more||(this.yytext="",this.match="");for(var it=this._currentRules(),tt=0;tt<it.length;tt++)if(N=this._input.match(this.rules[it[tt]]),N&&(!q||N[0].length>q[0].length)){if(q=N,j=tt,this.options.backtrack_lexer){if(L=this.test_match(N,it[tt]),L!==!1)return L;if(this._backtrack){q=!1;continue}else return!1}else if(!this.options.flex)break}return q?(L=this.test_match(q,it[j]),L!==!1?L:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var q=this.next();return q||this.lex()},"lex"),begin:l(function(q){this.conditionStack.push(q)},"begin"),popState:l(function(){var q=this.conditionStack.length-1;return q>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(q){return q=this.conditionStack.length-1-Math.abs(q||0),q>=0?this.conditionStack[q]:"INITIAL"},"topState"),pushState:l(function(q){this.begin(q)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(q,N,j,it){switch(j){case 0:return 41;case 1:return 48;case 2:return 49;case 3:return 50;case 4:return 51;case 5:break;case 6:break;case 7:return 5;case 8:break;case 9:break;case 10:break;case 11:break;case 12:return this.pushState("SCALE"),17;case 13:return 18;case 14:this.popState();break;case 15:return this.begin("acc_title"),33;case 16:return this.popState(),"acc_title_value";case 17:return this.begin("acc_descr"),35;case 18:return this.popState(),"acc_descr_value";case 19:this.begin("acc_descr_multiline");break;case 20:this.popState();break;case 21:return"acc_descr_multiline_value";case 22:return this.pushState("CLASSDEF"),38;case 23:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 24:return this.popState(),this.pushState("CLASSDEFID"),39;case 25:return this.popState(),40;case 26:return this.pushState("CLASS"),45;case 27:return this.popState(),this.pushState("CLASS_STYLE"),46;case 28:return this.popState(),47;case 29:return this.pushState("STYLE"),42;case 30:return this.popState(),this.pushState("STYLEDEF_STYLES"),43;case 31:return this.popState(),44;case 32:return this.pushState("SCALE"),17;case 33:return 18;case 34:this.popState();break;case 35:this.pushState("STATE");break;case 36:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),25;case 37:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),26;case 38:return this.popState(),N.yytext=N.yytext.slice(0,-10).trim(),27;case 39:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),25;case 40:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),26;case 41:return this.popState(),N.yytext=N.yytext.slice(0,-10).trim(),27;case 42:return 48;case 43:return 49;case 44:return 50;case 45:return 51;case 46:this.pushState("STATE_STRING");break;case 47:return this.pushState("STATE_ID"),"AS";case 48:return this.popState(),"ID";case 49:this.popState();break;case 50:return"STATE_DESCR";case 51:return 19;case 52:this.popState();break;case 53:return this.popState(),this.pushState("struct"),20;case 54:break;case 55:return this.popState(),21;case 56:break;case 57:return this.begin("NOTE"),29;case 58:return this.popState(),this.pushState("NOTE_ID"),56;case 59:return this.popState(),this.pushState("NOTE_ID"),57;case 60:this.popState(),this.pushState("FLOATING_NOTE");break;case 61:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 62:break;case 63:return"NOTE_TEXT";case 64:return this.popState(),"ID";case 65:return this.popState(),this.pushState("NOTE_TEXT"),24;case 66:return this.popState(),N.yytext=N.yytext.substr(2).trim(),31;case 67:return this.popState(),N.yytext=N.yytext.slice(0,-8).trim(),31;case 68:return 6;case 69:return 6;case 70:return 16;case 71:return 54;case 72:return 24;case 73:return N.yytext=N.yytext.trim(),14;case 74:return 15;case 75:return 28;case 76:return 55;case 77:return 5;case 78:return"INVALID"}},"anonymous"),rules:[/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[9,10],inclusive:!1},struct:{rules:[9,10,22,26,29,35,42,43,44,45,54,55,56,57,71,72,73,74,75],inclusive:!1},FLOATING_NOTE_ID:{rules:[64],inclusive:!1},FLOATING_NOTE:{rules:[61,62,63],inclusive:!1},NOTE_TEXT:{rules:[66,67],inclusive:!1},NOTE_ID:{rules:[65],inclusive:!1},NOTE:{rules:[58,59,60],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[31],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[30],inclusive:!1},CLASS_STYLE:{rules:[28],inclusive:!1},CLASS:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[25],inclusive:!1},CLASSDEF:{rules:[23,24],inclusive:!1},acc_descr_multiline:{rules:[20,21],inclusive:!1},acc_descr:{rules:[18],inclusive:!1},acc_title:{rules:[16],inclusive:!1},SCALE:{rules:[13,14,33,34],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[48],inclusive:!1},STATE_STRING:{rules:[49,50],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[9,10,36,37,38,39,40,41,46,47,51,52,53],inclusive:!1},ID:{rules:[9,10],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,10,11,12,15,17,19,22,26,29,32,35,53,57,68,69,70,71,72,73,74,76,77,78],inclusive:!0}}};return R}();V.lexer=F;function M(){this.yy={}}return l(M,"Parser"),M.prototype=V,V.Parser=M,new M}();Gc.parser=Gc;var wm=Gc,H8="LR",Em="TB",Wo="state",Su="relation",G8="classDef",U8="style",j8="applyClass",Gn="default",Am="divider",Lm="fill:none",Bm="fill: #333",Dm="c",Rm="text",Im="normal",Wl="rect",ql="rectWithTitle",X8="stateStart",K8="stateEnd",Kd="divider",Qd="roundedWithTitle",Q8="note",Z8="noteGroup",Un="statediagram",J8="state",tA=`${Un}-${J8}`,Nm="transition",eA="note",rA="note-edge",iA=`${Nm} ${rA}`,aA=`${Un}-${eA}`,sA="cluster",nA=`${Un}-${sA}`,oA="cluster-alt",lA=`${Un}-${oA}`,Fm="parent",Pm="note",cA="state",wu="----",hA=`${wu}${Pm}`,Zd=`${wu}${Fm}`,Om=l((t,e=Em)=>{if(!t.doc)return e;let r=e;for(const a of t.doc)a.stmt==="dir"&&(r=a.value);return r},"getDir"),uA=l(function(t,e){return e.db.extract(e.db.getRootDocV2()),e.db.getClasses()},"getClasses"),dA=l(async function(t,e,r,a){A.info("REF0:"),A.info("Drawing state diagram (v2)",e);const{securityLevel:i,state:s,layout:n}=H();a.db.extract(a.db.getRootDocV2());const o=a.db.getData(),h=Wh(e,i);o.type=a.type,o.layoutAlgorithm=n,o.nodeSpacing=(s==null?void 0:s.nodeSpacing)||50,o.rankSpacing=(s==null?void 0:s.rankSpacing)||50,o.markers=["barb"],o.diagramId=e,await Nh(o,h);const u=8;re.insertTitle(h,"statediagramTitleText",(s==null?void 0:s.titleTopMargin)??25,a.db.getDiagramTitle()),qh(h,u,Un,(s==null?void 0:s.useMaxWidth)??!0)},"draw"),pA={getClasses:uA,draw:dA,getDir:Om},co=new Map,Oi=0;function ho(t="",e=0,r="",a=wu){const i=r!==null&&r.length>0?`${a}${r}`:"";return`${cA}-${t}${i}-${e}`}l(ho,"stateDomId");var fA=l((t,e,r,a,i,s,n,o)=>{A.trace("items",e),e.forEach(h=>{switch(h.stmt){case Wo:rn(t,h,r,a,i,s,n,o);break;case Gn:rn(t,h,r,a,i,s,n,o);break;case Su:{rn(t,h.state1,r,a,i,s,n,o),rn(t,h.state2,r,a,i,s,n,o);const u={id:"edge"+Oi,start:h.state1.id,end:h.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:Lm,labelStyle:"",label:mt.sanitizeText(h.description,H()),arrowheadStyle:Bm,labelpos:Dm,labelType:Rm,thickness:Im,classes:Nm,look:n};i.push(u),Oi++}break}})},"setupDoc"),Jd=l((t,e=Em)=>{let r=e;if(t.doc)for(const a of t.doc)a.stmt==="dir"&&(r=a.value);return r},"getDir");function en(t,e,r){if(!e.id||e.id==="</join></fork>"||e.id==="</choice>")return;e.cssClasses&&(Array.isArray(e.cssCompiledStyles)||(e.cssCompiledStyles=[]),e.cssClasses.split(" ").forEach(i=>{if(r.get(i)){const s=r.get(i);e.cssCompiledStyles=[...e.cssCompiledStyles,...s.styles]}}));const a=t.find(i=>i.id===e.id);a?Object.assign(a,e):t.push(e)}l(en,"insertOrUpdateNode");function Mm(t){var e;return((e=t==null?void 0:t.classes)==null?void 0:e.join(" "))??""}l(Mm,"getClassesFromDbInfo");function $m(t){return(t==null?void 0:t.styles)??[]}l($m,"getStylesFromDbInfo");var rn=l((t,e,r,a,i,s,n,o)=>{var p,g;const h=e.id,u=r.get(h),d=Mm(u),f=$m(u);if(A.info("dataFetcher parsedItem",e,u,f),h!=="root"){let y=Wl;e.start===!0?y=X8:e.start===!1&&(y=K8),e.type!==Gn&&(y=e.type),co.get(h)||co.set(h,{id:h,shape:y,description:mt.sanitizeText(h,H()),cssClasses:`${d} ${tA}`,cssStyles:f});const m=co.get(h);e.description&&(Array.isArray(m.description)?(m.shape=ql,m.description.push(e.description)):((p=m.description)==null?void 0:p.length)>0?(m.shape=ql,m.description===h?m.description=[e.description]:m.description=[m.description,e.description]):(m.shape=Wl,m.description=e.description),m.description=mt.sanitizeTextOrArray(m.description,H())),((g=m.description)==null?void 0:g.length)===1&&m.shape===ql&&(m.type==="group"?m.shape=Qd:m.shape=Wl),!m.type&&e.doc&&(A.info("Setting cluster for XCX",h,Jd(e)),m.type="group",m.isGroup=!0,m.dir=Jd(e),m.shape=e.type===Am?Kd:Qd,m.cssClasses=`${m.cssClasses} ${nA} ${s?lA:""}`);const x={labelStyle:"",shape:m.shape,label:m.description,cssClasses:m.cssClasses,cssCompiledStyles:[],cssStyles:m.cssStyles,id:h,dir:m.dir,domId:ho(h,Oi),type:m.type,isGroup:m.type==="group",padding:8,rx:10,ry:10,look:n};if(x.shape===Kd&&(x.label=""),t&&t.id!=="root"&&(A.trace("Setting node ",h," to be child of its parent ",t.id),x.parentId=t.id),x.centerLabel=!0,e.note){const v={labelStyle:"",shape:Q8,label:e.note.text,cssClasses:aA,cssStyles:[],cssCompilesStyles:[],id:h+hA+"-"+Oi,domId:ho(h,Oi,Pm),type:m.type,isGroup:m.type==="group",padding:H().flowchart.padding,look:n,position:e.note.position},T=h+Zd,I={labelStyle:"",shape:Z8,label:e.note.text,cssClasses:m.cssClasses,cssStyles:[],id:h+Zd,domId:ho(h,Oi,Fm),type:"group",isGroup:!0,padding:16,look:n,position:e.note.position};Oi++,I.id=T,v.parentId=T,en(a,I,o),en(a,v,o),en(a,x,o);let B=h,_=v.id;e.note.position==="left of"&&(B=v.id,_=h),i.push({id:B+"-"+_,start:B,end:_,arrowhead:"none",arrowTypeEnd:"",style:Lm,labelStyle:"",classes:iA,arrowheadStyle:Bm,labelpos:Dm,labelType:Rm,thickness:Im,look:n})}else en(a,x,o)}e.doc&&(A.trace("Adding nodes children "),fA(e,e.doc,r,a,i,!s,n,o))},"dataFetcher"),gA=l(()=>{co.clear(),Oi=0},"reset"),Eu="[*]",Vm="start",zm=Eu,Wm="end",t1="color",e1="fill",yA="bgFill",mA=",";function Au(){return new Map}l(Au,"newClassesList");var qo=[],Lu=[],qm=H8,Yo=[],Ma=Au(),Ym=l(()=>({relations:[],states:new Map,documents:{}}),"newDoc"),Ho={root:Ym()},yr=Ho.root,wn=0,r1=0,xA={LINE:0,DOTTED_LINE:1},bA={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3},Jn=l(t=>JSON.parse(JSON.stringify(t)),"clone"),kA=l(t=>{A.info("Setting root doc",t),Yo=t},"setRootDoc"),vA=l(()=>Yo,"getRootDoc"),uo=l((t,e,r)=>{if(e.stmt===Su)uo(t,e.state1,!0),uo(t,e.state2,!1);else if(e.stmt===Wo&&(e.id==="[*]"?(e.id=r?t.id+"_start":t.id+"_end",e.start=r):e.id=e.id.trim()),e.doc){const a=[];let i=[],s;for(s=0;s<e.doc.length;s++)if(e.doc[s].type===Am){const n=Jn(e.doc[s]);n.doc=Jn(i),a.push(n),i=[]}else i.push(e.doc[s]);if(a.length>0&&i.length>0){const n={stmt:Wo,id:zp(),type:"divider",doc:Jn(i)};a.push(Jn(n)),e.doc=a}e.doc.forEach(n=>uo(e,n,!0))}},"docTranslator"),Bu=l(()=>(uo({id:"root"},{id:"root",doc:Yo},!0),{id:"root",doc:Yo}),"getRootDocV2"),TA=l(t=>{let e;t.doc?e=t.doc:e=t,A.info(e),Hm(!0),A.info("Extract initial document:",e),e.forEach(s=>{switch(A.warn("Statement",s.stmt),s.stmt){case Wo:Gi(s.id.trim(),s.type,s.doc,s.description,s.note,s.classes,s.styles,s.textStyles);break;case Su:Km(s.state1,s.state2,s.description);break;case G8:Qm(s.id.trim(),s.classes);break;case U8:{const n=s.id.trim().split(","),o=s.styleClass.split(",");n.forEach(h=>{let u=va(h);if(u===void 0){const d=h.trim();Gi(d),u=va(d)}u.styles=o.map(d=>{var f;return(f=d.replace(/;/g,""))==null?void 0:f.trim()})})}break;case j8:Du(s.id.trim(),s.styleClass);break}});const r=Gm(),i=H().look;gA(),rn(void 0,Bu(),r,qo,Lu,!0,i,Ma),qo.forEach(s=>{if(Array.isArray(s.label)){if(s.description=s.label.slice(1),s.isGroup&&s.description.length>0)throw new Error("Group nodes can only have label. Remove the additional description for node ["+s.id+"]");s.label=s.label[0]}})},"extract"),Gi=l(function(t,e=Gn,r=null,a=null,i=null,s=null,n=null,o=null){const h=t==null?void 0:t.trim();if(yr.states.has(h)?(yr.states.get(h).doc||(yr.states.get(h).doc=r),yr.states.get(h).type||(yr.states.get(h).type=e)):(A.info("Adding state ",h,a),yr.states.set(h,{id:h,descriptions:[],type:e,doc:r,note:i,classes:[],styles:[],textStyles:[]})),a&&(A.info("Setting state description",h,a),typeof a=="string"&&Uc(h,a.trim()),typeof a=="object"&&a.forEach(u=>Uc(h,u.trim()))),i){const u=yr.states.get(h);u.note=i,u.note.text=mt.sanitizeText(u.note.text,H())}s&&(A.info("Setting state classes",h,s),(typeof s=="string"?[s]:s).forEach(d=>Du(h,d.trim()))),n&&(A.info("Setting state styles",h,n),(typeof n=="string"?[n]:n).forEach(d=>AA(h,d.trim()))),o&&(A.info("Setting state styles",h,n),(typeof o=="string"?[o]:o).forEach(d=>LA(h,d.trim())))},"addState"),Hm=l(function(t){qo=[],Lu=[],Ho={root:Ym()},yr=Ho.root,wn=0,Ma=Au(),t||Ye()},"clear"),va=l(function(t){return yr.states.get(t)},"getState"),Gm=l(function(){return yr.states},"getStates"),_A=l(function(){A.info("Documents = ",Ho)},"logDocuments"),CA=l(function(){return yr.relations},"getRelations");function Go(t=""){let e=t;return t===Eu&&(wn++,e=`${Vm}${wn}`),e}l(Go,"startIdIfNeeded");function Uo(t="",e=Gn){return t===Eu?Vm:e}l(Uo,"startTypeIfNeeded");function Um(t=""){let e=t;return t===zm&&(wn++,e=`${Wm}${wn}`),e}l(Um,"endIdIfNeeded");function jm(t="",e=Gn){return t===zm?Wm:e}l(jm,"endTypeIfNeeded");function Xm(t,e,r){let a=Go(t.id.trim()),i=Uo(t.id.trim(),t.type),s=Go(e.id.trim()),n=Uo(e.id.trim(),e.type);Gi(a,i,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),Gi(s,n,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),yr.relations.push({id1:a,id2:s,relationTitle:mt.sanitizeText(r,H())})}l(Xm,"addRelationObjs");var Km=l(function(t,e,r){if(typeof t=="object")Xm(t,e,r);else{const a=Go(t.trim()),i=Uo(t),s=Um(e.trim()),n=jm(e);Gi(a,i),Gi(s,n),yr.relations.push({id1:a,id2:s,title:mt.sanitizeText(r,H())})}},"addRelation"),Uc=l(function(t,e){const r=yr.states.get(t),a=e.startsWith(":")?e.replace(":","").trim():e;r.descriptions.push(mt.sanitizeText(a,H()))},"addDescription"),SA=l(function(t){return t.substring(0,1)===":"?t.substr(2).trim():t.trim()},"cleanupLabel"),wA=l(()=>(r1++,"divider-id-"+r1),"getDividerId"),Qm=l(function(t,e=""){Ma.has(t)||Ma.set(t,{id:t,styles:[],textStyles:[]});const r=Ma.get(t);e!=null&&e.split(mA).forEach(a=>{const i=a.replace(/([^;]*);/,"$1").trim();if(RegExp(t1).exec(a)){const n=i.replace(e1,yA).replace(t1,e1);r.textStyles.push(n)}r.styles.push(i)})},"addStyleClass"),EA=l(function(){return Ma},"getClasses"),Du=l(function(t,e){t.split(",").forEach(function(r){let a=va(r);if(a===void 0){const i=r.trim();Gi(i),a=va(i)}a.classes.push(e)})},"setCssClass"),AA=l(function(t,e){const r=va(t);r!==void 0&&r.styles.push(e)},"setStyle"),LA=l(function(t,e){const r=va(t);r!==void 0&&r.textStyles.push(e)},"setTextStyle"),BA=l(()=>qm,"getDirection"),DA=l(t=>{qm=t},"setDirection"),RA=l(t=>t&&t[0]===":"?t.substr(1).trim():t.trim(),"trimColon"),IA=l(()=>{const t=H();return{nodes:qo,edges:Lu,other:{},config:t,direction:Om(Bu())}},"getData"),Ti={getConfig:l(()=>H().state,"getConfig"),getData:IA,addState:Gi,clear:Hm,getState:va,getStates:Gm,getRelations:CA,getClasses:EA,getDirection:BA,addRelation:Km,getDividerId:wA,setDirection:DA,cleanupLabel:SA,lineType:xA,relationType:bA,logDocuments:_A,getRootDoc:vA,setRootDoc:kA,getRootDocV2:Bu,extract:TA,trimColon:RA,getAccTitle:Ke,setAccTitle:He,getAccDescription:Ze,setAccDescription:Qe,addStyleClass:Qm,setCssClass:Du,addDescription:Uc,setDiagramTitle:dr,getDiagramTitle:Je},NA=l(t=>`
defs #statediagram-barbEnd {
    fill: ${t.transitionColor};
    stroke: ${t.transitionColor};
  }
g.stateGroup text {
  fill: ${t.nodeBorder};
  stroke: none;
  font-size: 10px;
}
g.stateGroup text {
  fill: ${t.textColor};
  stroke: none;
  font-size: 10px;

}
g.stateGroup .state-title {
  font-weight: bolder;
  fill: ${t.stateLabelColor};
}

g.stateGroup rect {
  fill: ${t.mainBkg};
  stroke: ${t.nodeBorder};
}

g.stateGroup line {
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.transition {
  stroke: ${t.transitionColor};
  stroke-width: 1;
  fill: none;
}

.stateGroup .composit {
  fill: ${t.background};
  border-bottom: 1px
}

.stateGroup .alt-composit {
  fill: #e0e0e0;
  border-bottom: 1px
}

.state-note {
  stroke: ${t.noteBorderColor};
  fill: ${t.noteBkgColor};

  text {
    fill: ${t.noteTextColor};
    stroke: none;
    font-size: 10px;
  }
}

.stateLabel .box {
  stroke: none;
  stroke-width: 0;
  fill: ${t.mainBkg};
  opacity: 0.5;
}

.edgeLabel .label rect {
  fill: ${t.labelBackgroundColor};
  opacity: 0.5;
}
.edgeLabel {
  background-color: ${t.edgeLabelBackground};
  p {
    background-color: ${t.edgeLabelBackground};
  }
  rect {
    opacity: 0.5;
    background-color: ${t.edgeLabelBackground};
    fill: ${t.edgeLabelBackground};
  }
  text-align: center;
}
.edgeLabel .label text {
  fill: ${t.transitionLabelColor||t.tertiaryTextColor};
}
.label div .edgeLabel {
  color: ${t.transitionLabelColor||t.tertiaryTextColor};
}

.stateLabel text {
  fill: ${t.stateLabelColor};
  font-size: 10px;
  font-weight: bold;
}

.node circle.state-start {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node .fork-join {
  fill: ${t.specialStateColor};
  stroke: ${t.specialStateColor};
}

.node circle.state-end {
  fill: ${t.innerEndBackground};
  stroke: ${t.background};
  stroke-width: 1.5
}
.end-state-inner {
  fill: ${t.compositeBackground||t.background};
  // stroke: ${t.background};
  stroke-width: 1.5
}

.node rect {
  fill: ${t.stateBkg||t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}
.node polygon {
  fill: ${t.mainBkg};
  stroke: ${t.stateBorder||t.nodeBorder};;
  stroke-width: 1px;
}
#statediagram-barbEnd {
  fill: ${t.lineColor};
}

.statediagram-cluster rect {
  fill: ${t.compositeTitleBackground};
  stroke: ${t.stateBorder||t.nodeBorder};
  stroke-width: 1px;
}

.cluster-label, .nodeLabel {
  color: ${t.stateLabelColor};
  // line-height: 1;
}

.statediagram-cluster rect.outer {
  rx: 5px;
  ry: 5px;
}
.statediagram-state .divider {
  stroke: ${t.stateBorder||t.nodeBorder};
}

.statediagram-state .title-state {
  rx: 5px;
  ry: 5px;
}
.statediagram-cluster.statediagram-cluster .inner {
  fill: ${t.compositeBackground||t.background};
}
.statediagram-cluster.statediagram-cluster-alt .inner {
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.statediagram-cluster .inner {
  rx:0;
  ry:0;
}

.statediagram-state rect.basic {
  rx: 5px;
  ry: 5px;
}
.statediagram-state rect.divider {
  stroke-dasharray: 10,10;
  fill: ${t.altBackground?t.altBackground:"#efefef"};
}

.note-edge {
  stroke-dasharray: 5;
}

.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}
.statediagram-note rect {
  fill: ${t.noteBkgColor};
  stroke: ${t.noteBorderColor};
  stroke-width: 1px;
  rx: 0;
  ry: 0;
}

.statediagram-note text {
  fill: ${t.noteTextColor};
}

.statediagram-note .nodeLabel {
  color: ${t.noteTextColor};
}
.statediagram .edgeLabel {
  color: red; // ${t.noteTextColor};
}

#dependencyStart, #dependencyEnd {
  fill: ${t.lineColor};
  stroke: ${t.lineColor};
  stroke-width: 1;
}

.statediagramTitleText {
  text-anchor: middle;
  font-size: 18px;
  fill: ${t.textColor};
}
`,"getStyles"),Zm=NA,Ru={},FA=l((t,e)=>{Ru[t]=e},"set"),PA=l(t=>Ru[t],"get"),Jm=l(()=>Object.keys(Ru),"keys"),OA=l(()=>Jm().length,"size"),MA={get:PA,set:FA,keys:Jm,size:OA},$A=l(t=>t.append("circle").attr("class","start-state").attr("r",H().state.sizeUnit).attr("cx",H().state.padding+H().state.sizeUnit).attr("cy",H().state.padding+H().state.sizeUnit),"drawStartState"),VA=l(t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",H().state.textHeight).attr("class","divider").attr("x2",H().state.textHeight*2).attr("y1",0).attr("y2",0),"drawDivider"),zA=l((t,e)=>{const r=t.append("text").attr("x",2*H().state.padding).attr("y",H().state.textHeight+2*H().state.padding).attr("font-size",H().state.fontSize).attr("class","state-title").text(e.id),a=r.node().getBBox();return t.insert("rect",":first-child").attr("x",H().state.padding).attr("y",H().state.padding).attr("width",a.width+2*H().state.padding).attr("height",a.height+2*H().state.padding).attr("rx",H().state.radius),r},"drawSimpleState"),WA=l((t,e)=>{const r=l(function(p,g,y){const m=p.append("tspan").attr("x",2*H().state.padding).text(g);y||m.attr("dy",H().state.textHeight)},"addTspan"),i=t.append("text").attr("x",2*H().state.padding).attr("y",H().state.textHeight+1.3*H().state.padding).attr("font-size",H().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),s=i.height,n=t.append("text").attr("x",H().state.padding).attr("y",s+H().state.padding*.4+H().state.dividerMargin+H().state.textHeight).attr("class","state-description");let o=!0,h=!0;e.descriptions.forEach(function(p){o||(r(n,p,h),h=!1),o=!1});const u=t.append("line").attr("x1",H().state.padding).attr("y1",H().state.padding+s+H().state.dividerMargin/2).attr("y2",H().state.padding+s+H().state.dividerMargin/2).attr("class","descr-divider"),d=n.node().getBBox(),f=Math.max(d.width,i.width);return u.attr("x2",f+3*H().state.padding),t.insert("rect",":first-child").attr("x",H().state.padding).attr("y",H().state.padding).attr("width",f+2*H().state.padding).attr("height",d.height+s+2*H().state.padding).attr("rx",H().state.radius),t},"drawDescrState"),qA=l((t,e,r)=>{const a=H().state.padding,i=2*H().state.padding,s=t.node().getBBox(),n=s.width,o=s.x,h=t.append("text").attr("x",0).attr("y",H().state.titleShift).attr("font-size",H().state.fontSize).attr("class","state-title").text(e.id),d=h.node().getBBox().width+i;let f=Math.max(d,n);f===n&&(f=f+i);let p;const g=t.node().getBBox();e.doc,p=o-a,d>n&&(p=(n-f)/2+a),Math.abs(o-g.x)<a&&d>n&&(p=o-(d-n)/2);const y=1-H().state.textHeight;return t.insert("rect",":first-child").attr("x",p).attr("y",y).attr("class",r?"alt-composit":"composit").attr("width",f).attr("height",g.height+H().state.textHeight+H().state.titleShift+1).attr("rx","0"),h.attr("x",p+a),d<=n&&h.attr("x",o+(f-i)/2-d/2+a),t.insert("rect",":first-child").attr("x",p).attr("y",H().state.titleShift-H().state.textHeight-H().state.padding).attr("width",f).attr("height",H().state.textHeight*3).attr("rx",H().state.radius),t.insert("rect",":first-child").attr("x",p).attr("y",H().state.titleShift-H().state.textHeight-H().state.padding).attr("width",f).attr("height",g.height+3+2*H().state.textHeight).attr("rx",H().state.radius),t},"addTitleAndBox"),YA=l(t=>(t.append("circle").attr("class","end-state-outer").attr("r",H().state.sizeUnit+H().state.miniPadding).attr("cx",H().state.padding+H().state.sizeUnit+H().state.miniPadding).attr("cy",H().state.padding+H().state.sizeUnit+H().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",H().state.sizeUnit).attr("cx",H().state.padding+H().state.sizeUnit+2).attr("cy",H().state.padding+H().state.sizeUnit+2)),"drawEndState"),HA=l((t,e)=>{let r=H().state.forkWidth,a=H().state.forkHeight;if(e.parentId){let i=r;r=a,a=i}return t.append("rect").style("stroke","black").style("fill","black").attr("width",r).attr("height",a).attr("x",H().state.padding).attr("y",H().state.padding)},"drawForkJoinState"),GA=l((t,e,r,a)=>{let i=0;const s=a.append("text");s.style("text-anchor","start"),s.attr("class","noteText");let n=t.replace(/\r\n/g,"<br/>");n=n.replace(/\n/g,"<br/>");const o=n.split(mt.lineBreakRegex);let h=1.25*H().state.noteMargin;for(const u of o){const d=u.trim();if(d.length>0){const f=s.append("tspan");if(f.text(d),h===0){const p=f.node().getBBox();h+=p.height}i+=h,f.attr("x",e+H().state.noteMargin),f.attr("y",r+i+1.25*H().state.noteMargin)}}return{textWidth:s.node().getBBox().width,textHeight:i}},"_drawLongText"),UA=l((t,e)=>{e.attr("class","state-note");const r=e.append("rect").attr("x",0).attr("y",H().state.padding),a=e.append("g"),{textWidth:i,textHeight:s}=GA(t,0,0,a);return r.attr("height",s+2*H().state.noteMargin),r.attr("width",i+H().state.noteMargin*2),r},"drawNote"),i1=l(function(t,e){const r=e.id,a={id:r,label:e.id,width:0,height:0},i=t.append("g").attr("id",r).attr("class","stateGroup");e.type==="start"&&$A(i),e.type==="end"&&YA(i),(e.type==="fork"||e.type==="join")&&HA(i,e),e.type==="note"&&UA(e.note.text,i),e.type==="divider"&&VA(i),e.type==="default"&&e.descriptions.length===0&&zA(i,e),e.type==="default"&&e.descriptions.length>0&&WA(i,e);const s=i.node().getBBox();return a.width=s.width+2*H().state.padding,a.height=s.height+2*H().state.padding,MA.set(r,a),a},"drawState"),a1=0,jA=l(function(t,e,r){const a=l(function(h){switch(h){case Ti.relationType.AGGREGATION:return"aggregation";case Ti.relationType.EXTENSION:return"extension";case Ti.relationType.COMPOSITION:return"composition";case Ti.relationType.DEPENDENCY:return"dependency"}},"getRelationType");e.points=e.points.filter(h=>!Number.isNaN(h.y));const i=e.points,s=pa().x(function(h){return h.x}).y(function(h){return h.y}).curve(Dn),n=t.append("path").attr("d",s(i)).attr("id","edge"+a1).attr("class","transition");let o="";if(H().state.arrowMarkerAbsolute&&(o=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,o=o.replace(/\(/g,"\\("),o=o.replace(/\)/g,"\\)")),n.attr("marker-end","url("+o+"#"+a(Ti.relationType.DEPENDENCY)+"End)"),r.title!==void 0){const h=t.append("g").attr("class","stateLabel"),{x:u,y:d}=re.calcLabelPosition(e.points),f=mt.getRows(r.title);let p=0;const g=[];let y=0,m=0;for(let T=0;T<=f.length;T++){const I=h.append("text").attr("text-anchor","middle").text(f[T]).attr("x",u).attr("y",d+p),B=I.node().getBBox();y=Math.max(y,B.width),m=Math.min(m,B.x),A.info(B.x,u,d+p),p===0&&(p=I.node().getBBox().height,A.info("Title height",p,d)),g.push(I)}let x=p*f.length;if(f.length>1){const T=(f.length-1)*p*.5;g.forEach((I,B)=>I.attr("y",d+B*p-T)),x=p*f.length}const v=h.node().getBBox();h.insert("rect",":first-child").attr("class","box").attr("x",u-y/2-H().state.padding/2).attr("y",d-x/2-H().state.padding/2-3.5).attr("width",y+H().state.padding).attr("height",x+H().state.padding),A.info(v)}a1++},"drawEdge"),Er,Yl={},XA=l(function(){},"setConf"),KA=l(function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),QA=l(function(t,e,r,a){Er=H().state;const i=H().securityLevel;let s;i==="sandbox"&&(s=yt("#i"+e));const n=i==="sandbox"?yt(s.nodes()[0].contentDocument.body):yt("body"),o=i==="sandbox"?s.nodes()[0].contentDocument:document;A.debug("Rendering diagram "+t);const h=n.select(`[id='${e}']`);KA(h);const u=a.db.getRootDoc();tx(u,h,void 0,!1,n,o,a);const d=Er.padding,f=h.node().getBBox(),p=f.width+d*2,g=f.height+d*2,y=p*1.75;ar(h,g,y,Er.useMaxWidth),h.attr("viewBox",`${f.x-Er.padding}  ${f.y-Er.padding} `+p+" "+g)},"draw"),ZA=l(t=>t?t.length*Er.fontSizeFactor:1,"getLabelWidth"),tx=l((t,e,r,a,i,s,n)=>{const o=new $s({compound:!0,multigraph:!0});let h,u=!0;for(h=0;h<t.length;h++)if(t[h].stmt==="relation"){u=!1;break}r?o.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:u?1:Er.edgeLengthFactor,nodeSep:u?1:50,isMultiGraph:!0}):o.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:u?1:Er.edgeLengthFactor,nodeSep:u?1:50,ranker:"tight-tree",isMultiGraph:!0}),o.setDefaultEdgeLabel(function(){return{}}),n.db.extract(t);const d=n.db.getStates(),f=n.db.getRelations(),p=Object.keys(d);for(const v of p){const T=d[v];r&&(T.parentId=r);let I;if(T.doc){let B=e.append("g").attr("id",T.id).attr("class","stateGroup");I=tx(T.doc,B,T.id,!a,i,s,n);{B=qA(B,T,a);let _=B.node().getBBox();I.width=_.width,I.height=_.height+Er.padding/2,Yl[T.id]={y:Er.compositTitleSize}}}else I=i1(e,T,o);if(T.note){const B={descriptions:[],id:T.id+"-note",note:T.note,type:"note"},_=i1(e,B,o);T.note.position==="left of"?(o.setNode(I.id+"-note",_),o.setNode(I.id,I)):(o.setNode(I.id,I),o.setNode(I.id+"-note",_)),o.setParent(I.id,I.id+"-group"),o.setParent(I.id+"-note",I.id+"-group")}else o.setNode(I.id,I)}A.debug("Count=",o.nodeCount(),o);let g=0;f.forEach(function(v){g++,A.debug("Setting edge",v),o.setEdge(v.id1,v.id2,{relation:v,width:ZA(v.title),height:Er.labelHeight*mt.getRows(v.title).length,labelpos:"c"},"id"+g)}),tl(o),A.debug("Graph after layout",o.nodes());const y=e.node();o.nodes().forEach(function(v){v!==void 0&&o.node(v)!==void 0?(A.warn("Node "+v+": "+JSON.stringify(o.node(v))),i.select("#"+y.id+" #"+v).attr("transform","translate("+(o.node(v).x-o.node(v).width/2)+","+(o.node(v).y+(Yl[v]?Yl[v].y:0)-o.node(v).height/2)+" )"),i.select("#"+y.id+" #"+v).attr("data-x-shift",o.node(v).x-o.node(v).width/2),s.querySelectorAll("#"+y.id+" #"+v+" .divider").forEach(I=>{const B=I.parentElement;let _=0,w=0;B&&(B.parentElement&&(_=B.parentElement.getBBox().width),w=parseInt(B.getAttribute("data-x-shift"),10),Number.isNaN(w)&&(w=0)),I.setAttribute("x1",0-w+8),I.setAttribute("x2",_-w-8)})):A.debug("No Node "+v+": "+JSON.stringify(o.node(v)))});let m=y.getBBox();o.edges().forEach(function(v){v!==void 0&&o.edge(v)!==void 0&&(A.debug("Edge "+v.v+" -> "+v.w+": "+JSON.stringify(o.edge(v))),jA(e,o.edge(v),o.edge(v).relation))}),m=y.getBBox();const x={id:r||"root",label:r||"root",width:0,height:0};return x.width=m.width+2*Er.padding,x.height=m.height+2*Er.padding,A.debug("Doc rendered",x,o),x},"renderDoc"),JA={setConf:XA,draw:QA},t9={parser:wm,db:Ti,renderer:JA,styles:Zm,init:l(t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ti.clear()},"init")};const e9=Object.freeze(Object.defineProperty({__proto__:null,diagram:t9},Symbol.toStringTag,{value:"Module"}));var r9={parser:wm,db:Ti,renderer:pA,styles:Zm,init:l(t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute,Ti.clear()},"init")};const i9=Object.freeze(Object.defineProperty({__proto__:null,diagram:r9},Symbol.toStringTag,{value:"Module"}));var jc=function(){var t=l(function(f,p,g,y){for(g=g||{},y=f.length;y--;g[f[y]]=p);return g},"o"),e=[6,8,10,11,12,14,16,17,18],r=[1,9],a=[1,10],i=[1,11],s=[1,12],n=[1,13],o=[1,14],h={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:l(function(p,g,y,m,x,v,T){var I=v.length-1;switch(x){case 1:return v[I-1];case 2:this.$=[];break;case 3:v[I-1].push(v[I]),this.$=v[I-1];break;case 4:case 5:this.$=v[I];break;case 6:case 7:this.$=[];break;case 8:m.setDiagramTitle(v[I].substr(6)),this.$=v[I].substr(6);break;case 9:this.$=v[I].trim(),m.setAccTitle(this.$);break;case 10:case 11:this.$=v[I].trim(),m.setAccDescription(this.$);break;case 12:m.addSection(v[I].substr(8)),this.$=v[I].substr(8);break;case 13:m.addTask(v[I-1],v[I]),this.$="task";break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:a,14:i,16:s,17:n,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:r,12:a,14:i,16:s,17:n,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:l(function(p,g){if(g.recoverable)this.trace(p);else{var y=new Error(p);throw y.hash=g,y}},"parseError"),parse:l(function(p){var g=this,y=[0],m=[],x=[null],v=[],T=this.table,I="",B=0,_=0,w=2,D=1,S=v.slice.call(arguments,1),b=Object.create(this.lexer),C={yy:{}};for(var k in this.yy)Object.prototype.hasOwnProperty.call(this.yy,k)&&(C.yy[k]=this.yy[k]);b.setInput(p,C.yy),C.yy.lexer=b,C.yy.parser=this,typeof b.yylloc>"u"&&(b.yylloc={});var E=b.yylloc;v.push(E);var P=b.options&&b.options.ranges;typeof C.yy.parseError=="function"?this.parseError=C.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function O(K){y.length=y.length-2*K,x.length=x.length-K,v.length=v.length-K}l(O,"popStack");function V(){var K;return K=m.pop()||b.lex()||D,typeof K!="number"&&(K instanceof Array&&(m=K,K=m.pop()),K=g.symbols_[K]||K),K}l(V,"lex");for(var F,M,R,L,q={},N,j,it,tt;;){if(M=y[y.length-1],this.defaultActions[M]?R=this.defaultActions[M]:((F===null||typeof F>"u")&&(F=V()),R=T[M]&&T[M][F]),typeof R>"u"||!R.length||!R[0]){var pt="";tt=[];for(N in T[M])this.terminals_[N]&&N>w&&tt.push("'"+this.terminals_[N]+"'");b.showPosition?pt="Parse error on line "+(B+1)+`:
`+b.showPosition()+`
Expecting `+tt.join(", ")+", got '"+(this.terminals_[F]||F)+"'":pt="Parse error on line "+(B+1)+": Unexpected "+(F==D?"end of input":"'"+(this.terminals_[F]||F)+"'"),this.parseError(pt,{text:b.match,token:this.terminals_[F]||F,line:b.yylineno,loc:E,expected:tt})}if(R[0]instanceof Array&&R.length>1)throw new Error("Parse Error: multiple actions possible at state: "+M+", token: "+F);switch(R[0]){case 1:y.push(F),x.push(b.yytext),v.push(b.yylloc),y.push(R[1]),F=null,_=b.yyleng,I=b.yytext,B=b.yylineno,E=b.yylloc;break;case 2:if(j=this.productions_[R[1]][1],q.$=x[x.length-j],q._$={first_line:v[v.length-(j||1)].first_line,last_line:v[v.length-1].last_line,first_column:v[v.length-(j||1)].first_column,last_column:v[v.length-1].last_column},P&&(q._$.range=[v[v.length-(j||1)].range[0],v[v.length-1].range[1]]),L=this.performAction.apply(q,[I,_,B,C.yy,R[1],x,v].concat(S)),typeof L<"u")return L;j&&(y=y.slice(0,-1*j*2),x=x.slice(0,-1*j),v=v.slice(0,-1*j)),y.push(this.productions_[R[1]][0]),x.push(q.$),v.push(q._$),it=T[y[y.length-2]][y[y.length-1]],y.push(it);break;case 3:return!0}}return!0},"parse")},u=function(){var f={EOF:1,parseError:l(function(g,y){if(this.yy.parser)this.yy.parser.parseError(g,y);else throw new Error(g)},"parseError"),setInput:l(function(p,g){return this.yy=g||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var g=p.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},"input"),unput:l(function(p){var g=p.length,y=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),y.length-1&&(this.yylineno-=y.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:y?(y.length===m.length?this.yylloc.first_column:0)+m[m.length-y.length].length-y[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(p){this.unput(this.match.slice(p))},"less"),pastInput:l(function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var p=this.pastInput(),g=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+g+"^"},"showPosition"),test_match:l(function(p,g){var y,m,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),m=p[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],y=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),y)return y;if(this._backtrack){for(var v in x)this[v]=x[v];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,g,y,m;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),v=0;v<x.length;v++)if(y=this._input.match(this.rules[x[v]]),y&&(!g||y[0].length>g[0].length)){if(g=y,m=v,this.options.backtrack_lexer){if(p=this.test_match(y,x[v]),p!==!1)return p;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(p=this.test_match(g,x[m]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var g=this.next();return g||this.lex()},"lex"),begin:l(function(g){this.conditionStack.push(g)},"begin"),popState:l(function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},"topState"),pushState:l(function(g){this.begin(g)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(g,y,m,x){switch(m){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};return f}();h.lexer=u;function d(){this.yy={}}return l(d,"Parser"),d.prototype=h,h.Parser=d,new d}();jc.parser=jc;var a9=jc,Ps="",Iu=[],En=[],An=[],s9=l(function(){Iu.length=0,En.length=0,Ps="",An.length=0,Ye()},"clear"),n9=l(function(t){Ps=t,Iu.push(t)},"addSection"),o9=l(function(){return Iu},"getSections"),l9=l(function(){let t=s1();const e=100;let r=0;for(;!t&&r<e;)t=s1(),r++;return En.push(...An),En},"getTasks"),c9=l(function(){const t=[];return En.forEach(r=>{r.people&&t.push(...r.people)}),[...new Set(t)].sort()},"updateActors"),h9=l(function(t,e){const r=e.substr(1).split(":");let a=0,i=[];r.length===1?(a=Number(r[0]),i=[]):(a=Number(r[0]),i=r[1].split(","));const s=i.map(o=>o.trim()),n={section:Ps,type:Ps,people:s,task:t,score:a};An.push(n)},"addTask"),u9=l(function(t){const e={section:Ps,type:Ps,description:t,task:t,classes:[]};En.push(e)},"addTaskOrg"),s1=l(function(){const t=l(function(r){return An[r].processed},"compileTask");let e=!0;for(const[r,a]of An.entries())t(r),e=e&&a.processed;return e},"compileTasks"),d9=l(function(){return c9()},"getActors"),n1={getConfig:l(()=>H().journey,"getConfig"),clear:s9,setDiagramTitle:dr,getDiagramTitle:Je,setAccTitle:He,getAccTitle:Ke,setAccDescription:Qe,getAccDescription:Ze,addSection:n9,getSections:o9,getTasks:l9,addTask:h9,addTaskOrg:u9,getActors:d9},p9=l(t=>`.label {
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    color: ${t.textColor};
  }
  .mouth {
    stroke: #666;
  }

  line {
    stroke: ${t.textColor}
  }

  .legend {
    fill: ${t.textColor};
  }

  .label text {
    fill: #333;
  }
  .label {
    color: ${t.textColor}
  }

  .face {
    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};
    stroke: #999;
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 1.5px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
    }
    text-align: center;
  }

  .cluster rect {
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: 'trebuchet ms', verdana, arial, sans-serif;
    font-family: var(--mermaid-font-family);
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .task-type-0, .section-type-0  {
    ${t.fillType0?`fill: ${t.fillType0}`:""};
  }
  .task-type-1, .section-type-1  {
    ${t.fillType0?`fill: ${t.fillType1}`:""};
  }
  .task-type-2, .section-type-2  {
    ${t.fillType0?`fill: ${t.fillType2}`:""};
  }
  .task-type-3, .section-type-3  {
    ${t.fillType0?`fill: ${t.fillType3}`:""};
  }
  .task-type-4, .section-type-4  {
    ${t.fillType0?`fill: ${t.fillType4}`:""};
  }
  .task-type-5, .section-type-5  {
    ${t.fillType0?`fill: ${t.fillType5}`:""};
  }
  .task-type-6, .section-type-6  {
    ${t.fillType0?`fill: ${t.fillType6}`:""};
  }
  .task-type-7, .section-type-7  {
    ${t.fillType0?`fill: ${t.fillType7}`:""};
  }

  .actor-0 {
    ${t.actor0?`fill: ${t.actor0}`:""};
  }
  .actor-1 {
    ${t.actor1?`fill: ${t.actor1}`:""};
  }
  .actor-2 {
    ${t.actor2?`fill: ${t.actor2}`:""};
  }
  .actor-3 {
    ${t.actor3?`fill: ${t.actor3}`:""};
  }
  .actor-4 {
    ${t.actor4?`fill: ${t.actor4}`:""};
  }
  .actor-5 {
    ${t.actor5?`fill: ${t.actor5}`:""};
  }
`,"getStyles"),f9=p9,Nu=l(function(t,e){return pl(t,e)},"drawRect"),g9=l(function(t,e){const a=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=t.append("g");i.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function s(h){const u=Cs().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}l(s,"smile");function n(h){const u=Cs().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}l(n,"sad");function o(h){h.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return l(o,"ambivalent"),e.score>3?s(i):e.score<3?n(i):o(i),a},"drawFace"),ex=l(function(t,e){const r=t.append("circle");return r.attr("cx",e.cx),r.attr("cy",e.cy),r.attr("class","actor-"+e.pos),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("r",e.r),r.class!==void 0&&r.attr("class",r.class),e.title!==void 0&&r.append("title").text(e.title),r},"drawCircle"),rx=l(function(t,e){return H6(t,e)},"drawText"),y9=l(function(t,e){function r(i,s,n,o,h){return i+","+s+" "+(i+n)+","+s+" "+(i+n)+","+(s+o-h)+" "+(i+n-h*1.2)+","+(s+o)+" "+i+","+(s+o)}l(r,"genPoints");const a=t.append("polygon");a.attr("points",r(e.x,e.y,50,20,7)),a.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,rx(t,e)},"drawLabel"),m9=l(function(t,e,r){const a=t.append("g"),i=_a();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=r.width*e.taskCount+r.diagramMarginX*(e.taskCount-1),i.height=r.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,Nu(a,i),ix(r)(e.text,a,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},r,e.colour)},"drawSection"),o1=-1,x9=l(function(t,e,r){const a=e.x+r.width/2,i=t.append("g");o1++;const s=300+5*30;i.append("line").attr("id","task"+o1).attr("x1",a).attr("y1",e.y).attr("x2",a).attr("y2",s).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),g9(i,{cx:a,cy:300+(5-e.score)*30,score:e.score});const n=_a();n.x=e.x,n.y=e.y,n.fill=e.fill,n.width=r.width,n.height=r.height,n.class="task task-type-"+e.num,n.rx=3,n.ry=3,Nu(i,n);let o=e.x+14;e.people.forEach(h=>{const u=e.actors[h].color,d={cx:o,cy:e.y,r:7,fill:u,stroke:"#000",title:h,pos:e.actors[h].position};ex(i,d),o+=10}),ix(r)(e.task,i,n.x,n.y,n.width,n.height,{class:"task"},r,e.colour)},"drawTask"),b9=l(function(t,e){k2(t,e)},"drawBackgroundRect"),ix=function(){function t(i,s,n,o,h,u,d,f){const p=s.append("text").attr("x",n+h/2).attr("y",o+u/2+5).style("font-color",f).style("text-anchor","middle").text(i);a(p,d)}l(t,"byText");function e(i,s,n,o,h,u,d,f,p){const{taskFontSize:g,taskFontFamily:y}=f,m=i.split(/<br\s*\/?>/gi);for(let x=0;x<m.length;x++){const v=x*g-g*(m.length-1)/2,T=s.append("text").attr("x",n+h/2).attr("y",o).attr("fill",p).style("text-anchor","middle").style("font-size",g).style("font-family",y);T.append("tspan").attr("x",n+h/2).attr("dy",v).text(m[x]),T.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),a(T,d)}}l(e,"byTspan");function r(i,s,n,o,h,u,d,f){const p=s.append("switch"),y=p.append("foreignObject").attr("x",n).attr("y",o).attr("width",h).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,p,n,o,h,u,d,f),a(y,d)}l(r,"byFo");function a(i,s){for(const n in s)n in s&&i.attr(n,s[n])}return l(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}}(),k9=l(function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics"),Ln={drawRect:Nu,drawCircle:ex,drawSection:m9,drawText:rx,drawLabel:y9,drawTask:x9,drawBackgroundRect:b9,initGraphics:k9},v9=l(function(t){Object.keys(t).forEach(function(r){wl[r]=t[r]})},"setConf"),Ci={};function ax(t){const e=H().journey;let r=60;Object.keys(Ci).forEach(a=>{const i=Ci[a].color,s={cx:20,cy:r,r:7,fill:i,stroke:"#000",pos:Ci[a].position};Ln.drawCircle(t,s);const n={x:40,y:r+7,fill:"#666",text:a,textMargin:e.boxTextMargin|5};Ln.drawText(t,n),r+=20})}l(ax,"drawActorLegend");var wl=H().journey,sa=wl.leftMargin,T9=l(function(t,e,r,a){const i=H().journey,s=H().securityLevel;let n;s==="sandbox"&&(n=yt("#i"+e));const o=s==="sandbox"?yt(n.nodes()[0].contentDocument.body):yt("body");Or.init();const h=o.select("#"+e);Ln.initGraphics(h);const u=a.db.getTasks(),d=a.db.getDiagramTitle(),f=a.db.getActors();for(const v in Ci)delete Ci[v];let p=0;f.forEach(v=>{Ci[v]={color:i.actorColours[p%i.actorColours.length],position:p},p++}),ax(h),Or.insert(0,0,sa,Object.keys(Ci).length*50),_9(h,u,0);const g=Or.getBounds();d&&h.append("text").text(d).attr("x",sa).attr("font-size","4ex").attr("font-weight","bold").attr("y",25);const y=g.stopy-g.starty+2*i.diagramMarginY,m=sa+g.stopx+2*i.diagramMarginX;ar(h,y,m,i.useMaxWidth),h.append("line").attr("x1",sa).attr("y1",i.height*4).attr("x2",m-sa-4).attr("y2",i.height*4).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");const x=d?70:0;h.attr("viewBox",`${g.startx} -25 ${m} ${y+x}`),h.attr("preserveAspectRatio","xMinYMin meet"),h.attr("height",y+x+25)},"draw"),Or={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:l(function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0},"init"),updateVal:l(function(t,e,r,a){t[e]===void 0?t[e]=r:t[e]=a(r,t[e])},"updateVal"),updateBounds:l(function(t,e,r,a){const i=H().journey,s=this;let n=0;function o(h){return l(function(d){n++;const f=s.sequenceItems.length-n+1;s.updateVal(d,"starty",e-f*i.boxMargin,Math.min),s.updateVal(d,"stopy",a+f*i.boxMargin,Math.max),s.updateVal(Or.data,"startx",t-f*i.boxMargin,Math.min),s.updateVal(Or.data,"stopx",r+f*i.boxMargin,Math.max),h!=="activation"&&(s.updateVal(d,"startx",t-f*i.boxMargin,Math.min),s.updateVal(d,"stopx",r+f*i.boxMargin,Math.max),s.updateVal(Or.data,"starty",e-f*i.boxMargin,Math.min),s.updateVal(Or.data,"stopy",a+f*i.boxMargin,Math.max))},"updateItemBounds")}l(o,"updateFn"),this.sequenceItems.forEach(o())},"updateBounds"),insert:l(function(t,e,r,a){const i=Math.min(t,r),s=Math.max(t,r),n=Math.min(e,a),o=Math.max(e,a);this.updateVal(Or.data,"startx",i,Math.min),this.updateVal(Or.data,"starty",n,Math.min),this.updateVal(Or.data,"stopx",s,Math.max),this.updateVal(Or.data,"stopy",o,Math.max),this.updateBounds(i,n,s,o)},"insert"),bumpVerticalPos:l(function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos},"bumpVerticalPos"),getVerticalPos:l(function(){return this.verticalPos},"getVerticalPos"),getBounds:l(function(){return this.data},"getBounds")},Hl=wl.sectionFills,l1=wl.sectionColours,_9=l(function(t,e,r){const a=H().journey;let i="";const s=a.height*2+a.diagramMarginY,n=r+s;let o=0,h="#CCC",u="black",d=0;for(const[f,p]of e.entries()){if(i!==p.section){h=Hl[o%Hl.length],d=o%Hl.length,u=l1[o%l1.length];let y=0;const m=p.section;for(let v=f;v<e.length&&e[v].section==m;v++)y=y+1;const x={x:f*a.taskMargin+f*a.width+sa,y:50,text:p.section,fill:h,num:d,colour:u,taskCount:y};Ln.drawSection(t,x,a),i=p.section,o++}const g=p.people.reduce((y,m)=>(Ci[m]&&(y[m]=Ci[m]),y),{});p.x=f*a.taskMargin+f*a.width+sa,p.y=n,p.width=a.diagramMarginX,p.height=a.diagramMarginY,p.colour=u,p.fill=h,p.num=d,p.actors=g,Ln.drawTask(t,p,a),Or.insert(p.x,p.y,p.x+p.width+a.taskMargin,300+5*30)}},"drawTasks"),c1={setConf:v9,draw:T9},C9={parser:a9,db:n1,renderer:c1,styles:f9,init:l(t=>{c1.setConf(t.journey),n1.clear()},"init")};const S9=Object.freeze(Object.defineProperty({__proto__:null,diagram:C9},Symbol.toStringTag,{value:"Module"}));var Xc=function(){var t=l(function(p,g,y,m){for(y=y||{},m=p.length;m--;y[p[m]]=g);return y},"o"),e=[6,8,10,11,12,14,16,17,20,21],r=[1,9],a=[1,10],i=[1,11],s=[1,12],n=[1,13],o=[1,16],h=[1,17],u={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:l(function(g,y,m,x,v,T,I){var B=T.length-1;switch(v){case 1:return T[B-1];case 2:this.$=[];break;case 3:T[B-1].push(T[B]),this.$=T[B-1];break;case 4:case 5:this.$=T[B];break;case 6:case 7:this.$=[];break;case 8:x.getCommonDb().setDiagramTitle(T[B].substr(6)),this.$=T[B].substr(6);break;case 9:this.$=T[B].trim(),x.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=T[B].trim(),x.getCommonDb().setAccDescription(this.$);break;case 12:x.addSection(T[B].substr(8)),this.$=T[B].substr(8);break;case 15:x.addTask(T[B],0,""),this.$=T[B];break;case 16:x.addEvent(T[B].substr(2)),this.$=T[B];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:a,14:i,16:s,17:n,18:14,19:15,20:o,21:h},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:r,12:a,14:i,16:s,17:n,18:14,19:15,20:o,21:h},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:l(function(g,y){if(y.recoverable)this.trace(g);else{var m=new Error(g);throw m.hash=y,m}},"parseError"),parse:l(function(g){var y=this,m=[0],x=[],v=[null],T=[],I=this.table,B="",_=0,w=0,D=2,S=1,b=T.slice.call(arguments,1),C=Object.create(this.lexer),k={yy:{}};for(var E in this.yy)Object.prototype.hasOwnProperty.call(this.yy,E)&&(k.yy[E]=this.yy[E]);C.setInput(g,k.yy),k.yy.lexer=C,k.yy.parser=this,typeof C.yylloc>"u"&&(C.yylloc={});var P=C.yylloc;T.push(P);var O=C.options&&C.options.ranges;typeof k.yy.parseError=="function"?this.parseError=k.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function V(nt){m.length=m.length-2*nt,v.length=v.length-nt,T.length=T.length-nt}l(V,"popStack");function F(){var nt;return nt=x.pop()||C.lex()||S,typeof nt!="number"&&(nt instanceof Array&&(x=nt,nt=x.pop()),nt=y.symbols_[nt]||nt),nt}l(F,"lex");for(var M,R,L,q,N={},j,it,tt,pt;;){if(R=m[m.length-1],this.defaultActions[R]?L=this.defaultActions[R]:((M===null||typeof M>"u")&&(M=F()),L=I[R]&&I[R][M]),typeof L>"u"||!L.length||!L[0]){var K="";pt=[];for(j in I[R])this.terminals_[j]&&j>D&&pt.push("'"+this.terminals_[j]+"'");C.showPosition?K="Parse error on line "+(_+1)+`:
`+C.showPosition()+`
Expecting `+pt.join(", ")+", got '"+(this.terminals_[M]||M)+"'":K="Parse error on line "+(_+1)+": Unexpected "+(M==S?"end of input":"'"+(this.terminals_[M]||M)+"'"),this.parseError(K,{text:C.match,token:this.terminals_[M]||M,line:C.yylineno,loc:P,expected:pt})}if(L[0]instanceof Array&&L.length>1)throw new Error("Parse Error: multiple actions possible at state: "+R+", token: "+M);switch(L[0]){case 1:m.push(M),v.push(C.yytext),T.push(C.yylloc),m.push(L[1]),M=null,w=C.yyleng,B=C.yytext,_=C.yylineno,P=C.yylloc;break;case 2:if(it=this.productions_[L[1]][1],N.$=v[v.length-it],N._$={first_line:T[T.length-(it||1)].first_line,last_line:T[T.length-1].last_line,first_column:T[T.length-(it||1)].first_column,last_column:T[T.length-1].last_column},O&&(N._$.range=[T[T.length-(it||1)].range[0],T[T.length-1].range[1]]),q=this.performAction.apply(N,[B,w,_,k.yy,L[1],v,T].concat(b)),typeof q<"u")return q;it&&(m=m.slice(0,-1*it*2),v=v.slice(0,-1*it),T=T.slice(0,-1*it)),m.push(this.productions_[L[1]][0]),v.push(N.$),T.push(N._$),tt=I[m[m.length-2]][m[m.length-1]],m.push(tt);break;case 3:return!0}}return!0},"parse")},d=function(){var p={EOF:1,parseError:l(function(y,m){if(this.yy.parser)this.yy.parser.parseError(y,m);else throw new Error(y)},"parseError"),setInput:l(function(g,y){return this.yy=y||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g;var y=g.match(/(?:\r\n?|\n).*/g);return y?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g},"input"),unput:l(function(g){var y=g.length,m=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-y),this.offset-=y;var x=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var v=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===x.length?this.yylloc.first_column:0)+x[x.length-m.length].length-m[0].length:this.yylloc.first_column-y},this.options.ranges&&(this.yylloc.range=[v[0],v[0]+this.yyleng-y]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(g){this.unput(this.match.slice(g))},"less"),pastInput:l(function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var g=this.pastInput(),y=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+y+"^"},"showPosition"),test_match:l(function(g,y){var m,x,v;if(this.options.backtrack_lexer&&(v={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(v.yylloc.range=this.yylloc.range.slice(0))),x=g[0].match(/(?:\r\n?|\n).*/g),x&&(this.yylineno+=x.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:x?x[x.length-1].length-x[x.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],m=this.performAction.call(this,this.yy,this,y,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var T in v)this[T]=v[T];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,y,m,x;this._more||(this.yytext="",this.match="");for(var v=this._currentRules(),T=0;T<v.length;T++)if(m=this._input.match(this.rules[v[T]]),m&&(!y||m[0].length>y[0].length)){if(y=m,x=T,this.options.backtrack_lexer){if(g=this.test_match(m,v[T]),g!==!1)return g;if(this._backtrack){y=!1;continue}else return!1}else if(!this.options.flex)break}return y?(g=this.test_match(y,v[x]),g!==!1?g:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var y=this.next();return y||this.lex()},"lex"),begin:l(function(y){this.conditionStack.push(y)},"begin"),popState:l(function(){var y=this.conditionStack.length-1;return y>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(y){return y=this.conditionStack.length-1-Math.abs(y||0),y>=0?this.conditionStack[y]:"INITIAL"},"topState"),pushState:l(function(y){this.begin(y)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(y,m,x,v){switch(x){case 0:break;case 1:break;case 2:return 10;case 3:break;case 4:break;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}},"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s[^:\n]+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};return p}();u.lexer=d;function f(){this.yy={}}return l(f,"Parser"),f.prototype=u,u.Parser=f,new f}();Xc.parser=Xc;var w9=Xc,sx={};I1(sx,{addEvent:()=>px,addSection:()=>cx,addTask:()=>dx,addTaskOrg:()=>fx,clear:()=>lx,default:()=>E9,getCommonDb:()=>ox,getSections:()=>hx,getTasks:()=>ux});var Os="",nx=0,Fu=[],jo=[],Ms=[],ox=l(()=>hh,"getCommonDb"),lx=l(function(){Fu.length=0,jo.length=0,Os="",Ms.length=0,Ye()},"clear"),cx=l(function(t){Os=t,Fu.push(t)},"addSection"),hx=l(function(){return Fu},"getSections"),ux=l(function(){let t=h1();const e=100;let r=0;for(;!t&&r<e;)t=h1(),r++;return jo.push(...Ms),jo},"getTasks"),dx=l(function(t,e,r){const a={id:nx++,section:Os,type:Os,task:t,score:e||0,events:r?[r]:[]};Ms.push(a)},"addTask"),px=l(function(t){Ms.find(r=>r.id===nx-1).events.push(t)},"addEvent"),fx=l(function(t){const e={section:Os,type:Os,description:t,task:t,classes:[]};jo.push(e)},"addTaskOrg"),h1=l(function(){const t=l(function(r){return Ms[r].processed},"compileTask");let e=!0;for(const[r,a]of Ms.entries())t(r),e=e&&a.processed;return e},"compileTasks"),E9={clear:lx,getCommonDb:ox,addSection:cx,getSections:hx,getTasks:ux,addTask:dx,addTaskOrg:fx,addEvent:px},A9=12,El=l(function(t,e){const r=t.append("rect");return r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),r.attr("rx",e.rx),r.attr("ry",e.ry),e.class!==void 0&&r.attr("class",e.class),r},"drawRect"),L9=l(function(t,e){const a=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=t.append("g");i.append("circle").attr("cx",e.cx-15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",e.cx+15/3).attr("cy",e.cy-15/3).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666");function s(h){const u=Cs().startAngle(Math.PI/2).endAngle(3*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}l(s,"smile");function n(h){const u=Cs().startAngle(3*Math.PI/2).endAngle(5*(Math.PI/2)).innerRadius(7.5).outerRadius(6.8181818181818175);h.append("path").attr("class","mouth").attr("d",u).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}l(n,"sad");function o(h){h.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return l(o,"ambivalent"),e.score>3?s(i):e.score<3?n(i):o(i),a},"drawFace"),B9=l(function(t,e){const r=t.append("circle");return r.attr("cx",e.cx),r.attr("cy",e.cy),r.attr("class","actor-"+e.pos),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("r",e.r),r.class!==void 0&&r.attr("class",r.class),e.title!==void 0&&r.append("title").text(e.title),r},"drawCircle"),gx=l(function(t,e){const r=e.text.replace(/<br\s*\/?>/gi," "),a=t.append("text");a.attr("x",e.x),a.attr("y",e.y),a.attr("class","legend"),a.style("text-anchor",e.anchor),e.class!==void 0&&a.attr("class",e.class);const i=a.append("tspan");return i.attr("x",e.x+e.textMargin*2),i.text(r),a},"drawText"),D9=l(function(t,e){function r(i,s,n,o,h){return i+","+s+" "+(i+n)+","+s+" "+(i+n)+","+(s+o-h)+" "+(i+n-h*1.2)+","+(s+o)+" "+i+","+(s+o)}l(r,"genPoints");const a=t.append("polygon");a.attr("points",r(e.x,e.y,50,20,7)),a.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,gx(t,e)},"drawLabel"),R9=l(function(t,e,r){const a=t.append("g"),i=Pu();i.x=e.x,i.y=e.y,i.fill=e.fill,i.width=r.width,i.height=r.height,i.class="journey-section section-type-"+e.num,i.rx=3,i.ry=3,El(a,i),yx(r)(e.text,a,i.x,i.y,i.width,i.height,{class:"journey-section section-type-"+e.num},r,e.colour)},"drawSection"),u1=-1,I9=l(function(t,e,r){const a=e.x+r.width/2,i=t.append("g");u1++;const s=300+5*30;i.append("line").attr("id","task"+u1).attr("x1",a).attr("y1",e.y).attr("x2",a).attr("y2",s).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),L9(i,{cx:a,cy:300+(5-e.score)*30,score:e.score});const n=Pu();n.x=e.x,n.y=e.y,n.fill=e.fill,n.width=r.width,n.height=r.height,n.class="task task-type-"+e.num,n.rx=3,n.ry=3,El(i,n),yx(r)(e.task,i,n.x,n.y,n.width,n.height,{class:"task"},r,e.colour)},"drawTask"),N9=l(function(t,e){El(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()},"drawBackgroundRect"),F9=l(function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}},"getTextObj"),Pu=l(function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}},"getNoteRect"),yx=function(){function t(i,s,n,o,h,u,d,f){const p=s.append("text").attr("x",n+h/2).attr("y",o+u/2+5).style("font-color",f).style("text-anchor","middle").text(i);a(p,d)}l(t,"byText");function e(i,s,n,o,h,u,d,f,p){const{taskFontSize:g,taskFontFamily:y}=f,m=i.split(/<br\s*\/?>/gi);for(let x=0;x<m.length;x++){const v=x*g-g*(m.length-1)/2,T=s.append("text").attr("x",n+h/2).attr("y",o).attr("fill",p).style("text-anchor","middle").style("font-size",g).style("font-family",y);T.append("tspan").attr("x",n+h/2).attr("dy",v).text(m[x]),T.attr("y",o+u/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),a(T,d)}}l(e,"byTspan");function r(i,s,n,o,h,u,d,f){const p=s.append("switch"),y=p.append("foreignObject").attr("x",n).attr("y",o).attr("width",h).attr("height",u).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");y.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(i),e(i,p,n,o,h,u,d,f),a(y,d)}l(r,"byFo");function a(i,s){for(const n in s)n in s&&i.attr(n,s[n])}return l(a,"_setTextAttrs"),function(i){return i.textPlacement==="fo"?r:i.textPlacement==="old"?t:e}}(),P9=l(function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")},"initGraphics");function Ou(t,e){t.each(function(){var r=yt(this),a=r.text().split(/(\s+|<br>)/).reverse(),i,s=[],n=1.1,o=r.attr("y"),h=parseFloat(r.attr("dy")),u=r.text(null).append("tspan").attr("x",0).attr("y",o).attr("dy",h+"em");for(let d=0;d<a.length;d++)i=a[a.length-1-d],s.push(i),u.text(s.join(" ").trim()),(u.node().getComputedTextLength()>e||i==="<br>")&&(s.pop(),u.text(s.join(" ").trim()),i==="<br>"?s=[""]:s=[i],u=r.append("tspan").attr("x",0).attr("y",o).attr("dy",n+"em").text(i))})}l(Ou,"wrap");var O9=l(function(t,e,r,a){var f;const i=r%A9-1,s=t.append("g");e.section=i,s.attr("class",(e.class?e.class+" ":"")+"timeline-node "+("section-"+i));const n=s.append("g"),o=s.append("g"),u=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Ou,e.width).node().getBBox(),d=(f=a.fontSize)!=null&&f.replace?a.fontSize.replace("px",""):a.fontSize;return e.height=u.height+d*1.1*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),$9(n,e,i,a),e},"drawNode"),M9=l(function(t,e,r){var o;const a=t.append("g"),s=a.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(Ou,e.width).node().getBBox(),n=(o=r.fontSize)!=null&&o.replace?r.fontSize.replace("px",""):r.fontSize;return a.remove(),s.height+n*1.1*.5+e.padding},"getVirtualNodeHeight"),$9=l(function(t,e,r){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${-e.height+2*5} q0,-5 5,-5 h${e.width-2*5} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)},"defaultBkg"),na={drawRect:El,drawCircle:B9,drawSection:R9,drawText:gx,drawLabel:D9,drawTask:I9,drawBackgroundRect:N9,getTextObj:F9,getNoteRect:Pu,initGraphics:P9,drawNode:O9,getVirtualNodeHeight:M9},V9=l(function(t,e,r,a){var b,C;const i=H(),s=i.leftMargin??50;A.debug("timeline",a.db);const n=i.securityLevel;let o;n==="sandbox"&&(o=yt("#i"+e));const u=(n==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body")).select("#"+e);u.append("g");const d=a.db.getTasks(),f=a.db.getCommonDb().getDiagramTitle();A.debug("task",d),na.initGraphics(u);const p=a.db.getSections();A.debug("sections",p);let g=0,y=0,m=0,x=0,v=50+s,T=50;x=50;let I=0,B=!0;p.forEach(function(k){const E={number:I,descr:k,section:I,width:150,padding:20,maxHeight:g},P=na.getVirtualNodeHeight(u,E,i);A.debug("sectionHeight before draw",P),g=Math.max(g,P+20)});let _=0,w=0;A.debug("tasks.length",d.length);for(const[k,E]of d.entries()){const P={number:k,descr:E,section:E.section,width:150,padding:20,maxHeight:y},O=na.getVirtualNodeHeight(u,P,i);A.debug("taskHeight before draw",O),y=Math.max(y,O+20),_=Math.max(_,E.events.length);let V=0;for(const F of E.events){const M={descr:F,section:E.section,number:E.section,width:150,padding:20,maxHeight:50};V+=na.getVirtualNodeHeight(u,M,i)}w=Math.max(w,V)}A.debug("maxSectionHeight before draw",g),A.debug("maxTaskHeight before draw",y),p&&p.length>0?p.forEach(k=>{const E=d.filter(F=>F.section===k),P={number:I,descr:k,section:I,width:200*Math.max(E.length,1)-50,padding:20,maxHeight:g};A.debug("sectionNode",P);const O=u.append("g"),V=na.drawNode(O,P,I,i);A.debug("sectionNode output",V),O.attr("transform",`translate(${v}, ${x})`),T+=g+50,E.length>0&&d1(u,E,I,v,T,y,i,_,w,g,!1),v+=200*Math.max(E.length,1),T=x,I++}):(B=!1,d1(u,d,I,v,T,y,i,_,w,g,!0));const D=u.node().getBBox();A.debug("bounds",D),f&&u.append("text").text(f).attr("x",D.width/2-s).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),m=B?g+y+150:y+100,u.append("g").attr("class","lineWrapper").append("line").attr("x1",s).attr("y1",m).attr("x2",D.width+3*s).attr("y2",m).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),zs(void 0,u,((b=i.timeline)==null?void 0:b.padding)??50,((C=i.timeline)==null?void 0:C.useMaxWidth)??!1)},"draw"),d1=l(function(t,e,r,a,i,s,n,o,h,u,d){var f;for(const p of e){const g={descr:p.task,section:r,number:r,width:150,padding:20,maxHeight:s};A.debug("taskNode",g);const y=t.append("g").attr("class","taskWrapper"),x=na.drawNode(y,g,r,n).height;if(A.debug("taskHeight after draw",x),y.attr("transform",`translate(${a}, ${i})`),s=Math.max(s,x),p.events){const v=t.append("g").attr("class","lineWrapper");let T=s;i+=100,T=T+z9(t,p.events,r,a,i,n),i-=100,v.append("line").attr("x1",a+190/2).attr("y1",i+s).attr("x2",a+190/2).attr("y2",i+s+(d?s:u)+h+120).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}a=a+200,d&&!((f=n.timeline)!=null&&f.disableMulticolor)&&r++}i=i-10},"drawTasks"),z9=l(function(t,e,r,a,i,s){let n=0;const o=i;i=i+100;for(const h of e){const u={descr:h,section:r,number:r,width:150,padding:20,maxHeight:50};A.debug("eventNode",u);const d=t.append("g").attr("class","eventWrapper"),p=na.drawNode(d,u,r,s).height;n=n+p,d.attr("transform",`translate(${a}, ${i})`),i=i+10+p}return i=o,n},"drawEvents"),W9={setConf:l(()=>{},"setConf"),draw:V9},q9=l(t=>{let e="";for(let r=0;r<t.THEME_COLOR_LIMIT;r++)t["lineColor"+r]=t["lineColor"+r]||t["cScaleInv"+r],ji(t["lineColor"+r])?t["lineColor"+r]=Dt(t["lineColor"+r],20):t["lineColor"+r]=zt(t["lineColor"+r],20);for(let r=0;r<t.THEME_COLOR_LIMIT;r++){const a=""+(17-3*r);e+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} path  {
      fill: ${t["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${t["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${t["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${a};
    }
    .section-${r-1} line {
      stroke: ${t["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .lineWrapper line{
      stroke: ${t["cScaleLabel"+r]} ;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},"genSections"),Y9=l(t=>`
  .edge {
    stroke-width: 3;
  }
  ${q9(t)}
  .section-root rect, .section-root path, .section-root circle  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .eventWrapper  {
   filter: brightness(120%);
  }
`,"getStyles"),H9=Y9,G9={db:sx,renderer:W9,parser:w9,styles:H9};const U9=Object.freeze(Object.defineProperty({__proto__:null,diagram:G9},Symbol.toStringTag,{value:"Module"}));var Kc=function(){var t=l(function(B,_,w,D){for(w=w||{},D=B.length;D--;w[B[D]]=_);return w},"o"),e=[1,4],r=[1,13],a=[1,12],i=[1,15],s=[1,16],n=[1,20],o=[1,19],h=[6,7,8],u=[1,26],d=[1,24],f=[1,25],p=[6,7,11],g=[1,6,13,15,16,19,22],y=[1,33],m=[1,34],x=[1,6,7,11,13,15,16,19,22],v={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,MINDMAP:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,ICON:15,CLASS:16,nodeWithId:17,nodeWithoutId:18,NODE_DSTART:19,NODE_DESCR:20,NODE_DEND:21,NODE_ID:22,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"MINDMAP",11:"EOF",13:"SPACELIST",15:"ICON",16:"CLASS",19:"NODE_DSTART",20:"NODE_DESCR",21:"NODE_DEND",22:"NODE_ID"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,2],[12,2],[12,2],[12,1],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[18,3],[17,1],[17,4]],performAction:l(function(_,w,D,S,b,C,k){var E=C.length-1;switch(b){case 6:case 7:return S;case 8:S.getLogger().trace("Stop NL ");break;case 9:S.getLogger().trace("Stop EOF ");break;case 11:S.getLogger().trace("Stop NL2 ");break;case 12:S.getLogger().trace("Stop EOF2 ");break;case 15:S.getLogger().info("Node: ",C[E].id),S.addNode(C[E-1].length,C[E].id,C[E].descr,C[E].type);break;case 16:S.getLogger().trace("Icon: ",C[E]),S.decorateNode({icon:C[E]});break;case 17:case 21:S.decorateNode({class:C[E]});break;case 18:S.getLogger().trace("SPACELIST");break;case 19:S.getLogger().trace("Node: ",C[E].id),S.addNode(0,C[E].id,C[E].descr,C[E].type);break;case 20:S.decorateNode({icon:C[E]});break;case 25:S.getLogger().trace("node found ..",C[E-2]),this.$={id:C[E-1],descr:C[E-1],type:S.getType(C[E-2],C[E])};break;case 26:this.$={id:C[E],descr:C[E],type:S.nodeType.DEFAULT};break;case 27:S.getLogger().trace("node found ..",C[E-3]),this.$={id:C[E-3],descr:C[E-1],type:S.getType(C[E-2],C[E])};break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:r,7:[1,10],9:9,12:11,13:a,14:14,15:i,16:s,17:17,18:18,19:n,22:o},t(h,[2,3]),{1:[2,2]},t(h,[2,4]),t(h,[2,5]),{1:[2,6],6:r,12:21,13:a,14:14,15:i,16:s,17:17,18:18,19:n,22:o},{6:r,9:22,12:11,13:a,14:14,15:i,16:s,17:17,18:18,19:n,22:o},{6:u,7:d,10:23,11:f},t(p,[2,22],{17:17,18:18,14:27,15:[1,28],16:[1,29],19:n,22:o}),t(p,[2,18]),t(p,[2,19]),t(p,[2,20]),t(p,[2,21]),t(p,[2,23]),t(p,[2,24]),t(p,[2,26],{19:[1,30]}),{20:[1,31]},{6:u,7:d,10:32,11:f},{1:[2,7],6:r,12:21,13:a,14:14,15:i,16:s,17:17,18:18,19:n,22:o},t(g,[2,14],{7:y,11:m}),t(x,[2,8]),t(x,[2,9]),t(x,[2,10]),t(p,[2,15]),t(p,[2,16]),t(p,[2,17]),{20:[1,35]},{21:[1,36]},t(g,[2,13],{7:y,11:m}),t(x,[2,11]),t(x,[2,12]),{21:[1,37]},t(p,[2,25]),t(p,[2,27])],defaultActions:{2:[2,1],6:[2,2]},parseError:l(function(_,w){if(w.recoverable)this.trace(_);else{var D=new Error(_);throw D.hash=w,D}},"parseError"),parse:l(function(_){var w=this,D=[0],S=[],b=[null],C=[],k=this.table,E="",P=0,O=0,V=2,F=1,M=C.slice.call(arguments,1),R=Object.create(this.lexer),L={yy:{}};for(var q in this.yy)Object.prototype.hasOwnProperty.call(this.yy,q)&&(L.yy[q]=this.yy[q]);R.setInput(_,L.yy),L.yy.lexer=R,L.yy.parser=this,typeof R.yylloc>"u"&&(R.yylloc={});var N=R.yylloc;C.push(N);var j=R.options&&R.options.ranges;typeof L.yy.parseError=="function"?this.parseError=L.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function it(z){D.length=D.length-2*z,b.length=b.length-z,C.length=C.length-z}l(it,"popStack");function tt(){var z;return z=S.pop()||R.lex()||F,typeof z!="number"&&(z instanceof Array&&(S=z,z=S.pop()),z=w.symbols_[z]||z),z}l(tt,"lex");for(var pt,K,nt,ht,st={},rt,Z,at,Q;;){if(K=D[D.length-1],this.defaultActions[K]?nt=this.defaultActions[K]:((pt===null||typeof pt>"u")&&(pt=tt()),nt=k[K]&&k[K][pt]),typeof nt>"u"||!nt.length||!nt[0]){var lt="";Q=[];for(rt in k[K])this.terminals_[rt]&&rt>V&&Q.push("'"+this.terminals_[rt]+"'");R.showPosition?lt="Parse error on line "+(P+1)+`:
`+R.showPosition()+`
Expecting `+Q.join(", ")+", got '"+(this.terminals_[pt]||pt)+"'":lt="Parse error on line "+(P+1)+": Unexpected "+(pt==F?"end of input":"'"+(this.terminals_[pt]||pt)+"'"),this.parseError(lt,{text:R.match,token:this.terminals_[pt]||pt,line:R.yylineno,loc:N,expected:Q})}if(nt[0]instanceof Array&&nt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+pt);switch(nt[0]){case 1:D.push(pt),b.push(R.yytext),C.push(R.yylloc),D.push(nt[1]),pt=null,O=R.yyleng,E=R.yytext,P=R.yylineno,N=R.yylloc;break;case 2:if(Z=this.productions_[nt[1]][1],st.$=b[b.length-Z],st._$={first_line:C[C.length-(Z||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(Z||1)].first_column,last_column:C[C.length-1].last_column},j&&(st._$.range=[C[C.length-(Z||1)].range[0],C[C.length-1].range[1]]),ht=this.performAction.apply(st,[E,O,P,L.yy,nt[1],b,C].concat(M)),typeof ht<"u")return ht;Z&&(D=D.slice(0,-1*Z*2),b=b.slice(0,-1*Z),C=C.slice(0,-1*Z)),D.push(this.productions_[nt[1]][0]),b.push(st.$),C.push(st._$),at=k[D[D.length-2]][D[D.length-1]],D.push(at);break;case 3:return!0}}return!0},"parse")},T=function(){var B={EOF:1,parseError:l(function(w,D){if(this.yy.parser)this.yy.parser.parseError(w,D);else throw new Error(w)},"parseError"),setInput:l(function(_,w){return this.yy=w||this.yy||{},this._input=_,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var _=this._input[0];this.yytext+=_,this.yyleng++,this.offset++,this.match+=_,this.matched+=_;var w=_.match(/(?:\r\n?|\n).*/g);return w?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),_},"input"),unput:l(function(_){var w=_.length,D=_.split(/(?:\r\n?|\n)/g);this._input=_+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-w),this.offset-=w;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),D.length-1&&(this.yylineno-=D.length-1);var b=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:D?(D.length===S.length?this.yylloc.first_column:0)+S[S.length-D.length].length-D[0].length:this.yylloc.first_column-w},this.options.ranges&&(this.yylloc.range=[b[0],b[0]+this.yyleng-w]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(_){this.unput(this.match.slice(_))},"less"),pastInput:l(function(){var _=this.matched.substr(0,this.matched.length-this.match.length);return(_.length>20?"...":"")+_.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var _=this.match;return _.length<20&&(_+=this._input.substr(0,20-_.length)),(_.substr(0,20)+(_.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var _=this.pastInput(),w=new Array(_.length+1).join("-");return _+this.upcomingInput()+`
`+w+"^"},"showPosition"),test_match:l(function(_,w){var D,S,b;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(b.yylloc.range=this.yylloc.range.slice(0))),S=_[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+_[0].length},this.yytext+=_[0],this.match+=_[0],this.matches=_,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(_[0].length),this.matched+=_[0],D=this.performAction.call(this,this.yy,this,w,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),D)return D;if(this._backtrack){for(var C in b)this[C]=b[C];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var _,w,D,S;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),C=0;C<b.length;C++)if(D=this._input.match(this.rules[b[C]]),D&&(!w||D[0].length>w[0].length)){if(w=D,S=C,this.options.backtrack_lexer){if(_=this.test_match(D,b[C]),_!==!1)return _;if(this._backtrack){w=!1;continue}else return!1}else if(!this.options.flex)break}return w?(_=this.test_match(w,b[S]),_!==!1?_:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var w=this.next();return w||this.lex()},"lex"),begin:l(function(w){this.conditionStack.push(w)},"begin"),popState:l(function(){var w=this.conditionStack.length-1;return w>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(w){return w=this.conditionStack.length-1-Math.abs(w||0),w>=0?this.conditionStack[w]:"INITIAL"},"topState"),pushState:l(function(w){this.begin(w)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(w,D,S,b){switch(S){case 0:return w.getLogger().trace("Found comment",D.yytext),6;case 1:return 8;case 2:this.begin("CLASS");break;case 3:return this.popState(),16;case 4:this.popState();break;case 5:w.getLogger().trace("Begin icon"),this.begin("ICON");break;case 6:return w.getLogger().trace("SPACELINE"),6;case 7:return 7;case 8:return 15;case 9:w.getLogger().trace("end icon"),this.popState();break;case 10:return w.getLogger().trace("Exploding node"),this.begin("NODE"),19;case 11:return w.getLogger().trace("Cloud"),this.begin("NODE"),19;case 12:return w.getLogger().trace("Explosion Bang"),this.begin("NODE"),19;case 13:return w.getLogger().trace("Cloud Bang"),this.begin("NODE"),19;case 14:return this.begin("NODE"),19;case 15:return this.begin("NODE"),19;case 16:return this.begin("NODE"),19;case 17:return this.begin("NODE"),19;case 18:return 13;case 19:return 22;case 20:return 11;case 21:this.begin("NSTR2");break;case 22:return"NODE_DESCR";case 23:this.popState();break;case 24:w.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 25:return w.getLogger().trace("description:",D.yytext),"NODE_DESCR";case 26:this.popState();break;case 27:return this.popState(),w.getLogger().trace("node end ))"),"NODE_DEND";case 28:return this.popState(),w.getLogger().trace("node end )"),"NODE_DEND";case 29:return this.popState(),w.getLogger().trace("node end ...",D.yytext),"NODE_DEND";case 30:return this.popState(),w.getLogger().trace("node end (("),"NODE_DEND";case 31:return this.popState(),w.getLogger().trace("node end (-"),"NODE_DEND";case 32:return this.popState(),w.getLogger().trace("node end (-"),"NODE_DEND";case 33:return this.popState(),w.getLogger().trace("node end (("),"NODE_DEND";case 34:return this.popState(),w.getLogger().trace("node end (("),"NODE_DEND";case 35:return w.getLogger().trace("Long description:",D.yytext),20;case 36:return w.getLogger().trace("Long description:",D.yytext),20}},"anonymous"),rules:[/^(?:\s*%%.*)/i,/^(?:mindmap\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{CLASS:{rules:[3,4],inclusive:!1},ICON:{rules:[8,9],inclusive:!1},NSTR2:{rules:[22,23],inclusive:!1},NSTR:{rules:[25,26],inclusive:!1},NODE:{rules:[21,24,27,28,29,30,31,32,33,34,35,36],inclusive:!1},INITIAL:{rules:[0,1,2,5,6,7,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};return B}();v.lexer=T;function I(){this.yy={}}return l(I,"Parser"),I.prototype=v,v.Parser=I,new I}();Kc.parser=Kc;var j9=Kc,Xr=[],mx=0,Mu={},X9=l(()=>{Xr=[],mx=0,Mu={}},"clear"),K9=l(function(t){for(let e=Xr.length-1;e>=0;e--)if(Xr[e].level<t)return Xr[e];return null},"getParent"),Q9=l(()=>Xr.length>0?Xr[0]:null,"getMindmap"),Z9=l((t,e,r,a)=>{var h,u;A.info("addNode",t,e,r,a);const i=H();let s=((h=i.mindmap)==null?void 0:h.padding)??pe.mindmap.padding;switch(a){case Me.ROUNDED_RECT:case Me.RECT:case Me.HEXAGON:s*=2}const n={id:mx++,nodeId:me(e,i),level:t,descr:me(r,i),type:a,children:[],width:((u=i.mindmap)==null?void 0:u.maxNodeWidth)??pe.mindmap.maxNodeWidth,padding:s},o=K9(t);if(o)o.children.push(n),Xr.push(n);else if(Xr.length===0)Xr.push(n);else throw new Error('There can be only one root. No parent could be found for ("'+n.descr+'")')},"addNode"),Me={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},J9=l((t,e)=>{switch(A.debug("In get type",t,e),t){case"[":return Me.RECT;case"(":return e===")"?Me.ROUNDED_RECT:Me.CLOUD;case"((":return Me.CIRCLE;case")":return Me.CLOUD;case"))":return Me.BANG;case"{{":return Me.HEXAGON;default:return Me.DEFAULT}},"getType"),tL=l((t,e)=>{Mu[t]=e},"setElementForId"),eL=l(t=>{if(!t)return;const e=H(),r=Xr[Xr.length-1];t.icon&&(r.icon=me(t.icon,e)),t.class&&(r.class=me(t.class,e))},"decorateNode"),rL=l(t=>{switch(t){case Me.DEFAULT:return"no-border";case Me.RECT:return"rect";case Me.ROUNDED_RECT:return"rounded-rect";case Me.CIRCLE:return"circle";case Me.CLOUD:return"cloud";case Me.BANG:return"bang";case Me.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),iL=l(()=>A,"getLogger"),aL=l(t=>Mu[t],"getElementById"),sL={clear:X9,addNode:Z9,getMindmap:Q9,nodeType:Me,getType:J9,setElementForId:tL,decorateNode:eL,type2Str:rL,getLogger:iL,getElementById:aL},nL=sL,oL=12,lL=l(function(t,e,r,a){e.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("d",`M0 ${r.height-5} v${-r.height+2*5} q0,-5 5,-5 h${r.width-2*5} q5,0 5,5 v${r.height-5} H0 Z`),e.append("line").attr("class","node-line-"+a).attr("x1",0).attr("y1",r.height).attr("x2",r.width).attr("y2",r.height)},"defaultBkg"),cL=l(function(t,e,r){e.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("height",r.height).attr("width",r.width)},"rectBkg"),hL=l(function(t,e,r){const a=r.width,i=r.height,s=.15*a,n=.25*a,o=.35*a,h=.2*a;e.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("d",`M0 0 a${s},${s} 0 0,1 ${a*.25},${-1*a*.1}
      a${o},${o} 1 0,1 ${a*.4},${-1*a*.1}
      a${n},${n} 1 0,1 ${a*.35},${1*a*.2}

      a${s},${s} 1 0,1 ${a*.15},${1*i*.35}
      a${h},${h} 1 0,1 ${-1*a*.15},${1*i*.65}

      a${n},${s} 1 0,1 ${-1*a*.25},${a*.15}
      a${o},${o} 1 0,1 ${-1*a*.5},0
      a${s},${s} 1 0,1 ${-1*a*.25},${-1*a*.15}

      a${s},${s} 1 0,1 ${-1*a*.1},${-1*i*.35}
      a${h},${h} 1 0,1 ${a*.1},${-1*i*.65}

    H0 V0 Z`)},"cloudBkg"),uL=l(function(t,e,r){const a=r.width,i=r.height,s=.15*a;e.append("path").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("d",`M0 0 a${s},${s} 1 0,0 ${a*.25},${-1*i*.1}
      a${s},${s} 1 0,0 ${a*.25},0
      a${s},${s} 1 0,0 ${a*.25},0
      a${s},${s} 1 0,0 ${a*.25},${1*i*.1}

      a${s},${s} 1 0,0 ${a*.15},${1*i*.33}
      a${s*.8},${s*.8} 1 0,0 0,${1*i*.34}
      a${s},${s} 1 0,0 ${-1*a*.15},${1*i*.33}

      a${s},${s} 1 0,0 ${-1*a*.25},${i*.15}
      a${s},${s} 1 0,0 ${-1*a*.25},0
      a${s},${s} 1 0,0 ${-1*a*.25},0
      a${s},${s} 1 0,0 ${-1*a*.25},${-1*i*.15}

      a${s},${s} 1 0,0 ${-1*a*.1},${-1*i*.33}
      a${s*.8},${s*.8} 1 0,0 0,${-1*i*.34}
      a${s},${s} 1 0,0 ${a*.1},${-1*i*.33}

    H0 V0 Z`)},"bangBkg"),dL=l(function(t,e,r){e.append("circle").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("r",r.width/2)},"circleBkg");function xx(t,e,r,a,i){return t.insert("polygon",":first-child").attr("points",a.map(function(s){return s.x+","+s.y}).join(" ")).attr("transform","translate("+(i.width-e)/2+", "+r+")")}l(xx,"insertPolygonShape");var pL=l(function(t,e,r){const a=r.height,s=a/4,n=r.width-r.padding+2*s,o=[{x:s,y:0},{x:n-s,y:0},{x:n,y:-a/2},{x:n-s,y:-a},{x:s,y:-a},{x:0,y:-a/2}];xx(e,n,a,o,r)},"hexagonBkg"),fL=l(function(t,e,r){e.append("rect").attr("id","node-"+r.id).attr("class","node-bkg node-"+t.type2Str(r.type)).attr("height",r.height).attr("rx",r.padding).attr("ry",r.padding).attr("width",r.width)},"roundedRectBkg"),gL=l(async function(t,e,r,a,i){const s=i.htmlLabels,n=a%(oL-1),o=e.append("g");r.section=n;let h="section-"+n;n<0&&(h+=" section-root"),o.attr("class",(r.class?r.class+" ":"")+"mindmap-node "+h);const u=o.append("g"),d=o.append("g"),f=r.descr.replace(/(<br\/*>)/g,`
`);await Wr(d,f,{useHtmlLabels:s,width:r.width,classes:"mindmap-node-label"},i),s||d.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle");const p=d.node().getBBox(),[g]=Xi(i.fontSize);if(r.height=p.height+g*1.1*.5+r.padding,r.width=p.width+2*r.padding,r.icon)if(r.type===t.nodeType.CIRCLE)r.height+=50,r.width+=50,o.append("foreignObject").attr("height","50px").attr("width",r.width).attr("style","text-align: center;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+n+" "+r.icon),d.attr("transform","translate("+r.width/2+", "+(r.height/2-1.5*r.padding)+")");else{r.width+=50;const y=r.height;r.height=Math.max(y,60);const m=Math.abs(r.height-y);o.append("foreignObject").attr("width","60px").attr("height",r.height).attr("style","text-align: center;margin-top:"+m/2+"px;").append("div").attr("class","icon-container").append("i").attr("class","node-icon-"+n+" "+r.icon),d.attr("transform","translate("+(25+r.width/2)+", "+(m/2+r.padding/2)+")")}else if(s){const y=(r.width-p.width)/2,m=(r.height-p.height)/2;d.attr("transform","translate("+y+", "+m+")")}else{const y=r.width/2,m=r.padding/2;d.attr("transform","translate("+y+", "+m+")")}switch(r.type){case t.nodeType.DEFAULT:lL(t,u,r,n);break;case t.nodeType.ROUNDED_RECT:fL(t,u,r,n);break;case t.nodeType.RECT:cL(t,u,r,n);break;case t.nodeType.CIRCLE:u.attr("transform","translate("+r.width/2+", "+ +r.height/2+")"),dL(t,u,r,n);break;case t.nodeType.CLOUD:hL(t,u,r,n);break;case t.nodeType.BANG:uL(t,u,r,n);break;case t.nodeType.HEXAGON:pL(t,u,r,n);break}return t.setElementForId(r.id,o),r.height},"drawNode"),yL=l(function(t,e){const r=t.getElementById(e.id),a=e.x||0,i=e.y||0;r.attr("transform","translate("+a+","+i+")")},"positionNode");el.use(e3);async function $u(t,e,r,a,i){await gL(t,e,r,a,i),r.children&&await Promise.all(r.children.map((s,n)=>$u(t,e,s,a<0?n:a,i)))}l($u,"drawNodes");function bx(t,e){e.edges().map((r,a)=>{const i=r.data();if(r[0]._private.bodyBounds){const s=r[0]._private.rscratch;A.trace("Edge: ",a,i),t.insert("path").attr("d",`M ${s.startX},${s.startY} L ${s.midX},${s.midY} L${s.endX},${s.endY} `).attr("class","edge section-edge-"+i.section+" edge-depth-"+i.depth)}})}l(bx,"drawEdges");function Vu(t,e,r,a){e.add({group:"nodes",data:{id:t.id.toString(),labelText:t.descr,height:t.height,width:t.width,level:a,nodeId:t.id,padding:t.padding,type:t.type},position:{x:t.x,y:t.y}}),t.children&&t.children.forEach(i=>{Vu(i,e,r,a+1),e.add({group:"edges",data:{id:`${t.id}_${i.id}`,source:t.id,target:i.id,depth:a,section:i.section}})})}l(Vu,"addNodes");function kx(t,e){return new Promise(r=>{const a=yt("body").append("div").attr("id","cy").attr("style","display:none"),i=el({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});a.remove(),Vu(t,i,e,0),i.nodes().forEach(function(s){s.layoutDimensions=()=>{const n=s.data();return{w:n.width,h:n.height}}}),i.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),i.ready(s=>{A.info("Ready",s),r(i)})})}l(kx,"layoutMindmap");function vx(t,e){e.nodes().map((r,a)=>{const i=r.data();i.x=r.position().x,i.y=r.position().y,yL(t,i);const s=t.getElementById(i.nodeId);A.info("Id:",a,"Position: (",r.position().x,", ",r.position().y,")",i),s.attr("transform",`translate(${r.position().x-i.width/2}, ${r.position().y-i.height/2})`),s.attr("attr",`apa-${a})`)})}l(vx,"positionNodes");var mL=l(async(t,e,r,a)=>{var f,p;A.debug(`Rendering mindmap diagram
`+t);const i=a.db,s=i.getMindmap();if(!s)return;const n=H();n.htmlLabels=!1;const o=Ki(e),h=o.append("g");h.attr("class","mindmap-edges");const u=o.append("g");u.attr("class","mindmap-nodes"),await $u(i,u,s,-1,n);const d=await kx(s,n);bx(h,d),vx(i,d),zs(void 0,o,((f=n.mindmap)==null?void 0:f.padding)??pe.mindmap.padding,((p=n.mindmap)==null?void 0:p.useMaxWidth)??pe.mindmap.useMaxWidth)},"draw"),xL={draw:mL},bL=l(t=>{let e="";for(let r=0;r<t.THEME_COLOR_LIMIT;r++)t["lineColor"+r]=t["lineColor"+r]||t["cScaleInv"+r],ji(t["lineColor"+r])?t["lineColor"+r]=Dt(t["lineColor"+r],20):t["lineColor"+r]=zt(t["lineColor"+r],20);for(let r=0;r<t.THEME_COLOR_LIMIT;r++){const a=""+(17-3*r);e+=`
    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} polygon, .section-${r-1} path  {
      fill: ${t["cScale"+r]};
    }
    .section-${r-1} text {
     fill: ${t["cScaleLabel"+r]};
    }
    .node-icon-${r-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+r]};
    }
    .section-edge-${r-1}{
      stroke: ${t["cScale"+r]};
    }
    .edge-depth-${r-1}{
      stroke-width: ${a};
    }
    .section-${r-1} line {
      stroke: ${t["cScaleInv"+r]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }
    `}return e},"genSections"),kL=l(t=>`
  .edge {
    stroke-width: 3;
  }
  ${bL(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .mindmap-node-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),vL=kL,TL={db:nL,renderer:xL,parser:j9,styles:vL};const _L=Object.freeze(Object.defineProperty({__proto__:null,diagram:TL},Symbol.toStringTag,{value:"Module"}));var Qc=function(){var t=l(function(D,S,b,C){for(b=b||{},C=D.length;C--;b[D[C]]=S);return b},"o"),e=[1,4],r=[1,13],a=[1,12],i=[1,15],s=[1,16],n=[1,20],o=[1,19],h=[6,7,8],u=[1,26],d=[1,24],f=[1,25],p=[6,7,11],g=[1,31],y=[6,7,11,24],m=[1,6,13,16,17,20,23],x=[1,35],v=[1,36],T=[1,6,7,11,13,16,17,20,23],I=[1,38],B={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:l(function(S,b,C,k,E,P,O){var V=P.length-1;switch(E){case 6:case 7:return k;case 8:k.getLogger().trace("Stop NL ");break;case 9:k.getLogger().trace("Stop EOF ");break;case 11:k.getLogger().trace("Stop NL2 ");break;case 12:k.getLogger().trace("Stop EOF2 ");break;case 15:k.getLogger().info("Node: ",P[V-1].id),k.addNode(P[V-2].length,P[V-1].id,P[V-1].descr,P[V-1].type,P[V]);break;case 16:k.getLogger().info("Node: ",P[V].id),k.addNode(P[V-1].length,P[V].id,P[V].descr,P[V].type);break;case 17:k.getLogger().trace("Icon: ",P[V]),k.decorateNode({icon:P[V]});break;case 18:case 23:k.decorateNode({class:P[V]});break;case 19:k.getLogger().trace("SPACELIST");break;case 20:k.getLogger().trace("Node: ",P[V-1].id),k.addNode(0,P[V-1].id,P[V-1].descr,P[V-1].type,P[V]);break;case 21:k.getLogger().trace("Node: ",P[V].id),k.addNode(0,P[V].id,P[V].descr,P[V].type);break;case 22:k.decorateNode({icon:P[V]});break;case 27:k.getLogger().trace("node found ..",P[V-2]),this.$={id:P[V-1],descr:P[V-1],type:k.getType(P[V-2],P[V])};break;case 28:this.$={id:P[V],descr:P[V],type:0};break;case 29:k.getLogger().trace("node found ..",P[V-3]),this.$={id:P[V-3],descr:P[V-1],type:k.getType(P[V-2],P[V])};break;case 30:this.$=P[V-1]+P[V];break;case 31:this.$=P[V];break}},"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:r,7:[1,10],9:9,12:11,13:a,14:14,16:i,17:s,18:17,19:18,20:n,23:o},t(h,[2,3]),{1:[2,2]},t(h,[2,4]),t(h,[2,5]),{1:[2,6],6:r,12:21,13:a,14:14,16:i,17:s,18:17,19:18,20:n,23:o},{6:r,9:22,12:11,13:a,14:14,16:i,17:s,18:17,19:18,20:n,23:o},{6:u,7:d,10:23,11:f},t(p,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:n,23:o}),t(p,[2,19]),t(p,[2,21],{15:30,24:g}),t(p,[2,22]),t(p,[2,23]),t(y,[2,25]),t(y,[2,26]),t(y,[2,28],{20:[1,32]}),{21:[1,33]},{6:u,7:d,10:34,11:f},{1:[2,7],6:r,12:21,13:a,14:14,16:i,17:s,18:17,19:18,20:n,23:o},t(m,[2,14],{7:x,11:v}),t(T,[2,8]),t(T,[2,9]),t(T,[2,10]),t(p,[2,16],{15:37,24:g}),t(p,[2,17]),t(p,[2,18]),t(p,[2,20],{24:I}),t(y,[2,31]),{21:[1,39]},{22:[1,40]},t(m,[2,13],{7:x,11:v}),t(T,[2,11]),t(T,[2,12]),t(p,[2,15],{24:I}),t(y,[2,30]),{22:[1,41]},t(y,[2,27]),t(y,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:l(function(S,b){if(b.recoverable)this.trace(S);else{var C=new Error(S);throw C.hash=b,C}},"parseError"),parse:l(function(S){var b=this,C=[0],k=[],E=[null],P=[],O=this.table,V="",F=0,M=0,R=2,L=1,q=P.slice.call(arguments,1),N=Object.create(this.lexer),j={yy:{}};for(var it in this.yy)Object.prototype.hasOwnProperty.call(this.yy,it)&&(j.yy[it]=this.yy[it]);N.setInput(S,j.yy),j.yy.lexer=N,j.yy.parser=this,typeof N.yylloc>"u"&&(N.yylloc={});var tt=N.yylloc;P.push(tt);var pt=N.options&&N.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function K(vt){C.length=C.length-2*vt,E.length=E.length-vt,P.length=P.length-vt}l(K,"popStack");function nt(){var vt;return vt=k.pop()||N.lex()||L,typeof vt!="number"&&(vt instanceof Array&&(k=vt,vt=k.pop()),vt=b.symbols_[vt]||vt),vt}l(nt,"lex");for(var ht,st,rt,Z,at={},Q,lt,z,Et;;){if(st=C[C.length-1],this.defaultActions[st]?rt=this.defaultActions[st]:((ht===null||typeof ht>"u")&&(ht=nt()),rt=O[st]&&O[st][ht]),typeof rt>"u"||!rt.length||!rt[0]){var X="";Et=[];for(Q in O[st])this.terminals_[Q]&&Q>R&&Et.push("'"+this.terminals_[Q]+"'");N.showPosition?X="Parse error on line "+(F+1)+`:
`+N.showPosition()+`
Expecting `+Et.join(", ")+", got '"+(this.terminals_[ht]||ht)+"'":X="Parse error on line "+(F+1)+": Unexpected "+(ht==L?"end of input":"'"+(this.terminals_[ht]||ht)+"'"),this.parseError(X,{text:N.match,token:this.terminals_[ht]||ht,line:N.yylineno,loc:tt,expected:Et})}if(rt[0]instanceof Array&&rt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+st+", token: "+ht);switch(rt[0]){case 1:C.push(ht),E.push(N.yytext),P.push(N.yylloc),C.push(rt[1]),ht=null,M=N.yyleng,V=N.yytext,F=N.yylineno,tt=N.yylloc;break;case 2:if(lt=this.productions_[rt[1]][1],at.$=E[E.length-lt],at._$={first_line:P[P.length-(lt||1)].first_line,last_line:P[P.length-1].last_line,first_column:P[P.length-(lt||1)].first_column,last_column:P[P.length-1].last_column},pt&&(at._$.range=[P[P.length-(lt||1)].range[0],P[P.length-1].range[1]]),Z=this.performAction.apply(at,[V,M,F,j.yy,rt[1],E,P].concat(q)),typeof Z<"u")return Z;lt&&(C=C.slice(0,-1*lt*2),E=E.slice(0,-1*lt),P=P.slice(0,-1*lt)),C.push(this.productions_[rt[1]][0]),E.push(at.$),P.push(at._$),z=O[C[C.length-2]][C[C.length-1]],C.push(z);break;case 3:return!0}}return!0},"parse")},_=function(){var D={EOF:1,parseError:l(function(b,C){if(this.yy.parser)this.yy.parser.parseError(b,C);else throw new Error(b)},"parseError"),setInput:l(function(S,b){return this.yy=b||this.yy||{},this._input=S,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var S=this._input[0];this.yytext+=S,this.yyleng++,this.offset++,this.match+=S,this.matched+=S;var b=S.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),S},"input"),unput:l(function(S){var b=S.length,C=S.split(/(?:\r\n?|\n)/g);this._input=S+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b),this.offset-=b;var k=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),C.length-1&&(this.yylineno-=C.length-1);var E=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:C?(C.length===k.length?this.yylloc.first_column:0)+k[k.length-C.length].length-C[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[E[0],E[0]+this.yyleng-b]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(S){this.unput(this.match.slice(S))},"less"),pastInput:l(function(){var S=this.matched.substr(0,this.matched.length-this.match.length);return(S.length>20?"...":"")+S.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var S=this.match;return S.length<20&&(S+=this._input.substr(0,20-S.length)),(S.substr(0,20)+(S.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var S=this.pastInput(),b=new Array(S.length+1).join("-");return S+this.upcomingInput()+`
`+b+"^"},"showPosition"),test_match:l(function(S,b){var C,k,E;if(this.options.backtrack_lexer&&(E={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(E.yylloc.range=this.yylloc.range.slice(0))),k=S[0].match(/(?:\r\n?|\n).*/g),k&&(this.yylineno+=k.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:k?k[k.length-1].length-k[k.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+S[0].length},this.yytext+=S[0],this.match+=S[0],this.matches=S,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(S[0].length),this.matched+=S[0],C=this.performAction.call(this,this.yy,this,b,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),C)return C;if(this._backtrack){for(var P in E)this[P]=E[P];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var S,b,C,k;this._more||(this.yytext="",this.match="");for(var E=this._currentRules(),P=0;P<E.length;P++)if(C=this._input.match(this.rules[E[P]]),C&&(!b||C[0].length>b[0].length)){if(b=C,k=P,this.options.backtrack_lexer){if(S=this.test_match(C,E[P]),S!==!1)return S;if(this._backtrack){b=!1;continue}else return!1}else if(!this.options.flex)break}return b?(S=this.test_match(b,E[k]),S!==!1?S:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var b=this.next();return b||this.lex()},"lex"),begin:l(function(b){this.conditionStack.push(b)},"begin"),popState:l(function(){var b=this.conditionStack.length-1;return b>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(b){return b=this.conditionStack.length-1-Math.abs(b||0),b>=0?this.conditionStack[b]:"INITIAL"},"topState"),pushState:l(function(b){this.begin(b)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(b,C,k,E){switch(k){case 0:return this.pushState("shapeData"),C.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:const P=/\n\s*/g;return C.yytext=C.yytext.replace(P,"<br/>"),24;case 4:return 24;case 5:this.popState();break;case 6:return b.getLogger().trace("Found comment",C.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 10:this.popState();break;case 11:b.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return b.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:b.getLogger().trace("end icon"),this.popState();break;case 16:return b.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return b.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return b.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return b.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:return this.begin("NODE"),20;case 21:return this.begin("NODE"),20;case 22:return this.begin("NODE"),20;case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 29:this.popState();break;case 30:b.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return b.getLogger().trace("description:",C.yytext),"NODE_DESCR";case 32:this.popState();break;case 33:return this.popState(),b.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),b.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),b.getLogger().trace("node end ...",C.yytext),"NODE_DEND";case 36:return this.popState(),b.getLogger().trace("node end (("),"NODE_DEND";case 37:return this.popState(),b.getLogger().trace("node end (-"),"NODE_DEND";case 38:return this.popState(),b.getLogger().trace("node end (-"),"NODE_DEND";case 39:return this.popState(),b.getLogger().trace("node end (("),"NODE_DEND";case 40:return this.popState(),b.getLogger().trace("node end (("),"NODE_DEND";case 41:return b.getLogger().trace("Long description:",C.yytext),21;case 42:return b.getLogger().trace("Long description:",C.yytext),21}},"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};return D}();B.lexer=_;function w(){this.yy={}}return l(w,"Parser"),w.prototype=B,B.Parser=w,new w}();Qc.parser=Qc;var CL=Qc,Mr=[],zu=[],Zc=0,Wu={},SL=l(()=>{Mr=[],zu=[],Zc=0,Wu={}},"clear"),wL=l(t=>{if(Mr.length===0)return null;const e=Mr[0].level;let r=null;for(let a=Mr.length-1;a>=0;a--)if(Mr[a].level===e&&!r&&(r=Mr[a]),Mr[a].level<e)throw new Error('Items without section detected, found section ("'+Mr[a].label+'")');return t===(r==null?void 0:r.level)?null:r},"getSection"),Tx=l(function(){return zu},"getSections"),EL=l(function(){const t=[],e=[],r=Tx(),a=H();for(const i of r){const s={id:i.id,label:me(i.label??"",a),isGroup:!0,ticket:i.ticket,shape:"kanbanSection",level:i.level,look:a.look};e.push(s);const n=Mr.filter(o=>o.parentId===i.id);for(const o of n){const h={id:o.id,parentId:i.id,label:me(o.label??"",a),isGroup:!1,ticket:o==null?void 0:o.ticket,priority:o==null?void 0:o.priority,assigned:o==null?void 0:o.assigned,icon:o==null?void 0:o.icon,shape:"kanbanItem",level:o.level,rx:5,ry:5,cssStyles:["text-align: left"]};e.push(h)}}return{nodes:e,edges:t,other:{},config:H()}},"getData"),AL=l((t,e,r,a,i)=>{var u,d;const s=H();let n=((u=s.mindmap)==null?void 0:u.padding)??pe.mindmap.padding;switch(a){case $e.ROUNDED_RECT:case $e.RECT:case $e.HEXAGON:n*=2}const o={id:me(e,s)||"kbn"+Zc++,level:t,label:me(r,s),width:((d=s.mindmap)==null?void 0:d.maxNodeWidth)??pe.mindmap.maxNodeWidth,padding:n,isGroup:!1};if(i!==void 0){let f;i.includes(`
`)?f=i+`
`:f=`{
`+i+`
}`;const p=_h(f,{schema:Th});if(p.shape&&(p.shape!==p.shape.toLowerCase()||p.shape.includes("_")))throw new Error(`No such shape: ${p.shape}. Shape names should be lowercase.`);p!=null&&p.shape&&p.shape==="kanbanItem"&&(o.shape=p==null?void 0:p.shape),p!=null&&p.label&&(o.label=p==null?void 0:p.label),p!=null&&p.icon&&(o.icon=p==null?void 0:p.icon.toString()),p!=null&&p.assigned&&(o.assigned=p==null?void 0:p.assigned.toString()),p!=null&&p.ticket&&(o.ticket=p==null?void 0:p.ticket.toString()),p!=null&&p.priority&&(o.priority=p==null?void 0:p.priority)}const h=wL(t);h?o.parentId=h.id||"kbn"+Zc++:zu.push(o),Mr.push(o)},"addNode"),$e={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},LL=l((t,e)=>{switch(A.debug("In get type",t,e),t){case"[":return $e.RECT;case"(":return e===")"?$e.ROUNDED_RECT:$e.CLOUD;case"((":return $e.CIRCLE;case")":return $e.CLOUD;case"))":return $e.BANG;case"{{":return $e.HEXAGON;default:return $e.DEFAULT}},"getType"),BL=l((t,e)=>{Wu[t]=e},"setElementForId"),DL=l(t=>{if(!t)return;const e=H(),r=Mr[Mr.length-1];t.icon&&(r.icon=me(t.icon,e)),t.class&&(r.cssClasses=me(t.class,e))},"decorateNode"),RL=l(t=>{switch(t){case $e.DEFAULT:return"no-border";case $e.RECT:return"rect";case $e.ROUNDED_RECT:return"rounded-rect";case $e.CIRCLE:return"circle";case $e.CLOUD:return"cloud";case $e.BANG:return"bang";case $e.HEXAGON:return"hexgon";default:return"no-border"}},"type2Str"),IL=l(()=>A,"getLogger"),NL=l(t=>Wu[t],"getElementById"),FL={clear:SL,addNode:AL,getSections:Tx,getData:EL,nodeType:$e,getType:LL,setElementForId:BL,decorateNode:DL,type2Str:RL,getLogger:IL,getElementById:NL},PL=FL,OL=l(async(t,e,r,a)=>{var x,v,T,I,B;A.debug(`Rendering kanban diagram
`+t);const s=a.db.getData(),n=H();n.htmlLabels=!1;const o=Ki(e),h=o.append("g");h.attr("class","sections");const u=o.append("g");u.attr("class","items");const d=s.nodes.filter(_=>_.isGroup);let f=0;const p=10,g=[];let y=25;for(const _ of d){const w=((x=n==null?void 0:n.kanban)==null?void 0:x.sectionWidth)||200;f=f+1,_.x=w*f+(f-1)*p/2,_.width=w,_.y=0,_.height=w*3,_.rx=5,_.ry=5,_.cssClasses=_.cssClasses+" section-"+f;const D=await Ih(h,_);y=Math.max(y,(v=D==null?void 0:D.labelBBox)==null?void 0:v.height),g.push(D)}let m=0;for(const _ of d){const w=g[m];m=m+1;const D=((T=n==null?void 0:n.kanban)==null?void 0:T.sectionWidth)||200,S=-D*3/2+y;let b=S;const C=s.nodes.filter(P=>P.parentId===_.id);for(const P of C){if(P.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");P.x=_.x,P.width=D-1.5*p;const V=(await ul(u,P,{config:n})).node().getBBox();P.y=b+V.height/2,await gc(P),b=P.y+V.height/2+p/2}const k=w.cluster.select("rect"),E=Math.max(b-S+3*p,50)+(y-25);k.attr("height",E)}zs(void 0,o,((I=n.mindmap)==null?void 0:I.padding)??pe.kanban.padding,((B=n.mindmap)==null?void 0:B.useMaxWidth)??pe.kanban.useMaxWidth)},"draw"),ML={draw:OL},$L=l(t=>{let e="";for(let a=0;a<t.THEME_COLOR_LIMIT;a++)t["lineColor"+a]=t["lineColor"+a]||t["cScaleInv"+a],ji(t["lineColor"+a])?t["lineColor"+a]=Dt(t["lineColor"+a],20):t["lineColor"+a]=zt(t["lineColor"+a],20);const r=l((a,i)=>t.darkMode?zt(a,i):Dt(a,i),"adjuster");for(let a=0;a<t.THEME_COLOR_LIMIT;a++){const i=""+(17-3*a);e+=`
    .section-${a-1} rect, .section-${a-1} path, .section-${a-1} circle, .section-${a-1} polygon, .section-${a-1} path  {
      fill: ${r(t["cScale"+a],10)};
      stroke: ${r(t["cScale"+a],10)};

    }
    .section-${a-1} text {
     fill: ${t["cScaleLabel"+a]};
    }
    .node-icon-${a-1} {
      font-size: 40px;
      color: ${t["cScaleLabel"+a]};
    }
    .section-edge-${a-1}{
      stroke: ${t["cScale"+a]};
    }
    .edge-depth-${a-1}{
      stroke-width: ${i};
    }
    .section-${a-1} line {
      stroke: ${t["cScaleInv"+a]} ;
      stroke-width: 3;
    }

    .disabled, .disabled circle, .disabled text {
      fill: lightgray;
    }
    .disabled text {
      fill: #efefef;
    }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.background};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }

  .kanban-ticket-link {
    fill: ${t.background};
    stroke: ${t.nodeBorder};
    text-decoration: underline;
  }
    `}return e},"genSections"),VL=l(t=>`
  .edge {
    stroke-width: 3;
  }
  ${$L(t)}
  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {
    fill: ${t.git0};
  }
  .section-root text {
    fill: ${t.gitBranchLabel0};
  }
  .icon-container {
    height:100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .edge {
    fill: none;
  }
  .cluster-label, .label {
    color: ${t.textColor};
    fill: ${t.textColor};
    }
  .kanban-label {
    dy: 1em;
    alignment-baseline: middle;
    text-anchor: middle;
    dominant-baseline: middle;
    text-align: center;
  }
`,"getStyles"),zL=VL,WL={db:PL,renderer:ML,parser:CL,styles:zL};const qL=Object.freeze(Object.defineProperty({__proto__:null,diagram:WL},Symbol.toStringTag,{value:"Module"}));var Jc=function(){var t=l(function(o,h,u,d){for(u=u||{},d=o.length;d--;u[o[d]]=h);return u},"o"),e=[1,9],r=[1,10],a=[1,5,10,12],i={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:l(function(h,u,d,f,p,g,y){var m=g.length-1;switch(p){case 7:const x=f.findOrCreateNode(g[m-4].trim().replaceAll('""','"')),v=f.findOrCreateNode(g[m-2].trim().replaceAll('""','"')),T=parseFloat(g[m].trim());f.addLink(x,v,T);break;case 8:case 9:case 11:this.$=g[m];break;case 10:this.$=g[m-1];break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:r},{1:[2,6],7:11,10:[1,12]},t(r,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(a,[2,8]),t(a,[2,9]),{19:[1,16]},t(a,[2,11]),{1:[2,1]},{1:[2,5]},t(r,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:r},{15:18,16:7,17:8,18:e,20:r},{18:[1,19]},t(r,[2,3]),{12:[1,20]},t(a,[2,10]),{15:21,16:7,17:8,18:e,20:r},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:l(function(h,u){if(u.recoverable)this.trace(h);else{var d=new Error(h);throw d.hash=u,d}},"parseError"),parse:l(function(h){var u=this,d=[0],f=[],p=[null],g=[],y=this.table,m="",x=0,v=0,T=2,I=1,B=g.slice.call(arguments,1),_=Object.create(this.lexer),w={yy:{}};for(var D in this.yy)Object.prototype.hasOwnProperty.call(this.yy,D)&&(w.yy[D]=this.yy[D]);_.setInput(h,w.yy),w.yy.lexer=_,w.yy.parser=this,typeof _.yylloc>"u"&&(_.yylloc={});var S=_.yylloc;g.push(S);var b=_.options&&_.options.ranges;typeof w.yy.parseError=="function"?this.parseError=w.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function C(j){d.length=d.length-2*j,p.length=p.length-j,g.length=g.length-j}l(C,"popStack");function k(){var j;return j=f.pop()||_.lex()||I,typeof j!="number"&&(j instanceof Array&&(f=j,j=f.pop()),j=u.symbols_[j]||j),j}l(k,"lex");for(var E,P,O,V,F={},M,R,L,q;;){if(P=d[d.length-1],this.defaultActions[P]?O=this.defaultActions[P]:((E===null||typeof E>"u")&&(E=k()),O=y[P]&&y[P][E]),typeof O>"u"||!O.length||!O[0]){var N="";q=[];for(M in y[P])this.terminals_[M]&&M>T&&q.push("'"+this.terminals_[M]+"'");_.showPosition?N="Parse error on line "+(x+1)+`:
`+_.showPosition()+`
Expecting `+q.join(", ")+", got '"+(this.terminals_[E]||E)+"'":N="Parse error on line "+(x+1)+": Unexpected "+(E==I?"end of input":"'"+(this.terminals_[E]||E)+"'"),this.parseError(N,{text:_.match,token:this.terminals_[E]||E,line:_.yylineno,loc:S,expected:q})}if(O[0]instanceof Array&&O.length>1)throw new Error("Parse Error: multiple actions possible at state: "+P+", token: "+E);switch(O[0]){case 1:d.push(E),p.push(_.yytext),g.push(_.yylloc),d.push(O[1]),E=null,v=_.yyleng,m=_.yytext,x=_.yylineno,S=_.yylloc;break;case 2:if(R=this.productions_[O[1]][1],F.$=p[p.length-R],F._$={first_line:g[g.length-(R||1)].first_line,last_line:g[g.length-1].last_line,first_column:g[g.length-(R||1)].first_column,last_column:g[g.length-1].last_column},b&&(F._$.range=[g[g.length-(R||1)].range[0],g[g.length-1].range[1]]),V=this.performAction.apply(F,[m,v,x,w.yy,O[1],p,g].concat(B)),typeof V<"u")return V;R&&(d=d.slice(0,-1*R*2),p=p.slice(0,-1*R),g=g.slice(0,-1*R)),d.push(this.productions_[O[1]][0]),p.push(F.$),g.push(F._$),L=y[d[d.length-2]][d[d.length-1]],d.push(L);break;case 3:return!0}}return!0},"parse")},s=function(){var o={EOF:1,parseError:l(function(u,d){if(this.yy.parser)this.yy.parser.parseError(u,d);else throw new Error(u)},"parseError"),setInput:l(function(h,u){return this.yy=u||this.yy||{},this._input=h,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var h=this._input[0];this.yytext+=h,this.yyleng++,this.offset++,this.match+=h,this.matched+=h;var u=h.match(/(?:\r\n?|\n).*/g);return u?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),h},"input"),unput:l(function(h){var u=h.length,d=h.split(/(?:\r\n?|\n)/g);this._input=h+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-u),this.offset-=u;var f=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),d.length-1&&(this.yylineno-=d.length-1);var p=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:d?(d.length===f.length?this.yylloc.first_column:0)+f[f.length-d.length].length-d[0].length:this.yylloc.first_column-u},this.options.ranges&&(this.yylloc.range=[p[0],p[0]+this.yyleng-u]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(h){this.unput(this.match.slice(h))},"less"),pastInput:l(function(){var h=this.matched.substr(0,this.matched.length-this.match.length);return(h.length>20?"...":"")+h.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var h=this.match;return h.length<20&&(h+=this._input.substr(0,20-h.length)),(h.substr(0,20)+(h.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var h=this.pastInput(),u=new Array(h.length+1).join("-");return h+this.upcomingInput()+`
`+u+"^"},"showPosition"),test_match:l(function(h,u){var d,f,p;if(this.options.backtrack_lexer&&(p={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(p.yylloc.range=this.yylloc.range.slice(0))),f=h[0].match(/(?:\r\n?|\n).*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-f[f.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+h[0].length},this.yytext+=h[0],this.match+=h[0],this.matches=h,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(h[0].length),this.matched+=h[0],d=this.performAction.call(this,this.yy,this,u,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),d)return d;if(this._backtrack){for(var g in p)this[g]=p[g];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var h,u,d,f;this._more||(this.yytext="",this.match="");for(var p=this._currentRules(),g=0;g<p.length;g++)if(d=this._input.match(this.rules[p[g]]),d&&(!u||d[0].length>u[0].length)){if(u=d,f=g,this.options.backtrack_lexer){if(h=this.test_match(d,p[g]),h!==!1)return h;if(this._backtrack){u=!1;continue}else return!1}else if(!this.options.flex)break}return u?(h=this.test_match(u,p[f]),h!==!1?h:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var u=this.next();return u||this.lex()},"lex"),begin:l(function(u){this.conditionStack.push(u)},"begin"),popState:l(function(){var u=this.conditionStack.length-1;return u>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(u){return u=this.conditionStack.length-1-Math.abs(u||0),u>=0?this.conditionStack[u]:"INITIAL"},"topState"),pushState:l(function(u){this.begin(u)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:l(function(u,d,f,p){switch(f){case 0:return this.pushState("csv"),4;case 1:return 10;case 2:return 5;case 3:return 12;case 4:return this.pushState("escaped_text"),18;case 5:return 20;case 6:return this.popState("escaped_text"),18;case 7:return 19}},"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[1,2,3,4,5,6,7],inclusive:!1},escaped_text:{rules:[6,7],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7],inclusive:!0}}};return o}();i.lexer=s;function n(){this.yy={}}return l(n,"Parser"),n.prototype=i,i.Parser=n,new n}();Jc.parser=Jc;var Xo=Jc,Al=[],Ll=[],Ko=new Map,YL=l(()=>{Al=[],Ll=[],Ko=new Map,Ye()},"clear"),Ts,HL=(Ts=class{constructor(e,r,a=0){this.source=e,this.target=r,this.value=a}},l(Ts,"SankeyLink"),Ts),GL=l((t,e,r)=>{Al.push(new HL(t,e,r))},"addLink"),_s,UL=(_s=class{constructor(e){this.ID=e}},l(_s,"SankeyNode"),_s),jL=l(t=>{t=mt.sanitizeText(t,H());let e=Ko.get(t);return e===void 0&&(e=new UL(t),Ko.set(t,e),Ll.push(e)),e},"findOrCreateNode"),XL=l(()=>Ll,"getNodes"),KL=l(()=>Al,"getLinks"),QL=l(()=>({nodes:Ll.map(t=>({id:t.ID})),links:Al.map(t=>({source:t.source.ID,target:t.target.ID,value:t.value}))}),"getGraph"),ZL={nodesMap:Ko,getConfig:l(()=>H().sankey,"getConfig"),getNodes:XL,getLinks:KL,getGraph:QL,addLink:GL,findOrCreateNode:jL,getAccTitle:Ke,setAccTitle:He,getAccDescription:Ze,setAccDescription:Qe,getDiagramTitle:Je,setDiagramTitle:dr,clear:YL},Si,p1=(Si=class{static next(e){return new Si(e+ ++Si.count)}constructor(e){this.id=e,this.href=`#${e}`}toString(){return"url("+this.href+")"}},l(Si,"Uid"),Si.count=0,Si),JL={left:qb,right:Wb,center:zb,justify:Vb},tB=l(function(t,e,r,a){const{securityLevel:i,sankey:s}=H(),n=j1.sankey;let o;i==="sandbox"&&(o=yt("#i"+e));const h=i==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),u=i==="sandbox"?h.select(`[id="${e}"]`):yt(`[id="${e}"]`),d=(s==null?void 0:s.width)??n.width,f=(s==null?void 0:s.height)??n.width,p=(s==null?void 0:s.useMaxWidth)??n.useMaxWidth,g=(s==null?void 0:s.nodeAlignment)??n.nodeAlignment,y=(s==null?void 0:s.prefix)??n.prefix,m=(s==null?void 0:s.suffix)??n.suffix,x=(s==null?void 0:s.showValues)??n.showValues,v=a.db.getGraph(),T=JL[g];$b().nodeId(C=>C.id).nodeWidth(10).nodePadding(10+(x?15:0)).nodeAlign(T).extent([[0,0],[d,f]])(v);const _=L1(Yb);u.append("g").attr("class","nodes").selectAll(".node").data(v.nodes).join("g").attr("class","node").attr("id",C=>(C.uid=p1.next("node-")).id).attr("transform",function(C){return"translate("+C.x0+","+C.y0+")"}).attr("x",C=>C.x0).attr("y",C=>C.y0).append("rect").attr("height",C=>C.y1-C.y0).attr("width",C=>C.x1-C.x0).attr("fill",C=>_(C.id));const w=l(({id:C,value:k})=>x?`${C}
${y}${Math.round(k*100)/100}${m}`:C,"getText");u.append("g").attr("class","node-labels").attr("font-family","sans-serif").attr("font-size",14).selectAll("text").data(v.nodes).join("text").attr("x",C=>C.x0<d/2?C.x1+6:C.x0-6).attr("y",C=>(C.y1+C.y0)/2).attr("dy",`${x?"0":"0.35"}em`).attr("text-anchor",C=>C.x0<d/2?"start":"end").text(w);const D=u.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(v.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),S=(s==null?void 0:s.linkColor)??"gradient";if(S==="gradient"){const C=D.append("linearGradient").attr("id",k=>(k.uid=p1.next("linearGradient-")).id).attr("gradientUnits","userSpaceOnUse").attr("x1",k=>k.source.x1).attr("x2",k=>k.target.x0);C.append("stop").attr("offset","0%").attr("stop-color",k=>_(k.source.id)),C.append("stop").attr("offset","100%").attr("stop-color",k=>_(k.target.id))}let b;switch(S){case"gradient":b=l(C=>C.uid,"coloring");break;case"source":b=l(C=>_(C.source.id),"coloring");break;case"target":b=l(C=>_(C.target.id),"coloring");break;default:b=S}D.append("path").attr("d",Hb()).attr("stroke",b).attr("stroke-width",C=>Math.max(1,C.width)),zs(void 0,u,0,p)},"draw"),eB={draw:tB},rB=l(t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,`
`).trim(),"prepareTextForParsing"),iB=Xo.parse.bind(Xo);Xo.parse=t=>iB(rB(t));var aB={parser:Xo,db:ZL,renderer:eB};const sB=Object.freeze(Object.defineProperty({__proto__:null,diagram:aB},Symbol.toStringTag,{value:"Module"}));var _x={packet:[]},qu=structuredClone(_x),nB=pe.packet,oB=l(()=>{const t=Bi({...nB,..._e().packet});return t.showBits&&(t.paddingY+=10),t},"getConfig"),lB=l(()=>qu.packet,"getPacket"),cB=l(t=>{t.length>0&&qu.packet.push(t)},"pushWord"),hB=l(()=>{Ye(),qu=structuredClone(_x)},"clear"),Da={pushWord:cB,getPacket:lB,getConfig:oB,clear:hB,setAccTitle:He,getAccTitle:Ke,setDiagramTitle:dr,getDiagramTitle:Je,getAccDescription:Ze,setAccDescription:Qe},uB=1e4,dB=l(t=>{Vn(t,Da);let e=-1,r=[],a=1;const{bitsPerRow:i}=Da.getConfig();for(let{start:s,end:n,label:o}of t.blocks){if(n&&n<s)throw new Error(`Packet block ${s} - ${n} is invalid. End must be greater than start.`);if(s!==e+1)throw new Error(`Packet block ${s} - ${n??s} is not contiguous. It should start from ${e+1}.`);for(e=n??s,A.debug(`Packet block ${s} - ${e} with label ${o}`);r.length<=i+1&&Da.getPacket().length<uB;){const[h,u]=pB({start:s,end:n,label:o},a,i);if(r.push(h),h.end+1===a*i&&(Da.pushWord(r),r=[],a++),!u)break;({start:s,end:n,label:o}=u)}}Da.pushWord(r)},"populate"),pB=l((t,e,r)=>{if(t.end===void 0&&(t.end=t.start),t.start>t.end)throw new Error(`Block start ${t.start} is greater than block end ${t.end}.`);return t.end+1<=e*r?[t,void 0]:[{start:t.start,end:e*r-1,label:t.label},{start:e*r,end:t.end,label:t.label}]},"getNextFittingBlock"),fB={parse:l(async t=>{const e=await Hs("packet",t);A.debug(e),dB(e)},"parse")},gB=l((t,e,r,a)=>{const i=a.db,s=i.getConfig(),{rowHeight:n,paddingY:o,bitWidth:h,bitsPerRow:u}=s,d=i.getPacket(),f=i.getDiagramTitle(),p=n+o,g=p*(d.length+1)-(f?0:n),y=h*u+2,m=Ki(e);m.attr("viewbox",`0 0 ${y} ${g}`),ar(m,g,y,s.useMaxWidth);for(const[x,v]of d.entries())yB(m,v,x,s);m.append("text").text(f).attr("x",y/2).attr("y",g-p/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),yB=l((t,e,r,{rowHeight:a,paddingX:i,paddingY:s,bitWidth:n,bitsPerRow:o,showBits:h})=>{const u=t.append("g"),d=r*(a+s)+s;for(const f of e){const p=f.start%o*n+1,g=(f.end-f.start+1)*n-i;if(u.append("rect").attr("x",p).attr("y",d).attr("width",g).attr("height",a).attr("class","packetBlock"),u.append("text").attr("x",p+g/2).attr("y",d+a/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(f.label),!h)continue;const y=f.end===f.start,m=d-2;u.append("text").attr("x",p+(y?g/2:0)).attr("y",m).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",y?"middle":"start").text(f.start),y||u.append("text").attr("x",p+g).attr("y",m).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(f.end)}},"drawWord"),mB={draw:gB},xB={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},bB=l(({packet:t}={})=>{const e=Bi(xB,t);return`
	.packetByte {
		font-size: ${e.byteFontSize};
	}
	.packetByte.start {
		fill: ${e.startByteColor};
	}
	.packetByte.end {
		fill: ${e.endByteColor};
	}
	.packetLabel {
		fill: ${e.labelColor};
		font-size: ${e.labelFontSize};
	}
	.packetTitle {
		fill: ${e.titleColor};
		font-size: ${e.titleFontSize};
	}
	.packetBlock {
		stroke: ${e.blockStrokeColor};
		stroke-width: ${e.blockStrokeWidth};
		fill: ${e.blockFillColor};
	}
	`},"styles"),kB={parser:fB,db:Da,renderer:mB,styles:bB};const vB=Object.freeze(Object.defineProperty({__proto__:null,diagram:kB},Symbol.toStringTag,{value:"Module"}));var th=function(){var t=l(function(I,B,_,w){for(_=_||{},w=I.length;w--;_[I[w]]=B);return _},"o"),e=[1,7],r=[1,13],a=[1,14],i=[1,15],s=[1,19],n=[1,16],o=[1,17],h=[1,18],u=[8,30],d=[8,21,28,29,30,31,32,40,44,47],f=[1,23],p=[1,24],g=[8,15,16,21,28,29,30,31,32,40,44,47],y=[8,15,16,21,27,28,29,30,31,32,40,44,47],m=[1,49],x={trace:l(function(){},"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,block:31,NODE_ID:32,nodeShapeNLabel:33,dirList:34,DIR:35,NODE_DSTART:36,NODE_DEND:37,BLOCK_ARROW_START:38,BLOCK_ARROW_END:39,classDef:40,CLASSDEF_ID:41,CLASSDEF_STYLEOPTS:42,DEFAULT:43,class:44,CLASSENTITY_IDS:45,STYLECLASS:46,style:47,STYLE_ENTITY_IDS:48,STYLE_DEFINITION_DATA:49,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"block",32:"NODE_ID",35:"DIR",36:"NODE_DSTART",37:"NODE_DEND",38:"BLOCK_ARROW_START",39:"BLOCK_ARROW_END",40:"classDef",41:"CLASSDEF_ID",42:"CLASSDEF_STYLEOPTS",43:"DEFAULT",44:"class",45:"CLASSENTITY_IDS",46:"STYLECLASS",47:"style",48:"STYLE_ENTITY_IDS",49:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[34,1],[34,2],[33,3],[33,4],[23,3],[23,3],[24,3],[25,3]],performAction:l(function(B,_,w,D,S,b,C){var k=b.length-1;switch(S){case 4:D.getLogger().debug("Rule: separator (NL) ");break;case 5:D.getLogger().debug("Rule: separator (Space) ");break;case 6:D.getLogger().debug("Rule: separator (EOF) ");break;case 7:D.getLogger().debug("Rule: hierarchy: ",b[k-1]),D.setHierarchy(b[k-1]);break;case 8:D.getLogger().debug("Stop NL ");break;case 9:D.getLogger().debug("Stop EOF ");break;case 10:D.getLogger().debug("Stop NL2 ");break;case 11:D.getLogger().debug("Stop EOF2 ");break;case 12:D.getLogger().debug("Rule: statement: ",b[k]),typeof b[k].length=="number"?this.$=b[k]:this.$=[b[k]];break;case 13:D.getLogger().debug("Rule: statement #2: ",b[k-1]),this.$=[b[k-1]].concat(b[k]);break;case 14:D.getLogger().debug("Rule: link: ",b[k],B),this.$={edgeTypeStr:b[k],label:""};break;case 15:D.getLogger().debug("Rule: LABEL link: ",b[k-3],b[k-1],b[k]),this.$={edgeTypeStr:b[k],label:b[k-1]};break;case 18:const E=parseInt(b[k]),P=D.generateId();this.$={id:P,type:"space",label:"",width:E,children:[]};break;case 23:D.getLogger().debug("Rule: (nodeStatement link node) ",b[k-2],b[k-1],b[k]," typestr: ",b[k-1].edgeTypeStr);const O=D.edgeStrToEdgeData(b[k-1].edgeTypeStr);this.$=[{id:b[k-2].id,label:b[k-2].label,type:b[k-2].type,directions:b[k-2].directions},{id:b[k-2].id+"-"+b[k].id,start:b[k-2].id,end:b[k].id,label:b[k-1].label,type:"edge",directions:b[k].directions,arrowTypeEnd:O,arrowTypeStart:"arrow_open"},{id:b[k].id,label:b[k].label,type:D.typeStr2Type(b[k].typeStr),directions:b[k].directions}];break;case 24:D.getLogger().debug("Rule: nodeStatement (abc88 node size) ",b[k-1],b[k]),this.$={id:b[k-1].id,label:b[k-1].label,type:D.typeStr2Type(b[k-1].typeStr),directions:b[k-1].directions,widthInColumns:parseInt(b[k],10)};break;case 25:D.getLogger().debug("Rule: nodeStatement (node) ",b[k]),this.$={id:b[k].id,label:b[k].label,type:D.typeStr2Type(b[k].typeStr),directions:b[k].directions,widthInColumns:1};break;case 26:D.getLogger().debug("APA123",this?this:"na"),D.getLogger().debug("COLUMNS: ",b[k]),this.$={type:"column-setting",columns:b[k]==="auto"?-1:parseInt(b[k])};break;case 27:D.getLogger().debug("Rule: id-block statement : ",b[k-2],b[k-1]),D.generateId(),this.$={...b[k-2],type:"composite",children:b[k-1]};break;case 28:D.getLogger().debug("Rule: blockStatement : ",b[k-2],b[k-1],b[k]);const V=D.generateId();this.$={id:V,type:"composite",label:"",children:b[k-1]};break;case 29:D.getLogger().debug("Rule: node (NODE_ID separator): ",b[k]),this.$={id:b[k]};break;case 30:D.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",b[k-1],b[k]),this.$={id:b[k-1],label:b[k].label,typeStr:b[k].typeStr,directions:b[k].directions};break;case 31:D.getLogger().debug("Rule: dirList: ",b[k]),this.$=[b[k]];break;case 32:D.getLogger().debug("Rule: dirList: ",b[k-1],b[k]),this.$=[b[k-1]].concat(b[k]);break;case 33:D.getLogger().debug("Rule: nodeShapeNLabel: ",b[k-2],b[k-1],b[k]),this.$={typeStr:b[k-2]+b[k],label:b[k-1]};break;case 34:D.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",b[k-3],b[k-2]," #3:",b[k-1],b[k]),this.$={typeStr:b[k-3]+b[k],label:b[k-2],directions:b[k-1]};break;case 35:case 36:this.$={type:"classDef",id:b[k-1].trim(),css:b[k].trim()};break;case 37:this.$={type:"applyClass",id:b[k-1].trim(),styleClass:b[k].trim()};break;case 38:this.$={type:"applyStyles",id:b[k-1].trim(),stylesStr:b[k].trim()};break}},"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{11:3,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:r,29:a,31:i,32:s,40:n,44:o,47:h},{8:[1,20]},t(u,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,21:e,28:r,29:a,31:i,32:s,40:n,44:o,47:h}),t(d,[2,16],{14:22,15:f,16:p}),t(d,[2,17]),t(d,[2,18]),t(d,[2,19]),t(d,[2,20]),t(d,[2,21]),t(d,[2,22]),t(g,[2,25],{27:[1,25]}),t(d,[2,26]),{19:26,26:12,32:s},{11:27,13:4,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:r,29:a,31:i,32:s,40:n,44:o,47:h},{41:[1,28],43:[1,29]},{45:[1,30]},{48:[1,31]},t(y,[2,29],{33:32,36:[1,33],38:[1,34]}),{1:[2,7]},t(u,[2,13]),{26:35,32:s},{32:[2,14]},{17:[1,36]},t(g,[2,24]),{11:37,13:4,14:22,15:f,16:p,19:5,20:6,21:e,22:8,23:9,24:10,25:11,26:12,28:r,29:a,31:i,32:s,40:n,44:o,47:h},{30:[1,38]},{42:[1,39]},{42:[1,40]},{46:[1,41]},{49:[1,42]},t(y,[2,30]),{18:[1,43]},{18:[1,44]},t(g,[2,23]),{18:[1,45]},{30:[1,46]},t(d,[2,28]),t(d,[2,35]),t(d,[2,36]),t(d,[2,37]),t(d,[2,38]),{37:[1,47]},{34:48,35:m},{15:[1,50]},t(d,[2,27]),t(y,[2,33]),{39:[1,51]},{34:52,35:m,39:[2,31]},{32:[2,15]},t(y,[2,34]),{39:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:l(function(B,_){if(_.recoverable)this.trace(B);else{var w=new Error(B);throw w.hash=_,w}},"parseError"),parse:l(function(B){var _=this,w=[0],D=[],S=[null],b=[],C=this.table,k="",E=0,P=0,O=2,V=1,F=b.slice.call(arguments,1),M=Object.create(this.lexer),R={yy:{}};for(var L in this.yy)Object.prototype.hasOwnProperty.call(this.yy,L)&&(R.yy[L]=this.yy[L]);M.setInput(B,R.yy),R.yy.lexer=M,R.yy.parser=this,typeof M.yylloc>"u"&&(M.yylloc={});var q=M.yylloc;b.push(q);var N=M.options&&M.options.ranges;typeof R.yy.parseError=="function"?this.parseError=R.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function j(lt){w.length=w.length-2*lt,S.length=S.length-lt,b.length=b.length-lt}l(j,"popStack");function it(){var lt;return lt=D.pop()||M.lex()||V,typeof lt!="number"&&(lt instanceof Array&&(D=lt,lt=D.pop()),lt=_.symbols_[lt]||lt),lt}l(it,"lex");for(var tt,pt,K,nt,ht={},st,rt,Z,at;;){if(pt=w[w.length-1],this.defaultActions[pt]?K=this.defaultActions[pt]:((tt===null||typeof tt>"u")&&(tt=it()),K=C[pt]&&C[pt][tt]),typeof K>"u"||!K.length||!K[0]){var Q="";at=[];for(st in C[pt])this.terminals_[st]&&st>O&&at.push("'"+this.terminals_[st]+"'");M.showPosition?Q="Parse error on line "+(E+1)+`:
`+M.showPosition()+`
Expecting `+at.join(", ")+", got '"+(this.terminals_[tt]||tt)+"'":Q="Parse error on line "+(E+1)+": Unexpected "+(tt==V?"end of input":"'"+(this.terminals_[tt]||tt)+"'"),this.parseError(Q,{text:M.match,token:this.terminals_[tt]||tt,line:M.yylineno,loc:q,expected:at})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+pt+", token: "+tt);switch(K[0]){case 1:w.push(tt),S.push(M.yytext),b.push(M.yylloc),w.push(K[1]),tt=null,P=M.yyleng,k=M.yytext,E=M.yylineno,q=M.yylloc;break;case 2:if(rt=this.productions_[K[1]][1],ht.$=S[S.length-rt],ht._$={first_line:b[b.length-(rt||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(rt||1)].first_column,last_column:b[b.length-1].last_column},N&&(ht._$.range=[b[b.length-(rt||1)].range[0],b[b.length-1].range[1]]),nt=this.performAction.apply(ht,[k,P,E,R.yy,K[1],S,b].concat(F)),typeof nt<"u")return nt;rt&&(w=w.slice(0,-1*rt*2),S=S.slice(0,-1*rt),b=b.slice(0,-1*rt)),w.push(this.productions_[K[1]][0]),S.push(ht.$),b.push(ht._$),Z=C[w[w.length-2]][w[w.length-1]],w.push(Z);break;case 3:return!0}}return!0},"parse")},v=function(){var I={EOF:1,parseError:l(function(_,w){if(this.yy.parser)this.yy.parser.parseError(_,w);else throw new Error(_)},"parseError"),setInput:l(function(B,_){return this.yy=_||this.yy||{},this._input=B,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:l(function(){var B=this._input[0];this.yytext+=B,this.yyleng++,this.offset++,this.match+=B,this.matched+=B;var _=B.match(/(?:\r\n?|\n).*/g);return _?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),B},"input"),unput:l(function(B){var _=B.length,w=B.split(/(?:\r\n?|\n)/g);this._input=B+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-_),this.offset-=_;var D=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),w.length-1&&(this.yylineno-=w.length-1);var S=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:w?(w.length===D.length?this.yylloc.first_column:0)+D[D.length-w.length].length-w[0].length:this.yylloc.first_column-_},this.options.ranges&&(this.yylloc.range=[S[0],S[0]+this.yyleng-_]),this.yyleng=this.yytext.length,this},"unput"),more:l(function(){return this._more=!0,this},"more"),reject:l(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:l(function(B){this.unput(this.match.slice(B))},"less"),pastInput:l(function(){var B=this.matched.substr(0,this.matched.length-this.match.length);return(B.length>20?"...":"")+B.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:l(function(){var B=this.match;return B.length<20&&(B+=this._input.substr(0,20-B.length)),(B.substr(0,20)+(B.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:l(function(){var B=this.pastInput(),_=new Array(B.length+1).join("-");return B+this.upcomingInput()+`
`+_+"^"},"showPosition"),test_match:l(function(B,_){var w,D,S;if(this.options.backtrack_lexer&&(S={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(S.yylloc.range=this.yylloc.range.slice(0))),D=B[0].match(/(?:\r\n?|\n).*/g),D&&(this.yylineno+=D.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:D?D[D.length-1].length-D[D.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+B[0].length},this.yytext+=B[0],this.match+=B[0],this.matches=B,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(B[0].length),this.matched+=B[0],w=this.performAction.call(this,this.yy,this,_,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),w)return w;if(this._backtrack){for(var b in S)this[b]=S[b];return!1}return!1},"test_match"),next:l(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var B,_,w,D;this._more||(this.yytext="",this.match="");for(var S=this._currentRules(),b=0;b<S.length;b++)if(w=this._input.match(this.rules[S[b]]),w&&(!_||w[0].length>_[0].length)){if(_=w,D=b,this.options.backtrack_lexer){if(B=this.test_match(w,S[b]),B!==!1)return B;if(this._backtrack){_=!1;continue}else return!1}else if(!this.options.flex)break}return _?(B=this.test_match(_,S[D]),B!==!1?B:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:l(function(){var _=this.next();return _||this.lex()},"lex"),begin:l(function(_){this.conditionStack.push(_)},"begin"),popState:l(function(){var _=this.conditionStack.length-1;return _>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:l(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:l(function(_){return _=this.conditionStack.length-1-Math.abs(_||0),_>=0?this.conditionStack[_]:"INITIAL"},"topState"),pushState:l(function(_){this.begin(_)},"pushState"),stateStackSize:l(function(){return this.conditionStack.length},"stateStackSize"),options:{},performAction:l(function(_,w,D,S){switch(D){case 0:return 10;case 1:return _.getLogger().debug("Found space-block"),31;case 2:return _.getLogger().debug("Found nl-block"),31;case 3:return _.getLogger().debug("Found space-block"),29;case 4:_.getLogger().debug(".",w.yytext);break;case 5:_.getLogger().debug("_",w.yytext);break;case 6:return 5;case 7:return w.yytext=-1,28;case 8:return w.yytext=w.yytext.replace(/columns\s+/,""),_.getLogger().debug("COLUMNS (LEX)",w.yytext),28;case 9:this.pushState("md_string");break;case 10:return"MD_STR";case 11:this.popState();break;case 12:this.pushState("string");break;case 13:_.getLogger().debug("LEX: POPPING STR:",w.yytext),this.popState();break;case 14:return _.getLogger().debug("LEX: STR end:",w.yytext),"STR";case 15:return w.yytext=w.yytext.replace(/space\:/,""),_.getLogger().debug("SPACE NUM (LEX)",w.yytext),21;case 16:return w.yytext="1",_.getLogger().debug("COLUMNS (LEX)",w.yytext),21;case 17:return 43;case 18:return"LINKSTYLE";case 19:return"INTERPOLATE";case 20:return this.pushState("CLASSDEF"),40;case 21:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 22:return this.popState(),this.pushState("CLASSDEFID"),41;case 23:return this.popState(),42;case 24:return this.pushState("CLASS"),44;case 25:return this.popState(),this.pushState("CLASS_STYLE"),45;case 26:return this.popState(),46;case 27:return this.pushState("STYLE_STMNT"),47;case 28:return this.popState(),this.pushState("STYLE_DEFINITION"),48;case 29:return this.popState(),49;case 30:return this.pushState("acc_title"),"acc_title";case 31:return this.popState(),"acc_title_value";case 32:return this.pushState("acc_descr"),"acc_descr";case 33:return this.popState(),"acc_descr_value";case 34:this.pushState("acc_descr_multiline");break;case 35:this.popState();break;case 36:return"acc_descr_multiline_value";case 37:return 30;case 38:return this.popState(),_.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),_.getLogger().debug("Lex: (("),"NODE_DEND";case 40:return this.popState(),_.getLogger().debug("Lex: ))"),"NODE_DEND";case 41:return this.popState(),_.getLogger().debug("Lex: (("),"NODE_DEND";case 42:return this.popState(),_.getLogger().debug("Lex: (("),"NODE_DEND";case 43:return this.popState(),_.getLogger().debug("Lex: (-"),"NODE_DEND";case 44:return this.popState(),_.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),_.getLogger().debug("Lex: (("),"NODE_DEND";case 46:return this.popState(),_.getLogger().debug("Lex: ]]"),"NODE_DEND";case 47:return this.popState(),_.getLogger().debug("Lex: ("),"NODE_DEND";case 48:return this.popState(),_.getLogger().debug("Lex: ])"),"NODE_DEND";case 49:return this.popState(),_.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),_.getLogger().debug("Lex: /]"),"NODE_DEND";case 51:return this.popState(),_.getLogger().debug("Lex: )]"),"NODE_DEND";case 52:return this.popState(),_.getLogger().debug("Lex: )"),"NODE_DEND";case 53:return this.popState(),_.getLogger().debug("Lex: ]>"),"NODE_DEND";case 54:return this.popState(),_.getLogger().debug("Lex: ]"),"NODE_DEND";case 55:return _.getLogger().debug("Lexa: -)"),this.pushState("NODE"),36;case 56:return _.getLogger().debug("Lexa: (-"),this.pushState("NODE"),36;case 57:return _.getLogger().debug("Lexa: ))"),this.pushState("NODE"),36;case 58:return _.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 59:return _.getLogger().debug("Lex: ((("),this.pushState("NODE"),36;case 60:return _.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 61:return _.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 62:return _.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 63:return _.getLogger().debug("Lexc: >"),this.pushState("NODE"),36;case 64:return _.getLogger().debug("Lexa: (["),this.pushState("NODE"),36;case 65:return _.getLogger().debug("Lexa: )"),this.pushState("NODE"),36;case 66:return this.pushState("NODE"),36;case 67:return this.pushState("NODE"),36;case 68:return this.pushState("NODE"),36;case 69:return this.pushState("NODE"),36;case 70:return this.pushState("NODE"),36;case 71:return this.pushState("NODE"),36;case 72:return this.pushState("NODE"),36;case 73:return _.getLogger().debug("Lexa: ["),this.pushState("NODE"),36;case 74:return this.pushState("BLOCK_ARROW"),_.getLogger().debug("LEX ARR START"),38;case 75:return _.getLogger().debug("Lex: NODE_ID",w.yytext),32;case 76:return _.getLogger().debug("Lex: EOF",w.yytext),8;case 77:this.pushState("md_string");break;case 78:this.pushState("md_string");break;case 79:return"NODE_DESCR";case 80:this.popState();break;case 81:_.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 82:_.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 83:return _.getLogger().debug("LEX: NODE_DESCR:",w.yytext),"NODE_DESCR";case 84:_.getLogger().debug("LEX POPPING"),this.popState();break;case 85:_.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 86:return w.yytext=w.yytext.replace(/^,\s*/,""),_.getLogger().debug("Lex (right): dir:",w.yytext),"DIR";case 87:return w.yytext=w.yytext.replace(/^,\s*/,""),_.getLogger().debug("Lex (left):",w.yytext),"DIR";case 88:return w.yytext=w.yytext.replace(/^,\s*/,""),_.getLogger().debug("Lex (x):",w.yytext),"DIR";case 89:return w.yytext=w.yytext.replace(/^,\s*/,""),_.getLogger().debug("Lex (y):",w.yytext),"DIR";case 90:return w.yytext=w.yytext.replace(/^,\s*/,""),_.getLogger().debug("Lex (up):",w.yytext),"DIR";case 91:return w.yytext=w.yytext.replace(/^,\s*/,""),_.getLogger().debug("Lex (down):",w.yytext),"DIR";case 92:return w.yytext="]>",_.getLogger().debug("Lex (ARROW_DIR end):",w.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 93:return _.getLogger().debug("Lex: LINK","#"+w.yytext+"#"),15;case 94:return _.getLogger().debug("Lex: LINK",w.yytext),15;case 95:return _.getLogger().debug("Lex: LINK",w.yytext),15;case 96:return _.getLogger().debug("Lex: LINK",w.yytext),15;case 97:return _.getLogger().debug("Lex: START_LINK",w.yytext),this.pushState("LLABEL"),16;case 98:return _.getLogger().debug("Lex: START_LINK",w.yytext),this.pushState("LLABEL"),16;case 99:return _.getLogger().debug("Lex: START_LINK",w.yytext),this.pushState("LLABEL"),16;case 100:this.pushState("md_string");break;case 101:return _.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 102:return this.popState(),_.getLogger().debug("Lex: LINK","#"+w.yytext+"#"),15;case 103:return this.popState(),_.getLogger().debug("Lex: LINK",w.yytext),15;case 104:return this.popState(),_.getLogger().debug("Lex: LINK",w.yytext),15;case 105:return _.getLogger().debug("Lex: COLON",w.yytext),w.yytext=w.yytext.slice(1),27}},"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block\s+)/,/^(?:block\n+)/,/^(?:block:)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[29],inclusive:!1},STYLE_STMNT:{rules:[28],inclusive:!1},CLASSDEFID:{rules:[23],inclusive:!1},CLASSDEF:{rules:[21,22],inclusive:!1},CLASS_STYLE:{rules:[26],inclusive:!1},CLASS:{rules:[25],inclusive:!1},LLABEL:{rules:[100,101,102,103,104],inclusive:!1},ARROW_DIR:{rules:[86,87,88,89,90,91,92],inclusive:!1},BLOCK_ARROW:{rules:[77,82,85],inclusive:!1},NODE:{rules:[38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,78,81],inclusive:!1},md_string:{rules:[10,11,79,80],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[13,14,83,84],inclusive:!1},acc_descr_multiline:{rules:[35,36],inclusive:!1},acc_descr:{rules:[33],inclusive:!1},acc_title:{rules:[31],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,12,15,16,17,18,19,20,24,27,30,32,34,37,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,93,94,95,96,97,98,99,105],inclusive:!0}}};return I}();x.lexer=v;function T(){this.yy={}}return l(T,"Parser"),T.prototype=x,x.Parser=T,new T}();th.parser=th;var TB=th,Kr=new Map,Yu=[],eh=new Map,f1="color",g1="fill",_B="bgFill",Cx=",",CB=H(),Qo=new Map,SB=l(t=>mt.sanitizeText(t,CB),"sanitizeText"),wB=l(function(t,e=""){let r=Qo.get(t);r||(r={id:t,styles:[],textStyles:[]},Qo.set(t,r)),e!=null&&e.split(Cx).forEach(a=>{const i=a.replace(/([^;]*);/,"$1").trim();if(RegExp(f1).exec(a)){const n=i.replace(g1,_B).replace(f1,g1);r.textStyles.push(n)}r.styles.push(i)})},"addStyleClass"),EB=l(function(t,e=""){const r=Kr.get(t);e!=null&&(r.styles=e.split(Cx))},"addStyle2Node"),AB=l(function(t,e){t.split(",").forEach(function(r){let a=Kr.get(r);if(a===void 0){const i=r.trim();a={id:i,type:"na",children:[]},Kr.set(i,a)}a.classes||(a.classes=[]),a.classes.push(e)})},"setCssClass"),Sx=l((t,e)=>{const r=t.flat(),a=[];for(const i of r){if(i.label&&(i.label=SB(i.label)),i.type==="classDef"){wB(i.id,i.css);continue}if(i.type==="applyClass"){AB(i.id,(i==null?void 0:i.styleClass)??"");continue}if(i.type==="applyStyles"){i!=null&&i.stylesStr&&EB(i.id,i==null?void 0:i.stylesStr);continue}if(i.type==="column-setting")e.columns=i.columns??-1;else if(i.type==="edge"){const s=(eh.get(i.id)??0)+1;eh.set(i.id,s),i.id=s+"-"+i.id,Yu.push(i)}else{i.label||(i.type==="composite"?i.label="":i.label=i.id);const s=Kr.get(i.id);if(s===void 0?Kr.set(i.id,i):(i.type!=="na"&&(s.type=i.type),i.label!==i.id&&(s.label=i.label)),i.children&&Sx(i.children,i),i.type==="space"){const n=i.width??1;for(let o=0;o<n;o++){const h=Ub(i);h.id=h.id+"-"+o,Kr.set(h.id,h),a.push(h)}}else s===void 0&&a.push(i)}}e.children=a},"populateBlockDatabase"),Hu=[],cn={id:"root",type:"composite",children:[],columns:-1},LB=l(()=>{A.debug("Clear called"),Ye(),cn={id:"root",type:"composite",children:[],columns:-1},Kr=new Map([["root",cn]]),Hu=[],Qo=new Map,Yu=[],eh=new Map},"clear");function wx(t){switch(A.debug("typeStr2Type",t),t){case"[]":return"square";case"()":return A.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}l(wx,"typeStr2Type");function Ex(t){switch(A.debug("typeStr2Type",t),t){case"==":return"thick";default:return"normal"}}l(Ex,"edgeTypeStr2Type");function Ax(t){switch(t.trim()){case"--x":return"arrow_cross";case"--o":return"arrow_circle";default:return"arrow_point"}}l(Ax,"edgeStrToEdgeData");var y1=0,BB=l(()=>(y1++,"id-"+Math.random().toString(36).substr(2,12)+"-"+y1),"generateId"),DB=l(t=>{cn.children=t,Sx(t,cn),Hu=cn.children},"setHierarchy"),RB=l(t=>{const e=Kr.get(t);return e?e.columns?e.columns:e.children?e.children.length:-1:-1},"getColumns"),IB=l(()=>[...Kr.values()],"getBlocksFlat"),NB=l(()=>Hu||[],"getBlocks"),FB=l(()=>Yu,"getEdges"),PB=l(t=>Kr.get(t),"getBlock"),OB=l(t=>{Kr.set(t.id,t)},"setBlock"),MB=l(()=>console,"getLogger"),$B=l(function(){return Qo},"getClasses"),VB={getConfig:l(()=>_e().block,"getConfig"),typeStr2Type:wx,edgeTypeStr2Type:Ex,edgeStrToEdgeData:Ax,getLogger:MB,getBlocksFlat:IB,getBlocks:NB,getEdges:FB,setHierarchy:DB,getBlock:PB,setBlock:OB,getColumns:RB,getClasses:$B,clear:LB,generateId:BB},zB=VB,to=l((t,e)=>{const r=B1,a=r(t,"r"),i=r(t,"g"),s=r(t,"b");return Fa(a,i,s,e)},"fade"),WB=l(t=>`.label {
    font-family: ${t.fontFamily};
    color: ${t.nodeTextColor||t.textColor};
  }
  .cluster-label text {
    fill: ${t.titleColor};
  }
  .cluster-label span,p {
    color: ${t.titleColor};
  }



  .label text,span,p {
    fill: ${t.nodeTextColor||t.textColor};
    color: ${t.nodeTextColor||t.textColor};
  }

  .node rect,
  .node circle,
  .node ellipse,
  .node polygon,
  .node path {
    fill: ${t.mainBkg};
    stroke: ${t.nodeBorder};
    stroke-width: 1px;
  }
  .flowchart-label text {
    text-anchor: middle;
  }
  // .flowchart-label .text-outer-tspan {
  //   text-anchor: middle;
  // }
  // .flowchart-label .text-inner-tspan {
  //   text-anchor: start;
  // }

  .node .label {
    text-align: center;
  }
  .node.clickable {
    cursor: pointer;
  }

  .arrowheadPath {
    fill: ${t.arrowheadColor};
  }

  .edgePath .path {
    stroke: ${t.lineColor};
    stroke-width: 2.0px;
  }

  .flowchart-link {
    stroke: ${t.lineColor};
    fill: none;
  }

  .edgeLabel {
    background-color: ${t.edgeLabelBackground};
    rect {
      opacity: 0.5;
      background-color: ${t.edgeLabelBackground};
      fill: ${t.edgeLabelBackground};
    }
    text-align: center;
  }

  /* For html labels only */
  .labelBkg {
    background-color: ${to(t.edgeLabelBackground,.5)};
    // background-color:
  }

  .node .cluster {
    // fill: ${to(t.mainBkg,.5)};
    fill: ${to(t.clusterBkg,.5)};
    stroke: ${to(t.clusterBorder,.2)};
    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;
    stroke-width: 1px;
  }

  .cluster text {
    fill: ${t.titleColor};
  }

  .cluster span,p {
    color: ${t.titleColor};
  }
  /* .cluster div {
    color: ${t.titleColor};
  } */

  div.mermaidTooltip {
    position: absolute;
    text-align: center;
    max-width: 200px;
    padding: 2px;
    font-family: ${t.fontFamily};
    font-size: 12px;
    background: ${t.tertiaryColor};
    border: 1px solid ${t.border2};
    border-radius: 2px;
    pointer-events: none;
    z-index: 100;
  }

  .flowchartTitleText {
    text-anchor: middle;
    font-size: 18px;
    fill: ${t.textColor};
  }
`,"getStyles"),qB=WB,YB=l((t,e,r,a)=>{e.forEach(i=>{tD[i](t,r,a)})},"insertMarkers"),HB=l((t,e,r)=>{A.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),GB=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),UB=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),jB=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),XB=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),KB=l((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),QB=l((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),ZB=l((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),JB=l((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),tD={extension:HB,composition:GB,aggregation:UB,dependency:jB,lollipop:XB,point:KB,circle:QB,cross:ZB,barb:JB},eD=YB,w1,E1,Re=((E1=(w1=H())==null?void 0:w1.block)==null?void 0:E1.padding)??8;function Lx(t,e){if(t===0||!Number.isInteger(t))throw new Error("Columns must be an integer !== 0.");if(e<0||!Number.isInteger(e))throw new Error("Position must be a non-negative integer."+e);if(t<0)return{px:e,py:0};if(t===1)return{px:0,py:e};const r=e%t,a=Math.floor(e/t);return{px:r,py:a}}l(Lx,"calculateBlockPosition");var rD=l(t=>{let e=0,r=0;for(const a of t.children){const{width:i,height:s,x:n,y:o}=a.size??{width:0,height:0,x:0,y:0};A.debug("getMaxChildSize abc95 child:",a.id,"width:",i,"height:",s,"x:",n,"y:",o,a.type),a.type!=="space"&&(i>e&&(e=i/(t.widthInColumns??1)),s>r&&(r=s))}return{width:e,height:r}},"getMaxChildSize");function Zo(t,e,r=0,a=0){var n,o,h,u,d,f,p,g,y,m,x;A.debug("setBlockSizes abc95 (start)",t.id,(n=t==null?void 0:t.size)==null?void 0:n.x,"block width =",t==null?void 0:t.size,"sieblingWidth",r),(o=t==null?void 0:t.size)!=null&&o.width||(t.size={width:r,height:a,x:0,y:0});let i=0,s=0;if(((h=t.children)==null?void 0:h.length)>0){for(const S of t.children)Zo(S,e);const v=rD(t);i=v.width,s=v.height,A.debug("setBlockSizes abc95 maxWidth of",t.id,":s children is ",i,s);for(const S of t.children)S.size&&(A.debug(`abc95 Setting size of children of ${t.id} id=${S.id} ${i} ${s} ${JSON.stringify(S.size)}`),S.size.width=i*(S.widthInColumns??1)+Re*((S.widthInColumns??1)-1),S.size.height=s,S.size.x=0,S.size.y=0,A.debug(`abc95 updating size of ${t.id} children child:${S.id} maxWidth:${i} maxHeight:${s}`));for(const S of t.children)Zo(S,e,i,s);const T=t.columns??-1;let I=0;for(const S of t.children)I+=S.widthInColumns??1;let B=t.children.length;T>0&&T<I&&(B=T);const _=Math.ceil(I/B);let w=B*(i+Re)+Re,D=_*(s+Re)+Re;if(w<r){A.debug(`Detected to small siebling: abc95 ${t.id} sieblingWidth ${r} sieblingHeight ${a} width ${w}`),w=r,D=a;const S=(r-B*Re-Re)/B,b=(a-_*Re-Re)/_;A.debug("Size indata abc88",t.id,"childWidth",S,"maxWidth",i),A.debug("Size indata abc88",t.id,"childHeight",b,"maxHeight",s),A.debug("Size indata abc88 xSize",B,"padding",Re);for(const C of t.children)C.size&&(C.size.width=S,C.size.height=b,C.size.x=0,C.size.y=0)}if(A.debug(`abc95 (finale calc) ${t.id} xSize ${B} ySize ${_} columns ${T}${t.children.length} width=${Math.max(w,((u=t.size)==null?void 0:u.width)||0)}`),w<(((d=t==null?void 0:t.size)==null?void 0:d.width)||0)){w=((f=t==null?void 0:t.size)==null?void 0:f.width)||0;const S=T>0?Math.min(t.children.length,T):t.children.length;if(S>0){const b=(w-S*Re-Re)/S;A.debug("abc95 (growing to fit) width",t.id,w,(p=t.size)==null?void 0:p.width,b);for(const C of t.children)C.size&&(C.size.width=b)}}t.size={width:w,height:D,x:0,y:0}}A.debug("setBlockSizes abc94 (done)",t.id,(g=t==null?void 0:t.size)==null?void 0:g.x,(y=t==null?void 0:t.size)==null?void 0:y.width,(m=t==null?void 0:t.size)==null?void 0:m.y,(x=t==null?void 0:t.size)==null?void 0:x.height)}l(Zo,"setBlockSizes");function Gu(t,e){var a,i,s,n,o,h,u,d,f,p,g,y,m,x,v,T,I;A.debug(`abc85 layout blocks (=>layoutBlocks) ${t.id} x: ${(a=t==null?void 0:t.size)==null?void 0:a.x} y: ${(i=t==null?void 0:t.size)==null?void 0:i.y} width: ${(s=t==null?void 0:t.size)==null?void 0:s.width}`);const r=t.columns??-1;if(A.debug("layoutBlocks columns abc95",t.id,"=>",r,t),t.children&&t.children.length>0){const B=((o=(n=t==null?void 0:t.children[0])==null?void 0:n.size)==null?void 0:o.width)??0,_=t.children.length*B+(t.children.length-1)*Re;A.debug("widthOfChildren 88",_,"posX");let w=0;A.debug("abc91 block?.size?.x",t.id,(h=t==null?void 0:t.size)==null?void 0:h.x);let D=(u=t==null?void 0:t.size)!=null&&u.x?((d=t==null?void 0:t.size)==null?void 0:d.x)+(-((f=t==null?void 0:t.size)==null?void 0:f.width)/2||0):-Re,S=0;for(const b of t.children){const C=t;if(!b.size)continue;const{width:k,height:E}=b.size,{px:P,py:O}=Lx(r,w);if(O!=S&&(S=O,D=(p=t==null?void 0:t.size)!=null&&p.x?((g=t==null?void 0:t.size)==null?void 0:g.x)+(-((y=t==null?void 0:t.size)==null?void 0:y.width)/2||0):-Re,A.debug("New row in layout for block",t.id," and child ",b.id,S)),A.debug(`abc89 layout blocks (child) id: ${b.id} Pos: ${w} (px, py) ${P},${O} (${(m=C==null?void 0:C.size)==null?void 0:m.x},${(x=C==null?void 0:C.size)==null?void 0:x.y}) parent: ${C.id} width: ${k}${Re}`),C.size){const V=k/2;b.size.x=D+Re+V,A.debug(`abc91 layout blocks (calc) px, pyid:${b.id} startingPos=X${D} new startingPosX${b.size.x} ${V} padding=${Re} width=${k} halfWidth=${V} => x:${b.size.x} y:${b.size.y} ${b.widthInColumns} (width * (child?.w || 1)) / 2 ${k*((b==null?void 0:b.widthInColumns)??1)/2}`),D=b.size.x+V,b.size.y=C.size.y-C.size.height/2+O*(E+Re)+E/2+Re,A.debug(`abc88 layout blocks (calc) px, pyid:${b.id}startingPosX${D}${Re}${V}=>x:${b.size.x}y:${b.size.y}${b.widthInColumns}(width * (child?.w || 1)) / 2${k*((b==null?void 0:b.widthInColumns)??1)/2}`)}b.children&&Gu(b),w+=(b==null?void 0:b.widthInColumns)??1,A.debug("abc88 columnsPos",b,w)}}A.debug(`layout blocks (<==layoutBlocks) ${t.id} x: ${(v=t==null?void 0:t.size)==null?void 0:v.x} y: ${(T=t==null?void 0:t.size)==null?void 0:T.y} width: ${(I=t==null?void 0:t.size)==null?void 0:I.width}`)}l(Gu,"layoutBlocks");function Uu(t,{minX:e,minY:r,maxX:a,maxY:i}={minX:0,minY:0,maxX:0,maxY:0}){if(t.size&&t.id!=="root"){const{x:s,y:n,width:o,height:h}=t.size;s-o/2<e&&(e=s-o/2),n-h/2<r&&(r=n-h/2),s+o/2>a&&(a=s+o/2),n+h/2>i&&(i=n+h/2)}if(t.children)for(const s of t.children)({minX:e,minY:r,maxX:a,maxY:i}=Uu(s,{minX:e,minY:r,maxX:a,maxY:i}));return{minX:e,minY:r,maxX:a,maxY:i}}l(Uu,"findBounds");function Bx(t){const e=t.getBlock("root");if(!e)return;Zo(e,t,0,0),Gu(e),A.debug("getBlocks",JSON.stringify(e,null,2));const{minX:r,minY:a,maxX:i,maxY:s}=Uu(e),n=s-a,o=i-r;return{x:r,y:a,width:o,height:n}}l(Bx,"layout");function rh(t,e){e&&t.attr("style",e)}l(rh,"applyStyle");function Dx(t){const e=yt(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div"),a=t.label,i=t.isNode?"nodeLabel":"edgeLabel",s=r.append("span");return s.html(a),rh(s,t.labelStyle),s.attr("class",i),rh(r,t.labelStyle),r.style("display","inline-block"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}l(Dx,"addHtmlLabel");var iD=l((t,e,r,a)=>{let i=t||"";if(typeof i=="object"&&(i=i[0]),xe(H().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),A.debug("vertexText"+i);const s={isNode:a,label:Dh(Ai(i)),labelStyle:e.replace("fill:","color:")};return Dx(s)}else{const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("style",e.replace("color:","fill:"));let n=[];typeof i=="string"?n=i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?n=i:n=[];for(const o of n){const h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),h.setAttribute("dy","1em"),h.setAttribute("x","0"),r?h.setAttribute("class","title-row"):h.setAttribute("class","row"),h.textContent=o.trim(),s.appendChild(h)}return s}},"createLabel"),$r=iD,aD=l((t,e,r,a,i)=>{e.arrowTypeStart&&m1(t,"start",e.arrowTypeStart,r,a,i),e.arrowTypeEnd&&m1(t,"end",e.arrowTypeEnd,r,a,i)},"addEdgeMarkers"),sD={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},m1=l((t,e,r,a,i,s)=>{const n=sD[r];if(!n){A.warn(`Unknown arrow type: ${r}`);return}const o=e==="start"?"Start":"End";t.attr(`marker-${e}`,`url(${a}#${i}_${s}-${n}${o})`)},"addEdgeMarker"),ih={},tr={},nD=l((t,e)=>{const r=H(),a=xe(r.flowchart.htmlLabels),i=e.labelType==="markdown"?Wr(t,e.label,{style:e.labelStyle,useHtmlLabels:a,addSvgBackground:!0},r):$r(e.label,e.labelStyle),s=t.insert("g").attr("class","edgeLabel"),n=s.insert("g").attr("class","label");n.node().appendChild(i);let o=i.getBBox();if(a){const u=i.children[0],d=yt(i);o=u.getBoundingClientRect(),d.attr("width",o.width),d.attr("height",o.height)}n.attr("transform","translate("+-o.width/2+", "+-o.height/2+")"),ih[e.id]=s,e.width=o.width,e.height=o.height;let h;if(e.startLabelLeft){const u=$r(e.startLabelLeft,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),f=d.insert("g").attr("class","inner");h=f.node().appendChild(u);const p=u.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),tr[e.id]||(tr[e.id]={}),tr[e.id].startLeft=d,an(h,e.startLabelLeft)}if(e.startLabelRight){const u=$r(e.startLabelRight,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),f=d.insert("g").attr("class","inner");h=d.node().appendChild(u),f.node().appendChild(u);const p=u.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),tr[e.id]||(tr[e.id]={}),tr[e.id].startRight=d,an(h,e.startLabelRight)}if(e.endLabelLeft){const u=$r(e.endLabelLeft,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),f=d.insert("g").attr("class","inner");h=f.node().appendChild(u);const p=u.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),d.node().appendChild(u),tr[e.id]||(tr[e.id]={}),tr[e.id].endLeft=d,an(h,e.endLabelLeft)}if(e.endLabelRight){const u=$r(e.endLabelRight,e.labelStyle),d=t.insert("g").attr("class","edgeTerminals"),f=d.insert("g").attr("class","inner");h=f.node().appendChild(u);const p=u.getBBox();f.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),d.node().appendChild(u),tr[e.id]||(tr[e.id]={}),tr[e.id].endRight=d,an(h,e.endLabelRight)}return i},"insertEdgeLabel");function an(t,e){H().flowchart.htmlLabels&&t&&(t.style.width=e.length*9+"px",t.style.height="12px")}l(an,"setTerminalWidth");var oD=l((t,e)=>{A.debug("Moving label abc88 ",t.id,t.label,ih[t.id],e);let r=e.updatedPath?e.updatedPath:e.originalPath;const a=H(),{subGraphTitleTotalMargin:i}=$n(a);if(t.label){const s=ih[t.id];let n=t.x,o=t.y;if(r){const h=re.calcLabelPosition(r);A.debug("Moving label "+t.label+" from (",n,",",o,") to (",h.x,",",h.y,") abc88"),e.updatedPath&&(n=h.x,o=h.y)}s.attr("transform",`translate(${n}, ${o+i/2})`)}if(t.startLabelLeft){const s=tr[t.id].startLeft;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}if(t.startLabelRight){const s=tr[t.id].startRight;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}if(t.endLabelLeft){const s=tr[t.id].endLeft;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}if(t.endLabelRight){const s=tr[t.id].endRight;let n=t.x,o=t.y;if(r){const h=re.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);n=h.x,o=h.y}s.attr("transform",`translate(${n}, ${o})`)}},"positionEdgeLabel"),lD=l((t,e)=>{const r=t.x,a=t.y,i=Math.abs(e.x-r),s=Math.abs(e.y-a),n=t.width/2,o=t.height/2;return i>=n||s>=o},"outsideNode"),cD=l((t,e,r)=>{A.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(e)}
  insidePoint : ${JSON.stringify(r)}
  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const a=t.x,i=t.y,s=Math.abs(a-r.x),n=t.width/2;let o=r.x<e.x?n-s:n+s;const h=t.height/2,u=Math.abs(e.y-r.y),d=Math.abs(e.x-r.x);if(Math.abs(i-e.y)*n>Math.abs(a-e.x)*h){let f=r.y<e.y?e.y-h-i:i-h-e.y;o=d*f/u;const p={x:r.x<e.x?r.x+o:r.x-d+o,y:r.y<e.y?r.y+u-f:r.y-u+f};return o===0&&(p.x=e.x,p.y=e.y),d===0&&(p.x=e.x),u===0&&(p.y=e.y),A.debug(`abc89 topp/bott calc, Q ${u}, q ${f}, R ${d}, r ${o}`,p),p}else{r.x<e.x?o=e.x-n-a:o=a-n-e.x;let f=u*o/d,p=r.x<e.x?r.x+d-o:r.x-d+o,g=r.y<e.y?r.y+f:r.y-f;return A.debug(`sides calc abc89, Q ${u}, q ${f}, R ${d}, r ${o}`,{_x:p,_y:g}),o===0&&(p=e.x,g=e.y),d===0&&(p=e.x),u===0&&(g=e.y),{x:p,y:g}}},"intersection"),x1=l((t,e)=>{A.debug("abc88 cutPathAtIntersect",t,e);let r=[],a=t[0],i=!1;return t.forEach(s=>{if(!lD(e,s)&&!i){const n=cD(e,a,s);let o=!1;r.forEach(h=>{o=o||h.x===n.x&&h.y===n.y}),r.some(h=>h.x===n.x&&h.y===n.y)||r.push(n),i=!0}else a=s,i||r.push(s)}),r},"cutPathAtIntersect"),hD=l(function(t,e,r,a,i,s,n){let o=r.points;A.debug("abc88 InsertEdge: edge=",r,"e=",e);let h=!1;const u=s.node(e.v);var d=s.node(e.w);d!=null&&d.intersect&&(u!=null&&u.intersect)&&(o=o.slice(1,r.points.length-1),o.unshift(u.intersect(o[0])),o.push(d.intersect(o[o.length-1]))),r.toCluster&&(A.debug("to cluster abc88",a[r.toCluster]),o=x1(r.points,a[r.toCluster].node),h=!0),r.fromCluster&&(A.debug("from cluster abc88",a[r.fromCluster]),o=x1(o.reverse(),a[r.fromCluster].node).reverse(),h=!0);const f=o.filter(B=>!Number.isNaN(B.y));let p=Dn;r.curve&&(i==="graph"||i==="flowchart")&&(p=r.curve);const{x:g,y}=vg(r),m=pa().x(g).y(y).curve(p);let x;switch(r.thickness){case"normal":x="edge-thickness-normal";break;case"thick":x="edge-thickness-thick";break;case"invisible":x="edge-thickness-thick";break;default:x=""}switch(r.pattern){case"solid":x+=" edge-pattern-solid";break;case"dotted":x+=" edge-pattern-dotted";break;case"dashed":x+=" edge-pattern-dashed";break}const v=t.append("path").attr("d",m(f)).attr("id",r.id).attr("class"," "+x+(r.classes?" "+r.classes:"")).attr("style",r.style);let T="";(H().flowchart.arrowMarkerAbsolute||H().state.arrowMarkerAbsolute)&&(T=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,T=T.replace(/\(/g,"\\("),T=T.replace(/\)/g,"\\)")),aD(v,r,T,n,i);let I={};return h&&(I.updatedPath=o),I.originalPath=r.points,I},"insertEdge"),uD=l(t=>{const e=new Set;for(const r of t)switch(r){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(r);break}return e},"expandAndDeduplicateDirections"),dD=l((t,e,r)=>{const a=uD(t),i=2,s=e.height+2*r.padding,n=s/i,o=e.width+2*n+r.padding,h=r.padding/2;return a.has("right")&&a.has("left")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:n,y:0},{x:o/2,y:2*h},{x:o-n,y:0},{x:o,y:0},{x:o,y:-s/3},{x:o+2*h,y:-s/2},{x:o,y:-2*s/3},{x:o,y:-s},{x:o-n,y:-s},{x:o/2,y:-s-2*h},{x:n,y:-s},{x:0,y:-s},{x:0,y:-2*s/3},{x:-2*h,y:-s/2},{x:0,y:-s/3}]:a.has("right")&&a.has("left")&&a.has("up")?[{x:n,y:0},{x:o-n,y:0},{x:o,y:-s/2},{x:o-n,y:-s},{x:n,y:-s},{x:0,y:-s/2}]:a.has("right")&&a.has("left")&&a.has("down")?[{x:0,y:0},{x:n,y:-s},{x:o-n,y:-s},{x:o,y:0}]:a.has("right")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:o,y:-n},{x:o,y:-s+n},{x:0,y:-s}]:a.has("left")&&a.has("up")&&a.has("down")?[{x:o,y:0},{x:0,y:-n},{x:0,y:-s+n},{x:o,y:-s}]:a.has("right")&&a.has("left")?[{x:n,y:0},{x:n,y:-h},{x:o-n,y:-h},{x:o-n,y:0},{x:o,y:-s/2},{x:o-n,y:-s},{x:o-n,y:-s+h},{x:n,y:-s+h},{x:n,y:-s},{x:0,y:-s/2}]:a.has("up")&&a.has("down")?[{x:o/2,y:0},{x:0,y:-h},{x:n,y:-h},{x:n,y:-s+h},{x:0,y:-s+h},{x:o/2,y:-s},{x:o,y:-s+h},{x:o-n,y:-s+h},{x:o-n,y:-h},{x:o,y:-h}]:a.has("right")&&a.has("up")?[{x:0,y:0},{x:o,y:-n},{x:0,y:-s}]:a.has("right")&&a.has("down")?[{x:0,y:0},{x:o,y:0},{x:0,y:-s}]:a.has("left")&&a.has("up")?[{x:o,y:0},{x:0,y:-n},{x:o,y:-s}]:a.has("left")&&a.has("down")?[{x:o,y:0},{x:0,y:0},{x:o,y:-s}]:a.has("right")?[{x:n,y:-h},{x:n,y:-h},{x:o-n,y:-h},{x:o-n,y:0},{x:o,y:-s/2},{x:o-n,y:-s},{x:o-n,y:-s+h},{x:n,y:-s+h},{x:n,y:-s+h}]:a.has("left")?[{x:n,y:0},{x:n,y:-h},{x:o-n,y:-h},{x:o-n,y:-s+h},{x:n,y:-s+h},{x:n,y:-s},{x:0,y:-s/2}]:a.has("up")?[{x:n,y:-h},{x:n,y:-s+h},{x:0,y:-s+h},{x:o/2,y:-s},{x:o,y:-s+h},{x:o-n,y:-s+h},{x:o-n,y:-h}]:a.has("down")?[{x:o/2,y:0},{x:0,y:-h},{x:n,y:-h},{x:n,y:-s+h},{x:o-n,y:-s+h},{x:o-n,y:-h},{x:o,y:-h}]:[{x:0,y:0}]},"getArrowPoints");function Rx(t,e){return t.intersect(e)}l(Rx,"intersectNode");var pD=Rx;function Ix(t,e,r,a){var i=t.x,s=t.y,n=i-a.x,o=s-a.y,h=Math.sqrt(e*e*o*o+r*r*n*n),u=Math.abs(e*r*n/h);a.x<i&&(u=-u);var d=Math.abs(e*r*o/h);return a.y<s&&(d=-d),{x:i+u,y:s+d}}l(Ix,"intersectEllipse");var Nx=Ix;function Fx(t,e,r){return Nx(t,e,e,r)}l(Fx,"intersectCircle");var fD=Fx;function Px(t,e,r,a){var i,s,n,o,h,u,d,f,p,g,y,m,x,v,T;if(i=e.y-t.y,n=t.x-e.x,h=e.x*t.y-t.x*e.y,p=i*r.x+n*r.y+h,g=i*a.x+n*a.y+h,!(p!==0&&g!==0&&ah(p,g))&&(s=a.y-r.y,o=r.x-a.x,u=a.x*r.y-r.x*a.y,d=s*t.x+o*t.y+u,f=s*e.x+o*e.y+u,!(d!==0&&f!==0&&ah(d,f))&&(y=i*o-s*n,y!==0)))return m=Math.abs(y/2),x=n*u-o*h,v=x<0?(x-m)/y:(x+m)/y,x=s*h-i*u,T=x<0?(x-m)/y:(x+m)/y,{x:v,y:T}}l(Px,"intersectLine");function ah(t,e){return t*e>0}l(ah,"sameSign");var gD=Px,yD=Ox;function Ox(t,e,r){var a=t.x,i=t.y,s=[],n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;typeof e.forEach=="function"?e.forEach(function(y){n=Math.min(n,y.x),o=Math.min(o,y.y)}):(n=Math.min(n,e.x),o=Math.min(o,e.y));for(var h=a-t.width/2-n,u=i-t.height/2-o,d=0;d<e.length;d++){var f=e[d],p=e[d<e.length-1?d+1:0],g=gD(t,r,{x:h+f.x,y:u+f.y},{x:h+p.x,y:u+p.y});g&&s.push(g)}return s.length?(s.length>1&&s.sort(function(y,m){var x=y.x-r.x,v=y.y-r.y,T=Math.sqrt(x*x+v*v),I=m.x-r.x,B=m.y-r.y,_=Math.sqrt(I*I+B*B);return T<_?-1:T===_?0:1}),s[0]):t}l(Ox,"intersectPolygon");var mD=l((t,e)=>{var r=t.x,a=t.y,i=e.x-r,s=e.y-a,n=t.width/2,o=t.height/2,h,u;return Math.abs(s)*n>Math.abs(i)*o?(s<0&&(o=-o),h=s===0?0:o*i/s,u=o):(i<0&&(n=-n),h=n,u=i===0?0:n*s/i),{x:r+h,y:a+u}},"intersectRect"),xD=mD,Ce={node:pD,circle:fD,ellipse:Nx,polygon:yD,rect:xD},Ge=l(async(t,e,r,a)=>{const i=H();let s;const n=e.useHtmlLabels||xe(i.flowchart.htmlLabels);r?s=r:s="node default";const o=t.insert("g").attr("class",s).attr("id",e.domId||e.id),h=o.insert("g").attr("class","label").attr("style",e.labelStyle);let u;e.labelText===void 0?u="":u=typeof e.labelText=="string"?e.labelText:e.labelText[0];const d=h.node();let f;e.labelType==="markdown"?f=Wr(h,me(Ai(u),i),{useHtmlLabels:n,width:e.width||i.flowchart.wrappingWidth,classes:"markdown-node-label"},i):f=d.appendChild($r(me(Ai(u),i),e.labelStyle,!1,a));let p=f.getBBox();const g=e.padding/2;if(xe(i.flowchart.htmlLabels)){const y=f.children[0],m=yt(f),x=y.getElementsByTagName("img");if(x){const v=u.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...x].map(T=>new Promise(I=>{function B(){if(T.style.display="flex",T.style.flexDirection="column",v){const _=i.fontSize?i.fontSize:window.getComputedStyle(document.body).fontSize,D=parseInt(_,10)*5+"px";T.style.minWidth=D,T.style.maxWidth=D}else T.style.width="100%";I(T)}l(B,"setupImage"),setTimeout(()=>{T.complete&&B()}),T.addEventListener("error",B),T.addEventListener("load",B)})))}p=y.getBoundingClientRect(),m.attr("width",p.width),m.attr("height",p.height)}return n?h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"):h.attr("transform","translate(0, "+-p.height/2+")"),e.centerLabel&&h.attr("transform","translate("+-p.width/2+", "+-p.height/2+")"),h.insert("rect",":first-child"),{shapeSvg:o,bbox:p,halfPadding:g,label:h}},"labelHelper"),Le=l((t,e)=>{const r=e.node().getBBox();t.width=r.width,t.height=r.height},"updateNodeBounds");function ti(t,e,r,a){return t.insert("polygon",":first-child").attr("points",a.map(function(i){return i.x+","+i.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}l(ti,"insertPolygonShape");var bD=l(async(t,e)=>{e.useHtmlLabels||H().flowchart.htmlLabels||(e.centerLabel=!0);const{shapeSvg:a,bbox:i,halfPadding:s}=await Ge(t,e,"node "+e.classes,!0);A.info("Classes = ",e.classes);const n=a.insert("rect",":first-child");return n.attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-s).attr("y",-i.height/2-s).attr("width",i.width+e.padding).attr("height",i.height+e.padding),Le(e,n),e.intersect=function(o){return Ce.rect(e,o)},a},"note"),kD=bD,b1=l(t=>t?" "+t:"","formatClass"),Lr=l((t,e)=>`${e||"node default"}${b1(t.classes)} ${b1(t.class)}`,"getClassesFromNode"),k1=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=i+s,o=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}];A.info("Question main (Circle)");const h=ti(r,n,n,o);return h.attr("style",e.style),Le(e,h),e.intersect=function(u){return A.warn("Intersect called"),Ce.polygon(e,o,u)},r},"question"),vD=l((t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=28,i=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-28/2},{x:-28/2,y:0}];return r.insert("polygon",":first-child").attr("points",i.map(function(n){return n.x+","+n.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(n){return Ce.circle(e,14,n)},r},"choice"),TD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=4,s=a.height+e.padding,n=s/i,o=a.width+2*n+e.padding,h=[{x:n,y:0},{x:o-n,y:0},{x:o,y:-s/2},{x:o-n,y:-s},{x:n,y:-s},{x:0,y:-s/2}],u=ti(r,o,s,h);return u.attr("style",e.style),Le(e,u),e.intersect=function(d){return Ce.polygon(e,h,d)},r},"hexagon"),_D=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,void 0,!0),i=2,s=a.height+2*e.padding,n=s/i,o=a.width+2*n+e.padding,h=dD(e.directions,a,e),u=ti(r,o,s,h);return u.attr("style",e.style),Le(e,u),e.intersect=function(d){return Ce.polygon(e,h,d)},r},"block_arrow"),CD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:-s/2,y:0},{x:i,y:0},{x:i,y:-s},{x:-s/2,y:-s},{x:0,y:-s/2}];return ti(r,i,s,n).attr("style",e.style),e.width=i+s,e.height=s,e.intersect=function(h){return Ce.polygon(e,n,h)},r},"rect_left_inv_arrow"),SD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:-2*s/6,y:0},{x:i-s/6,y:0},{x:i+2*s/6,y:-s},{x:s/6,y:-s}],o=ti(r,i,s,n);return o.attr("style",e.style),Le(e,o),e.intersect=function(h){return Ce.polygon(e,n,h)},r},"lean_right"),wD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:2*s/6,y:0},{x:i+s/6,y:0},{x:i-2*s/6,y:-s},{x:-s/6,y:-s}],o=ti(r,i,s,n);return o.attr("style",e.style),Le(e,o),e.intersect=function(h){return Ce.polygon(e,n,h)},r},"lean_left"),ED=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:-2*s/6,y:0},{x:i+2*s/6,y:0},{x:i-s/6,y:-s},{x:s/6,y:-s}],o=ti(r,i,s,n);return o.attr("style",e.style),Le(e,o),e.intersect=function(h){return Ce.polygon(e,n,h)},r},"trapezoid"),AD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:s/6,y:0},{x:i-s/6,y:0},{x:i+2*s/6,y:-s},{x:-2*s/6,y:-s}],o=ti(r,i,s,n);return o.attr("style",e.style),Le(e,o),e.intersect=function(h){return Ce.polygon(e,n,h)},r},"inv_trapezoid"),LD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:0,y:0},{x:i+s/2,y:0},{x:i,y:-s/2},{x:i+s/2,y:-s},{x:0,y:-s}],o=ti(r,i,s,n);return o.attr("style",e.style),Le(e,o),e.intersect=function(h){return Ce.polygon(e,n,h)},r},"rect_right_inv_arrow"),BD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=i/2,n=s/(2.5+i/50),o=a.height+n+e.padding,h="M 0,"+n+" a "+s+","+n+" 0,0,0 "+i+" 0 a "+s+","+n+" 0,0,0 "+-i+" 0 l 0,"+o+" a "+s+","+n+" 0,0,0 "+i+" 0 l 0,"+-o,u=r.attr("label-offset-y",n).insert("path",":first-child").attr("style",e.style).attr("d",h).attr("transform","translate("+-i/2+","+-(o/2+n)+")");return Le(e,u),e.intersect=function(d){const f=Ce.rect(e,d),p=f.x-e.x;if(s!=0&&(Math.abs(p)<e.width/2||Math.abs(p)==e.width/2&&Math.abs(f.y-e.y)>e.height/2-n)){let g=n*n*(1-p*p/(s*s));g!=0&&(g=Math.sqrt(g)),g=n-g,d.y-e.y>0&&(g=-g),f.y+=g}return f},r},"cylinder"),DD=l(async(t,e)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Ge(t,e,"node "+e.classes+" "+e.class,!0),s=r.insert("rect",":first-child"),n=e.positioned?e.width:a.width+e.padding,o=e.positioned?e.height:a.height+e.padding,h=e.positioned?-n/2:-a.width/2-i,u=e.positioned?-o/2:-a.height/2-i;if(s.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",h).attr("y",u).attr("width",n).attr("height",o),e.props){const d=new Set(Object.keys(e.props));e.props.borders&&(Bl(s,e.props.borders,n,o),d.delete("borders")),d.forEach(f=>{A.warn(`Unknown node property ${f}`)})}return Le(e,s),e.intersect=function(d){return Ce.rect(e,d)},r},"rect"),RD=l(async(t,e)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Ge(t,e,"node "+e.classes,!0),s=r.insert("rect",":first-child"),n=e.positioned?e.width:a.width+e.padding,o=e.positioned?e.height:a.height+e.padding,h=e.positioned?-n/2:-a.width/2-i,u=e.positioned?-o/2:-a.height/2-i;if(s.attr("class","basic cluster composite label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",h).attr("y",u).attr("width",n).attr("height",o),e.props){const d=new Set(Object.keys(e.props));e.props.borders&&(Bl(s,e.props.borders,n,o),d.delete("borders")),d.forEach(f=>{A.warn(`Unknown node property ${f}`)})}return Le(e,s),e.intersect=function(d){return Ce.rect(e,d)},r},"composite"),ID=l(async(t,e)=>{const{shapeSvg:r}=await Ge(t,e,"label",!0);A.trace("Classes = ",e.class);const a=r.insert("rect",":first-child"),i=0,s=0;if(a.attr("width",i).attr("height",s),r.attr("class","label edgeLabel"),e.props){const n=new Set(Object.keys(e.props));e.props.borders&&(Bl(a,e.props.borders,i,s),n.delete("borders")),n.forEach(o=>{A.warn(`Unknown node property ${o}`)})}return Le(e,a),e.intersect=function(n){return Ce.rect(e,n)},r},"labelRect");function Bl(t,e,r,a){const i=[],s=l(o=>{i.push(o,0)},"addBorder"),n=l(o=>{i.push(0,o)},"skipBorder");e.includes("t")?(A.debug("add top border"),s(r)):n(r),e.includes("r")?(A.debug("add right border"),s(a)):n(a),e.includes("b")?(A.debug("add bottom border"),s(r)):n(r),e.includes("l")?(A.debug("add left border"),s(a)):n(a),t.attr("stroke-dasharray",i.join(" "))}l(Bl,"applyNodePropertyBorders");var ND=l((t,e)=>{let r;e.classes?r="node "+e.classes:r="node default";const a=t.insert("g").attr("class",r).attr("id",e.domId||e.id),i=a.insert("rect",":first-child"),s=a.insert("line"),n=a.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText;let h="";typeof o=="object"?h=o[0]:h=o,A.info("Label text abc79",h,o,typeof o=="object");const u=n.node().appendChild($r(h,e.labelStyle,!0,!0));let d={width:0,height:0};if(xe(H().flowchart.htmlLabels)){const m=u.children[0],x=yt(u);d=m.getBoundingClientRect(),x.attr("width",d.width),x.attr("height",d.height)}A.info("Text 2",o);const f=o.slice(1,o.length);let p=u.getBBox();const g=n.node().appendChild($r(f.join?f.join("<br/>"):f,e.labelStyle,!0,!0));if(xe(H().flowchart.htmlLabels)){const m=g.children[0],x=yt(g);d=m.getBoundingClientRect(),x.attr("width",d.width),x.attr("height",d.height)}const y=e.padding/2;return yt(g).attr("transform","translate( "+(d.width>p.width?0:(p.width-d.width)/2)+", "+(p.height+y+5)+")"),yt(u).attr("transform","translate( "+(d.width<p.width?0:-(p.width-d.width)/2)+", 0)"),d=n.node().getBBox(),n.attr("transform","translate("+-d.width/2+", "+(-d.height/2-y+3)+")"),i.attr("class","outer title-state").attr("x",-d.width/2-y).attr("y",-d.height/2-y).attr("width",d.width+e.padding).attr("height",d.height+e.padding),s.attr("class","divider").attr("x1",-d.width/2-y).attr("x2",d.width/2+y).attr("y1",-d.height/2-y+p.height+y).attr("y2",-d.height/2-y+p.height+y),Le(e,i),e.intersect=function(m){return Ce.rect(e,m)},a},"rectWithTitle"),FD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.height+e.padding,s=a.width+i/4+e.padding,n=r.insert("rect",":first-child").attr("style",e.style).attr("rx",i/2).attr("ry",i/2).attr("x",-s/2).attr("y",-i/2).attr("width",s).attr("height",i);return Le(e,n),e.intersect=function(o){return Ce.rect(e,o)},r},"stadium"),PD=l(async(t,e)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Ge(t,e,Lr(e,void 0),!0),s=r.insert("circle",":first-child");return s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",a.width/2+i).attr("width",a.width+e.padding).attr("height",a.height+e.padding),A.info("Circle main"),Le(e,s),e.intersect=function(n){return A.info("Circle intersect",e,a.width/2+i,n),Ce.circle(e,a.width/2+i,n)},r},"circle"),OD=l(async(t,e)=>{const{shapeSvg:r,bbox:a,halfPadding:i}=await Ge(t,e,Lr(e,void 0),!0),s=5,n=r.insert("g",":first-child"),o=n.insert("circle"),h=n.insert("circle");return n.attr("class",e.class),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",a.width/2+i+s).attr("width",a.width+e.padding+s*2).attr("height",a.height+e.padding+s*2),h.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",a.width/2+i).attr("width",a.width+e.padding).attr("height",a.height+e.padding),A.info("DoubleCircle main"),Le(e,o),e.intersect=function(u){return A.info("DoubleCircle intersect",e,a.width/2+i+s,u),Ce.circle(e,a.width/2+i+s,u)},r},"doublecircle"),MD=l(async(t,e)=>{const{shapeSvg:r,bbox:a}=await Ge(t,e,Lr(e,void 0),!0),i=a.width+e.padding,s=a.height+e.padding,n=[{x:0,y:0},{x:i,y:0},{x:i,y:-s},{x:0,y:-s},{x:0,y:0},{x:-8,y:0},{x:i+8,y:0},{x:i+8,y:-s},{x:-8,y:-s},{x:-8,y:0}],o=ti(r,i,s,n);return o.attr("style",e.style),Le(e,o),e.intersect=function(h){return Ce.polygon(e,n,h)},r},"subroutine"),$D=l((t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),Le(e,a),e.intersect=function(i){return Ce.circle(e,7,i)},r},"start"),v1=l((t,e,r)=>{const a=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let i=70,s=10;r==="LR"&&(i=10,s=70);const n=a.append("rect").attr("x",-1*i/2).attr("y",-1*s/2).attr("width",i).attr("height",s).attr("class","fork-join");return Le(e,n),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(o){return Ce.rect(e,o)},a},"forkJoin"),VD=l((t,e)=>{const r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),a=r.insert("circle",":first-child"),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),Le(e,i),e.intersect=function(s){return Ce.circle(e,7,s)},r},"end"),zD=l((t,e)=>{var S;const r=e.padding/2,a=4,i=8;let s;e.classes?s="node "+e.classes:s="node default";const n=t.insert("g").attr("class",s).attr("id",e.domId||e.id),o=n.insert("rect",":first-child"),h=n.insert("line"),u=n.insert("line");let d=0,f=a;const p=n.insert("g").attr("class","label");let g=0;const y=(S=e.classData.annotations)==null?void 0:S[0],m=e.classData.annotations[0]?""+e.classData.annotations[0]+"":"",x=p.node().appendChild($r(m,e.labelStyle,!0,!0));let v=x.getBBox();if(xe(H().flowchart.htmlLabels)){const b=x.children[0],C=yt(x);v=b.getBoundingClientRect(),C.attr("width",v.width),C.attr("height",v.height)}e.classData.annotations[0]&&(f+=v.height+a,d+=v.width);let T=e.classData.label;e.classData.type!==void 0&&e.classData.type!==""&&(H().flowchart.htmlLabels?T+="&lt;"+e.classData.type+"&gt;":T+="<"+e.classData.type+">");const I=p.node().appendChild($r(T,e.labelStyle,!0,!0));yt(I).attr("class","classTitle");let B=I.getBBox();if(xe(H().flowchart.htmlLabels)){const b=I.children[0],C=yt(I);B=b.getBoundingClientRect(),C.attr("width",B.width),C.attr("height",B.height)}f+=B.height+a,B.width>d&&(d=B.width);const _=[];e.classData.members.forEach(b=>{const C=b.getDisplayDetails();let k=C.displayText;H().flowchart.htmlLabels&&(k=k.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const E=p.node().appendChild($r(k,C.cssStyle?C.cssStyle:e.labelStyle,!0,!0));let P=E.getBBox();if(xe(H().flowchart.htmlLabels)){const O=E.children[0],V=yt(E);P=O.getBoundingClientRect(),V.attr("width",P.width),V.attr("height",P.height)}P.width>d&&(d=P.width),f+=P.height+a,_.push(E)}),f+=i;const w=[];if(e.classData.methods.forEach(b=>{const C=b.getDisplayDetails();let k=C.displayText;H().flowchart.htmlLabels&&(k=k.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const E=p.node().appendChild($r(k,C.cssStyle?C.cssStyle:e.labelStyle,!0,!0));let P=E.getBBox();if(xe(H().flowchart.htmlLabels)){const O=E.children[0],V=yt(E);P=O.getBoundingClientRect(),V.attr("width",P.width),V.attr("height",P.height)}P.width>d&&(d=P.width),f+=P.height+a,w.push(E)}),f+=i,y){let b=(d-v.width)/2;yt(x).attr("transform","translate( "+(-1*d/2+b)+", "+-1*f/2+")"),g=v.height+a}let D=(d-B.width)/2;return yt(I).attr("transform","translate( "+(-1*d/2+D)+", "+(-1*f/2+g)+")"),g+=B.height+a,h.attr("class","divider").attr("x1",-d/2-r).attr("x2",d/2+r).attr("y1",-f/2-r+i+g).attr("y2",-f/2-r+i+g),g+=i,_.forEach(b=>{yt(b).attr("transform","translate( "+-d/2+", "+(-1*f/2+g+i/2)+")");const C=b==null?void 0:b.getBBox();g+=((C==null?void 0:C.height)??0)+a}),g+=i,u.attr("class","divider").attr("x1",-d/2-r).attr("x2",d/2+r).attr("y1",-f/2-r+i+g).attr("y2",-f/2-r+i+g),g+=i,w.forEach(b=>{yt(b).attr("transform","translate( "+-d/2+", "+(-1*f/2+g)+")");const C=b==null?void 0:b.getBBox();g+=((C==null?void 0:C.height)??0)+a}),o.attr("style",e.style).attr("class","outer title-state").attr("x",-d/2-r).attr("y",-(f/2)-r).attr("width",d+e.padding).attr("height",f+e.padding),Le(e,o),e.intersect=function(b){return Ce.rect(e,b)},n},"class_box"),T1={rhombus:k1,composite:RD,question:k1,rect:DD,labelRect:ID,rectWithTitle:ND,choice:vD,circle:PD,doublecircle:OD,stadium:FD,hexagon:TD,block_arrow:_D,rect_left_inv_arrow:CD,lean_right:SD,lean_left:wD,trapezoid:ED,inv_trapezoid:AD,rect_right_inv_arrow:LD,cylinder:BD,start:$D,end:VD,note:kD,subroutine:MD,fork:v1,join:v1,class_box:zD},po={},Mx=l(async(t,e,r)=>{let a,i;if(e.link){let s;H().securityLevel==="sandbox"?s="_top":e.linkTarget&&(s=e.linkTarget||"_blank"),a=t.insert("svg:a").attr("xlink:href",e.link).attr("target",s),i=await T1[e.shape](a,e,r)}else i=await T1[e.shape](t,e,r),a=i;return e.tooltip&&i.attr("title",e.tooltip),e.class&&i.attr("class","node default "+e.class),po[e.id]=a,e.haveCallback&&po[e.id].attr("class",po[e.id].attr("class")+" clickable"),a},"insertNode"),WD=l(t=>{const e=po[t.id];A.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const r=8,a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-r)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode");function ju(t,e,r=!1){var p,g,y;const a=t;let i="default";(((p=a==null?void 0:a.classes)==null?void 0:p.length)||0)>0&&(i=((a==null?void 0:a.classes)??[]).join(" ")),i=i+" flowchart-label";let s=0,n="",o;switch(a.type){case"round":s=5,n="rect";break;case"composite":s=0,n="composite",o=0;break;case"square":n="rect";break;case"diamond":n="question";break;case"hexagon":n="hexagon";break;case"block_arrow":n="block_arrow";break;case"odd":n="rect_left_inv_arrow";break;case"lean_right":n="lean_right";break;case"lean_left":n="lean_left";break;case"trapezoid":n="trapezoid";break;case"inv_trapezoid":n="inv_trapezoid";break;case"rect_left_inv_arrow":n="rect_left_inv_arrow";break;case"circle":n="circle";break;case"ellipse":n="ellipse";break;case"stadium":n="stadium";break;case"subroutine":n="subroutine";break;case"cylinder":n="cylinder";break;case"group":n="rect";break;case"doublecircle":n="doublecircle";break;default:n="rect"}const h=Eh((a==null?void 0:a.styles)??[]),u=a.label,d=a.size??{width:0,height:0,x:0,y:0};return{labelStyle:h.labelStyle,shape:n,labelText:u,rx:s,ry:s,class:i,style:h.style,id:a.id,directions:a.directions,width:d.width,height:d.height,x:d.x,y:d.y,positioned:r,intersect:void 0,type:a.type,padding:o??((y=(g=_e())==null?void 0:g.block)==null?void 0:y.padding)??0}}l(ju,"getNodeFromBlock");async function $x(t,e,r){const a=ju(e,r,!1);if(a.type==="group")return;const i=_e(),s=await Mx(t,a,{config:i}),n=s.node().getBBox(),o=r.getBlock(a.id);o.size={width:n.width,height:n.height,x:0,y:0,node:s},r.setBlock(o),s.remove()}l($x,"calculateBlockSize");async function Vx(t,e,r){const a=ju(e,r,!0);if(r.getBlock(a.id).type!=="space"){const s=_e();await Mx(t,a,{config:s}),e.intersect=a==null?void 0:a.intersect,WD(a)}}l(Vx,"insertBlockPositioned");async function Dl(t,e,r,a){for(const i of e)await a(t,i,r),i.children&&await Dl(t,i.children,r,a)}l(Dl,"performOperations");async function zx(t,e,r){await Dl(t,e,r,$x)}l(zx,"calculateBlockSizes");async function Wx(t,e,r){await Dl(t,e,r,Vx)}l(Wx,"insertBlocks");async function qx(t,e,r,a,i){const s=new $s({multigraph:!0,compound:!0});s.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(const n of r)n.size&&s.setNode(n.id,{width:n.size.width,height:n.size.height,intersect:n.intersect});for(const n of e)if(n.start&&n.end){const o=a.getBlock(n.start),h=a.getBlock(n.end);if(o!=null&&o.size&&(h!=null&&h.size)){const u=o.size,d=h.size,f=[{x:u.x,y:u.y},{x:u.x+(d.x-u.x)/2,y:u.y+(d.y-u.y)/2},{x:d.x,y:d.y}];hD(t,{v:n.start,w:n.end,name:n.id},{...n,arrowTypeEnd:n.arrowTypeEnd,arrowTypeStart:n.arrowTypeStart,points:f,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",s,i),n.label&&(await nD(t,{...n,label:n.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:n.arrowTypeEnd,arrowTypeStart:n.arrowTypeStart,points:f,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),oD({...n,x:f[1].x,y:f[1].y},{originalPath:f}))}}}l(qx,"insertEdges");var qD=l(function(t,e){return e.db.getClasses()},"getClasses"),YD=l(async function(t,e,r,a){const{securityLevel:i,block:s}=_e(),n=a.db;let o;i==="sandbox"&&(o=yt("#i"+e));const h=i==="sandbox"?yt(o.nodes()[0].contentDocument.body):yt("body"),u=i==="sandbox"?h.select(`[id="${e}"]`):yt(`[id="${e}"]`);eD(u,["point","circle","cross"],a.type,e);const f=n.getBlocks(),p=n.getBlocksFlat(),g=n.getEdges(),y=u.insert("g").attr("class","block");await zx(y,f,n);const m=Bx(n);if(await Wx(y,f,n),await qx(y,g,p,n,e),m){const x=m,v=Math.max(1,Math.round(.125*(x.width/x.height))),T=x.height+v+10,I=x.width+10,{useMaxWidth:B}=s;ar(u,T,I,!!B),A.debug("Here Bounds",m,x),u.attr("viewBox",`${x.x-5} ${x.y-5} ${x.width+10} ${x.height+10}`)}},"draw"),HD={draw:YD,getClasses:qD},GD={parser:TB,db:zB,renderer:HD,styles:qB};const UD=Object.freeze(Object.defineProperty({__proto__:null,diagram:GD},Symbol.toStringTag,{value:"Module"}));var _1={L:"left",R:"right",T:"top",B:"bottom"},C1={L:l(t=>`${t},${t/2} 0,${t} 0,0`,"L"),R:l(t=>`0,${t/2} ${t},0 ${t},${t}`,"R"),T:l(t=>`0,0 ${t},0 ${t/2},${t}`,"T"),B:l(t=>`${t/2},0 ${t},${t} 0,${t}`,"B")},eo={L:l((t,e)=>t-e+2,"L"),R:l((t,e)=>t-2,"R"),T:l((t,e)=>t-e+2,"T"),B:l((t,e)=>t-2,"B")},jD=l(function(t){return mr(t)?t==="L"?"R":"L":t==="T"?"B":"T"},"getOppositeArchitectureDirection"),S1=l(function(t){const e=t;return e==="L"||e==="R"||e==="T"||e==="B"},"isArchitectureDirection"),mr=l(function(t){const e=t;return e==="L"||e==="R"},"isArchitectureDirectionX"),Ui=l(function(t){const e=t;return e==="T"||e==="B"},"isArchitectureDirectionY"),Yx=l(function(t,e){const r=mr(t)&&Ui(e),a=Ui(t)&&mr(e);return r||a},"isArchitectureDirectionXY"),XD=l(function(t){const e=t[0],r=t[1],a=mr(e)&&Ui(r),i=Ui(e)&&mr(r);return a||i},"isArchitecturePairXY"),KD=l(function(t){return t!=="LL"&&t!=="RR"&&t!=="TT"&&t!=="BB"},"isValidArchitectureDirectionPair"),sh=l(function(t,e){const r=`${t}${e}`;return KD(r)?r:void 0},"getArchitectureDirectionPair"),QD=l(function([t,e],r){const a=r[0],i=r[1];return mr(a)?Ui(i)?[t+(a==="L"?-1:1),e+(i==="T"?1:-1)]:[t+(a==="L"?-1:1),e]:mr(i)?[t+(i==="L"?1:-1),e+(a==="T"?1:-1)]:[t,e+(a==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),ZD=l(function(t){return t==="LT"||t==="TL"?[1,1]:t==="BL"||t==="LB"?[1,-1]:t==="BR"||t==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),JD=l(function(t){return t.type==="service"},"isArchitectureService"),tR=l(function(t){return t.type==="junction"},"isArchitectureJunction"),Hx=l(t=>t.data(),"edgeData"),Na=l(t=>t.data(),"nodeData"),Gx=pe.architecture,ne=new Xh(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:Gx,dataStructures:void 0,elements:{}})),eR=l(()=>{ne.reset(),Ye()},"clear"),rR=l(function({id:t,icon:e,in:r,title:a,iconText:i}){if(ne.records.registeredIds[t]!==void 0)throw new Error(`The service id [${t}] is already in use by another ${ne.records.registeredIds[t]}`);if(r!==void 0){if(t===r)throw new Error(`The service [${t}] cannot be placed within itself`);if(ne.records.registeredIds[r]===void 0)throw new Error(`The service [${t}]'s parent does not exist. Please make sure the parent is created before this service`);if(ne.records.registeredIds[r]==="node")throw new Error(`The service [${t}]'s parent is not a group`)}ne.records.registeredIds[t]="node",ne.records.nodes[t]={id:t,type:"service",icon:e,iconText:i,title:a,edges:[],in:r}},"addService"),iR=l(()=>Object.values(ne.records.nodes).filter(JD),"getServices"),aR=l(function({id:t,in:e}){ne.records.registeredIds[t]="node",ne.records.nodes[t]={id:t,type:"junction",edges:[],in:e}},"addJunction"),sR=l(()=>Object.values(ne.records.nodes).filter(tR),"getJunctions"),nR=l(()=>Object.values(ne.records.nodes),"getNodes"),oR=l(t=>ne.records.nodes[t],"getNode"),lR=l(function({id:t,icon:e,in:r,title:a}){if(ne.records.registeredIds[t]!==void 0)throw new Error(`The group id [${t}] is already in use by another ${ne.records.registeredIds[t]}`);if(r!==void 0){if(t===r)throw new Error(`The group [${t}] cannot be placed within itself`);if(ne.records.registeredIds[r]===void 0)throw new Error(`The group [${t}]'s parent does not exist. Please make sure the parent is created before this group`);if(ne.records.registeredIds[r]==="node")throw new Error(`The group [${t}]'s parent is not a group`)}ne.records.registeredIds[t]="group",ne.records.groups[t]={id:t,icon:e,title:a,in:r}},"addGroup"),cR=l(()=>Object.values(ne.records.groups),"getGroups"),hR=l(function({lhsId:t,rhsId:e,lhsDir:r,rhsDir:a,lhsInto:i,rhsInto:s,lhsGroup:n,rhsGroup:o,title:h}){if(!S1(r))throw new Error(`Invalid direction given for left hand side of edge ${t}--${e}. Expected (L,R,T,B) got ${r}`);if(!S1(a))throw new Error(`Invalid direction given for right hand side of edge ${t}--${e}. Expected (L,R,T,B) got ${a}`);if(ne.records.nodes[t]===void 0&&ne.records.groups[t]===void 0)throw new Error(`The left-hand id [${t}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(ne.records.nodes[e]===void 0&&ne.records.groups[t]===void 0)throw new Error(`The right-hand id [${e}] does not yet exist. Please create the service/group before declaring an edge to it.`);const u=ne.records.nodes[t].in,d=ne.records.nodes[e].in;if(n&&u&&d&&u==d)throw new Error(`The left-hand id [${t}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(o&&u&&d&&u==d)throw new Error(`The right-hand id [${e}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);const f={lhsId:t,lhsDir:r,lhsInto:i,lhsGroup:n,rhsId:e,rhsDir:a,rhsInto:s,rhsGroup:o,title:h};ne.records.edges.push(f),ne.records.nodes[t]&&ne.records.nodes[e]&&(ne.records.nodes[t].edges.push(ne.records.edges[ne.records.edges.length-1]),ne.records.nodes[e].edges.push(ne.records.edges[ne.records.edges.length-1]))},"addEdge"),uR=l(()=>ne.records.edges,"getEdges"),dR=l(()=>{if(ne.records.dataStructures===void 0){const t=Object.entries(ne.records.nodes).reduce((n,[o,h])=>(n[o]=h.edges.reduce((u,d)=>{if(d.lhsId===o){const f=sh(d.lhsDir,d.rhsDir);f&&(u[f]=d.rhsId)}else{const f=sh(d.rhsDir,d.lhsDir);f&&(u[f]=d.lhsId)}return u},{}),n),{}),e=Object.keys(t)[0],r={[e]:1},a=Object.keys(t).reduce((n,o)=>o===e?n:{...n,[o]:1},{}),i=l(n=>{const o={[n]:[0,0]},h=[n];for(;h.length>0;){const u=h.shift();if(u){r[u]=1,delete a[u];const d=t[u],[f,p]=o[u];Object.entries(d).forEach(([g,y])=>{r[y]||(o[y]=QD([f,p],g),h.push(y))})}}return o},"BFS"),s=[i(e)];for(;Object.keys(a).length>0;)s.push(i(Object.keys(a)[0]));ne.records.dataStructures={adjList:t,spatialMaps:s}}return ne.records.dataStructures},"getDataStructures"),pR=l((t,e)=>{ne.records.elements[t]=e},"setElementForId"),fR=l(t=>ne.records.elements[t],"getElementById"),Jo={clear:eR,setDiagramTitle:dr,getDiagramTitle:Je,setAccTitle:He,getAccTitle:Ke,setAccDescription:Qe,getAccDescription:Ze,addService:rR,getServices:iR,addJunction:aR,getJunctions:sR,getNodes:nR,getNode:oR,addGroup:lR,getGroups:cR,addEdge:hR,getEdges:uR,setElementForId:pR,getElementById:fR,getDataStructures:dR};function We(t){const e=H().architecture;return e!=null&&e[t]?e[t]:Gx[t]}l(We,"getConfigField");var gR=l((t,e)=>{Vn(t,e),t.groups.map(e.addGroup),t.services.map(r=>e.addService({...r,type:"service"})),t.junctions.map(r=>e.addJunction({...r,type:"junction"})),t.edges.map(e.addEdge)},"populateDb"),yR={parse:l(async t=>{const e=await Hs("architecture",t);A.debug(e),gR(e,Jo)},"parse")},mR=l(t=>`
  .edge {
    stroke-width: ${t.archEdgeWidth};
    stroke: ${t.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${t.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${t.archGroupBorderColor};
    stroke-width: ${t.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),xR=mR,Aa=l(t=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${t}</g>`,"wrapIcon"),Bn={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Aa('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Aa('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Aa('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Aa('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Aa('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:Rp,blank:{body:Aa("")}}},bR=l(async function(t,e){const r=We("padding"),a=We("iconSize"),i=a/2,s=a/6,n=s/2;await Promise.all(e.edges().map(async o=>{var S,b;const{source:h,sourceDir:u,sourceArrow:d,sourceGroup:f,target:p,targetDir:g,targetArrow:y,targetGroup:m,label:x}=Hx(o);let{x:v,y:T}=o[0].sourceEndpoint();const{x:I,y:B}=o[0].midpoint();let{x:_,y:w}=o[0].targetEndpoint();const D=r+4;if(f&&(mr(u)?v+=u==="L"?-D:D:T+=u==="T"?-D:D+18),m&&(mr(g)?_+=g==="L"?-D:D:w+=g==="T"?-D:D+18),!f&&((S=Jo.getNode(h))==null?void 0:S.type)==="junction"&&(mr(u)?v+=u==="L"?i:-i:T+=u==="T"?i:-i),!m&&((b=Jo.getNode(p))==null?void 0:b.type)==="junction"&&(mr(g)?_+=g==="L"?i:-i:w+=g==="T"?i:-i),o[0]._private.rscratch){const C=t.insert("g");if(C.insert("path").attr("d",`M ${v},${T} L ${I},${B} L${_},${w} `).attr("class","edge"),d){const k=mr(u)?eo[u](v,s):v-n,E=Ui(u)?eo[u](T,s):T-n;C.insert("polygon").attr("points",C1[u](s)).attr("transform",`translate(${k},${E})`).attr("class","arrow")}if(y){const k=mr(g)?eo[g](_,s):_-n,E=Ui(g)?eo[g](w,s):w-n;C.insert("polygon").attr("points",C1[g](s)).attr("transform",`translate(${k},${E})`).attr("class","arrow")}if(x){const k=Yx(u,g)?"XY":mr(u)?"X":"Y";let E=0;k==="X"?E=Math.abs(v-_):k==="Y"?E=Math.abs(T-w)/1.5:E=Math.abs(v-_)/2;const P=C.append("g");if(await Wr(P,x,{useHtmlLabels:!1,width:E,classes:"architecture-service-label"},H()),P.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),k==="X")P.attr("transform","translate("+I+", "+B+")");else if(k==="Y")P.attr("transform","translate("+I+", "+B+") rotate(-90)");else if(k==="XY"){const O=sh(u,g);if(O&&XD(O)){const V=P.node().getBoundingClientRect(),[F,M]=ZD(O);P.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*F*M*45})`);const R=P.node().getBoundingClientRect();P.attr("transform",`
                translate(${I}, ${B-V.height/2})
                translate(${F*R.width/2}, ${M*R.height/2})
                rotate(${-1*F*M*45}, 0, ${V.height/2})
              `)}}}}}))},"drawEdges"),kR=l(async function(t,e){const a=We("padding")*.75,i=We("fontSize"),n=We("iconSize")/2;await Promise.all(e.nodes().map(async o=>{const h=Na(o);if(h.type==="group"){const{h:u,w:d,x1:f,y1:p}=o.boundingBox();t.append("rect").attr("x",f+n).attr("y",p+n).attr("width",d).attr("height",u).attr("class","node-bkg");const g=t.append("g");let y=f,m=p;if(h.icon){const x=g.append("g");x.html(`<g>${await ga(h.icon,{height:a,width:a,fallbackPrefix:Bn.prefix})}</g>`),x.attr("transform","translate("+(y+n+1)+", "+(m+n+1)+")"),y+=a,m+=i/2-1-2}if(h.label){const x=g.append("g");await Wr(x,h.label,{useHtmlLabels:!1,width:d,classes:"architecture-service-label"},H()),x.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),x.attr("transform","translate("+(y+n+4)+", "+(m+n+2)+")")}}}))},"drawGroups"),vR=l(async function(t,e,r){for(const a of r){const i=e.append("g"),s=We("iconSize");if(a.title){const u=i.append("g");await Wr(u,a.title,{useHtmlLabels:!1,width:s*1.5,classes:"architecture-service-label"},H()),u.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),u.attr("transform","translate("+s/2+", "+s+")")}const n=i.append("g");if(a.icon)n.html(`<g>${await ga(a.icon,{height:s,width:s,fallbackPrefix:Bn.prefix})}</g>`);else if(a.iconText){n.html(`<g>${await ga("blank",{height:s,width:s,fallbackPrefix:Bn.prefix})}</g>`);const f=n.append("g").append("foreignObject").attr("width",s).attr("height",s).append("div").attr("class","node-icon-text").attr("style",`height: ${s}px;`).append("div").html(a.iconText),p=parseInt(window.getComputedStyle(f.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;f.attr("style",`-webkit-line-clamp: ${Math.floor((s-2)/p)};`)}else n.append("path").attr("class","node-bkg").attr("id","node-"+a.id).attr("d",`M0 ${s} v${-s} q0,-5 5,-5 h${s} q5,0 5,5 v${s} H0 Z`);i.attr("class","architecture-service");const{width:o,height:h}=i._groups[0][0].getBBox();a.width=o,a.height=h,t.setElementForId(a.id,i)}return 0},"drawServices"),TR=l(function(t,e,r){r.forEach(a=>{const i=e.append("g"),s=We("iconSize");i.append("g").append("rect").attr("id","node-"+a.id).attr("fill-opacity","0").attr("width",s).attr("height",s),i.attr("class","architecture-junction");const{width:o,height:h}=i._groups[0][0].getBBox();i.width=o,i.height=h,t.setElementForId(a.id,i)})},"drawJunctions");Np([{name:Bn.prefix,icons:Bn}]);el.use(r3);function Ux(t,e){t.forEach(r=>{e.add({group:"nodes",data:{type:"service",id:r.id,icon:r.icon,label:r.title,parent:r.in,width:We("iconSize"),height:We("iconSize")},classes:"node-service"})})}l(Ux,"addServices");function jx(t,e){t.forEach(r=>{e.add({group:"nodes",data:{type:"junction",id:r.id,parent:r.in,width:We("iconSize"),height:We("iconSize")},classes:"node-junction"})})}l(jx,"addJunctions");function Xx(t,e){e.nodes().map(r=>{const a=Na(r);if(a.type==="group")return;a.x=r.position().x,a.y=r.position().y,t.getElementById(a.id).attr("transform","translate("+(a.x||0)+","+(a.y||0)+")")})}l(Xx,"positionNodes");function Kx(t,e){t.forEach(r=>{e.add({group:"nodes",data:{type:"group",id:r.id,icon:r.icon,label:r.title,parent:r.in},classes:"node-group"})})}l(Kx,"addGroups");function Qx(t,e){t.forEach(r=>{const{lhsId:a,rhsId:i,lhsInto:s,lhsGroup:n,rhsInto:o,lhsDir:h,rhsDir:u,rhsGroup:d,title:f}=r,p=Yx(r.lhsDir,r.rhsDir)?"segments":"straight",g={id:`${a}-${i}`,label:f,source:a,sourceDir:h,sourceArrow:s,sourceGroup:n,sourceEndpoint:h==="L"?"0 50%":h==="R"?"100% 50%":h==="T"?"50% 0":"50% 100%",target:i,targetDir:u,targetArrow:o,targetGroup:d,targetEndpoint:u==="L"?"0 50%":u==="R"?"100% 50%":u==="T"?"50% 0":"50% 100%"};e.add({group:"edges",data:g,classes:p})})}l(Qx,"addEdges");function Zx(t){const e=t.map(i=>{const s={},n={};return Object.entries(i).forEach(([o,[h,u]])=>{s[u]||(s[u]=[]),n[h]||(n[h]=[]),s[u].push(o),n[h].push(o)}),{horiz:Object.values(s).filter(o=>o.length>1),vert:Object.values(n).filter(o=>o.length>1)}}),[r,a]=e.reduce(([i,s],{horiz:n,vert:o})=>[[...i,...n],[...s,...o]],[[],[]]);return{horizontal:r,vertical:a}}l(Zx,"getAlignments");function Jx(t){const e=[],r=l(i=>`${i[0]},${i[1]}`,"posToStr"),a=l(i=>i.split(",").map(s=>parseInt(s)),"strToPos");return t.forEach(i=>{const s=Object.fromEntries(Object.entries(i).map(([u,d])=>[r(d),u])),n=[r([0,0])],o={},h={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;n.length>0;){const u=n.shift();if(u){o[u]=1;const d=s[u];if(d){const f=a(u);Object.entries(h).forEach(([p,g])=>{const y=r([f[0]+g[0],f[1]+g[1]]),m=s[y];m&&!o[y]&&(n.push(y),e.push({[_1[p]]:m,[_1[jD(p)]]:d,gap:1.5*We("iconSize")}))})}}}}),e}l(Jx,"getRelativeConstraints");function tb(t,e,r,a,{spatialMaps:i}){return new Promise(s=>{const n=yt("body").append("div").attr("id","cy").attr("style","display:none"),o=el({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${We("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${We("padding")}px`}}]});n.remove(),Kx(r,o),Ux(t,o),jx(e,o),Qx(a,o);const h=Zx(i),u=Jx(i),d=o.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(f){const[p,g]=f.connectedNodes(),{parent:y}=Na(p),{parent:m}=Na(g);return y===m?1.5*We("iconSize"):.5*We("iconSize")},edgeElasticity(f){const[p,g]=f.connectedNodes(),{parent:y}=Na(p),{parent:m}=Na(g);return y===m?.45:.001},alignmentConstraint:h,relativePlacementConstraint:u});d.one("layoutstop",()=>{var p;function f(g,y,m,x){let v,T;const{x:I,y:B}=g,{x:_,y:w}=y;T=(x-B+(I-m)*(B-w)/(I-_))/Math.sqrt(1+Math.pow((B-w)/(I-_),2)),v=Math.sqrt(Math.pow(x-B,2)+Math.pow(m-I,2)-Math.pow(T,2));const D=Math.sqrt(Math.pow(_-I,2)+Math.pow(w-B,2));v=v/D;let S=(_-I)*(x-B)-(w-B)*(m-I);switch(!0){case S>=0:S=1;break;case S<0:S=-1;break}let b=(_-I)*(m-I)+(w-B)*(x-B);switch(!0){case b>=0:b=1;break;case b<0:b=-1;break}return T=Math.abs(T)*S,v=v*b,{distances:T,weights:v}}l(f,"getSegmentWeights"),o.startBatch();for(const g of Object.values(o.edges()))if((p=g.data)!=null&&p.call(g)){const{x:y,y:m}=g.source().position(),{x,y:v}=g.target().position();if(y!==x&&m!==v){const T=g.sourceEndpoint(),I=g.targetEndpoint(),{sourceDir:B}=Hx(g),[_,w]=Ui(B)?[T.x,I.y]:[I.x,T.y],{weights:D,distances:S}=f(T,I,_,w);g.style("segment-distances",S),g.style("segment-weights",D)}}o.endBatch(),d.run()}),d.run(),o.ready(f=>{A.info("Ready",f),s(o)})})}l(tb,"layoutArchitecture");var _R=l(async(t,e,r,a)=>{const i=a.db,s=i.getServices(),n=i.getJunctions(),o=i.getGroups(),h=i.getEdges(),u=i.getDataStructures(),d=Ki(e),f=d.append("g");f.attr("class","architecture-edges");const p=d.append("g");p.attr("class","architecture-services");const g=d.append("g");g.attr("class","architecture-groups"),await vR(i,p,s),TR(i,p,n);const y=await tb(s,n,o,h,u);await bR(f,y),await kR(g,y),Xx(i,y),zs(void 0,d,We("padding"),We("useMaxWidth"))},"draw"),CR={draw:_R},SR={parser:yR,db:Jo,renderer:CR,styles:xR};const wR=Object.freeze(Object.defineProperty({__proto__:null,diagram:SR},Symbol.toStringTag,{value:"Module"})),ER=Object.freeze(Object.defineProperty({__proto__:null,InfoModule:X2,createInfoServices:K2},Symbol.toStringTag,{value:"Module"})),AR=Object.freeze(Object.defineProperty({__proto__:null,PacketModule:Q2,createPacketServices:Z2},Symbol.toStringTag,{value:"Module"})),LR=Object.freeze(Object.defineProperty({__proto__:null,PieModule:J2,createPieServices:ty},Symbol.toStringTag,{value:"Module"})),BR=Object.freeze(Object.defineProperty({__proto__:null,ArchitectureModule:ey,createArchitectureServices:ry},Symbol.toStringTag,{value:"Module"})),DR=Object.freeze(Object.defineProperty({__proto__:null,GitGraphModule:U2,createGitGraphServices:j2},Symbol.toStringTag,{value:"Module"}));export{KR as m};
